import{as as ft,w as nt,ar as W,aO as Ze,I as B,y as _t,v as lt,x as D,_ as Gt,Y as tn,K as S,L as w,Q as T,D as at,N as v,B as dt,C as St,H as R,ae as Mt,S as st,a7 as ht,P as U,J as X,b0 as oe,aR as De,aL as Oe,R as j,a4 as vt,z as N,A as bt,V as _e,Z as en,a3 as le,F as Ht,aj as ye,a5 as Re,aa as Jt,ab as E,ad as Fe,G as Zt,M as Ee,m as be,O as te,ak as nn,T as Dt,bb as on,b3 as sn,aT as rn,bc as an,af as ln,ag as dn}from"./Icon-CaBYD5oO.js";import{C as cn}from"./CalloutAugment-DfDZpfuE.js";import{a as un}from"./IconButtonAugment-Rffikxkp.js";import{C as hn,T as pn,b as zt}from"./TextTooltipAugment-B4cqQh4H.js";import{a1 as Yt,a2 as Rt,a3 as Xt,a4 as xt,a5 as mn,a6 as we,a7 as gn,a8 as He,a9 as qe,aa as fn,D as Et,ab as vn,ac as _n,ad as yn,ae as Be,af as Ue,ag as bn,ah as Ot,ai as de,q as xe,aj as wn,ak as Mn,al as En,am as ce,an as ue,ao as he,ap as pe,aq as me,ar as Ie,as as ge,at as fe,au as Te,av as xn,a as In,aw as Tn,ax as Cn,ay as Sn,az as $n,aA as An,v as Pn,b as Ln,aB as Nn,aC as kn}from"./extension-client-context-CwKdOhUw.js";import{s as Dn}from"./index-B4NDmpYR.js";import{P as Qt}from"./message-broker-CliB7GoL.js";import{F as ot}from"./Filespan-CzwbVFJm.js";import{T as On}from"./TextCombo-89YZbRHm.js";try{kt=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Me=new kt.Error().stack)&&(kt._sentryDebugIds=kt._sentryDebugIds||{},kt._sentryDebugIds[Me]="f2f945df-3b69-485e-9889-844f8e953eb1",kt._sentryDebugIdIdentifier="sentry-dbid-f2f945df-3b69-485e-9889-844f8e953eb1")}catch{}var kt,Me;const Rn=Yt.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:i}){return["p",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setParagraph:()=>({commands:i})=>i.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Fn=Yt.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:i}){return["br",Rt(this.options.HTMLAttributes,i)]},renderText:()=>`
`,addCommands(){return{setHardBreak:()=>({commands:i,chain:t,state:e,editor:n})=>i.first([()=>i.exitCode(),()=>i.command(()=>{const{selection:o,storedMarks:r}=e;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=n.extensionManager,d=r||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&s){const c=d.filter(u=>a.includes(u.type.name));h.ensureMarks(c)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Hn=Yt.create({name:"text",group:"inline"}),qn=Yt.create({name:"doc",topNode:!0,content:"block+"});var ee=200,Q=function(){};Q.prototype.append=function(i){return i.length?(i=Q.from(i),!this.length&&i||i.length<ee&&this.leafAppend(i)||this.length<ee&&i.leafPrepend(this)||this.appendInner(i)):this},Q.prototype.prepend=function(i){return i.length?Q.from(i).append(this):this},Q.prototype.appendInner=function(i){return new Bn(this,i)},Q.prototype.slice=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=this.length),i>=t?Q.empty:this.sliceInner(Math.max(0,i),Math.min(this.length,t))},Q.prototype.get=function(i){if(!(i<0||i>=this.length))return this.getInner(i)},Q.prototype.forEach=function(i,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length),t<=e?this.forEachInner(i,t,e,0):this.forEachInvertedInner(i,t,e,0)},Q.prototype.map=function(i,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length);var n=[];return this.forEach(function(o,r){return n.push(i(o,r))},t,e),n},Q.from=function(i){return i instanceof Q?i:i&&i.length?new Ke(i):Q.empty};var Ke=function(i){function t(n){i.call(this),this.values=n}i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(n,o){return n==0&&o==this.length?this:new t(this.values.slice(n,o))},t.prototype.getInner=function(n){return this.values[n]},t.prototype.forEachInner=function(n,o,r,s){for(var a=o;a<r;a++)if(n(this.values[a],s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(n,o,r,s){for(var a=o-1;a>=r;a--)if(n(this.values[a],s+a)===!1)return!1},t.prototype.leafAppend=function(n){if(this.length+n.length<=ee)return new t(this.values.concat(n.flatten()))},t.prototype.leafPrepend=function(n){if(this.length+n.length<=ee)return new t(n.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Q);Q.empty=new Ke([]);var Bn=function(i){function t(e,n){i.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,n,o,r){var s=this.left.length;return!(n<s&&this.left.forEachInner(e,n,Math.min(o,s),r)===!1)&&!(o>s&&this.right.forEachInner(e,Math.max(n-s,0),Math.min(this.length,o)-s,r+s)===!1)&&void 0},t.prototype.forEachInvertedInner=function(e,n,o,r){var s=this.left.length;return!(n>s&&this.right.forEachInvertedInner(e,n-s,Math.max(o,s)-s,r+s)===!1)&&!(o<s&&this.left.forEachInvertedInner(e,Math.min(n,s),o,r)===!1)&&void 0},t.prototype.sliceInner=function(e,n){if(e==0&&n==this.length)return this;var o=this.left.length;return n<=o?this.left.slice(e,n):e>=o?this.right.slice(e-o,n-o):this.left.slice(e,o).append(this.right.slice(0,n-o))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Q);class pt{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let n,o,r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}e&&(n=this.remapping(r,this.items.length),o=n.maps.length);let s,a,d=t.tr,h=[],p=[];return this.items.forEach((c,u)=>{if(!c.step)return n||(n=this.remapping(r,u+1),o=n.maps.length),o--,void p.push(c);if(n){p.push(new gt(c.map));let l,m=c.step.map(n.slice(o));m&&d.maybeStep(m).doc&&(l=d.mapping.maps[d.mapping.maps.length-1],h.push(new gt(l,void 0,void 0,h.length+p.length))),o--,l&&n.appendMap(l,o)}else d.maybeStep(c.step);return c.selection?(s=n?c.selection.map(n.slice(o)):c.selection,a=new pt(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:a,transform:d,selection:s}}addTransform(t,e,n,o){let r=[],s=this.eventCount,a=this.items,d=!o&&a.length?a.get(a.length-1):null;for(let p=0;p<t.steps.length;p++){let c,u=t.steps[p].invert(t.docs[p]),l=new gt(t.mapping.maps[p],u,e);(c=d&&d.merge(l))&&(l=c,p?r.pop():a=a.slice(0,a.length-1)),r.push(l),e&&(s++,e=void 0),o||(d=l)}let h=s-n.depth;return h>Un&&(a=function(p,c){let u;return p.forEach((l,m)=>{if(l.selection&&c--==0)return u=m,!1}),p.slice(u)}(a,h),s-=h),new pt(a.append(r),s)}remapping(t,e){let n=new mn;return this.items.forEach((o,r)=>{let s=o.mirrorOffset!=null&&r-o.mirrorOffset>=t?n.maps.length-o.mirrorOffset:void 0;n.appendMap(o.map,s)},t,e),n}addMaps(t){return this.eventCount==0?this:new pt(this.items.append(t.map(e=>new gt(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-e),r=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(u=>{u.selection&&a--},o);let d=e;this.items.forEach(u=>{let l=r.getMirror(--d);if(l==null)return;s=Math.min(s,l);let m=r.maps[l];if(u.step){let y=t.steps[l].invert(t.docs[l]),f=u.selection&&u.selection.map(r.slice(d+1,l));f&&a++,n.push(new gt(m,y,f))}else n.push(new gt(m))},o);let h=[];for(let u=e;u<s;u++)h.push(new gt(r.maps[u]));let p=this.items.slice(0,o).append(h).append(n),c=new pt(p,a);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,o=[],r=0;return this.items.forEach((s,a)=>{if(a>=t)o.push(s),s.selection&&r++;else if(s.step){let d=s.step.map(e.slice(n)),h=d&&d.getMap();if(n--,h&&e.appendMap(h,n),d){let p=s.selection&&s.selection.map(e.slice(n));p&&r++;let c,u=new gt(h.invert(),d,p),l=o.length-1;(c=o.length&&o[l].merge(u))?o[l]=c:o.push(u)}}else s.map&&n--},this.items.length,0),new pt(Q.from(o.reverse()),r)}}pt.empty=new pt(Q.empty,0);class gt{constructor(t,e,n,o){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new gt(e.getMap().invert(),e,this.selection)}}}class wt{constructor(t,e,n,o,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=o,this.prevComposition=r}}const Un=20;function Ce(i){let t=[];return i.forEach((e,n,o,r)=>t.push(o,r)),t}function se(i,t){if(!i)return null;let e=[];for(let n=0;n<i.length;n+=2){let o=t.map(i[n],1),r=t.map(i[n+1],-1);o<=r&&e.push(o,r)}return e}let re=!1,Se=null;function Vt(i){let t=i.plugins;if(Se!=t){re=!1,Se=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){re=!0;break}}return re}const Ct=new xt("history"),Kn=new xt("closeHistory");function zn(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new Xt({key:Ct,state:{init:()=>new wt(pt.empty,pt.empty,null,0,-1),apply:(t,e,n)=>function(o,r,s,a){let d,h=s.getMeta(Ct);if(h)return h.historyState;s.getMeta(Kn)&&(o=new wt(o.done,o.undone,null,0,-1));let p=s.getMeta("appendedTransaction");if(s.steps.length==0)return o;if(p&&p.getMeta(Ct))return p.getMeta(Ct).redo?new wt(o.done.addTransform(s,void 0,a,Vt(r)),o.undone,Ce(s.mapping.maps[s.steps.length-1]),o.prevTime,o.prevComposition):new wt(o.done,o.undone.addTransform(s,void 0,a,Vt(r)),null,o.prevTime,o.prevComposition);if(s.getMeta("addToHistory")===!1||p&&p.getMeta("addToHistory")===!1)return(d=s.getMeta("rebased"))?new wt(o.done.rebased(s,d),o.undone.rebased(s,d),se(o.prevRanges,s.mapping),o.prevTime,o.prevComposition):new wt(o.done.addMaps(s.mapping.maps),o.undone.addMaps(s.mapping.maps),se(o.prevRanges,s.mapping),o.prevTime,o.prevComposition);{let c=s.getMeta("composition"),u=o.prevTime==0||!p&&o.prevComposition!=c&&(o.prevTime<(s.time||0)-a.newGroupDelay||!function(m,y){if(!y)return!1;if(!m.docChanged)return!0;let f=!1;return m.mapping.maps[0].forEach((g,b)=>{for(let _=0;_<y.length;_+=2)g<=y[_+1]&&b>=y[_]&&(f=!0)}),f}(s,o.prevRanges)),l=p?se(o.prevRanges,s.mapping):Ce(s.mapping.maps[s.steps.length-1]);return new wt(o.done.addTransform(s,u?r.selection.getBookmark():void 0,a,Vt(r)),pt.empty,l,s.time,c??o.prevComposition)}}(e,n,t,i)},config:i,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,o=n=="historyUndo"?Ge:n=="historyRedo"?Ye:null;return!!o&&(e.preventDefault(),o(t.state,t.dispatch))}}}})}function ze(i,t){return(e,n)=>{let o=Ct.getState(e);if(!o||(i?o.undone:o.done).eventCount==0)return!1;if(n){let r=function(s,a,d){let h=Vt(a),p=Ct.get(a).spec.config,c=(d?s.undone:s.done).popEvent(a,h);if(!c)return null;let u=c.selection.resolve(c.transform.doc),l=(d?s.done:s.undone).addTransform(c.transform,a.selection.getBookmark(),p,h),m=new wt(d?l:c.remaining,d?c.remaining:l,null,0,-1);return c.transform.setSelection(u).setMeta(Ct,{redo:d,historyState:m})}(o,e,i);r&&n(t?r.scrollIntoView():r)}return!0}}const Ge=ze(!1,!0),Ye=ze(!0,!0),Gn=we.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:i,dispatch:t})=>Ge(i,t),redo:()=>({state:i,dispatch:t})=>Ye(i,t)}),addProseMirrorPlugins(){return[zn(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}});class Yn{constructor(t){this._opts=t,this._defaultPlugins=ft(this._opts,this._getDefaultPlugins),this._allPlugins=ft([this._defaultPlugins,this._registeredPlugins],([e,n])=>[...e,...n])}_registeredPlugins=nt([]);_defaultPlugins;_allPlugins;_getDefaultPlugins=t=>[qn.extend({addKeyboardShortcuts:()=>({...t.keyboardShortcuts})}),Rn,Hn,Fn,Gn.configure({depth:100})].map(e=>({tipTapExtension:e}));registerPlugin=t=>(this._registeredPlugins.update(e=>[...e,t]),()=>{this._registeredPlugins.update(e=>e.filter(n=>n!==t))});onPluginsChanged=t=>this._allPlugins.subscribe(t);get tipTapExtensions(){return W(this._allPlugins).map(t=>t.tipTapExtension)}}function Wi(i,t,e){let n;return n=i.selection.empty?i.selection.anchor:Math.min(i.selection.anchor,i.selection.head),{prefix:i.doc.textBetween(0,n,t,e),offsetStart:0,offsetEnd:n}}function Qi(i,t,e){let n;return n=i.selection.empty?i.selection.anchor:Math.min(i.selection.anchor,i.selection.head),{suffix:i.doc.textBetween(n,i.doc.nodeSize-2,t,e),offsetStart:n,offsetEnd:i.doc.nodeSize-2}}function $e(i){return i.length===0?[]:[{type:"text",text:i}]}function Ae(i){if(i!==void 0){if(typeof i=="string"){const t=i.split(`
`).map((e,n)=>n===0?$e(e):[{type:"hardBreak"},...$e(e)]).flat();return t.length>0?t:void 0}return Array.isArray(i)?i.length>0?i:void 0:i}}class Xn{constructor(t){this._opts=t}_setupFns=[];_editor;registerEditor=t=>{this._editor=t,this._runSetupFns()};unregisterEditor=()=>{this._editor=void 0};can=()=>this._editor?.can();chain=()=>this._editor?.chain();get commands(){return this._editor?.commands}_queueOrRun=t=>{this._editor?t():this._setupFns.push(t)};_runSetupFns=()=>{this._setupFns.forEach(t=>{t()}),this._setupFns=[]};hide=()=>this._queueOrRun(this._hide);show=()=>this._queueOrRun(this._show);focus=()=>this._queueOrRun(this._focus);requestFocus=()=>this._queueOrRun(this._requestFocus);blur=()=>this._queueOrRun(this._blur);scrollToCursor=()=>this._queueOrRun(this._scrollToCursor);setEditable=t=>this._queueOrRun(()=>this._setEditable(t));clearContent=()=>this._queueOrRun(this._clearContent);setContent=(t,e)=>this._queueOrRun(()=>this._setContent(t,e));insertContent=t=>this._queueOrRun(()=>this._insertContent(t));_hide=()=>{this._editor&&(this._editor.view.dom.style.display="none")};_show=()=>{this._editor&&this._editor.view.dom.style.removeProperty("display")};_focus=()=>this._editor?.commands.focus();_requestFocus=async()=>{await Ze(),this._editor&&this._editor.commands.focus()};_blur=()=>this._editor?.commands.blur();_scrollToCursor=()=>this._editor?.commands.scrollIntoView();_setEditable=t=>{this._editor?.setEditable(t),t&&this._editor?.commands.setTextSelection(this._editor.state.doc.content.size)};_clearContent=()=>{const t=W(this._opts.content);t&&t.rawText!==""&&this._editor?.commands.clearContent(!0)};_setContent=(t,e)=>{const n=W(this._opts.content);t!==n?.rawText&&t!==n?.richTextJsonRepr&&((t=Ae(t??[]))!==void 0?this._editor?.chain().setContent(t,!0,{preserveWhitespace:!0}).setTextSelection(e?.cursorPosition==="start"?0:1e20).run():this._clearContent())};_insertContent=t=>{const e=Ae(t);e!==void 0&&this._editor?.commands.insertContent(e,{parseOptions:{preserveWhitespace:!0}})}}class Wn{_isFocused=nt(!1);_isEditable=nt(!1);_content=nt(void 0);_disposers=[];_isFooterClicked=!1;_footerClickTimeout;_footerAwareFocused=nt(!1);registerEditor=t=>{this._isFocused.set(t.isFocused),this._isEditable.set(t.isEditable),this._content.set({richTextJsonRepr:t.getJSON(),rawText:t.getText()}),this._footerAwareFocused.set(t.isFocused);const e=()=>{this._isFocused.set(!0),this._isFooterClicked||this._footerAwareFocused.set(!0)},n=()=>{B(()=>{this._isFocused.set(!1),this._isFooterClicked||this._footerAwareFocused.set(!1)})},o=()=>this._isEditable.set(t.isEditable),r=()=>{this._content.set({richTextJsonRepr:t.getJSON(),rawText:t.getText()})};t.on("focus",e),t.on("blur",n),t.on("update",o),t.on("update",r),this._disposers.push(()=>t.off("focus",e),()=>t.off("blur",n),()=>t.off("update",o),()=>t.off("update",r))};unregisterEditor=()=>{this._isFocused.set(!1),this._isEditable.set(!1),this._footerAwareFocused.set(!1),this._footerClickTimeout&&(clearTimeout(this._footerClickTimeout),this._footerClickTimeout=void 0),this._disposers.forEach(t=>t()),this._disposers=[]};handleFooterClick=()=>{this._isFooterClicked=!0,this._footerClickTimeout&&clearTimeout(this._footerClickTimeout),this._footerClickTimeout=setTimeout(()=>{this._isFooterClicked=!1,this._footerClickTimeout=void 0},200)};onFocus=t=>this.onFocusChanged(e=>{e&&t()});onBlur=t=>this.onFocusChanged(e=>{e||t()});onFocusChanged=t=>this._isFocused.subscribe(t);onEditableChanged=t=>this._isEditable.subscribe(t);onContentChanged=t=>this._content.subscribe(e=>e&&t(e));get isFocused(){return this._isFocused}get footerAwareFocused(){return this._footerAwareFocused}get isEditable(){return this._isEditable}get content(){return this._content}}class ct{static CONTEXT_KEY="augment-rich-text-editor";static INSTANCE_IDX=0;static _getNextInstanceIdx=()=>ct.INSTANCE_IDX++;_opts=nt({});_editor=void 0;_rootNode=void 0;pluginManager=new Yn(this._opts);eventManager=new Wn;commandManager=new Xn({content:this.eventManager.content});instanceId=`augment-rich-text-editor-${ct._getNextInstanceIdx()}`;constructor(){this.pluginManager.onPluginsChanged(this._reinitializeEditor)}registerRoot=(t,e)=>(this._destroyEditor(),this._rootNode=t,this._opts.set(e),this._initializeEditor(),{update:n=>{this._opts.set(n)},destroy:()=>{this._destroyEditor()}});get rootNode(){return this._editor?.view.dom}get editor(){return this._editor}_registerEditorWithManagers=t=>{this.eventManager.registerEditor(t),this.commandManager.registerEditor(t)};_unregisterEditorFromManagers=()=>{this.commandManager.unregisterEditor(),this.eventManager.unregisterEditor()};_reinitializeEditor=()=>{const t=W(this.eventManager.content);this._destroyEditor(),this._initializeEditor(),t!==void 0&&this.commandManager.setContent(t.richTextJsonRepr)};_initializeEditor=()=>{if(this._rootNode===void 0||this._editor!==void 0)return;const t=W(this._opts),e={element:document.createElement("div"),editable:t.editable??!0,injectCSS:!0,extensions:this.pluginManager.tipTapExtensions,onCreate:({editor:n})=>{this._registerEditorWithManagers(n),W(this._opts).focusOnInit&&this.commandManager.focus();const o=this._attachCopyHandler();n.on("destroy",o);const r=W(this._opts).onFocus;r&&n.on("focus",r);const s=W(this._opts).onBlur;s&&n.on("blur",s)},onDestroy:()=>{this._unregisterEditorFromManagers()},onSelectionUpdate:()=>{(W(this._opts).editable??1)&&this.commandManager.scrollToCursor()},editorProps:{handlePaste:(n,o)=>{if(this._isEventFromRichTextEditor(o))return!1;const r=o.clipboardData?.getData("text/plain");return!!r&&(this.commandManager.insertContent(r),!0)},attributes:{style:"min-height: 100%; outline: none;","data-testid":"design-system-rich-text-editor-tiptap"}}};return this._editor=new gn(e),this._rootNode.appendChild(this._editor.view.dom),this._rootNode.addEventListener("keydown",n=>{n.key==="z"&&n.metaKey===!0&&n.stopPropagation()}),this._editor};_attachCopyHandler=()=>(this._rootNode?.addEventListener("copy",this._copyHandler),this._rootNode?.addEventListener("cut",this._copyHandler),()=>{this._rootNode?.removeEventListener("copy",this._copyHandler),this._rootNode?.removeEventListener("cut",this._copyHandler)});_copyHandler=t=>{t.clipboardData?.setData("application/x-augment/rich-text","true")};_isEventFromRichTextEditor=t=>t.clipboardData?.getData("application/x-augment/rich-text")==="true";_destroyEditor=()=>{this._unregisterEditorFromManagers(),this._editor?.view.dom.remove(),this._editor?.destroy(),this._editor=void 0}}function ji(){const i=_t(ct.CONTEXT_KEY);if(!i)throw new Error(`No editor context '${ct.CONTEXT_KEY}' found.`);return i}var Qn=R('<div class="paste-error-container svelte-1pdsp8g"><!></div>');function Pe(i,t){t.eventManager.handleFooterClick()}var jn=R('<div class="c-rich-text-editor-augment__banner svelte-1pglayp"><!></div>'),Jn=R('<div class="c-rich-text-editor-augment__active-button svelte-1pglayp"><!></div>'),Vn=(i,t,e)=>{t.onclick?.(i),e()},Zn=(i,t)=>{t.ondblclick?.()},ti=R('<div class="c-rich-text-editor-augment__footer-wrapper svelte-1pglayp"><!></div>'),ei=R('<div class="l-rich-text-editor-augment svelte-1pglayp" role="button" tabindex="-1"><!> <div class="c-rich-text-editor-augment__editor svelte-1pglayp"><!></div>  <!></div>'),ni=R("<!> <!> <!>",1),ii=R("<div><!></div>");De(["keydown","click","dblclick","mousedown"]);const Ji={Content:function(i,t){lt(t,!0);const[e,n]=St(),o=D(t,"onContentChanged",3,()=>{}),r=D(t,"content",3,""),s=nt(!1),a=nt(""),d=_t(ct.CONTEXT_KEY);let h;Gt(()=>{d.commandManager.setContent(r())}),Gt(()=>{if(o())return d.eventManager.onContentChanged(o())}),tn(()=>{let l;return h=function(m={}){const y=m.maxPasteSize??1e5,f=m.onExceedsPasteLimit,g=function(b){const _=b.clipboardData||window.clipboardData;if(!_)return;const O=_.getData("text/plain");!O||O.length<=y||(b.preventDefault(),console.warn(`Paste operation blocked: Content exceeds ${y} character limit (${O.length} characters)`),f&&f(O.length,y))};return document.addEventListener("paste",g,!0),()=>{document.removeEventListener("paste",g,!0)}}({onExceedsPasteLimit:(m,y)=>{oe(a,`Cannot paste: Content exceeds ${y.toLocaleString()} character limit (${m.toLocaleString()} characters)`),oe(s,!0),l&&clearTimeout(l),l=window.setTimeout(()=>{oe(s,!1)},3e3)}}),()=>{h?.(),clearTimeout(l)}});var p=S(),c=w(p),u=l=>{var m=Qn(),y=U(m);cn(y,{variant:"soft",color:"error",size:1,icon:g=>{X(g,{name:"circle-alert"})},children:(g,b)=>{var _=Mt();st(()=>ht(_,at(a,"$pasteErrorMessage",e))),v(g,_)},$$slots:{icon:!0,default:!0}}),v(l,m)};T(c,l=>{at(s,"$showPasteError",e)&&l(u)}),v(i,p),dt(),n()},Root:function(i,t){lt(t,!0);const[e,n]=St();let o=D(t,"alwaysShowBorder",3,!1),r=D(t,"size",3,1),s=D(t,"variant",3,"default"),a=D(t,"showActionButton",3,!1);const d=new ct;Oe(ct.CONTEXT_KEY,d),t.focusOnInit&&d.commandManager.requestFocus();const h=()=>d.commandManager.focus(),p=d.eventManager.footerAwareFocused,c=bt(()=>at(p,"$footerAwareFocusedStore",e));var u={requestFocus:()=>d.commandManager.requestFocus(),forceFocus:h,blur:()=>d.commandManager.blur(),clearContent:()=>d.commandManager.clearContent(),isFocused:()=>d.eventManager.footerAwareFocused,getEditor:()=>d.editor},l=ii();let m;var y=U(l);hn(y,{class:"c-rich-text-editor-augment__card",insetContent:!0,variant:"ghost",get size(){return r()},children:(g,b)=>{var _=ni(),O=w(_),k=x=>{var P=S(),q=w(P);vt(q,()=>t.overlay),v(x,P)};T(O,x=>{t.overlay&&x(k)});var C=j(O,2),G=x=>{var P=jn(),q=U(P);vt(q,()=>t.banner),v(x,P)};T(C,x=>{t.banner&&x(G)});var H=j(C,2),M=x=>{var P=S(),q=w(P),F=$=>{var z=Jn(),K=U(z);vt(K,()=>t.activeButton),v($,z)};T(q,$=>{t.activeButton&&$(F)}),v(x,P)},I=x=>{var P=ei();P.__keydown=h,P.__click=[Vn,t,h],P.__dblclick=[Zn,t];var q=U(P),F=A=>{var L=S(),et=w(L);vt(et,()=>t.header),v(A,L)};T(q,A=>{t.header&&A(F)});var $=j(q,2),z=U($),K=A=>{var L=S(),et=w(L);vt(et,()=>t.children),v(A,L)};T(z,A=>{t.children&&A(K)}),un($,(A,L)=>d.registerRoot?.(A,L),()=>({editable:t.editable,focusOnInit:t.focusOnInit,onFocus:t.onFocus,onBlur:t.onBlur}));var tt=j($,2),J=A=>{var L=ti();L.__click=[Pe,d],L.__mousedown=[Pe,d];var et=U(L);vt(et,()=>t.footer),v(A,L)};T(tt,A=>{t.footer&&A(J)}),v(x,P)};T(H,x=>{a()?x(M):x(I,!1)}),v(g,_)},$$slots:{default:!0}}),st(g=>m=_e(l,1,`c-rich-text-editor-augment c-rich-text-editor-augment--${s()}`,"svelte-1pglayp",m,g),[()=>({"c-rich-text-editor-augment--editable":t.editable,"c-rich-text-editor-augment--focused":N(c),"c-rich-text-editor-augment--always-show-border":o()})]),v(i,l);var f=dt(u);return n(),f}};function oi(i){var t;const{char:e,allowSpaces:n,allowedPrefixes:o,startOfLine:r,$position:s}=i,a=fn(e),d=new RegExp(`\\s${a}$`),h=r?"^":"",p=n?new RegExp(`${h}${a}.*?(?=\\s${a}|$)`,"gm"):new RegExp(`${h}(?:^)?${a}[^\\s${a}]*`,"gm"),c=((t=s.nodeBefore)===null||t===void 0?void 0:t.isText)&&s.nodeBefore.text;if(!c)return null;const u=s.pos-c.length,l=Array.from(c.matchAll(p)).pop();if(!l||l.input===void 0||l.index===void 0)return null;const m=l.input.slice(Math.max(0,l.index-1),l.index),y=new RegExp(`^[${o?.join("")}\0]?$`).test(m);if(o!==null&&!y)return null;const f=u+l.index;let g=f+l[0].length;return n&&d.test(c.slice(g-1,g+1))&&(l[0]+=" ",g+=1),f<s.pos&&g>=s.pos?{range:{from:f,to:g},query:l[0].slice(e.length),text:l[0]}:null}const si=new xt("suggestion");function ri({pluginKey:i=si,editor:t,char:e="@",allowSpaces:n=!1,allowedPrefixes:o=[" "],startOfLine:r=!1,decorationTag:s="span",decorationClass:a="suggestion",command:d=()=>null,items:h=()=>[],render:p=()=>({}),allow:c=()=>!0,findSuggestionMatch:u=oi}){let l;const m=p?.(),y=new Xt({key:i,view(){return{update:async(f,g)=>{var b,_,O,k,C,G,H;const M=(b=this.key)===null||b===void 0?void 0:b.getState(g),I=(_=this.key)===null||_===void 0?void 0:_.getState(f.state),x=M.active&&I.active&&M.range.from!==I.range.from,P=!M.active&&I.active,q=M.active&&!I.active,F=P||x,$=!P&&!q&&M.query!==I.query&&!x,z=q||x;if(!F&&!$&&!z)return;const K=z&&!F?M:I,tt=f.dom.querySelector(`[data-decoration-id="${K.decorationId}"]`);l={editor:t,range:K.range,query:K.query,text:K.text,items:[],command:J=>d({editor:t,range:K.range,props:J}),decorationNode:tt,clientRect:tt?()=>{var J;const{decorationId:A}=(J=this.key)===null||J===void 0?void 0:J.getState(t.state),L=f.dom.querySelector(`[data-decoration-id="${A}"]`);return L?.getBoundingClientRect()||null}:null},F&&((O=m?.onBeforeStart)===null||O===void 0||O.call(m,l)),$&&((k=m?.onBeforeUpdate)===null||k===void 0||k.call(m,l)),($||F)&&(l.items=await h({editor:t,query:K.query})),z&&((C=m?.onExit)===null||C===void 0||C.call(m,l)),$&&((G=m?.onUpdate)===null||G===void 0||G.call(m,l)),F&&((H=m?.onStart)===null||H===void 0||H.call(m,l))},destroy:()=>{var f;l&&((f=m?.onExit)===null||f===void 0||f.call(m,l))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(f,g,b,_){const{isEditable:O}=t,{composing:k}=t.view,{selection:C}=f,{empty:G,from:H}=C,M={...g};if(M.composing=k,O&&(G||t.view.composing)){!(H<g.range.from||H>g.range.to)||k||g.composing||(M.active=!1);const I=u({char:e,allowSpaces:n,allowedPrefixes:o,startOfLine:r,$position:C.$from}),x=`id_${Math.floor(4294967295*Math.random())}`;I&&c({editor:t,state:_,range:I.range})?(M.active=!0,M.decorationId=g.decorationId?g.decorationId:x,M.range=I.range,M.query=I.query,M.text=I.text):M.active=!1}else M.active=!1;return M.active||(M.decorationId=null,M.range={from:0,to:0},M.query=null,M.text=null),M}},props:{handleKeyDown(f,g){var b;const{active:_,range:O}=y.getState(f.state);return _&&((b=m?.onKeyDown)===null||b===void 0?void 0:b.call(m,{view:f,event:g,range:O}))||!1},decorations(f){const{active:g,range:b,decorationId:_}=y.getState(f);return g?He.create(f.doc,[qe.inline(b.from,b.to,{nodeName:s,class:a,"data-decoration-id":_})]):null}}});return y}const ai=new xt("mention"),li=Yt.create({name:"mention",addOptions(){return{HTMLAttributes:{},renderText({options:i,node:t}){var e;return`${i.suggestion.char}${(e=t.attrs.label)!==null&&e!==void 0?e:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:i,node:t}){var e;return["span",Rt(this.HTMLAttributes,i.HTMLAttributes),`${i.suggestion.char}${(e=t.attrs.label)!==null&&e!==void 0?e:t.attrs.id}`]},suggestion:{char:"@",pluginKey:ai,command:({editor:i,range:t,props:e})=>{var n,o;const r=i.view.state.selection.$to.nodeAfter;!((n=r?.text)===null||n===void 0)&&n.startsWith(" ")&&(t.to+=1),i.chain().focus().insertContentAt(t,[{type:this.name,attrs:e},{type:"text",text:" "}]).run(),(o=window.getSelection())===null||o===void 0||o.collapseToEnd()},allow:({state:i,range:t})=>{const e=i.doc.resolve(t.from),n=i.schema.nodes[this.name];return!!e.parent.type.contentMatch.matchType(n)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:i=>i.getAttribute("data-id"),renderHTML:i=>i.id?{"data-id":i.id}:{}},label:{default:null,parseHTML:i=>i.getAttribute("data-label"),renderHTML:i=>i.label?{"data-label":i.label}:{}}}),parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:i,HTMLAttributes:t}){if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Rt({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:i})];const e={...this.options};e.HTMLAttributes=Rt({"data-type":this.name},this.options.HTMLAttributes,t);const n=this.options.renderHTML({options:e,node:i});return typeof n=="string"?["span",Rt({"data-type":this.name},this.options.HTMLAttributes,t),n]:n},renderText({node:i}){return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel({options:this.options,node:i})):this.options.renderText({options:this.options,node:i})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:i,state:t})=>{let e=!1;const{selection:n}=t,{empty:o,anchor:r}=n;return!!o&&(t.doc.nodesBetween(r-1,r,(s,a)=>{if(s.type.name===this.name)return e=!0,i.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",a,a+s.nodeSize),!1}),e)})}},addProseMirrorPlugins(){return[ri({editor:this.editor,...this.options.suggestion})]}});function Le(i,t){const e=[];return t.$doc.content.descendants(n=>{n.type.name===i&&e.push(n)}),e}function Ne(i,t,e,n={}){const o=[],r=(s,a)=>{n.onNewMention?.(s,a),o.push(s)};return t.descendants((s,a)=>{if(s.type.name!==i)return;if(e===null)return void r(s,a);const d=Math.abs(t.nodeSize-e.nodeSize),h=e.nodeSize-2,p=d+s.nodeSize+1,c=Math.max(0,a-p),u=Math.min(h,a+p);let l=!1;e.nodesBetween(c,u,m=>{if(m.type.name===i&&m.attrs.id===s.attrs.id)return l=!0,n.onExistingMention?.(m,a),!1}),l||r(s,a)}),o}function Xe(i,t){const e=new MutationObserver(n=>{for(const o of n)if(t.shouldTrigger(o))return t.callback(),void e.disconnect()});return e.observe(i,{childList:!0,subtree:!0,...t.mutationObserverInit}),t.timeout&&setTimeout(()=>e.disconnect(),t.timeout),()=>e.disconnect()}function ke(i,t,e,n){return Xe(i,{shouldTrigger:o=>new Set(o.addedNodes).has(t),callback:e,timeout:n})}class jt{constructor(t){this._mentionPluginId=t}static CHIP_CLASS_NAME="c-mention-chip";static CHIP_DATA_ATTR_KEY="data-augment-mention-chip-tooltip";_disposers=[];_editor;_tooltipData=nt(void 0);get tooltipData(){return this._tooltipData}onCreate=t=>{this._editor=t};onDispose=()=>{this._editor=void 0,this._disposers.forEach(t=>t()),this._disposers=[]};_attachChipEventListeners(t,e){t.addEventListener("mouseenter",e),t.addEventListener("mouseover",e),t.addEventListener("mouseleave",this.hideTooltip)}_detachChipEventListeners(t,e){t.removeEventListener("mouseenter",e),t.removeEventListener("mouseover",e),t.removeEventListener("mouseleave",this.hideTooltip)}_removeFromDisposers(t){t&&(this._disposers=this._disposers.filter(e=>e!==t))}_setupMountUnmountCycle(t,e,n){let o,r;const s=()=>{this._removeFromDisposers(o),this._detachChipEventListeners(e,n),r=ke(t,e,a),this._disposers.push(r)},a=()=>{var d,h;this._removeFromDisposers(r),this._attachChipEventListeners(e,n),d=e,o=Xe(t,{shouldTrigger:p=>new Set(p.removedNodes).has(d),callback:s,timeout:h}),this._disposers.push(o)};ke(t,e,a)}createMentionChip=({options:t,node:e})=>{if(e.type.name!==this._mentionPluginId)throw new Error("Expected a mention node");const n=document.createElement("span");n.innerText=`${t.suggestion?.char??"@"}${e.attrs.label}`;for(const[r,s]of Object.entries(t.HTMLAttributes))typeof s=="string"?n.setAttribute(r,s.toString()):console.warn(`Unexpected HTML attribute value type: [${r}] = ${s}`);const o=this._editor?.view.dom;return o&&this._setupMountUnmountCycle(o,n,()=>{this._tooltipData.set({data:e.attrs.data,anchorElement:n})}),n};hideTooltip=()=>{this._tooltipData.set(void 0)}}class di{constructor(t={}){this._opts=t}_menuData=nt(void 0);_mentionables=nt([]);query=ft(this._menuData,t=>t?.tiptapExtensionProps.query);activeIdx=ft([this._mentionables,this._menuData],ui);activeItem=ft([this._mentionables,this.activeIdx],ci);referenceClientRect=ft(this._menuData,t=>t?.referenceClientRect);tiptapExtensionProps=ft(this._menuData,t=>t?.tiptapExtensionProps);isMenuActive=ft(this._menuData,t=>t!==void 0);mentionables=this._mentionables;updateOptions=t=>{this._opts={...this._opts,...t}};updateMentionables=t=>{this._mentionables.set(t)};replaceQueryWithMentionNode=t=>{const e=W(this.isMenuActive),n=W(this.tiptapExtensionProps)?.command;return!(!e||!n)&&(n(t),!0)};selectItem=t=>!(W(this._mentionables).findIndex(e=>e.id===t.id)===-1||!this._opts.onSelectMentionable)&&(this._opts.onSelectMentionable?.(t),!0);_incrementActiveIdx=()=>{const t=W(this.activeIdx)??0;this._setActiveIdx(t+1)};_decrementActiveIdx=()=>{const t=W(this.activeIdx)??0;this._setActiveIdx(t-1)};_setActiveIdx=t=>{this._menuData.update(e=>e&&{...e,activeIdx:t})};onUpdateSuggestion=t=>{const e=t.clientRect?.();e&&this._menuData.update(n=>({referenceClientRect:e,tiptapExtensionProps:t,activeIdx:n?.activeIdx??0}))};exitMenu=()=>{this._menuData.set(void 0),this._mentionables.set([])};_handleKeyIfActive=t=>()=>!!W(this.isMenuActive)&&(t(),!0);onArrowUp=this._handleKeyIfActive(this._decrementActiveIdx);onArrowDown=this._handleKeyIfActive(this._incrementActiveIdx);selectActiveItem=this._handleKeyIfActive(()=>{const t=W(this.activeItem);return!!t&&this.selectItem(t)})}function ci([i,t]){if(t!==void 0&&i.length!==0)return i[t]}function ui([i,t]){if(!(t?.activeIdx===void 0||i.length===0))return(t.activeIdx%i.length+i.length)%i.length%i.length}class yt{constructor(t){this._options=t;const e=t.triggerCharacter??"@";this._triggerCharacter=e;const n=new xt(this._mentionListenerPluginId),o=new xt(this._mentionPluginId),r=t.allowedPrefixes??[" ","	",`
`],s=t.renderText??(f=>`${e}${f.name??f.id}`);this._chipController=new jt(this._mentionPluginId);const a=this._onCreate.bind(this),d=this._onProseMirrorUpdate.bind(this),h=this._onDestroy.bind(this),p=this._chipController.createMentionChip,c=this._mentionableMenuContext.onUpdateSuggestion,u=this._mentionableMenuContext.exitMenu,l=this._mentionableMenuContext.onArrowUp,m=this._mentionableMenuContext.onArrowDown,y=this._mentionableMenuContext.selectActiveItem;this._mention=li.extend({name:this._mentionPluginId,onCreate(){a(this.editor)},onDestroy(){h()},addKeyboardShortcuts:()=>({ArrowUp:l,ArrowDown:m,Enter:y,Tab:y}),addAttributes(){return{...this.parent?.(),data:{default:null,keepOnSplit:!1,parseHTML:f=>{const g=f.getAttribute(jt.CHIP_DATA_ATTR_KEY);return g?JSON.parse(g):null},renderHTML:f=>f.data?{[jt.CHIP_DATA_ATTR_KEY]:JSON.stringify(f.data)}:{}}}},addProseMirrorPlugins(){return[...this.parent?.()??[],new Xt({key:n,view:()=>({update:(f,g)=>{d(g.doc,f.state.doc)}})})]},addOptions(){const f=this.parent?.();return{...f,HTMLAttributes:{class:jt.CHIP_CLASS_NAME},renderHTML:p,renderText:({node:g})=>{const b=g.attrs.data;if(!b){const _={id:g.attrs.id||"unknown",label:g.attrs.label||"Unknown mention",name:g.attrs.label||g.attrs.id||"unknown"};return console.warn("Mention data missing, using fallback:",_),s(_)}return s(b)},suggestion:{...f?.suggestion,pluginKey:o,char:e,allowedPrefixes:r,command:({editor:g,range:b,props:_})=>{g&&b&&f.suggestion?.command?.({editor:g,range:b,props:{id:_.id,name:_.name??_.id,label:_.label,data:_}})},render:()=>({onStart:c,onUpdate:c,onExit:u})}}}})}static CONTEXT_KEY="augment-svelte-mention-plugin";static MENTION_LISTENER_PLUGIN_ID_BASE="{}-listener";static MENTION_PLUGIN_ID_BASE="augment-prosemirror-mention-{}";static DEFAULT_MENTION_PLUGIN_ID="mention";_triggerCharacter;_editor;_mention;_chipController;_mentionableMenuContext=new di;get chipController(){return this._chipController}get mentionableMenuContext(){return this._mentionableMenuContext}insertMentionNode=t=>!!this._editor&&(this._mentionableMenuContext.replaceQueryWithMentionNode(t.data)||this._editor.commands.insertContent({type:this._mentionPluginId,attrs:t}),!0);get _mentionPluginId(){return this._options.pluginId?this._options.pluginId:this._triggerCharacter==="@"?yt.DEFAULT_MENTION_PLUGIN_ID:yt.MENTION_PLUGIN_ID_BASE.replace("{}",this._triggerCharacter)}get _mentionListenerPluginId(){return yt.MENTION_LISTENER_PLUGIN_ID_BASE.replace("{}",this._mentionPluginId)}_onCreate=t=>{const e=Le(this._mentionPluginId,t).map(n=>n.attrs.data);this._options.onMentionItemsUpdated?.({added:e,removed:[],current:e}),this._editor=t,this._chipController.onCreate(t)};_onDestroy=()=>{if(this._editor){const t=Le(this._mentionPluginId,this._editor).map(e=>e.attrs.data);this._options.onMentionItemsUpdated?.({added:[],removed:t,current:[]}),this._editor=void 0,this._chipController.onDispose()}this._chipController.hideTooltip(),this._mentionableMenuContext.exitMenu()};_onProseMirrorUpdate=(t,e)=>{if(Dn(t,e))return;const n=a=>a.attrs.data,o=[],r=Ne(this._mentionPluginId,t,e).map(n),s=Ne(this._mentionPluginId,e,t,{onNewMention:a=>o.push(n(a)),onExistingMention:a=>o.push(n(a))}).map(n);s.length===0&&r.length===0||this._options.onMentionItemsUpdated?.({added:s,removed:r,current:o})};get tipTapExtension(){return this._mention}}var hi=R("<!> <!>",1);const ae={ChipTooltip:function(i,t){lt(t,!0);const e=()=>at(r,"$chipTooltipData",n),[n,o]=St(),r=_t(yt.CONTEXT_KEY).chipController.tooltipData;let s=en(void 0);Gt(()=>{e()===void 0?N(s)?.requestClose():N(s)?.requestOpen()});{const a=h=>{var p=S(),c=w(p),u=l=>{var m=S(),y=w(m);vt(y,()=>t.children,()=>e().data),v(l,m)};T(c,l=>{e()&&t.children&&l(u)}),v(h,p)};let d=bt(()=>e()?.anchorElement.getBoundingClientRect());le(pn(i,{triggerOn:[],get referenceClientRect(){return N(d)},content:a,$$slots:{content:!0}}),h=>Ht(s,h,!0),()=>N(s))}dt(),o()},Root:function(i,t){lt(t,!0);let e=D(t,"onMentionItemsUpdated",19,()=>{}),n=D(t,"triggerCharacter",19,()=>{}),o=D(t,"allowedPrefixes",19,()=>{}),r=D(t,"pluginId",19,()=>{}),s=D(t,"renderText",19,()=>{});const a=new yt({onMentionItemsUpdated:u=>e()?.(u),triggerCharacter:n(),allowedPrefixes:o(),pluginId:r(),renderText:s()});Oe(yt.CONTEXT_KEY,a);const d=_t(ct.CONTEXT_KEY).pluginManager.registerPlugin(a);ye(d);var h={insertMention:u=>{a.insertMentionNode({id:u.id,label:u.label,data:u})}},p=S(),c=w(p);return vt(c,()=>t.children??Re),v(i,p),dt(h)},Menu:{Root:function(i,t){lt(t,!1);const e=()=>at(f,"$query",n),[n,o]=St();let r=D(t,"mentionables",8),s=D(t,"onQueryUpdate",8),a=D(t,"onSelectMentionable",8,C=>(l.insertMentionNode({...C,data:C}),!0)),d=be();const h=()=>N(d)?.requestOpen(),p=()=>N(d)?.requestClose(),c=C=>N(d)?.focusIdx(C),u=_t(ct.CONTEXT_KEY),l=_t(yt.CONTEXT_KEY),m=l.mentionableMenuContext,{referenceClientRect:y,query:f,activeItem:g,isMenuActive:b,exitMenu:_}=m;Jt(()=>(E(s()),e()),()=>{s()(e())}),Jt(()=>E(a()),()=>{m.updateOptions({onSelectMentionable:a()})}),Jt(()=>E(r()),()=>{m.updateMentionables(r())}),Fe();var O={requestOpen:h,requestClose:p,focusIdx:c};Zt(),le(Et.Root(i,{get open(){return at(b,"$isMenuActive",n)},onOpenChange:async C=>{C||u.commandManager.requestFocus()},nested:!1,children:(C,G)=>{var H=hi(),M=w(H);Et.Trigger(M,{get referenceClientRect(){return at(y,"$referenceClientRect",n)}});var I=j(M,2);Et.Content(I,{side:"top",align:"start",size:1,get onClickOutside(){return _},get onEscapeKeyDown(){return _},children:(x,P)=>{var q=S(),F=w(q);Ee(F,t,"default",{get activeItem(){return at(g,"$activeItem",n)},get query(){return e()}},null),v(x,q)},$$slots:{default:!0}}),v(C,H)},$$slots:{default:!0},$$legacy:!0}),C=>Ht(d,C),()=>N(d)),zt(t,"requestOpen",h),zt(t,"requestClose",p),zt(t,"focusIdx",c);var k=dt(O);return o(),k},Item:function(i,t){lt(t,!1);const[e,n]=St(),o=_t(yt.CONTEXT_KEY),{replaceQueryWithMentionNode:r,activeItem:s}=o.mentionableMenuContext;let a=D(t,"mentionable",8);Zt();{let d=te(()=>at(s,"$activeItem",e)===a());vn(i,{onSelect:()=>r(a()),get highlight(){return N(d)},children:(h,p)=>{var c=S(),u=w(c);Ee(u,t,"default",{},null),v(h,c)},$$slots:{default:!0}})}dt(),n()},Separator:Et.Separator,Label:Et.Label}};class ne{constructor(t,e){this._reduxStore=t,this._insertMentionNode=e;const n=this._reduxStore,o=_n.withStore(n)(this._breadcrumbIds),r=yn.withStore(n)();this._displayItems=ft([this._active,this._breadcrumbIds,this._userQuery,o,r],([s,a,d,h,p])=>{if(!s)return[];if(a.length>0&&h)return[{...h,type:"breadcrumb-back"},...h.group.items.slice(0,ne.SINGLE_GROUP_MAX_ITEMS).map(c=>({...c,type:"item"}))];if(d.length>0){const c=pi(d).map(u=>({...u,type:"item"}));return p.flatMap(u=>[{...u,type:"breadcrumb"},...u.group.items.slice(0,ne.MULTI_GROUP_MAX_ITEMS).map(l=>({...l,type:"item"}))]).concat(c)}return[{...Be,type:"item"},...p.map(c=>({...c,type:"breadcrumb"})),{...Ue,type:"item"}]})}static REFRESH_THROTTLE_MS=600;static SINGLE_GROUP_MAX_ITEMS=12;static MULTI_GROUP_MAX_ITEMS=6;_breadcrumbIds=nt([]);_userQuery=nt("");_active=nt(!1);get breadcrumbIds(){return this._breadcrumbIds}get displayItems(){return this._displayItems}get active(){return this._active}get userQuery(){return this._userQuery}openDropdown=()=>{this._reduxStore.dispatch(bn()),this._active.set(!0)};closeDropdown=()=>{this._active.set(!1),this._resetState()};toggleDropdown=()=>W(this._active)?(this.closeDropdown(),!1):(this.openDropdown(),!0);pushBreadcrumb=t=>{W(this._active)&&this._breadcrumbIds.update(e=>[...e,t.id])};popBreadcrumb=()=>{W(this._active)&&this._breadcrumbIds.update(t=>t.slice(0,-1))};selectMentionable=t=>{if(Ot(t)&&t.type==="breadcrumb")return this.pushBreadcrumb(t),!0;if(t.type==="breadcrumb-back")return this.popBreadcrumb(),!0;if(de(t)){const e=xe.select(this._reduxStore.getState());return e&&this._reduxStore.dispatch(wn(e)),this.closeDropdown(),!0}if(t.clearContext){const e=xe.select(this._reduxStore.getState());return e&&this._reduxStore.dispatch(Mn(e)),this.closeDropdown(),!0}return this._insertMentionNode?.(t),this.closeDropdown(),!0};_displayItems;_resetState(){this._breadcrumbIds.set([]),this._userQuery.set("")}}const pi=i=>En({query:i,mentionables:[Be,Ue],returnAllIfNoResults:!1,threshold:.6});function ve(i){switch(i){case Qt.DEFAULT:return"agent-auggie";case Qt.PROTOTYPER:return"prototyper-auggie";case Qt.BRAINSTORM:return"brainstorm-auggie";case Qt.REVIEWER:return"reviewer-auggie";default:return"agent-auggie"}}var mi=R('<span slot="leftIcon" class="c-context-menu-item__icon svelte-bg3ox5"><!></span>'),gi=R('<span slot="text"> </span>'),fi=R('<span class="c-mentionable-group-label"><span class="c-mentionable-group-label__text right"> </span></span>');function vi(i,t){lt(t,!1);let e=D(t,"item",8),n=D(t,"onSelect",8),o=D(t,"highlight",24,()=>{}),r=be();Jt(()=>(E(e()),Ot),()=>{e().type==="breadcrumb-back"?Ht(r,Et.BreadcrumbBackItem):e().type==="breadcrumb"&&Ot(e())?Ht(r,Et.BreadcrumbItem):e().type!=="item"||Ot(e())||Ht(r,Et.Item)}),Fe(),Zt();var s=S(),a=w(s);nn(a,()=>N(r),(d,h)=>{h(d,{get highlight(){return o()},get onSelect(){return n()},children:(p,c)=>{var u=S(),l=w(u),m=f=>{ot(f,{get filepath(){return E(e()),B(()=>e().file.pathName)},leftIcon:b=>{X(b,{name:"file-text"})},$$slots:{leftIcon:!0}})},y=f=>{var g=S(),b=w(g),_=k=>{ot(k,{get filepath(){return E(e()),B(()=>e().folder.pathName)},leftIcon:G=>{X(G,{name:"folder-open"})},$$slots:{leftIcon:!0}})},O=k=>{var C=S(),G=w(C),H=I=>{ot(I,{get filepath(){return E(e()),B(()=>e().externalSource.name)},leftIcon:P=>{X(P,{name:"book-open"})},$$slots:{leftIcon:!0}})},M=I=>{var x=S(),P=w(x),q=$=>{ot($,{get filepath(){return E(e()),B(()=>e().sourceFolder.folderRoot)},leftIcon:K=>{X(K,{name:"folder-root"})},$$slots:{leftIcon:!0}})},F=$=>{var z=S(),K=w(z),tt=A=>{ot(A,{get filepath(){return E(e()),B(()=>e().selection.pathName)},leftIcon:et=>{X(et,{name:"text-cursor"})},$$slots:{leftIcon:!0}})},J=A=>{var L=S(),et=w(L),qt=V=>{ot(V,{get filepath(){return E(e()),B(()=>e().recentFile.pathName)},leftIcon:ut=>{X(ut,{name:"file-text"})},$$slots:{leftIcon:!0}})},$t=V=>{var Z=S(),ut=w(Z),it=Y=>{ot(Y,{get filepath(){return E(e()),B(()=>e().rule.path)},leftIcon:mt=>{X(mt,{name:"list-todo"})},$$slots:{leftIcon:!0}})},Bt=Y=>{var rt=S(),mt=w(rt),At=Pt=>{var Kt=Mt();st(()=>ht(Kt,(E(e()),B(()=>e().label)))),v(Pt,Kt)},Ut=Pt=>{var Kt=S(),We=w(Kt),Qe=Lt=>{On(Lt,{$$slots:{leftIcon:(Nt,ie)=>{var It=mi(),Tt=U(It);{let Wt=te(()=>(E(ve),E(e()),B(()=>ve(e().personality.type))));X(Tt,{get name(){return N(Wt)},size:1})}v(Nt,It)},text:(Nt,ie)=>{var It=gi(),Tt=U(It);st(()=>ht(Tt,(E(e()),B(()=>e().label)))),v(Nt,It)}}})},je=Lt=>{var Nt=S(),ie=w(Nt),It=Tt=>{var Wt=fi(),Je=U(Wt),Ve=U(Je);st(()=>ht(Ve,(E(e()),B(()=>e().label)))),v(Tt,Wt)};T(ie,Tt=>{E(de),E(e()),E(Te),B(()=>de(e())||Te(e()))&&Tt(It)},!0),v(Lt,Nt)};T(We,Lt=>{E(fe),E(e()),B(()=>fe(e()))?Lt(Qe):Lt(je,!1)},!0),v(Pt,Kt)};T(mt,Pt=>{E(Ot),E(e()),B(()=>Ot(e()))?Pt(At):Pt(Ut,!1)},!0),v(Y,rt)};T(ut,Y=>{E(ge),E(e()),B(()=>ge(e()))?Y(it):Y(Bt,!1)},!0),v(V,Z)};T(et,V=>{E(Ie),E(e()),B(()=>Ie(e()))?V(qt):V($t,!1)},!0),v(A,L)};T(K,A=>{E(me),E(e()),B(()=>me(e()))?A(tt):A(J,!1)},!0),v($,z)};T(P,$=>{E(pe),E(e()),B(()=>pe(e()))?$(q):$(F,!1)},!0),v(I,x)};T(G,I=>{E(he),E(e()),B(()=>he(e()))?I(H):I(M,!1)},!0),v(k,C)};T(b,k=>{E(ue),E(e()),B(()=>ue(e()))?k(_):k(O,!1)},!0),v(f,g)};T(l,f=>{E(ce),E(e()),B(()=>ce(e()))?f(m):f(y,!1)}),v(p,u)},$$slots:{default:!0}})}),v(i,s),dt()}const _i=(i,t)=>{In().openGuidelines(t.sourceFolder.folderRoot)};var yi=()=>{},bi=R('<div><!> <span class="c-guidelines-filespan__text svelte-gu2i0f" role="button" tabindex="0"> </span></div>');function wi(i,t){lt(t,!0);const[e,n]=St(),o=bt(()=>xn(t.sourceFolder.folderRoot)),r=bt(()=>Tn(t.sourceFolder.folderRoot));let s=bt(()=>at(N(o),"$isSourceFolderOverLimit",e)?`Workspace guidelines exceeded ${at(N(r),"$sourceFolderLimit",e)} character limit`:"Edit workspace guidelines");Dt(i,{size:1,children:(a,d)=>{var h=bi(),p=U(h),c=y=>{X(y,{name:"square-pen"})},u=y=>{X(y,{name:"circle-alert"})};T(p,y=>{N(o)?y(u,!1):y(c)});var l=j(p,2);l.__click=[_i,t],l.__keydown=[yi];var m=U(l);st(()=>{_e(h,1,on(["c-guidelines-filespan",t.class]),"svelte-gu2i0f"),ht(m,N(s))}),v(a,h)},$$slots:{default:!0}}),dt(),n()}De(["click","keydown"]);var Mi=sn('<svg width="102" height="9" viewBox="0 0 102 9" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="51" cy="4.5" rx="51" ry="4.5" fill="currentColor"></ellipse></svg>'),Ei=R('<div class="c-augment-logo-animated__shadow svelte-ft7f11"><!></div>'),xi=R('<div><div class="c-augment-logo-animated__icon svelte-ft7f11"><!></div> <!></div>');function Ii(i,t){let e=D(t,"sizePx",3,160),n=D(t,"floatHeight",3,20),o=D(t,"animationDuration",3,3),r=D(t,"showShadow",3,!0),s=D(t,"animated",3,!0),a=bt(()=>Math.round(.875*e()));var d=xi();let h,p;var c=U(d),u=U(c),l=g=>{var b=S(),_=w(b);vt(_,()=>t.children),v(g,b)},m=g=>{X(g,{name:"augment-logo"})};T(u,g=>{t.children?g(l):g(m,!1)});var y=j(c,2),f=g=>{var b=Ei();(function(_){var O=Mi();v(_,O)})(U(b)),v(g,b)};T(y,g=>{r()&&g(f)}),st((g,b)=>{h=_e(d,1,"c-augment-logo-animated svelte-ft7f11",null,h,g),p=rn(d,"",p,b)},[()=>({"c-augment-logo-animated--animated":s()}),()=>({"--augment-logo-size":`${e()??""}px`,"--augment-logo-icon-size":`${N(a)??""}px`,"--augment-logo-float-height":`${n()??""}px`,"--animation-duration":`${o()??""}s`})]),v(i,d)}var Ti=R("<!> <!>",1),Ci=R("<!> <!>",1),Si=R("<!> <!>",1),$i=R('<div class="l-mention-hover-contents__source-folder svelte-1x76h3w"><div class="l-source-folder-name svelte-1x76h3w"><!> <!></div> <!></div>'),Ai=R("<!> <!>",1),Pi=R('<div class="c-mention-hover-contents__personality-icon svelte-1x76h3w"><!></div> <div class="c-mention-hover-contents__personality svelte-1x76h3w"><!> <!></div>',1),Li=R('<div class="c-mention-hover-contents__task svelte-1x76h3w"><!> <!></div>'),Ni=R("<!> <!>",1),ki=R('<div class="c-mention-hover-contents svelte-1x76h3w"><!></div>');function Di(i,t){lt(t,!0);var e=ki(),n=U(e),o=s=>{var a=Ti(),d=w(a);X(d,{name:"file"});var h=j(d,2);ot(h,{get filepath(){return t.option.file.pathName}}),v(s,a)},r=s=>{var a=S(),d=w(a),h=c=>{var u=Ci(),l=w(u);X(l,{name:"folder-open"});var m=j(l,2);ot(m,{get filepath(){return t.option.folder.pathName}}),v(c,u)},p=c=>{var u=S(),l=w(u),m=f=>{var g=Si(),b=w(g);X(b,{name:"book"});var _=j(b,2);ot(_,{get filepath(){return t.option.externalSource.name}}),v(f,g)},y=f=>{var g=S(),b=w(g),_=k=>{var C=$i(),G=U(C),H=U(G);X(H,{name:"folder-tree"});var M=j(H,2);ot(M,{class:"c-source-folder-item",get filepath(){return t.option.sourceFolder.folderRoot}}),wi(j(G,2),{class:"guidelines-filespan",get sourceFolder(){return t.option.sourceFolder}}),v(k,C)},O=k=>{var C=S(),G=w(C),H=I=>{var x=S(),P=w(x),q=F=>{var $=S(),z=w($),K=tt=>{Dt(tt,{size:1,children:(J,A)=>{var L=Mt();st(()=>ht(L,`Guidelines exceeded length limit of ${t.option.userGuidelines.lengthLimit} characters`)),v(J,L)},$$slots:{default:!0}})};T(z,tt=>{t.option.userGuidelines.overLimit&&tt(K)}),v(F,$)};T(P,F=>{t.option.userGuidelines.overLimit&&F(q)}),v(I,x)},M=I=>{var x=S(),P=w(x),q=$=>{var z=Ai(),K=w(z);X(K,{name:"text-cursor"});var tt=j(K,2);{let J=bt(()=>`${t.option.selection.pathName}:L${t.option.selection.fullRange?.startLineNumber}-${t.option.selection.fullRange?.endLineNumber}`);ot(tt,{get filepath(){return N(J)}})}v($,z)},F=$=>{var z=S(),K=w(z),tt=A=>{var L=Pi(),et=w(L);Ii(U(et),{sizePx:32,floatHeight:4,animationDuration:2.25,children:(Z,ut)=>{{let it=bt(()=>ve(t.option.personality.type));X(Z,{get name(){return N(it)}})}},$$slots:{default:!0}});var qt=j(et,2),$t=U(qt);Dt($t,{size:2,weight:"medium",children:(Z,ut)=>{var it=Mt();st(()=>ht(it,t.option.label)),v(Z,it)},$$slots:{default:!0}});var V=j($t,2);Dt(V,{size:1,children:(Z,ut)=>{var it=Mt();st(()=>ht(it,t.option.personality.description)),v(Z,it)},$$slots:{default:!0}}),v(A,L)},J=A=>{var L=S(),et=w(L),qt=V=>{var Z=Li(),ut=U(Z);Dt(ut,{size:2,weight:"bold",children:(Y,rt)=>{var mt=Mt();st(()=>ht(mt,t.option.task.taskTree.name)),v(Y,mt)},$$slots:{default:!0}});var it=j(ut,2),Bt=Y=>{Dt(Y,{size:1,children:(rt,mt)=>{var At=Mt();st(Ut=>ht(At,Ut),[()=>t.option.task.taskTree.description.trim().replace(/\s+/g," ")]),v(rt,At)},$$slots:{default:!0}})};T(it,Y=>{t.option.task.taskTree.description&&t.option.task.taskTree.description.trim()&&Y(Bt)}),v(V,Z)},$t=V=>{var Z=S(),ut=w(Z),it=Y=>{var rt=Ni(),mt=w(rt);X(mt,{name:"ruler"});var At=j(mt,2);{let Ut=bt(()=>`${$n}/${An}/${t.option.rule.path}`);ot(At,{get filepath(){return N(Ut)}})}v(Y,rt)},Bt=Y=>{var rt=Mt();st(()=>ht(rt,t.option.label)),v(Y,rt)};T(ut,Y=>{t.option&&ge(t.option)?Y(it):Y(Bt,!1)},!0),v(V,Z)};T(et,V=>{t.option&&Sn(t.option)?V(qt):V($t,!1)},!0),v(A,L)};T(K,A=>{t.option&&fe(t.option)?A(tt):A(J,!1)},!0),v($,z)};T(P,$=>{t.option&&me(t.option)?$(q):$(F,!1)},!0),v(I,x)};T(G,I=>{t.option&&Cn(t.option)?I(H):I(M,!1)},!0),v(k,C)};T(b,k=>{t.option&&pe(t.option)?k(_):k(O,!1)},!0),v(f,g)};T(l,f=>{t.option&&he(t.option)?f(m):f(y,!1)},!0),v(c,u)};T(d,c=>{t.option&&ue(t.option)?c(h):c(p,!1)},!0),v(s,a)};T(n,s=>{t.option&&ce(t.option)?s(o):s(r,!1)}),v(i,e),dt()}var Oi=R("<!> <!>",1);function Vi(i,t){lt(t,!1);const e=()=>at(p,"$displayItems",n),[n,o]=St();let r=D(t,"requestEditorFocus",8),s=D(t,"onMentionItemsUpdated",24,()=>{});const a=_=>l(_),{store:d}=Pn(),h=new ne(d,l),p=h.displayItems,c=()=>e();let u=be();function l(_){return!!N(u)&&(N(u).insertMention(_),h.closeDropdown(),!0)}const m=Ln();function y(_){_===void 0?h.closeDropdown():(h.openDropdown(),h.userQuery.set(_),m(Nn(_)))}function f(_){const O=h.selectMentionable(_);return r()(),O}var g={insertMentionNode:a,getDisplayItems:c};Zt(),le(ae.Root(i,{triggerCharacter:"@",get onMentionItemsUpdated(){return s()},children:(_,O)=>{var k=Oi(),C=w(k);ae.Menu.Root(C,{get mentionables(){return e()},onQueryUpdate:y,onSelectMentionable:f,children:an,$$slots:{default:(H,M)=>{const I=te(()=>M.activeItem);var x=S(),P=w(x);ln(P,1,e,dn,(q,F)=>{{let $=te(()=>N(F)===N(I));vi(q,{get item(){return N(F)},get highlight(){return N($)},onSelect:()=>f(N(F))})}}),v(H,x)}}});var G=j(C,2);{const H=(M,I=Re)=>{Di(M,{get option(){return I()}})};ae.ChipTooltip(G,{children:H,$$slots:{default:!0}})}v(_,k)},$$slots:{default:!0},$$legacy:!0}),_=>Ht(u,_),()=>N(u)),zt(t,"insertMentionNode",a),zt(t,"getDisplayItems",c);var b=dt(g);return o(),b}const Ri=we.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new Xt({key:new xt("placeholder"),props:{decorations:({doc:i,selection:t})=>{var e;const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=t,r=[];if(!n)return null;const{firstChild:s}=i.content,a=s&&s.type.isLeaf,d=s&&s.isAtom,h=!!this.options.considerAnyAsEmpty||s&&s.type.name===((e=i.type.contentMatch.defaultType)===null||e===void 0?void 0:e.name),p=i.content.childCount<=1&&s&&h&&s.nodeSize<=2&&(!a||!d);return i.descendants((c,u)=>{const l=o>=u&&o<=u+c.nodeSize,m=!c.isLeaf&&!c.childCount;if((l||!this.options.showOnlyCurrent)&&m){const y=[this.options.emptyNodeClass];p&&y.push(this.options.emptyEditorClass);const f=qe.node(u,u+c.nodeSize,{class:y.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:u,hasAnchor:l}):this.options.placeholder});r.push(f)}return this.options.includeChildren}),He.create(i,r)}}})]}});class Fi{_placeholderExtension;_editor;constructor(t){const e=this._onUpdate.bind(this),n=this._onDestroy.bind(this);this._placeholderExtension=Ri.extend({placeholder:t,onUpdate(){this.parent?.(),e(this.editor)},onDestroy(){this.parent?.(),n()}})}setPlaceholder=t=>{this._placeholderExtension.options.placeholder=t,this._editor?.view.updateState(this._editor.view.state)};_onUpdate=t=>{this._editor=t};_onDestroy=()=>{this._editor=void 0};get tipTapExtension(){return this._placeholderExtension}}function Zi(i,t){lt(t,!0);let e=D(t,"placeholder",3,"Type something...");const n=new Fi(e()),o=_t(ct.CONTEXT_KEY);ye(o.pluginManager.registerPlugin(n)),Gt(()=>{n.setPlaceholder(e())}),dt()}class Ft{constructor(t){this._options=t,this.updateOptions(this._options);const e=this._handleKeyDown,n=Ft._getNextPluginId(),o=new xt(n);this._tipTapExtension=we.create({name:n,addProseMirrorPlugins:()=>[new Xt({key:o,props:{handleKeyDown:e}})]})}static _sequenceId=0;static KEYBINDINGS_PLUGIN_KEY_BASE="augment-keybindings-plugin-{}";static _getSequenceId=()=>Ft._sequenceId++;static _getNextPluginId=()=>{const t=Ft._getSequenceId().toString();return Ft.KEYBINDINGS_PLUGIN_KEY_BASE.replace("{}",t)};_tipTapExtension;_keydownHandler=()=>!1;updateOptions=t=>{this._options={...this._options,...t},this._keydownHandler=kn(this._options.shortcuts)};get tipTapExtension(){return this._tipTapExtension}_handleKeyDown=(t,e)=>this._keydownHandler(t,e)}function to(i,t){lt(t,!0);let e=D(t,"shortcuts",19,()=>({}));const n=_t(ct.CONTEXT_KEY),o=new Ft({shortcuts:e()}),r=n.pluginManager.registerPlugin(o);ye(r),Gt(()=>{o.updateOptions({shortcuts:e()})}),dt()}export{Vi as A,Di as C,to as K,Zi as P,Ji as R,Qi as a,ne as b,vi as c,ji as d,ct as e,Ii as f,Wi as g,Ae as n};
//# sourceMappingURL=Keybindings-4dJzjBQT.js.map
