import{v as Y,aK as me,H as g,F as N,Z as he,z as e,A as d,P as a,N as r,B as Z,L as $e,J as be,R as f,T as k,ae as C,Q as ee,at as A,W as G,Y as ye,G as we,X as Fe,aG as Se,C as Te,w as xe,D as Ie,aH as ze}from"./Icon-CaBYD5oO.js";import"./design-system-init-DCR3FqZN.js";import{B as De}from"./ButtonAugment-DECgcPdk.js";import{M as Ee}from"./MonacoMarkdownEditor-BBd4goIb.js";import{b as Re,R as z,s as _e,o as Le,T as Me,S as Ne,F as ke}from"./extension-client-context-CwKdOhUw.js";import{T as Ce}from"./TextTooltipAugment-B4cqQh4H.js";import{R as Ae,M as Ge}from"./message-broker-CliB7GoL.js";import{O as Be}from"./OpenFileButton-BnBhQVIy.js";import{R as Oe}from"./RulesModeSelector-X8JADsuG.js";import"./IconButtonAugment-Rffikxkp.js";import"./index-DF_yYUtg.js";import"./index-B4NDmpYR.js";import"./marked.esm-CBEAPn3z.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./types-CaiUesx9.js";import"./await-bImbqfxU.js";import"./BaseTextInput-CPpF4fmq.js";import"./Chevron-Ct6H6suA.js";import"./index-nbgGMYE9.js";import"./remote-agents-client-DV0OXQaI.js";import"./SuccessfulButton-Df7hGnns.js";try{c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(X=new c.Error().stack)&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[X]="f021b09c-47c1-4c70-b0b7-3e0fa5c74e24",c._sentryDebugIdIdentifier="sentry-dbid-f021b09c-47c1-4c70-b0b7-3e0fa5c74e24")}catch{}var c,X,Pe=g('<div class="c-rule-config svelte-w4thrv"><div class="c-rule-field c-rule-field-full-width svelte-w4thrv"><!> <!></div></div>'),Qe=g('<div class="l-file-controls svelte-w4thrv"><div class="l-file-controls-left svelte-w4thrv"><div class="c-trigger-section svelte-w4thrv"><!> <!> <!></div></div> <!></div> <!>',1),je=g('<div class="l-rules-editor svelte-w4thrv"><div class="c-rules-editor__content svelte-w4thrv"><!></div></div>'),He=g("<div>Loading...</div>"),Ke=g('<div class="c-rules-container svelte-1qamlzv"><!></div>');ze(function(B,te){Y(te,!1);const O=()=>Ie(Q,"$rule",se),[se,ae]=Te(),P=new Ge(A),Q=xe(null),re={handleMessageFromExtension(v){const i=v.data;if(i&&i.type===G.loadFile&&i){const m=i.data.content;if(m!==void 0){const h=m.replace(/^\n+/,""),$=z.getDescriptionFrontmatterKey(h),D=z.getRuleTypeFromContent(h),E=z.extractContent(h);Q.set({path:i.data.pathName,content:E,type:D,description:$})}}return!0}};ye(()=>{P.registerConsumer(re),A.postMessage({type:G.rulesLoaded})}),we(),Fe("message",Se,function(...v){P.onMessageFromExtension?.apply(this,v)}),Ne(B,{children:(v,i)=>{ke(v,{fetch:!0,children:(m,h)=>{var $=Ke(),D=a($),E=l=>{(function(R,o){Y(o,!0);let b=d(()=>o.rule.path),y=d(()=>o.rule.type),j=d(()=>o.rule.content),u=d(()=>o.rule.description),H=d(()=>z.extractContent(e(j))),w=he(void 0),ne=d(()=>({path:e(b),type:e(y),content:e(j),description:e(u),settingsStored:o.rule.settingsStored}));const K=Re(),U=async(F,t)=>{if(!e(w))return;const S=e(w).getValue(),T=F??e(y),x=t??e(u),_={type:T,path:e(b),content:S,description:x,settingsStored:o.rule.settingsStored};K(_e(_))},W=(F,t)=>U(F,t),ie=me(W,500),le=()=>{A.postMessage({type:G.openSettingsPage,data:"guidelines"})};var q=je(),ce=a(q),de=a(ce);Ee(de,{saveFunction:U,get value(){return e(H)},set value(t){N(H,t)},get editorInstance(){return e(w)},set editorInstance(t){N(w,t,!0)},header:t=>{var S=Qe(),T=$e(S),x=a(T),_=a(x),J=a(_);Ce(J,{content:"Navigate back to all Rules & Guidelines",children:(s,p)=>{De(s,{size:1,variant:"ghost-block",color:"neutral",class:"c-back-button",$$events:{click:le},$$slots:{iconLeft:(n,I)=>{be(n,{slot:"iconLeft",name:"chevron-left"})}}})},$$slots:{default:!0}});var V=f(J,2);k(V,{size:1,class:"c-field-label",children:(s,p)=>{var n=C("Trigger:");r(s,n)},$$slots:{default:!0}});var ve=f(V,2);Oe(ve,{onSave:W,get rule(){return e(ne)}});var ue=f(x,2);Be(ue,{size:1,get path(){return e(b)},onOpenLocalFile:async()=>(K(Le({repoRoot:"",pathName:e(b)})),"success"),$$slots:{text:(s,p)=>{k(s,{slot:"text",size:1,children:(n,I)=>{var L=C("Open file");r(n,L)},$$slots:{default:!0}})}}});var pe=f(T,2),fe=s=>{var p=Pe(),n=a(p),I=a(n);k(I,{size:1,class:"c-field-label",children:(M,Ue)=>{var ge=C("Description");r(M,ge)},$$slots:{default:!0}});var L=f(I,2);Me(L,{placeholder:"When should this rules file be fetched by the Agent?",size:1,get value(){return e(u)},set value(M){N(u,M)},$$events:{input:()=>ie(e(y),e(u))}}),r(s,p)};ee(pe,s=>{e(y)===Ae.AGENT_REQUESTED&&s(fe)}),r(t,S)},$$slots:{header:!0}}),r(R,q),Z()})(l,{get rule(){return O()}})},oe=l=>{var R=He();r(l,R)};ee(D,l=>{O()!==null?l(E):l(oe,!1)}),r(m,$)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(),ae()},{target:document.getElementById("app")});
//# sourceMappingURL=rules-CEmQfFb4.js.map
