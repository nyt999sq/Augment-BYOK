import{aA as To,I as Re,v as ie,_ as Me,aK as Lr,B as ce,x as F,H as S,R as O,P as b,af as Oe,K as H,L as D,Q as L,z as e,N as s,S as J,a7 as Q,ag as Ye,A as d,aL as Vt,y as it,w as Rt,aZ as er,as as eo,ae as X,J as de,Z as ue,ai as Qe,C as Ce,ak as et,F as P,D as ge,am as ut,a0 as Nr,a3 as Mt,V as at,aO as Io,aR as Rs,a6 as Nt,X as $t,a4 as Ge,aj as as,a5 as vt,b1 as Vs,ar as Rr,bs as Fa,$ as qa,a1 as Wa,a2 as ja,G as Zt,M as Gt,m as ye,bt as os,aa as Pe,ab as Te,ad as co,O as Qt,T as ae,bu as Xs,b0 as uo,be as Fo,Y as Hs,aJ as qo,E as Ba,aI as Ss,aT as Ks,at as qs,W as Ws,bn as Mr,bv as Ga,bf as tr}from"./Icon-CaBYD5oO.js";import{t as ps,b as Va,s as xo,f as Wo,a as Dr}from"./index-Ct3ef_qL.js";import{I as je,a as Dt,b as Qs}from"./IconButtonAugment-Rffikxkp.js";import{c as Uo,d as Ha,C as vo,b as Or,M as Co,e as Ka,g as Ja,a as Ya}from"./Markdown-oTNiBtsM.js";import{B as zt}from"./ButtonAugment-DECgcPdk.js";import{T as He,a as is,o as Pr,H as Fr,b as Xa,C as Xt,c as Qa}from"./TextTooltipAugment-B4cqQh4H.js";import{n as ys}from"./noop-CVINQ7cR.js";import{F as vs}from"./Filespan-CzwbVFJm.js";import{C as ls,i as qr,E as rs,b as Os,c as Za,d as en}from"./message-broker-CliB7GoL.js";import{c1 as tn,c2 as sn,z as Bt,n as on,c3 as rn,c4 as Cs,c5 as an,c6 as nn,c as ln,c7 as Tt,c8 as ht,q as It,b as gt,D as Xe,c9 as Ps,ca as jo,cb as po,cc as cn,cd as dn,ce as ws,cf as un,cg as sr,ch as Wr,T as vn,ci as pn,cj as gn,ck as hn,cl as mn,o as Ns,cm as fn,cn as $n,a as Lt,i as Ot,co as jr,v as go,cp as Br,a0 as _n,cq as kn,cr as yn,bh as bn,U as Wt,V as jt,cs as Gr,ct as rt,cu as wn,cv as Sn,cw as or,cx as Tn,e as pe,cy as rr,cz as In,az as ar,aA as nr,R as xn,cA as Un,cB as Cn,cC as to,cD as An,cE as Ao,cF as En,cG as $o,cH as zn,cI as Ln,aD as st,cJ as Vr,cK as Nn,h as Rn,cL as Hr,cM as Kr,cN as Jr,cO as Yr,cP as Xr,cQ as Qr,cR as Mn,cS as Dn,x as On,cT as Pn,cU as Zr,cV as Fn,cW as qn,y as Wn,cX as jn}from"./extension-client-context-CwKdOhUw.js";import{t as lr,S as Bo,g as Bn,M as Gn}from"./index-DF_yYUtg.js";import{bx as Vn,aH as Hn}from"./mermaid-Bezvo2Lx.js";import{O as ho,D as _o,R as fs}from"./OpenFileButton-BnBhQVIy.js";import{n as Kn,g as Jn}from"./marked.esm-CBEAPn3z.js";import{C as ms}from"./CopyButton-BCoIBrt5.js";import{S as Go}from"./SuccessfulButton-Df7hGnns.js";import{C as Yn}from"./Chevron-Ct6H6suA.js";import{L as Vo}from"./LanguageIcon-Du_otND8.js";import{o as St}from"./keypress-fD7XHdyk.js";import{a as ea}from"./await-bImbqfxU.js";import{T as Fs}from"./TextAreaAugment-BzfuWeQA.js";import{c as ta,a as ks,i as Xn,S as Ct,R as ds,g as Qn,h as Zn,e as el,O as tl}from"./index-BBZh5tbU.js";import{s as sl,d as ol}from"./index-B4NDmpYR.js";import{d as sa}from"./utils-DpHtg3Qz.js";import{e as Ds,U as ir}from"./toggleHighContrast-iCsKcMx3.js";import{b as so,B as oo}from"./types-CaiUesx9.js";import{F as rl}from"./index-nbgGMYE9.js";import{C as al}from"./CalloutAugment-DfDZpfuE.js";import{k as nl}from"./key-CsCKik6T.js";try{Us=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Zo=new Us.Error().stack)&&(Us._sentryDebugIds=Us._sentryDebugIds||{},Us._sentryDebugIds[Zo]="e1969384-c5e4-4634-933a-d2e473d5351a",Us._sentryDebugIdIdentifier="sentry-dbid-e1969384-c5e4-4634-933a-d2e473d5351a")}catch{}var Us,Zo;class Ho{#e=new WeakMap;#t;#s;static entries=new WeakMap;constructor(t){this.#s=t}observe(t,o){var n=this.#e.get(t)||new Set;return n.add(o),this.#e.set(t,n),this.#o().observe(t,this.#s),()=>{var m=this.#e.get(t);m.delete(o),m.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#o(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var o of t)for(var n of(Ho.entries.set(o.target,o),this.#e.get(o.target)||[]))n(o)}))}}var ll=new Ho({box:"border-box"});function cr(r,t,o){var n=ll.observe(r,()=>o(r[t]));To(()=>(Re(()=>o(r[t])),n))}function il(r){return r.type===ls.AGENT_MEMORY||r.type===ls.TOOL_USE&&r.tool_use?.tool_name==="remember"}function cl(r){return r.type===ls.TOOL_USE&&r.tool_use?.tool_name==="view"}function dl(r){return r.type===ls.TOOL_USE&&r.tool_use?.tool_name==="str-replace-editor"||r.tool_use?.tool_name==="save-file"}function dr(r){const t=new Set;for(const o of r)if(o.type===ls.TOOL_USE&&o.tool_use?.input_json)try{const n=JSON.parse(o.tool_use.input_json);t.add(n.path)}catch{}return t.delete(void 0),t.size}const ul=Symbol("undefined"),vl=Symbol("null");function oa(r){const t=new WeakMap;return o=>{const n=(f=ul,l=vl,(m=o)===void 0?f:m===null?l:m);var m,f,l;return t.has(n)||t.set(n,r(o)),((u,x)=>{if(!u.has(x))throw new Error("Value not found in cache");return u.get(x)})(t,n)}}const pl=oa(function(r){if(!r)return;const t=r.filter(o=>qr(o)).map(o=>{return"response_text"in(n=o)?n.response_text??"":"";var n}).filter(o=>o.length>0);return t.length>0?t.join(`
`):void 0}),gl=oa(function(r){let t=[];if(!r)return t;for(const o of r)qr(o)&&o.structured_output_nodes&&(t=t.concat(o.structured_output_nodes));return t});function At(r,t){return r==null?t:typeof r=="string"?r:t}const ra=[{key:"enter",name:"Focus Chat Input",description:"Focuses main chat input textarea",commandName:"focusChatInput"},{key:"enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"command+enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"ctrl+enter",name:"Send Message",description:"Send message to agent or chat",commandName:"sendChatAction"},{key:"enter",name:"Send Message edit",description:"Send edited message to agent or chat",commandName:"submitMessageEdit"},{key:"escape",name:"Cancel message edit",description:"Cancels current agent or chat response generation",commandName:"cancelMessageEdit"},{key:"escape",name:"Close",description:"Closes full size overlay",commandName:"closeFullSizeOverlay"},{key:"escape",name:"Cancel generation",description:"Cancels current agent or chat response generation",commandName:"cancelGeneration"},{key:"command+shift+backspace",name:"Cancel generation",description:"Cancels current agent or chat response generation",commandName:"cancelGeneration"},{key:"option+enter",name:"Resend Message",description:"Resend message after interruption",commandName:"resendMessage"},{key:"command+.",name:"Toggle Agent Chat Auto Mode",description:"Toggle chat agent mode and focus input",commandName:"toggleAgentMode"},{key:"command+n",name:"New Conversation",description:"Create a new conversation thread of current type",commandName:"newConversation"},{key:"command+up",name:"Scroll Conversation Up",description:"Scrolls conversation to previous message",commandName:"scrollConversationUp"},{key:"command+down",name:"Scroll Conversation Down",description:"Scrolls conversation to next message",commandName:"scrollConversationDown"},{key:"option+'",name:"Toggle Threads",description:"Toggle the threads panel open/closed",commandName:"toggleThreadsPanel"},{key:"command+]",name:"Next Conversation",description:"Switch to next conversation (debug feature)",commandName:"goToNextConversation"},{key:"command+[",name:"Previous Conversation",description:"Switch to previous conversation (debug feature)",commandName:"goToPreviousConversation"},{key:"command+/",name:"Enhance Prompt",description:"Enhance the current prompt",commandName:"enhancePrompt"},{key:"command+option+/",name:"Toggle Ask Mode",description:"Toggle ask mode",commandName:"toggleAskMode"},{key:"command+shift+enter",name:"Allow tool",description:"Allow tool to run",commandName:"allowTool"},{key:"command+option+A",name:"Open Context Menu",description:"Open context menu",commandName:"openContextMenu"},{key:"command+option+,",name:"Open Guidelines Settings",description:"Open guidelines settings",commandName:"openRulesAndGuidelinesSettings"},{key:"command+shift+,",name:"Open Agent Memories",description:"Open Agent Memories",commandName:"openAgentMemories"},{key:"command+option+.",name:"Open Model Picker",description:"Open Model Picker",commandName:"openModelPicker"}];ra.reduce((r,t)=>r.concat(t.commandName.split(/,\s*/g)),[]);const Eo=ra,zo=new Set;let zs;const ao=".",Lo=r=>r.replace(/\/+/g,ao).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hl=(r,t=()=>{})=>{if(r.length===0)throw new Error("Scope must not be empty");const o={handler:t,scope:Lo(r.join(ao))};return zo.add(o),()=>{zo.delete(o)}},ml=r=>{let t=!1;const o=((m,f,l)=>{const u=Lo(l),x=new RegExp(`^[\\.\\w-]*${u}$`),v=f?new RegExp(`^.*${Lo(f)}.*$`):void 0;return[...m.values()].filter(a=>!(v&&!v.test(a.scope))&&x.test(a.scope)).sort((a,y)=>a.scope.length-y.scope.length)})(zo,zs,r),n=new Event("keybinding-handling",{cancelable:!0});for(const m of o)if(m.handler(n),t=!0,n.defaultPrevented)break;return t},Vg=r=>{const t=Eo.filter(o=>o.key===r);for(const o of t)ml(o.commandName)},Hg=r=>{if(zs)throw new Error(`Scope ${zs} is currently focused. Unfocus before focusing another scope.`);return zs=r.join(ao),()=>{zs===r.join(ao)&&(zs=void 0)}};function No(r,t){ie(t,!0);const o=n=>{const m=tn(),f=sn(m);return hl(f.concat(t.name),n)};Me(()=>{if(!t.isDisabled&&t.handler)return t.debounce?o(Lr(t.handler,typeof t.debounce=="number"?t.debounce:300,{leading:!0,trailing:!0})):o(t.handler)}),ce()}const aa=navigator.platform.toUpperCase().indexOf("MAC")>=0,fl={command:"ctrl",option:"alt"},na=r=>aa?r:r.split("+").map(t=>fl[t]||t).join("+"),Kg=r=>{if(aa)return r;const t=[];for(const o of r){const n=na(o.key);n!==o.key?t.push({...o,key:n}):t.push(o)}return t},$l={ctrl:"Ctrl",control:"Ctrl",option:"⌥",cmd:"⌘",command:"⌘",shift:"⇧",plus:"+",minus:"-",at:"@",up:"↑",down:"↓",enter:"⏎",esc:"⎋",escape:"⎋",backspace:"⌫",period:"."},_l=r=>r&&r.icon,kl=r=>r.split(/,\s+/).reduce((t,o,n)=>(n>0&&t.push("|"),t.concat(o.split("+").map(m=>({icon:$l[m]||m.toUpperCase()})))),[]);var yl=S('<span class="c-shortcut-hint__icon svelte-1mrhglx"> </span>'),bl=S('<span class="c-shortcut-hint__icon-delimeter svelte-1mrhglx"></span>'),wl=S('<span> <span class="c-shortcut-hint svelte-1mrhglx"></span></span>');function Ro(r,t){ie(t,!0);let o=F(t,"keysOnly",3,!1);const n=d(()=>{const v=t.keybinding||Eo.filter(a=>{const y=a.commandName;if(!t.commandName||!y)return!1;const[T]=y.split(/,\s*/);return T===t.commandName})?.map(a=>a.key).sort().join(", ");return v?na(v):void 0}),m=d(()=>e(n)?kl(e(n)):[]),f=d(()=>e(n)&&Eo.find(v=>v.key===e(n))?.name||"");var l=wl(),u=b(l),x=O(u);Oe(x,21,()=>e(m),Ye,(v,a)=>{var y=H(),T=D(y),k=i=>{var c=yl(),h=b(c);J(()=>Q(h,e(a).icon)),s(i,c)},g=i=>{var c=bl();c.textContent=" or ",s(i,c)};L(T,i=>{_l(e(a))?i(k):i(g,!1)}),s(v,y)}),J(()=>Q(u,`${(o()?"":e(f))??""} `)),s(r,l),ce()}function la(r){if(!r)return"";const t=r instanceof Date?r:new Date(r),o=new Date().getTime()-t.getTime(),n=Math.floor(o/1e3),m=Math.floor(n/60);return Math.floor(m/60)<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function ia(r){if(!r)return"";const t=r instanceof Date?r:new Date(r);return t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Jg(r,t){const o=r.getTime()-t.getTime();return Math.floor(o/864e5)}var js=(r=>(r.agentEdits="agent-edits",r.tasks="tasks",r.messageHistory="message-history",r.agentGitEdits="agent-git-edits",r.memory="memory",r))(js||{});class hs{static CTX_KEY=Symbol("chat-thread-body-model");static setInContext(t){return Vt(hs.CTX_KEY,t),t}static getFromContext(){const t=it(hs.CTX_KEY);if(!t)throw new Error("ChatThreadBodyModel not found in context. Did you forget to set it?");return t}static tryGetFromContext(){try{return it(hs.CTX_KEY)}catch{return}}_activeTab;_config;activeTab;config;availableTabs;shouldShowTabs;constructor(t){const{initialConfig:o,enableAgentGitTracker:n,externalState:m,isAgentConversation:f}=t;this._config=Rt(o),this._activeTab=Rt(o.defaultTab),this.activeTab=er(this._activeTab),this.config=er(this._config),this.availableTabs=eo([m,n,f],([l,u,x])=>{const v=[];return l.showMessageHistory&&v.push("message-history"),l.showTasks&&v.push("tasks"),l.showAgentEdits&&v.push("agent-edits"),x&&u&&v.push("agent-git-edits"),v}),this.shouldShowTabs=eo(this.availableTabs,l=>l.length>0),this.setupTabAutoSelection()}setActiveTab(t){this._activeTab.set(t)}getCurrentActiveTab(){let t;return this.activeTab.subscribe(o=>t=o)(),t}getCurrentAvailableTabs(){let t=[];return this.availableTabs.subscribe(o=>t=o)(),t}switchToNextTab(){const t=this.getCurrentActiveTab(),o=this.getCurrentAvailableTabs();if(o.length===0)return void this.setActiveTab(void 0);const n=((t?o.indexOf(t):-1)+1)%o.length;this.setActiveTab(o[n])}switchToPreviousTab(){const t=this.getCurrentActiveTab(),o=this.getCurrentAvailableTabs();if(o.length===0)return void this.setActiveTab(void 0);const n=t?o.indexOf(t):-1,m=n<=0?o.length-1:n-1;this.setActiveTab(o[m])}selectDefaultTab(t){if(t.length!==0)return t.includes("message-history")?"message-history":t.find(o=>o!=="agent-git-edits")||void 0}setupTabAutoSelection(){eo([this.availableTabs,this.activeTab],([t,o])=>({available:t,active:o})).subscribe(({available:t,active:o})=>{o&&!t.includes(o)?t.length>0?this.setActiveTab(this.selectDefaultTab(t)):this.setActiveTab(void 0):!o&&t.length>0&&this.setActiveTab(this.selectDefaultTab(t))})}destroy(){}}function Yg(r,t,o,n={}){const m={defaultTab:"message-history",...n};return new hs({initialConfig:m,enableAgentGitTracker:r,externalState:t,isAgentConversation:o})}var Sl=S('<div class="c-edit-change-summary svelte-10rin2e"><!> <!></div>'),Tl=S('<div class="c-edit-change-summary svelte-10rin2e"><!></div>');function ca(r,t){ie(t,!0);const o=g=>{so(g,{color:"success",get size(){return l()},variant:"soft",children:(i,c)=>{var h=X();J(()=>Q(h,`+${m()??""}`)),s(i,h)},$$slots:{default:!0}})},n=g=>{so(g,{color:"error",get size(){return l()},variant:"soft",children:(i,c)=>{var h=X();J(()=>Q(h,`-${f()??""}`)),s(i,h)},$$slots:{default:!0}})};let m=F(t,"totalAddedLines",3,0),f=F(t,"totalRemovedLines",3,0),l=F(t,"size",3,0),u=F(t,"tooltips",3,!1),x=F(t,"loading",3,!1);function v(g,i){return i===0?"":`${Bt(i,"line")} ${g}`}var a=H(),y=D(a),T=g=>{},k=g=>{var i=H(),c=D(i),h=$=>{var _=Sl(),z=b(_),C=N=>{var I=H(),E=D(I),w=R=>{{let W=d(()=>v("added",m()));He(R,{get content(){return e(W)},children:(B,j)=>{o(B)},$$slots:{default:!0}})}},A=R=>{o(R)};L(E,R=>{u()?R(w):R(A,!1)}),s(N,I)};L(z,N=>{m()>0&&N(C)});var U=O(z,2),M=N=>{var I=H(),E=D(I),w=R=>{{let W=d(()=>v("removed",f()));He(R,{get content(){return e(W)},children:(B,j)=>{n(B)},$$slots:{default:!0}})}},A=R=>{n(R)};L(E,R=>{u()?R(w):R(A,!1)}),s(N,I)};L(U,N=>{f()>0&&N(M)}),ps(3,_,()=>Va,()=>({duration:150,start:.9})),s($,_)},p=$=>{var _=Tl(),z=b(_);so(z,{color:"neutral",get size(){return l()},variant:"soft",children:(C,U)=>{var M=X("No changes");s(C,M)},$$slots:{default:!0}}),s($,_)};L(c,$=>{m()>0||f()>0?$(h):$(p,!1)},!0),s(g,i)};L(y,g=>{x()?g(T):g(k,!1)}),s(r,a),ce()}const da="taskMetricsContext";var ko,Il=((ko=Il||{}).v1="v1",ko.v2="v2",ko);class Xg{store;reportedMetrics=new Set;version;constructor(t){this.store=t.store,this.version=t.version||"v2"}getConversationId(){const t=on.select(this.store.getState());return rn.select(this.store.getState(),t)?.request_id||t}buildTaskListUsageData(t,o=Cs.user){return{action:t,totalTasksCount:an.select(this.store.getState(),this.getConversationId()).total,triggeredBy:o}}reportMetric(t,o=Cs.user,n){try{const m={...this.buildTaskListUsageData(t,o),taskListVersion:this.version,...n},f=this.getConversationId(),l={taskListUsageData:m};this.store.dispatch(nn({eventName:ln.taskListUsage,conversationId:f,eventData:l}))}catch(m){console.error("Failed to report task metric:",m)}}reportViewTaskList(t=!0){const o="viewTaskList";t&&this.reportedMetrics.has(o)||(this.reportMetric(Tt.viewTaskList),t&&this.reportedMetrics.add(o))}reportUpdateTaskStatus(){this.reportMetric(Tt.updateTaskStatus)}reportUpdateTaskName(){this.reportMetric(Tt.updateTaskName)}reportUpdateTaskDescription(){this.reportMetric(Tt.updateTaskDescription)}reportAddTask(){this.reportMetric(Tt.addTask)}reportAddSubtask(){this.reportMetric(Tt.addSubtask)}reportDeleteTask(){this.reportMetric(Tt.deleteTask)}reportReorganizeTaskList(){this.reportMetric(Tt.reorganizeTaskList)}reportRunSingleTask(){this.reportMetric(Tt.runSingleTask)}reportRunAllTasks(){this.reportMetric(Tt.runAllTasks)}reportExportTaskList(){this.reportMetric(Tt.exportTaskList)}reportImportTaskList(){this.reportMetric(Tt.importTaskList)}reportSyncTaskList(){this.reportMetric(Tt.syncTaskList)}reportClearCompletedTasks(){this.reportMetric(Tt.clearCompletedTasks,Cs.user)}reportClearAllTasks(){this.reportMetric(Tt.clearAllTasks,Cs.user)}reportContinueTasksInNewChat(){this.reportMetric(Tt.continueTasksInNewChat,Cs.user)}reportCustomAction(t,o=Cs.user,n){this.reportMetric(t,o,n)}resetReportedMetrics(){this.reportedMetrics.clear()}getVersion(){return this.version}}function mo(){return it(da)}function Qg(r){return Vt(da,r),r}function ur(r,t){ie(t,!0);let o=F(t,"size",3,1);const n={[ht.NOT_STARTED]:"circle-dashed",[ht.IN_PROGRESS]:"circle-dot-dashed",[ht.COMPLETE]:"circle-check-big",[ht.CANCELLED]:"circle-minus"};de(r,{get name(){return n[t.taskState]},get size(){return o()}}),ce()}var xl=S("<!> <!>",1);function Ul(r,t){ie(t,!0);const o=()=>ge(v,"$currentConversationId",n),[n,m]=Ce(),f=_=>{{let z=d(()=>!u());je(_,{size:.5,get variant(){return e(k)},get color(){return e(T)},get readonly(){return e(z)},onclick:()=>{u()&&P(g,!e(g))},children:(C,U)=>{ur(C,{get taskState(){return t.taskState},size:2})},$$slots:{default:!0}})}},l=F(t,"taskUuid",19,()=>{}),u=F(t,"interactive",3,!0),x=F(t,"initialDropdownOpen",3,!1),v=It(),a=gt(),y=mo(),T=d(()=>cn(t.taskState)),k=d(()=>dn(t.taskState));let g=ue(Qe(x()));const i=Object.values(ht);var c=H(),h=D(c),p=_=>{var z=H(),C=D(z);{let U=d(()=>[is.Click]);et(C,()=>Xe.Root,(M,N)=>{N(M,{get triggerOn(){return e(U)},get open(){return e(g)},onOpenChange:I=>P(g,I,!0),children:(I,E)=>{var w=xl(),A=D(w);et(A,()=>Xe.Trigger,(W,B)=>{B(W,{children:(j,V)=>{{let G=d(()=>[is.Hover]);He(j,{content:"Change Status",get triggerOn(){return e(G)},children:(q,ee)=>{f(q)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var R=O(A,2);et(R,()=>Xe.Content,(W,B)=>{B(W,{size:1,side:"bottom",align:"start",children:(j,V)=>{var G=H(),q=D(G);Oe(q,17,()=>i,Ye,(ee,K)=>{var Y=H(),Z=D(Y);{let se=d(()=>e(K)===t.taskState);et(Z,()=>Xe.Item,(te,oe)=>{oe(te,{onSelect:()=>async function(re){l()&&o()&&u()&&re!==t.taskState&&(y?.reportUpdateTaskStatus(),a(jo(o(),l(),{state:re},po.USER)),P(g,!1))}(e(K)),get highlight(){return e(se)},children:(re,ne)=>{var le=X();J(ve=>Q(le,ve),[()=>Ps(e(K))]),s(re,le)},$$slots:{default:!0,iconLeft:(re,ne)=>{ur(re,{slot:"iconLeft",get taskState(){return e(K)},size:1})}}})})}s(ee,Y)}),s(j,G)},$$slots:{default:!0}})}),s(I,w)},$$slots:{default:!0}})})}s(_,z)},$=_=>{f(_)};L(h,_=>{u()?_(p):_($,!1)}),s(r,c),ce(),m()}var Cl=S('<div class="c-task-action-buttons svelte-1raumhf"><!> <!></div>');const ua=Symbol("task-focus-context");class Al{#e=ue(null);get _focusedTaskId(){return e(this.#e)}set _focusedTaskId(t){P(this.#e,t,!0)}_deletionTimeout=null;#t=ue(null);get _pendingDeletionTaskId(){return e(this.#t)}set _pendingDeletionTaskId(t){P(this.#t,t,!0)}#s=ue(null);get _lastTopLevelTaskId(){return e(this.#s)}set _lastTopLevelTaskId(t){P(this.#s,t,!0)}get focusedTaskId(){return this._focusedTaskId}get deletionTimeout(){return this._deletionTimeout}setFocusedTask(t){this._focusedTaskId=t,this._pendingDeletionTaskId===t&&this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}clearFocusedTask(t){this._focusedTaskId===t&&(this._focusedTaskId=null)}scheduleDeletion(t,o){this._deletionTimeout&&clearTimeout(this._deletionTimeout),this._pendingDeletionTaskId=t,this._deletionTimeout=setTimeout(async()=>{this._focusedTaskId!==t&&await o(),this._deletionTimeout=null,this._pendingDeletionTaskId=null},500)}cancelDeletion(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}isTaskFocused(t){return this._focusedTaskId===t}isLastTopLevelTask(t){return t===this._lastTopLevelTaskId}setLastTopLevelTask(t){this._lastTopLevelTaskId=t}cleanup(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}delayBlur(){return new Promise(t=>setTimeout(t,10))}}function Ko(){return it(ua)}var El=S('<div class="c-task-details svelte-a83104"><!></div>');function zl(r,t){ie(t,!0);const o=()=>ge(y,"$conversationId",n),[n,m]=Ce();let f=F(t,"editable",3,!0),l=F(t,"showIfEmpty",3,!1),u=F(t,"hasFocus",15,!1);const x=mo(),v=Ko(),a=gt(),y=It();let T=ue(Qe(t.task.description)),k=ue(void 0);const g=d(()=>!t.task.description.trim()),i=d(()=>!e(g)||u()||l());function c(){u(!0),v?.setFocusedTask(t.task.uuid)}async function h(){f()&&o()&&(e(T).trim()!==t.task.description?(x?.reportUpdateTaskDescription(),a(jo(o(),t.task.uuid,{description:e(T).trim()},po.USER))):e(T).trim()||t.task.name.trim()||(v?.isLastTopLevelTask(t.task.uuid)?v.scheduleDeletion(t.task.uuid,async()=>{a(ws(o(),t.task.uuid))}):a(ws(o(),t.task.uuid))),e(k)?.blur()),await v?.delayBlur(),u(!1),v?.clearFocusedTask(t.task.uuid)}async function p(C){if(C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),P(T,t.task.description,!0),e(k)?.blur()),C.key==="Enter"&&!C.shiftKey&&!C.ctrlKey&&!C.metaKey){if(C.preventDefault(),C.stopPropagation(),!o())return;a(Wr(o(),t.task.uuid))}}var $=H(),_=D($),z=C=>{var U=El(),M=b(U);{let N=d(()=>!f());Fs(M,{size:1,variant:"ghost",placeholder:"Add task description...",onkeydown:p,onfocus:c,onblur:h,get disabled(){return e(N)},resize:"none",outline:!1,maxHeight:"10lh",get textInput(){return e(k)},set textInput(I){P(k,I,!0)},get value(){return e(T)},set value(I){P(T,I,!0)}})}ps(3,U,()=>xo,()=>({duration:150})),s(C,U)};L(_,C=>{e(i)&&C(z)}),s(r,$),ce(),m()}var Ll=S("<div><!></div>");function Nl(r,t){ie(t,!0);const o=()=>ge(y,"$conversationId",n),[n,m]=Ce();let f=F(t,"editable",3,!0),l=F(t,"hasFocus",15,!1),u=F(t,"isEmpty",31,()=>!t.task.name.trim());const x=mo(),v=Ko(),a=gt(),y=It();let T=ue(Qe(t.task.name));{let k=d(()=>!f());(function(g,i){ie(i,!0);let c=F(i,"value",15,""),h=F(i,"disabled",3,!1),p=F(i,"placeholder",3,""),$=F(i,"clickToEdit",3,!1),_=F(i,"variant",3,"surface"),z=F(i,"size",3,2),C=F(i,"color",19,()=>{}),U=F(i,"class",3,""),M=F(i,"outline",3,!0),N=F(i,"editing",15,!1),I=Nr(i,["$$slots","$$events","$$legacy","value","disabled","placeholder","clickToEdit","variant","size","color","class","outline","editing","onstartEdit","onacceptEdit","oncancelEdit","onkeydown","onclick","onblur","onfocus","onchange"]),E=ue(Qe(c())),w=ue(void 0),A=ue(void 0);async function R(q){h()||!e(w)||N()||(P(E,c(),!0),i.onstartEdit?.({value:c()}),e(w).focus(),q?.selectAll&&(await Io(),e(w)?.select()),N(!0))}function W(){const q=c(),ee=e(E).trim();q!==ee?(c(ee),i.onacceptEdit?.({oldValue:q,newValue:ee}),document.activeElement===e(w)&&e(w)?.blur(),N(!1)):B()}function B(){P(E,c(),!0),i.oncancelEdit?.({value:c()}),document.activeElement===e(w)&&e(w)?.blur(),N(!1)}Me(()=>{N()&&i.onchange?.({value:e(E)})});var j={startEdit:R,acceptEdit:W,cancelEdit:B},V=Ll(),G=b(V);vn(G,ut({get size(){return z()},get variant(){return _()},get color(){return C()},get placeholder(){return p()},get disabled(){return h()},get outline(){return M()}},()=>I,{onkeydown:function(q){const ee=q;ee.key==="Enter"?W():ee.key==="Escape"&&B(),i.onkeydown?.(ee)},onfocus:function(q){!$()||h()||N()||R(),i.onfocus?.(q)},onblur:function(q){W(),i.onblur?.(q)},onclick:function(q){i.onclick?.(q)},get textInput(){return e(w)},set textInput(q){P(w,q,!0)},get value(){return e(E)},set value(q){P(E,q,!0)}})),Mt(V,q=>P(A,q),()=>e(A)),J(()=>at(V,1,`c-editable-text ${U()??""}`,"svelte-1ujyjwr")),s(g,V),ce(j)})(r,{class:"c-task-name-editor",variant:"ghost",placeholder:"Name this task...",size:1,get disabled(){return e(k)},clickToEdit:!0,outline:!1,onchange:function({value:g}){u(!g.trim())},onacceptEdit:async function(g){if(!f()||!o())return;const i=g.newValue.trim();i||t.task.description.trim()?i!==t.task.name&&i&&(x?.reportUpdateTaskName(),a(jo(o(),t.task.uuid,{name:i},po.USER))):v?.isLastTopLevelTask(t.task.uuid)?v.scheduleDeletion(t.task.uuid,async()=>{a(ws(o(),t.task.uuid))}):a(ws(o(),t.task.uuid))},oncancelEdit:async function({value:g}){await v?.delayBlur(),l(!1),v?.clearFocusedTask(t.task.uuid),g.trim()||t.task.description.trim()||!o()||!f()||(v?.isLastTopLevelTask(t.task.uuid)?v.scheduleDeletion(t.task.uuid,async()=>{a(ws(o(),t.task.uuid))}):a(ws(o(),t.task.uuid)))},onfocus:function(){l(!0),v?.setFocusedTask(t.task.uuid)},onblur:async function(){await v?.delayBlur(),l(!1),v?.clearFocusedTask(t.task.uuid)},onkeydown:async function(g){if(g.key==="Enter"&&!g.shiftKey&&!g.ctrlKey&&!g.metaKey&&f()){if(await Io(),!e(T).trim()||!o())return;a(Wr(o(),t.task.uuid)),g.preventDefault(),g.stopPropagation()}},get value(){return e(T)},set value(g){P(T,g,!0)}})}ce(),m()}var Rl=S('<div class="c-draggable-list-item__handle svelte-1oucz2t"><!></div>'),Ml=S('<div data-testid="draggable-list-item" tabindex="0" role="button"><div class="c-draggable-list-item__content svelte-1oucz2t"><!> <!> <div class="c-draggable-list-item__main svelte-1oucz2t"><!></div> <div class="c-draggable-list-item__actions"><!></div></div> <div><!></div></div>');function va(r,t){ie(t,!0);let o=F(t,"class",3,""),n=F(t,"disabled",3,!1),m=F(t,"hasNestedItems",3,!1),f=F(t,"expanded",15,!0),l=F(t,"selected",3,!1),u=F(t,"showConnectors",19,m),x=F(t,"expandable",19,m),v=F(t,"element",15);function a(){f(!f())}var y=Ml();let T;y.__mousedown=function(...w){t.onmousedown?.apply(this,w)},y.__click=function(...w){t.onclick?.apply(this,w)},y.__keydown=function(...w){t.onkeydown?.apply(this,w)},y.__keyup=function(...w){t.onkeyup?.apply(this,w)},y.__focusin=function(...w){t.onfocusin?.apply(this,w)},y.__focusout=function(...w){t.onfocusout?.apply(this,w)};var k=b(y),g=b(k),i=w=>{var A=Rl(),R=b(A);Ge(R,()=>t.handle,()=>t.item),s(w,A)};L(g,w=>{t.handle&&w(i)});var c=O(g,2),h=w=>{{let A=d(()=>f()?"Collapse":"Expand");je(w,{class:"c-draggable-list-item__expand-collapse-button",size:.5,variant:"ghost-block",color:"neutral",onclick:a,get"aria-expanded"(){return f()},get"aria-label"(){return e(A)},children:(R,W)=>{{let B=d(()=>f()?"chevron-down":"chevron-right");de(R,{get name(){return e(B)},size:2})}},$$slots:{default:!0}})}};L(c,w=>{x()&&m()&&w(h)});var p=O(c,2),$=b(p),_=w=>{var A=H(),R=D(A);Ge(R,()=>t.headerContents,()=>t.item),s(w,A)};L($,w=>{t.headerContents&&w(_)});var z=O(p,2),C=b(z),U=w=>{var A=H(),R=D(A);Ge(R,()=>t.actions,()=>t.item),s(w,A)};L(C,w=>{t.actions&&w(U)});var M=O(k,2);let N;var I=b(M),E=w=>{var A=H(),R=D(A);Ge(R,()=>t.contents,()=>t.item),s(w,A)};L(I,w=>{t.contents&&w(E)}),Mt(y,w=>v(w),()=>v()),J((w,A)=>{T=at(y,1,`c-draggable-list-item ${o()??""}`,"svelte-1oucz2t",T,w),Nt(y,"id",t.id),Nt(y,"data-item-id",t.id),N=at(M,1,"c-draggable-list-item__contents",null,N,A)},[()=>({"is-disabled":n(),"has-nested-items":m(),"is-expanded":f(),"is-selected":l()}),()=>({"c-draggable-list-item__show-connectors":u(),"c-draggable-list-item__has-handle":t.handle})]),$t("keypress",y,function(...w){t.onkeypress?.apply(this,w)}),$t("focus",y,function(...w){t.onfocus?.apply(this,w)}),$t("blur",y,function(...w){t.onblur?.apply(this,w)}),s(r,y),ce()}Rs(["mousedown","click","keydown","keyup","focusin","focusout"]);const Jo="taskFilterContext";class Zg{#e=ue(Qe(new Set(Object.values(ht))));get activeFilters(){return e(this.#e)}set activeFilters(t){P(this.#e,t,!0)}allStates=Object.values(ht);#t=d(()=>[{value:ht.NOT_STARTED,label:Ps(ht.NOT_STARTED)},{value:ht.IN_PROGRESS,label:Ps(ht.IN_PROGRESS)},{value:ht.COMPLETE,label:Ps(ht.COMPLETE)},{value:ht.CANCELLED,label:Ps(ht.CANCELLED)}]);get taskFilters(){return e(this.#t)}set taskFilters(t){P(this.#t,t)}#s=d(()=>this.activeFilters.size<this.allStates.length);get hasActiveFilters(){return e(this.#s)}set hasActiveFilters(t){P(this.#s,t)}#o=d(()=>this.activeFilters.size===this.allStates.length);get allSelected(){return e(this.#o)}set allSelected(t){P(this.#o,t)}#r=d(()=>this.activeFilters.size>0&&this.activeFilters.size<this.allStates.length);get isIndeterminate(){return e(this.#r)}set isIndeterminate(t){P(this.#r,t)}constructor(t){t&&(this.activeFilters=t)}toggleFilter(t){const o=new Set(this.activeFilters);o.has(t)?o.delete(t):o.add(t),this.activeFilters=o}toggleAll(){const t=this.activeFilters.size===this.allStates.length,o=this.activeFilters.size>0;this.activeFilters=o&&!t?new Set(this.allStates):t?new Set:new Set(this.allStates)}resetFilters(){this.activeFilters=new Set(this.allStates)}clearAll(){this.activeFilters=new Set}selectAll(){this.activeFilters=new Set(this.allStates)}isFilterActive(t){return this.activeFilters.has(t)}}function eh(){const r=it(Jo);if(!r)throw new Error("TaskFilterContext not found. Make sure to call setTaskFilterContext first.");return r}function Dl(){return it(Jo)}function th(r){return Vt(Jo,r),r}var Ol=S('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),Pl=S('<div class="c-task-tree__spacer svelte-1gknqtu"><!></div>'),Fl=S('<div class="c-task-tree__root-children svelte-1gknqtu"><!> <!></div>'),ql=S('<div class="c-task-tree__item-action-buttons svelte-1gknqtu"><!></div>'),Wl=S('<div class="c-task-tree__item-header svelte-1gknqtu"><div class="c-task-tree__item-status-cell svelte-1gknqtu"><!></div> <div><!></div></div>'),jl=S('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),Bl=S('<div class="c-task-tree__item-subtasks svelte-1gknqtu"></div>'),Gl=S('<div class="c-task-tree__item-details svelte-1gknqtu"><!></div> <!>',1);function no(r,t){ie(t,!0);const o=()=>ge(e(y),"$task",f),n=()=>ge(e(z),"$visibleSubTasks",f),m=()=>ge(a,"$conversationId",f),[f,l]=Ce();let u=F(t,"editable",3,!0),x=F(t,"isRootTask",3,!0);const v=gt(),a=It(),y=d(()=>sr(t.taskUuid)),T=Dl();let k=Ko();x()&&!k&&(k=new Al,Vt(ua,k)),x()&&k&&as(()=>{k?.cleanup()});let g=ue(!0),i=ue(!1),c=ue(!1),h=ue(!0);const p=d(()=>e(i)||e(c)),$=d(()=>o()?.state===ht.CANCELLED),_=d(()=>gn(t.taskUuid)),z=d(()=>pn(t.taskUuid,T?.activeFilters));Me(()=>{if(x()&&k&&n().length>0){const E=n().at(-1);E&&k.setLastTopLevelTask(E.uuid)}});const C=d(()=>!o()?.name.trim()&&!o()?.description.trim());var U=H(),M=D(U),N=E=>{var w=Fl(),A=b(w);Oe(A,1,n,B=>B.uuid,(B,j)=>{var V=Ol();no(b(V),{get taskUuid(){return e(j).uuid},get editable(){return u()},isRootTask:!1}),ps(3,V,()=>xo,()=>({duration:150})),s(B,V)});var R=O(A,2),W=B=>{var j=Pl(),V=b(j);zt(V,{variant:"soft",color:"neutral",size:.5,$$events:{click:()=>async function(G){if(m()&&u()){if(T?.resetFilters(),x()){const q=n().at(-1);if(q&&!q.name.trim()&&!q.description.trim())return void hn(q.uuid)}v(mn(m()))}}()},children:(G,q)=>{var ee=X("Add Task");s(G,ee)},$$slots:{default:!0,iconLeft:(G,q)=>{de(G,{name:"circle-fading-plus",slot:"iconLeft"})}}}),s(B,j)};L(R,B=>{u()&&B(W)}),s(E,w)},I=E=>{var w=H(),A=D(w),R=W=>{const B=(j,V=vt)=>{var G=ql();(function(q,ee){ie(ee,!0);const K=()=>ge(oe,"$currentConversationId",Z),Y=()=>ge(e(re),"$task",Z),[Z,se]=Ce();let te=F(ee,"editable",3,!0);const oe=It(),re=d(()=>sr(ee.taskUuid)),ne=gt(),le=mo(),ve=hs.tryGetFromContext();async function he(){te()&&K()&&(le?.reportDeleteTask(),ne(ws(K(),ee.taskUuid)))}async function we(){Y()&&te()&&Y().state===ht.NOT_STARTED&&K()&&(ve&&ve.setActiveTab(js.messageHistory),le?.reportRunSingleTask(),ne(un(K(),ee.taskUuid)))}const fe=d(()=>Y()?.state===ht.NOT_STARTED);var me=Cl(),_e=b(me),be=Ae=>{{let ze=d(()=>[is.Hover]);He(Ae,{content:"Run Task",get triggerOn(){return e(ze)},children:(xe,Ee)=>{je(xe,{size:.5,variant:"ghost-block",color:"neutral",onclick:we,title:"Run task",class:"c-task-action-button c-task-action-button--play",children:(Se,Ke)=>{de(Se,{name:"circle-play",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}};L(_e,Ae=>{e(fe)&&Ae(be)});var ke=O(_e,2);{let Ae=d(()=>[is.Hover]);He(ke,{content:"Delete Task",get triggerOn(){return e(Ae)},children:(ze,xe)=>{je(ze,{size:.5,variant:"ghost-block",color:"neutral",onclick:he,title:"Delete task",class:"c-task-action-button c-task-action-button--delete",children:(Ee,Se)=>{de(Ee,{name:"trash-2",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}s(q,me),ce(),se()})(b(G),{get taskUuid(){return V().uuid},get editable(){return u()}}),s(j,G)};{const j=(Y,Z=vt)=>{var se=Wl(),te=b(se);Ul(b(te),{get taskState(){return Z().state},get taskUuid(){return Z().uuid},get interactive(){return u()}});var oe=O(te,2);let re;Nl(b(oe),{get task(){return Z()},get editable(){return u()},get hasFocus(){return e(i)},set hasFocus(ne){P(i,ne,!0)},get isEmpty(){return e(h)},set isEmpty(ne){P(h,ne,!0)}}),J(ne=>re=at(oe,1,"c-task-tree__item-name svelte-1gknqtu",null,re,ne),[()=>({"c-task-tree__item-text--cancelled":e($)})]),s(Y,se)},V=(Y,Z=vt)=>{var se=Gl(),te=D(se),oe=b(te);{let le=d(()=>e(p)&&!e(h));zl(oe,{get task(){return Z()},get editable(){return u()},get showIfEmpty(){return e(le)},get hasFocus(){return e(c)},set hasFocus(ve){P(c,ve,!0)}})}var re=O(te,2),ne=le=>{var ve=Bl();Oe(ve,5,n,he=>he.uuid,(he,we)=>{var fe=jl();no(b(fe),{get taskUuid(){return e(we).uuid},get editable(){return u()},isRootTask:!1}),ps(3,fe,()=>xo,()=>({duration:150})),s(he,fe)}),s(le,ve)};L(re,le=>{n()&&n().length>0&&e(g)&&le(ne)}),s(Y,se)};let G=d(()=>`task-${t.taskUuid}`),q=d(()=>!!o().subTasks?.length),ee=d(()=>!u()),K=d(()=>u()&&!e(C)?B:void 0);va(W,{class:"c-task-tree__item",get item(){return o()},get id(){return e(G)},get hasNestedItems(){return e(q)},get disabled(){return e(ee)},expandable:!1,get actions(){return e(K)},get expanded(){return e(g)},set expanded(Y){P(g,Y,!0)},headerContents:j,contents:V,$$slots:{headerContents:!0,contents:!0}})}};L(A,W=>{o()&&ge(e(_),"$isTaskVisible",f)&&W(R)},!0),s(E,w)};L(M,E=>{x()?E(N):E(I,!1)}),s(r,U),ce(),l()}const pa=Symbol("transient-data-manager-context");function Yo(){return it(pa)||(console.warn("TransientDataManager not found in context. Call setTransientDataManagerContext first."),new Map)}function sh(){const r=Vt(pa,new Map);return as(()=>{r.clear()}),r}function ro(r){if(!r)return 0;if(r.nodeType===Node.TEXT_NODE)return 1;if(r.nodeType===Node.ELEMENT_NODE){let t=1;return r.childNodes.forEach(o=>{t+=ro(o)}),t}return 0}class ga{constructor({enabled:t=!0,...o}={},n){this.onChange=n,this.enabled.set(t),this.enabled.subscribe(m=>{console.warn("IntersectionObserverManager: "+(m?"enabled":"disabled"))}),this.config=o}observers=new Map;_intersectionObserver=void 0;_isIntersection=new Map;enabled=Rt(!0);config={};isEnabled(){return Rr(this.enabled)}get intersectionObserver(){return this._intersectionObserver||this.setConfig(this.config),this._intersectionObserver}setConfig({enabled:t,...o}){const n=!sl(this.config,o),m=t??this.isEnabled(),f=m!==this.isEnabled();if(n||f||!this._intersectionObserver)if(this.config={root:void 0,rootMargin:void 0,threshold:void 0,...o},this._intersectionObserver?.disconnect(),this.enabled.set(m),this.isEnabled()){this._intersectionObserver=new IntersectionObserver(this.handleIntersection,o);for(const l of this.observers.keys())this._intersectionObserver.observe(l)}else this._intersectionObserver=void 0}handleIntersection=t=>{for(const o of t){const n=this.observers.get(o.target);if(this._isIntersection.set(o.target,o.isIntersecting),n)for(const m of n)m(o)}this.onChange?.(this.stats())};stats(){let t=0;for(const n of this._isIntersection.values())n&&t++;let o=0;for(const n of this.observers.values())o+=n.size;return{visible:t,total:this.observers.size,totalListeners:o,domNodes:this.countNodes()}}observe(t,o){if(!this.isEnabled())return()=>{};let n=this.observers.get(t);return n&&this._intersectionObserver?n.add(o):(this.observers.set(t,n=new Set),n.add(o),this.intersectionObserver.observe(t)),()=>{const m=this.observers.get(t);m?.delete(o)&&(m?.size||(this.observers.delete(t),this._intersectionObserver?.unobserve(t)))}}once(t,o){const n=this.observe(t,m=>{m.isIntersecting&&(o(m),n())});return n}onVisibilityChange=(t,o)=>{let n=this.observe(t,o);return{destroy(){n()},update:m=>{n(),n=this.observe(t,m)}}};destroy(){if(this._intersectionObserver){for(const t of this.observers.keys())this._intersectionObserver?.unobserve(t);this._intersectionObserver.disconnect(),this._intersectionObserver=void 0}this.observers.clear(),this._isIntersection.clear()}countNodes(){const t=this.config.root??document?.documentElement;return t instanceof HTMLElement?ro(t):t instanceof Document?ro(t.body):t?ro(t):0}}const Mo=Symbol("intersection-observer-manager-context");function oh(r,t){const o=it(Mo);if(o)return o.setConfig(r),o;const n=new ga(r,t);return Vt(Mo,n),as(()=>{n.destroy()}),n}function ha(){return it(Mo)||(console.warn("IntersectionObserverManager not found in context.  Call setIntersectionObserverManagerContext first."),{enabled:Vs(!1)})}const lo=Symbol("intersection-display-context");function vr(r=crypto.randomUUID(),t=Yo()){if(!r)return console.warn("intersectionId key not provided.  Using default context, this will not work if you have multiple IntersectionDisplay components in the hierarchy."),Vt(lo,[void 0,Rt()]);const o=Rt(t?.has(r)?t.get(r):void 0);return t?o.subscribe(n=>{t.set(r,n)}):console.warn("No transient data manager found.  Intersection state will not be persisted."),Vt(lo,o),o}function ma(r,t,o=ol,n=Yo()){return(...m)=>{const f=n.get(t);if(f&&o(f.args,m))return f.result;const l=r(...m);return n.set(t,{args:m,result:l}),l}}var Vl=S("<div><!></div>");const rh=Object.freeze(Object.defineProperty({__proto__:null,default:function(r,t){ie(t,!0);let o=F(t,"minHeight",3,"0px"),n=F(t,"className",3,""),m=F(t,"debounceMeasureMs",3,100),f=F(t,"fixedHeight",3,!1),l=Nr(t,["$$slots","$$events","$$legacy","minHeight","className","debounceMeasureMs","value","estimatedHeight","children","intersectionId","fixedHeight"]);vr(`intersection-display-${t.intersectionId}`);let u,x=ue(!1),v=ue(!1),a=ue(void 0),y=ha()?.onVisibilityChange;function T(C){P(x,C.isIntersecting,!0)}Me(()=>{return C=e(x),clearTimeout(u),void(u=setTimeout(()=>{P(v,C,!0)},m()));var C}),as(()=>{clearTimeout(u)}),Fa(()=>{e(v)&&P(a,e(h),!0)});let k,g=ue(0),i=d(()=>t.estimatedHeight?.(t.value,e(g))),c=d(()=>{return Math.round(e(a)??e(i)??(C=o()?.replace("px",""),C==null?void 0:Number(C))??0);var C}),h=ue(0),p=d(()=>f()&&e(a)?`height:${e(a)}px`:e(v)?"":`height:${e(c)}px;min-height:0px`);var $=Vl();qa($,(C,U)=>({...l,class:`c-intersection-display ${n()??""}`,style:e(p),"data-intersection-estimated":e(i),"data-intersection-height":e(c),"data-intersection-id":t.intersectionId,"data-intersection-visible":e(v),[ja]:C,[Wa]:U}),[()=>({"c-intersection-display__visible":e(x),"c-intersection-display__hidden":!e(x)}),()=>({"--intersection-height":`${e(c)??""}px`,"--intersection-cache-height":e(a)??"100px"})],void 0,"svelte-1fhs4v0");var _=b($),z=C=>{var U=H(),M=D(U);Ge(M,()=>t.children??vt),s(C,U)};L(_,C=>{e(v)&&C(z)}),To(()=>cr($,"offsetHeight",C=>P(h,C))),Dt($,(C,U)=>y?.(C,U),()=>T),Mt($,C=>k=C,()=>k),To(()=>cr($,"clientWidth",C=>P(g,C))),s(r,$),ce()},getIntersectionStoreContext:function(r){const t=it(lo);return t?(Rr(t)||t.update(o=>o??r),t):(console.warn("IntersectionDisplay context not found.  Call setIntersectionContext first."),Rt(r))},getTransientContextMemo:ma,intersectionContextKey:lo,setIntersectionContext:vr},Symbol.toStringTag,{value:"Module"}));var Hl=S('<div><!> <div class="c-codeblocks__action-bar-status svelte-191e2kt"> </div></div>');function pr(r,t){ie(t,!1);let o,n=F(t,"location",8,"bottomBar"),m=F(t,"align",8,"right"),f=ye("");Vt("augment-codeblock-actions-message",{setMessageText:y=>{P(f,y),o&&clearTimeout(o),o=setTimeout(()=>{P(f,"")},2500)}}),Zt();var l=Hl();let u;var x=b(l);Gt(x,t,"default",{},null);var v=O(x,2),a=b(v);J(y=>{u=at(l,1,"c-codeblocks__action-bar svelte-191e2kt",null,u,y),Q(a,e(f)||"")},[()=>({"c-codeblocks__loc-top-bar":n()==="topBar","c-codeblocks__loc-bottom-bar":n()==="bottomBar","c-codeblocks__loc-left-align":m()==="left"})]),s(r,l),ce()}function fa(r){return r?[".ipynb",".rmd",".qmd",".jl",".zmd"].some(t=>r.toLowerCase().endsWith(t)):!1}function $a(r){navigator.clipboard.writeText(r)}function _a(r,t,o){t.createFile(r,o||void 0),t.reportWebviewClientEvent(os.chatCodeblockCreate)}function gr(r,t){ie(t,!1);const o=ye(),n=ye(),m=ye(),f=ye(),l=ye(),u=ye(),x=ye(),v=ye(),a=ye(),y=ye();let T,k=F(t,"data",8),g=ye(void 0),i=ye(void 0);function c(h){h.stopPropagation(),e(n)(),P(g,e(m)),clearTimeout(T),T=setTimeout(()=>e(i)?.requestClose(),1500)}Pe(()=>(e(o),e(n),e(m),e(f),e(l),e(u),e(x),e(v),e(a),e(y),Te(k())),()=>{var h;h=k(),P(o,h.title),P(n,h.onClick),P(m,h.onSuccessMessage),P(f,h.iconName),P(l,h.buttonText),P(u,h.onMouseDown),P(x,h.onMouseLeave),P(v,h.onMouseOver),P(a,h.onBlur),P(y,h.onFocus)}),co();{let h=Qt(()=>e(g)??e(o));Mt(He(r,{onOpenChange:function(p){p||(clearTimeout(T),P(g,void 0),T=void 0)},get content(){return e(h)},children:(p,$)=>{zt(p,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:c,mouseover(..._){(e(v)||ys)?.apply(this,_)},mouseleave(..._){(e(x)||ys)?.apply(this,_)},blur(..._){(e(a)||ys)?.apply(this,_)},focus(..._){(e(y)||ys)?.apply(this,_)},mousedown(..._){(e(u)||ys)?.apply(this,_)}},children:(_,z)=>{var C=H(),U=D(C);Gt(U,t,"default",{},M=>{var N=H(),I=D(N),E=w=>{ae(w,{size:1,children:(A,R)=>{var W=X();J(()=>Q(W,e(l))),s(A,W)},$$slots:{default:!0}})};L(I,w=>{e(l)&&w(E)}),s(M,N)}),s(_,C)},$$slots:{default:!0,iconLeft:(_,z)=>{var C=H(),U=D(C),M=N=>{de(N,{get name(){return e(f)}})};L(U,N=>{e(f)&&N(M)}),s(_,C)}}})},$$slots:{default:!0},$$legacy:!0}),p=>P(i,p),()=>e(i))}ce()}var Ne=(r=>(r[r.copy=0]="copy",r[r.insert=1]="insert",r[r.smartPaste=2]="smartPaste",r[r.goTo=3]="goTo",r[r.directApply=4]="directApply",r))(Ne||{});function ka(r,t){return{codeblockActionType:Ne.copy,title:"Copy to clipboard",onClick:function(){const o=r();o&&$a(o)},onSuccessMessage:"Copied",iconName:"files",buttonText:"Copy",primary:!!t}}function ya(r,t,o,n){return{codeblockActionType:Ne.insert,title:t?.relPath?`Create new file at ${t.relPath}`:"Create new file",onClick:function(){const m=r();m&&o&&_a(m,o,t?.relPath)},onSuccessMessage:"Creating new file...",iconName:"file-plus",buttonText:"Create",primary:!!n}}function ba(r,t,o,n,m){return{codeblockActionType:Ne.goTo,title:`Go to ${o?.relPath}`,onClick:function(){o?.relPath&&(n.reportWebviewClientEvent(os.chatCodeblockGoToFile),m(Ns({repoRoot:"",pathName:o?.relPath??"",snippet:t?r:void 0})))},onSuccessMessage:"Opening file...",iconName:"external-link",buttonText:"Go to",primary:!1}}function wa(r,t){const{onVisible:o,onHidden:n,scrollTarget:m,threshold:f=.25,visibilityDuration:l=250,throttleDuration:u=100,ignoreScroll:x=!1}=t;let v=!1,a=null,y=!1,T=null;const k=new IntersectionObserver(h=>{h.forEach(p=>{v=p.isIntersecting,i()})},{threshold:f}),g=()=>{a!==null&&(clearTimeout(a),a=null),T!==null&&(clearTimeout(T),T=null)},i=lr(()=>{v&&!y?a===null&&(a=setTimeout(()=>{o?.(),a=null},l)):(n?.(),g())},u),c=lr(()=>{x||(y=!0,g(),T=setTimeout(()=>{y=!1,i()},u))},u);return k.observe(r),m.addEventListener("scroll",c,!0),{destroy(){k.disconnect(),m.removeEventListener("scroll",c),a!==null&&clearTimeout(a),T!==null&&clearTimeout(T)}}}function $s(r,t){const o=wa(r,{...t,onVisible:()=>{t.onVisible&&(t.onVisible(),o.destroy())},onHidden:()=>{t.onHidden&&(t.onHidden(),o.destroy())}});return{destroy:()=>{o.destroy()}}}function Sa(r,t,o,n,m,f,l,u,x,v,a){const y=!!t?.relPath,T=!!t?.mode&&t?.mode==="EDIT",k=(fn.select(r.getState()),It.select(r.getState())),{enableDirectApply:g,enableSmartPaste:i,smartPastePrecomputeMode:c}=a;function h(){return!!i&&!!m&&!!(y&&T&&f)}function p(){if(!h()||!T)return!1;switch(c){case Xs.off:return!1;case Xs.visible:return l;case Xs.visibleHover:return l&&u;case Xs.on:return!0;default:return!1}}function $(U){U.dryRun&&!p()||o.text&&n&&k&&r.dispatch($n(k,n,o.text,t?.relPath,{...U,requireFileConfirmation:!y}))}const _=U=>({...U,iconName:"check",onMouseDown:M=>M.preventDefault(),onMouseOver:()=>$({dryRun:!0}),onFocus:()=>$({dryRun:!0})});let z,C;return g?(z=_({codeblockActionType:Ne.smartPaste,title:"Review changes before applying",stateTitle:{neutral:"Review changes before applying",success:"Opened",failure:"Failed to apply"},onClick:()=>{v(!0),$({})},onSuccessMessage:"Opening diff view...",buttonText:"Review"}),C=_({codeblockActionType:Ne.directApply,title:"Apply changes directly to file",stateTitle:{neutral:"Apply changes directly to file",success:"Applied",failure:"Failed to apply"},onClick:()=>{v(!0),$({instantApply:!0})},onSuccessMessage:"Applying changes directly...",buttonText:"Apply"})):z=_({codeblockActionType:Ne.smartPaste,title:"Apply changes",stateTitle:{neutral:"Apply changes",success:"Applied",failure:"Failed to apply"},onClick:()=>{v(!0),$({})},onSuccessMessage:"Opening diff view...",buttonText:"Apply"}),{smartPaste:$,canTriggerSmartPaste:h(),canPrecomputeSmartPaste:p(),smartPasteButton:z,directApplyButton:C}}function Do(r,t,o){let n,m;return n?.destroy(),n=wa(r,{onVisible:()=>t(!0),onHidden:()=>t(!1),scrollTarget:document.body,threshold:.1}),m?.destroy(),m=Pr(r,new Fr({onHoverStart:()=>o(!0),onHoverEnd:()=>{},hoverTriggerDuration:600})),()=>{n?.destroy(),m?.destroy()}}var Kl=S("<span></span>"),Jl=S('<div class="c-codeblock__buttons-container svelte-p0xryu"><!></div>'),Yl=S("<!> <!>",1),Xl=S('<div class="c-codeblock__buttons-container svelte-p0xryu"><!> <!></div>');function Ql(r,t){ie(t,!1);const o=()=>ge(se,"$requestIdModel",u),n=()=>ge(he,"$enableDirectApply",u),m=()=>ge(we,"$enableSmartPaste",u),f=()=>ge(fe,"$smartPastePrecomputeMode",u),l=()=>ge(be,"$exchange",u),[u,x]=Ce(),v=ye(),a=ye(),y=ye(),T=ye(),k=ye(),g=ye(),i=ye(),c=ye(),h=ye(),p=ye(),$=ye(),_=ye(),z=ye(),C=ye(),U=ye(),M=ye(),N=ye(),I=ye(),E=ye(),w=ye(),A=ye(),R=ye(),W=ye(),B=ye(),j=ye(),V=ye();let G=F(t,"token",8),q=F(t,"actionButtons",24,()=>{}),ee=F(t,"removeDefaultButtons",8,!1),K=F(t,"codeblockMetadata",8),Y=F(t,"height",24,()=>{}),Z=ye(void 0);const se=it("requestId"),te=It(),oe=Lt();let re=ye(void 0),ne=ye(!1),le,ve=ye(!1);as(()=>{le?.destroy()});const he=Ot("enableDirectApply"),we=Ot("enableSmartPaste"),fe=jr(),me=go(),_e=Rt(!1),be=Br(te,se);let ke=ye(),Ae=ye(!1),ze=ye(!1),xe=ye();as(()=>{e(xe)?.()});let Ee=ye();Pe(()=>o(),()=>{P(v,o())}),Pe(()=>(e(ve),e(ke)),()=>{var Se;!e(ve)&&e(ke)&&(Se=e(ke),le?.destroy(),le=$s(Se,{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>P(ve,!0)}))}),Pe(()=>(e(ve),Te(K())),()=>{e(ve)&&K()?.relPath&&async function(){K()?.relPath&&e(ve)&&!e(ne)&&(P(re,await oe.resolvePath({rootPath:"",relPath:K()?.relPath})),P(ne,!0))}()}),Pe(()=>Te(q()),()=>{P(a,q()?.find(Se=>Se.primary))}),Pe(()=>Te(K()),()=>{P(M,!!K()?.relPath)}),Pe(()=>(e(a),e(M),e(ne),e(re)),()=>{P(y,!e(a)&&e(M)&&e(ne)&&!e(re))}),Pe(()=>(l(),rs),()=>{P(w,l()?.status===rs.success)}),Pe(()=>(e(ke),e(w),Do),()=>{e(ke)&&e(w)&&P(xe,Do(e(ke),Se=>P(Ae,Se),Se=>P(ze,Se)))}),Pe(()=>(e($),e(_),e(z),e(C),e(U),Te(K()),Te(G()),e(v),e(w),e(re),e(Ae),e(ze),n(),m(),f()),()=>{var Se;Se=Sa(me.store,K(),G(),e(v),e(w),!!e(re),e(Ae),e(ze),0,Ke=>uo(_e,Ke),{enableDirectApply:n(),enableSmartPaste:m(),smartPastePrecomputeMode:f()}),P($,Se.smartPaste),P(_,Se.canTriggerSmartPaste),P(z,Se.canPrecomputeSmartPaste),P(C,Se.smartPasteButton),P(U,Se.directApplyButton)}),Pe(()=>Te(K()),()=>{P(N,fa(K()?.relPath??""))}),Pe(()=>(e(a),e(_),e(N)),()=>{P(T,!e(a)&&e(_)&&!e(N))}),Pe(()=>(e(y),e(T),e(a)),()=>{P(k,e(y)||e(T)||e(a))}),Pe(()=>e(Z),()=>{P(g,()=>e(Z)?.getContents())}),Pe(()=>(e(g),e(k)),()=>{P(i,ka(e(g),!e(k)))}),Pe(()=>(e(g),Te(K()),e(y)),()=>{P(c,ya(e(g),K(),oe,e(y)))}),Pe(()=>(e(M),e(re)),()=>{P(h,e(M)&&e(re))}),Pe(()=>Te(K()),()=>{P(I,!!K()?.mode)}),Pe(()=>(e(I),Te(K())),()=>{P(E,e(I)&&K()?.mode==="EXCERPT")}),Pe(()=>(Te(G()),e(E),Te(K()),gt),()=>{P(p,ba(G().text,e(E),K(),oe,gt()))}),Pe(()=>(e(z),e($)),()=>{e(z)&&e($)({dryRun:!0})}),Pe(()=>(e(i),e(c),e(U),e(T),e(C)),()=>{P(A,[e(i),e(c),...e(U)?[{...e(U),primary:e(T)}]:[],{...e(C),primary:!e(U)&&e(T)}])}),Pe(()=>(Te(q()),e(h),e(p),Te(ee()),e(A)),()=>{P(R,[...q()??[],...e(h)?[e(p)]:[],...ee()?[]:e(A)])}),Pe(()=>(e(W),e(B),e(R)),()=>{var Se,Ke;Se=e(R).reduce(([$e,Ue],De)=>De.primary?[[...$e,De],Ue]:[$e,[...Ue,De]],[[],[]]),Ke=Fo(Se,2),P(W,Ke[0]),P(B,Ke[1])}),Pe(()=>(Te(K()),Te(G())),()=>{P(j,K()?.language??G().lang)}),Pe(()=>e(Ee),()=>{P(V,()=>e(Ee)?.requestClose())}),co(),Zt(),Mt(Uo(r,{get token(){return G()},get language(){return e(j)},get height(){return Y()},get element(){return e(ke)},set element($e){P(ke,$e)},topBarLeft:$e=>{pr($e,{location:"topBar",children:(Ue,De)=>{var Ie=Jl(),Le=b(Ie),nt=Ze=>{{let ct=Qt(()=>(Te(Ne),Te(K()),e(p),Re(()=>({codeblockActionType:Ne.goTo,title:`Go to ${K().relPath}`,onClick:e(p).onClick,onSuccessMessage:"Opening file..."}))));gr(Ze,{get data(){return e(ct)},children:(pt,Pt)=>{vs(pt,{get filepath(){return Te(K()),Re(()=>K().relPath)},leftIcon:xt=>{var es=Kl();s(xt,es)},$$slots:{leftIcon:!0}})},$$slots:{default:!0}})}};L(Le,Ze=>{Te(K()),Re(()=>!!K()?.relPath)&&Ze(nt)}),s(Ue,Ie)},$$slots:{default:!0}})},topBarRight:$e=>{pr($e,{location:"topBar",align:"left",children:(Ue,De)=>{var Ie=Xl(),Le=b(Ie);Oe(Le,1,()=>e(W),Ye,(ct,pt)=>{gr(ct,{get data(){return e(pt)}})});var nt=O(Le,2),Ze=ct=>{Mt(Xe.Root(ct,{nested:!1,children:(pt,Pt)=>{var Ft=Yl(),xt=D(Ft);Xe.Trigger(xt,{children:(kt,Ht)=>{je(kt,{variant:"ghost-block",color:"neutral",size:1,children:(mt,tt)=>{de(mt,{name:"ellipsis-vertical"})},$$slots:{default:!0}})},$$slots:{default:!0}});var es=O(xt,2);Xe.Content(es,{side:"bottom",align:"end",children:(kt,Ht)=>{var mt=H(),tt=D(mt);Oe(tt,1,()=>e(B),Ye,(Kt,ft)=>{(function(yt,Je){ie(Je,!0);let dt,bt=d(()=>Je.data.onClick),Be=d(()=>Je.data.onSuccessMessage),ot=d(()=>Je.data.iconName),qt=d(()=>Je.data.buttonText),Jt=d(()=>Je.data.onMouseDown),Ts=d(()=>Je.data.onMouseLeave),We=d(()=>Je.data.onMouseOver),wt=d(()=>Je.data.onBlur),Ut=d(()=>Je.data.onFocus),ts=ue(void 0);function ss(){dt||(e(bt)(),P(ts,e(Be),!0),dt=setTimeout(()=>{P(ts,void 0),dt=void 0,Je.closeDropdown()},1500))}var ns=H(),Ms=D(ns);{const cs=Is=>{var xs=H(),lt=D(xs),Ys=_s=>{de(_s,{get name(){return e(ot)}})};L(lt,_s=>{e(ot)&&_s(Ys)}),s(Is,xs)};et(Ms,()=>Xe.Item,(Is,xs)=>{xs(Is,{onSelect:ss,$$events:{mouseover:lt=>e(We)?.(lt.detail),mouseleave:lt=>e(Ts)?.(lt.detail),blur:lt=>e(wt)?.(lt.detail),focus:lt=>e(Ut)?.(lt.detail),mousedown:lt=>e(Jt)?.(lt.detail)},iconLeft:cs,children:(lt,Ys)=>{var _s=X();J(()=>Q(_s,e(ts)??e(qt))),s(lt,_s)},$$slots:{iconLeft:!0,default:!0}})})}s(yt,ns),ce()})(Kt,{get data(){return e(ft)},get closeDropdown(){return e(V)}})}),s(kt,mt)},$$slots:{default:!0}}),s(pt,Ft)},$$slots:{default:!0},$$legacy:!0}),pt=>P(Ee,pt),()=>e(Ee))};L(nt,ct=>{e(B),Re(()=>e(B).length)&&ct(Ze)}),s(Ue,Ie)},$$slots:{default:!0}})},$$slots:{topBarLeft:!0,topBarRight:!0},$$legacy:!0}),$e=>P(Z,$e),()=>e(Z)),ce(),x()}var Zl=S('<div class="c-mermaid-block svelte-mbq130"><div style="position: relative"><!> <div><div class="c-mermaid-diagram svelte-mbq130"></div></div> <div><!> <!> <!> <!> <!> <!> <div class="c-mermaid-controls-container__down svelte-mbq130"><!></div></div></div></div>');function Ta(r,t){ie(t,!0);const[o,n]=Ce(),m=Lt();Hs(()=>{m?.reportWebviewClientEvent(os.chatMermaidblockInitialize)});let f=ue(!1),l=ue(!0),u=ue(!1),x=ue(void 0),v=ue(void 0),a=ue(void 0);function y(){return e(f)&&!e(l)&&!e(u)}let T=!1;function k(){P(f,!e(f)),T||(T=!0,m?.reportWebviewClientEvent(os.chatMermaidblockToggle))}function g(K){K&&(P(f,!1),P(l,!1),e(u)||m?.reportWebviewClientEvent(os.chatMermaidBlockError)),P(u,K,!0)}function i(K){e(v)&&(e(v).style.top=`${K}px`)}function c(K){P(x,K,!0),e(x).setOnPan(p),e(x).setOnZoom(p)}let h=!1;function p(){h||(m?.reportWebviewClientEvent(os.chatMermaidblockInteract),h=!0)}function $(K){P(a,K,!0)}let _=d(()=>ge(qo,"$themeStore",o)?.category);Me(()=>{t.token.raw.trim().endsWith("```")&&!e(u)&&(P(l,!1),P(f,!0))});const z=d(()=>{if(!e(u)&&!e(l)){const K=[{codeblockActionType:Ne.goTo,title:e(f)?"Show Code":"Show Diagram",onClick:k,iconName:e(f)?"braces":"network",buttonText:e(f)?"Code":"Diagram",primary:!0},{codeblockActionType:Ne.goTo,title:"Open in New Tab",onClick:()=>{m?.openMermaidDiagramPanel(t.token.text,t.title||"Mermaid Diagram")},iconName:"external-link",buttonText:"Open",onSuccessMessage:"Opened",primary:!0}];return e(f)&&K?.push({codeblockActionType:Ne.copy,title:"Copy SVG",onClick:()=>{e(a)&&$a(e(a))},iconName:"files",buttonText:"Copy SVG",onSuccessMessage:"Copied SVG"},{codeblockActionType:Ne.insert,title:"Create SVG",onClick:()=>{if(e(a)){const Y=t.codeblockMetadata?.relPath?.replace(/\.[^/.]+$/,".svg");_a(e(a),m,Y)}},iconName:"image-plus",buttonText:"Create SVG",onSuccessMessage:"Created SVG"}),K}});var C=Zl(),U=b(C),M=b(U);{let K=d(()=>e(f)?{...t.token,text:""}:t.token);Ql(M,{get token(){return e(K)},get codeblockMetadata(){return t.codeblockMetadata},get height(){return Vn},get actionButtons(){return e(z)},get removeDefaultButtons(){return e(f)}})}var N=O(M,2);let I;var E=b(N);Dt(E,(K,Y)=>Hn?.(K,Y),()=>({text:e(l)||e(u)?"":t.token.text,canRender:y,setError:g,setContainerPosition:i,setPanZoomController:c,themeCategory:e(_),setSvg:$})),Mt(N,K=>P(v,K),()=>e(v));var w=O(N,2);let A;var R=b(w);je(R,{onclick:()=>e(x)?.zoomIn(),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"zoom-in"})},$$slots:{default:!0}});var W=O(R,2);je(W,{onclick:()=>e(x)?.panBy({x:0,y:32}),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"chevron-up"})},$$slots:{default:!0}});var B=O(W,2);je(B,{onclick:()=>e(x)?.zoomOut(),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"zoom-out"})},$$slots:{default:!0}});var j=O(B,2);je(j,{onclick:()=>e(x)?.panBy({x:32,y:0}),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"chevron-left"})},$$slots:{default:!0}});var V=O(j,2);{let K=d(()=>e(x)?.reset||ys);je(V,{get onclick(){return e(K)},color:"neutral",variant:"ghost",children:(Y,Z)=>{de(Y,{name:"refresh-ccw"})},$$slots:{default:!0}})}var G=O(V,2);je(G,{onclick:()=>e(x)?.panBy({x:-32,y:0}),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"chevron-right"})},$$slots:{default:!0}});var q=O(G,2),ee=b(q);je(ee,{onclick:()=>e(x)?.panBy({x:0,y:-32}),color:"neutral",variant:"ghost",children:(K,Y)=>{de(K,{name:"chevron-down"})},$$slots:{default:!0}}),J((K,Y)=>{I=at(N,1,"c-mermaid-diagram-container svelte-mbq130",null,I,K),A=at(w,1,"c-mermaid-controls-container svelte-mbq130",null,A,Y)},[()=>({"c-mermaid-diagram-hidden":!e(f)}),()=>({"c-mermaid-diagram-hidden":!e(f)})]),s(r,C),ce(),n()}var ei=S('<span class="c-code-insert-button svelte-qm16ig"><!></span>'),ti=S('<span class="c-collapsible-button-false svelte-1bu2x6f"><!></span>');function si(r,t){ie(t,!1);let o=F(t,"primaryButton",8);const n=async()=>(o().onClick(),"success");var m={onClickForSuccessButton:n};Zt();var f=ti(),l=b(f),u=v=>{ms(v,{stickyColor:!0,size:1,onCopy:n})},x=v=>{var a=H(),y=D(a),T=g=>{ho(g,{stickyColor:!0,size:1,onOpenLocalFile:n})},k=g=>{(function(i,c){const h=Ba(c);ie(c,!1);let p=F(c,"size",8,1),$=F(c,"codeblockActionType",8),_=F(c,"variant",8,"ghost-block"),z=F(c,"color",8,"neutral"),C=F(c,"successText",24,()=>{}),U=F(c,"tooltip",8,"Insert"),M=F(c,"stickyColor",8,!1),N=F(c,"onClick",8);Zt();var I=ei(),E=b(I);{let w=Qt(()=>({neutral:U(),success:C()}));Go(E,{get defaultColor(){return z()},get size(){return p()},get variant(){return _()},loading:!1,get stickyColor(){return M()},icon:Re(()=>!h.text),get tooltip(){return e(w)},stateVariant:{success:"soft",neutral:"ghost-block",failure:"soft"},get onClick(){return N()},children:(A,R)=>{var W=H(),B=D(W);Gt(B,c,"text",{},null),s(A,W)},$$slots:{default:!0,iconLeft:(A,R)=>{var W=H(),B=D(W),j=G=>{de(G,{name:"file-plus"})},V=G=>{var q=H(),ee=D(q),K=Z=>{de(Z,{name:"file-diff"})},Y=Z=>{var se=H(),te=D(se),oe=re=>{de(re,{name:"check"})};L(te,re=>{Te($()),Te(Ne),Re(()=>$()===Ne.directApply)&&re(oe)},!0),s(Z,se)};L(ee,Z=>{Te($()),Te(Ne),Re(()=>$()===Ne.smartPaste)?Z(K):Z(Y,!1)},!0),s(G,q)};L(B,G=>{Te($()),Te(Ne),Re(()=>$()===Ne.insert)?G(j):G(V,!1)}),s(A,W)}}})}s(i,I),ce()})(g,{get codeblockActionType(){return Te(o()),Re(()=>o().codeblockActionType)},size:1,onClick:n,get successText(){return Te(o()),Re(()=>o().onSuccessMessage)}})};L(y,g=>{Te(o()),Te(Ne),Re(()=>o().codeblockActionType===Ne.goTo)?g(T):g(k,!1)},!0),s(v,a)};return L(l,v=>{Te(o()),Te(Ne),Re(()=>o().codeblockActionType===Ne.copy)?v(u):v(x,!1)}),s(r,f),Xa(t,"onClickForSuccessButton",n),ce(m)}function Ia(r,t){const o=F(t,"expanded",3,!1),n=F(t,"class",3,""),m=d(()=>o()?"up":"down");{let f=d(()=>o()?"Collapse":"Expand");zt(r,{variant:"soft",color:"neutral",size:.5,get class(){return`c-expand-button ${n()??""}`},get"aria-label"(){return e(f)},$$events:{click(...l){t.onClick?.apply(this,l)}},children:(l,u)=>{Yn(l,{get direction(){return e(m)}})},$$slots:{default:!0}})}}const oi=10;var ri=S('<div><span class="c-collapsible-icon-wrapper c-collapsible-icon-expand svelte-7kz44h"><!></span> <span class="c-collapsible-icon-wrapper svelte-7kz44h"><!></span></div>');function xa(r,t){ie(t,!0);let o=F(t,"expandable",3,!0),n=F(t,"collapsed",3,!1);{let m=d(()=>o()?n()?"Expand":"Collapse":""),f=d(()=>[is.Hover]);He(r,{get content(){return e(m)},get triggerOn(){return e(f)},children:(l,u)=>{var x=ri();let v;var a=b(x),y=b(a);Ha(y,{get collapsed(){return n()}});var T=O(a,2),k=b(T),g=i=>{var c=H(),h=D(c);Ge(h,()=>t.children),s(i,c)};L(k,i=>{t.children&&i(g)}),J(i=>v=at(x,1,"c-collapsible-icon svelte-7kz44h",null,v,i),[()=>({"is-not-expandable":!o()})]),s(l,x)},$$slots:{default:!0}})}ce()}function Bs(r,t){let o=F(t,"filepath",8),n=F(t,"start",24,()=>{}),m=F(t,"stop",24,()=>{}),f=F(t,"metric",24,()=>{}),l=F(t,"codeSnippetToLocate",24,()=>{}),u=ye();function x(v){v.stopPropagation(),v.preventDefault(),e(u).openFile()}He(r,{get content(){return`Open ${o()??""}`},class:"c-collapsible-button-false",children:(v,a)=>{vs(v,{get filepath(){return o()},growname:!1,onClick:x,size:1,rightIcon:T=>{Mt(ho(T,{get path(){return o()},get start(){return n()},get stop(){return m()},get metric(){return f()},tooltip:!1,get codeSnippetToLocate(){return l()},$$legacy:!0}),k=>P(u,k),()=>e(u))},$$slots:{rightIcon:!0}})},$$slots:{default:!0}})}var ai=S('<div class="c-codeblock__truncated-surface svelte-m8hfpi"><!></div>'),ni=S("<div><!> <!></div>"),li=S('<div class="c-codeblock__loading svelte-m8hfpi"><!></div>'),ii=S("<!> ",1),ci=S("<!> <!>",1),di=S('<div slot="header" class="c-codeblock__header-content svelte-m8hfpi"><!> <div class="c-codeblock__relpath svelte-m8hfpi"><!></div> <div class="c-codeblock__action-bar-right svelte-m8hfpi"><!> <!></div></div>'),ui=S("<div><!></div>");function vi(r,t){ie(t,!0);const o=()=>ge(g,"$enableSmartPaste",m),n=()=>ge(i,"$enableDirectApply",m),[m,f]=Ce();let l=F(t,"collapsed",3,!1),u=F(t,"lineHeight",19,()=>_o.lineHeight??18),x=F(t,"truncateLines",3,10),v=F(t,"defaultActionButtons",31,()=>Qe([Ne.smartPaste,Ne.copy,Ne.insert,Ne.goTo]));const a=it("requestId"),y=it("requestStatus"),T=Lt(),k=it(fs.key),g=Ot("enableSmartPaste"),i=Ot("enableDirectApply"),c=jr();let h=ue(!1),p=ue(!1),$=ue(void 0),_=ue(!1),z=ue(!1),C=ue(void 0);const U=me=>uo(M,me),M=Rt(!1);let N=ue(!1),I=!1,E=ue(void 0),w=ue(void 0);as(()=>{e(C)?.(),e(E)?.disconnect(),P(E,void 0)});let A=d(()=>ge(a,"$requestIdModel",m)),R=d(()=>ge(y,"$requestStatusModel",m)),W=d(()=>!!k?.isActive);Me(()=>{e(W)&&v([Ne.copy])});let B=d(()=>t.codeblockMetadata?.mode==="EXCERPT");Me(()=>{t.codeblockMetadata?.relPath&&async function(){P(p,!0),t.codeblockMetadata?.relPath&&P(h,!!await T.resolvePath({rootPath:"",relPath:t.codeblockMetadata?.relPath}))}()});let j=d(()=>e(R)===rs.success),V=d(()=>e(R)===rs.sent),G=d(()=>!t.token.raw.trimEnd().endsWith("```"));Me(()=>{e($)&&e(j)&&o()&&P(C,Do(e($),me=>P(_,me,!0),me=>P(z,me,!0)),!0)});let q=d(()=>Sa(go().store,t.codeblockMetadata,t.token,e(A),e(j),e(h),e(_),e(z),0,U,{enableDirectApply:n(),enableSmartPaste:o(),smartPastePrecomputeMode:ge(c,"$smartPastePrecomputeMode",m)})),ee=d(()=>e(q).smartPaste),K=d(()=>e(q).canTriggerSmartPaste),Y=d(()=>e(q).canPrecomputeSmartPaste),Z=d(()=>e(q).smartPasteButton),se=d(()=>e(q).directApplyButton),te=d(()=>function(me,_e,be,ke=!1){const Ae=!!me?.relPath,ze=Ae&&fa(me?.relPath??"");return ke&&_e&&!ze?Ne.directApply:_e&&!ze?Ne.smartPaste:Ae&&be?Ne.insert:Ne.copy}(t.codeblockMetadata,e(K),e(p)&&!e(h),!!n()&&!!e(se))),oe=d(()=>ba(t.token.text,e(B),t.codeblockMetadata,T,gt())),re=d(()=>ka(()=>t.token.text)),ne=d(()=>ya(()=>t.token.text,t.codeblockMetadata,T));Me(()=>{e(Y)&&e(ee)({dryRun:!0})});let le=d(()=>({[Ne.smartPaste]:{...e(Z),disabled:e(V)},...n()&&e(se)&&!e(W)?{[Ne.directApply]:{...e(se),disabled:e(V)}}:{},[Ne.copy]:{...e(re),disabled:e(G)&&e(V)},[Ne.insert]:{...e(ne),disabled:e(G)&&e(V)},[Ne.goTo]:{...e(oe)}})),ve=d(()=>e(le)[e(te)]),he=d(()=>n()&&e(se)?[Ne.directApply,...v()]:v()),we=d(()=>e(he).map(me=>e(le)[me]).filter(me=>me!==void 0)),fe=d(()=>e(we).filter(me=>me.codeblockActionType!==e(te)));Me(()=>{e(w)&&!e(E)&&(P(E,new ResizeObserver(me=>{if(!e(N)&&t.codeblockMetadata?.relPath){const _e=me[0].contentRect.height;P(N,_e>x()*u())}}),!0),e(E).observe(e(w)))});{let me=d(()=>e(V)?e(we):e(fe));(function(_e,be){ie(be,!1);const ke=()=>ge(qo,"$themeStore",Ae),[Ae,ze]=Ce(),xe=ye(),Ee=ye(),Se=ye(),Ke=ye();let $e=F(be,"token",8),Ue=F(be,"codeblockMetadata",8),De=F(be,"collapsed",12,!0),Ie=F(be,"element",28,()=>{}),Le=ye(),nt=F(be,"lineHeight",24,()=>_o.lineHeight??18),Ze=F(be,"truncateLines",8,10),ct=F(be,"requestStatus",8),pt=F(be,"primaryButton",8),Pt=F(be,"buttons",8),Ft=F(be,"truncate",12,!1),xt=F(be,"opened",12,!1),es=F(be,"codeContainerElement",28,()=>{});Pe(()=>ke(),()=>{P(xe,ke()?.category)}),Pe(()=>Te(Ue()),()=>{P(Ee,Kn(Ue()?.relPath??""))}),Pe(()=>(Te(Ue()),Te($e())),()=>{P(Se,Ue()?.language||$e().lang)}),Pe(()=>(Te(ct()),rs),()=>{P(Ke,ct()===rs.sent)}),co(),Zt();var kt=ui();let Ht;var mt=b(kt);vo(mt,{get stickyHeaderTop(){return oi},stickyHeader:!0,toggleHeader:!0,expandable:!0,class:"c-codeblock__container",get isHeaderStuck(){return e(Le)},set isHeaderStuck(tt){P(Le,tt)},get collapsed(){return De()},set collapsed(tt){De(tt)},children:(tt,Kt)=>{var ft=ni();let yt;var Je=b(ft);Gt(Je,be,"default",{},Be=>{{let ot=Qt(()=>(e(Se),Te($e()),Re(()=>e(Se)||$e().lang)));Bo(Be,{get options(){return _o},get text(){return Te($e()),Re(()=>$e().text)},get lang(){return e(ot)}})}});var dt=O(Je,2),bt=Be=>{var ot=ai();Ia(b(ot),{expanded:!1,onClick:()=>{Ft(!1),xt(!0)}}),s(Be,ot)};L(dt,Be=>{Ft()&&Be(bt)}),Mt(ft,Be=>es(Be),()=>es()),J(Be=>yt=at(ft,1,"c-codeblock__container-inner svelte-m8hfpi",null,yt,Be),[()=>({"c-codeblock__truncated":Ft()})]),s(tt,ft)},$$slots:{default:!0,header:(tt,Kt)=>{var ft=di(),yt=b(ft);xa(yt,{get collapsed(){return De()},expandable:!0,children:(We,wt)=>{Vo(We,{get language(){return e(Se)},get filename(){return e(Ee)},class:"c-icon-file-path__lang-icon"})},$$slots:{default:!0}});var Je=O(yt,2),dt=b(Je),bt=We=>{Bs(We,{get filepath(){return e(Ee)},get metric(){return Te(os),Re(()=>os.chatCodeblockGoToFile)},get codeSnippetToLocate(){return Te($e()),Re(()=>$e().text)}})};L(dt,We=>{Te(Ue()),Re(()=>Ue()?.relPath)&&We(bt)});var Be=O(Je,2),ot=b(Be),qt=We=>{var wt=li(),Ut=b(wt);Ss(Ut,{size:1}),s(We,wt)},Jt=We=>{si(We,{get primaryButton(){return pt()}})};L(ot,We=>{e(Ke)?We(qt):We(Jt,!1)});var Ts=O(ot,2);Xe.Root(Ts,{nested:!1,children:(We,wt)=>{var Ut=ci(),ts=D(Ut);Xe.Trigger(ts,{children:(ns,Ms)=>{je(ns,{variant:"ghost-block",color:"neutral",size:1,"data-collapsible-button":"false",children:(cs,Is)=>{de(cs,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}});var ss=O(ts,2);Xe.Content(ss,{size:1,side:"bottom",align:"end",children:(ns,Ms)=>{var cs=H(),Is=D(cs);Oe(Is,1,Pt,Ye,(xs,lt)=>{Xe.Item(xs,{get onSelect(){return e(lt),Re(()=>e(lt).onClick)},get disabled(){return e(lt),Re(()=>e(lt).disabled)},children:(Ys,_s)=>{var Xo=ii(),Qo=D(Xo),Oa=fo=>{de(fo,{slot:"iconLeft",get name(){return e(lt),Re(()=>e(lt).iconName)}})};L(Qo,fo=>{e(lt),Re(()=>e(lt).iconName)&&fo(Oa)});var Pa=O(Qo);J(()=>Q(Pa,` ${e(lt),Re(()=>e(lt).buttonText)??""}`)),s(Ys,Xo)},$$slots:{default:!0}})}),s(ns,cs)},$$slots:{default:!0}}),s(We,Ut)},$$slots:{default:!0}}),s(tt,ft)}},$$legacy:!0}),Mt(kt,tt=>Ie(tt),()=>Ie()),J(tt=>{Ht=at(kt,1,`c-codeblock c-codeblock__${e(xe)}`,"svelte-m8hfpi",Ht,tt),Ks(kt,`--codeblock-line-height: ${nt()}px; --codeblock-truncate-lines: ${Ze()};`)},[()=>({"is-sticky":e(Le)})]),s(_e,kt),ce(),ze()})(r,{get truncate(){return e(N)},opened:I,get token(){return t.token},get codeblockMetadata(){return t.codeblockMetadata},get collapsed(){return l()},get lineHeight(){return u()},get truncateLines(){return x()},get requestStatus(){return e(R)},get primaryButton(){return e(ve)},get buttons(){return e(me)},get element(){return e($)},set element(_e){P($,_e,!0)},get codeContainerElement(){return e(w)},set codeContainerElement(_e){P(w,_e,!0)}})}ce(),f()}function hr(r,t){ie(t,!0);let o=d(()=>function(v){const a=v.indexOf(`
`);if(a!==-1)return v.slice(0,a)}(t.token.raw)),n=d(()=>e(o)?function(v){const a=/^`{3,}(\w+)?/.exec(v),y=a?.[1]??null;if(!a)return{language:null,relPath:null,mode:null};const T=v.slice(a[0].length);let k=null;const g=" path=",i=T.indexOf(g);if(i!==-1){const p=T.slice(i+6),$=p.indexOf(" mode=");k=($!==-1?p.slice(0,$):p).trim()}let c=null;const h=T.indexOf(" mode=");return h!==-1&&(c=T.slice(h+6).trim()),{language:y,relPath:k,mode:c}}(e(o)):void 0),m=d(()=>e(n)?.language??t.token.lang);var f=H(),l=D(f),u=v=>{Ta(v,{get token(){return t.token},get codeblockMetadata(){return e(n)}})},x=v=>{vi(v,{get token(){return t.token},get codeblockMetadata(){return e(n)}})};L(l,v=>{e(m)==="mermaid"?v(u):v(x,!1)}),s(r,f),ce()}function pi(r){return r!==void 0}var Ls=(r=>(r.directory="Directory",r.file="File",r.other="Other",r))(Ls||{}),gi=S('<span class="c-chat-codespan__content svelte-12i2pat" role="button" tabindex="0"><!> <!></span>'),hi=S("<div><!></div>");function mr(r,t){let o=F(t,"token",8),n=F(t,"linkable",8),m=F(t,"element",28,()=>{});var f=hi();let l;var u=b(f);Or(u,{get token(){return o()},get element(){return m()},set element(x){m(x)},children:(x,v)=>{var a=gi(),y=b(a);Gt(y,t,"icon",{},null);var T=O(y,2);Gt(T,t,"default",{},null),$t("click",a,function(k){Qs.call(this,t,k)}),$t("keydown",a,function(k){Qs.call(this,t,k)}),$t("cut",a,function(k){Qs.call(this,t,k)}),$t("paste",a,function(k){Qs.call(this,t,k)}),s(x,a)},$$slots:{default:!0},$$legacy:!0}),J(x=>l=at(f,1,"c-chat-codespan svelte-12i2pat",null,l,x),[()=>({"c-chat-codespan--linkable":n()})]),s(r,f)}var mi=S("<!> ",1);function fr(r,t){ie(t,!1);const o=()=>ge(g,"$currentExchange",n),[n,m]=Ce(),f=ye(),l=ye();let u=F(t,"token",8);const x=it("requestId"),v=Lt(),a=It(),y=gt(),T=E=>{e(f)&&(v.reportWebviewClientEvent(os.chatCodespanGoToFile),y(Ns(E)))},k=E=>{v.reportWebviewClientEvent(os.chatCodespanGoToSymbol),y(Ns(E))},g=Br(a,x);function i(){return(o()?.workspace_file_chunks?.map(E=>E.file)??[]).filter(pi).map(E=>({repoRoot:E.repoRoot,pathName:E.pathName}))}let c=ye(void 0),h=ye(void 0);async function p(E){const w=await v.resolveSymbols(E,{files:i()})??[];return E===e(l)&&P(h,w),w}const $=Lr(async E=>{E.length<=1||i().length===0||(async function(w){const A=await v.resolvePath?.({rootPath:"",relPath:w},{files:i()});w===e(l)&&P(c,A)}(E),p(E))},500,{leading:!1,trailing:!0});let _,z=ye(!1),C=ye();as(()=>{_?.destroy()}),Pe(()=>(e(c),e(h)),()=>{P(f,e(c)!==void 0&&(e(c).fileType===void 0||e(c).fileType===Ls.file)||e(h)!==void 0&&e(h).length>0)}),Pe(()=>Te(u()),()=>{P(l,u().raw.slice(1,u().raw.length-1))}),Pe(()=>(e(z),e(l)),()=>{e(z)&&$(e(l))}),Pe(()=>(e(z),e(C)),()=>{var E;!e(z)&&e(C)&&(E=e(C),_?.destroy(),_=$s(E,{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>P(z,!0)}))}),co(),Zt();var U=H(),M=D(U),N=E=>{const w=Qt(()=>e(c));var A=d(()=>St("Enter",()=>T(e(w))));mr(E,{get linkable(){return e(f)},get token(){return u()},get element(){return e(C)},set element(R){P(C,R)},$$events:{click:()=>T(e(w)),keydown(...R){e(A)?.apply(this,R)},cut:()=>navigator.clipboard.writeText(e(l)),paste:R=>R.preventDefault()},children:(R,W)=>{var B=X();J(()=>Q(B,e(l))),s(R,B)},$$slots:{default:!0,icon:(R,W)=>{var B=H(),j=D(B),V=q=>{de(q,{name:"file"})},G=q=>{var ee=H(),K=D(ee),Y=Z=>{de(Z,{name:"folder-open"})};L(K,Z=>{Te(e(w)),Te(Ls),Re(()=>e(w).fileType===Ls.directory)&&Z(Y)},!0),s(q,ee)};L(j,q=>{Te(e(w)),Te(Ls),Re(()=>e(w).fileType===Ls.file)?q(V):q(G,!1)}),s(R,B)}},$$legacy:!0})},I=E=>{var w=H(),A=D(w),R=B=>{const j=Qt(()=>(e(h),Re(()=>e(h)[0])));var V=d(()=>St("Enter",()=>k(e(j).file)));mr(B,{get linkable(){return e(f)},get token(){return u()},$$events:{click:async()=>{const G=await p(e(l)),q=G&&G.length>0?G[0]:e(j);k(q.file)},keydown(...G){e(V)?.apply(this,G)},cut:()=>navigator.clipboard.writeText(e(l)),paste:G=>G.preventDefault()},children:(G,q)=>{var ee=mi(),K=D(ee);de(K,{name:"braces"});var Y=O(K);J(()=>Q(Y,` ${e(l)??""}`)),s(G,ee)},$$slots:{default:!0}})},W=B=>{Or(B,{get token(){return u()},get element(){return e(C)},set element(j){P(C,j)},children:(j,V)=>{var G=X();J(()=>Q(G,e(l))),s(j,G)},$$slots:{default:!0},$$legacy:!0})};L(A,B=>{e(h),Re(()=>e(h)!==void 0&&e(h).length>0)?B(R):B(W,!1)},!0),s(E,w)};L(M,E=>{e(c)!==void 0?E(N):E(I,!1)}),s(r,U),ce(),m()}var fi=S('<a class="markdown-active-link svelte-1ip4w5g"><span class="markdown-base-link svelte-1ip4w5g"><!></span></a>'),$i=S('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),_i=S('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),ki=S('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!></span></span>'),yi=S('<span class="markdown-base-link svelte-1ip4w5g"><!></span>'),bi=S('<span class="markdown-base-link svelte-1ip4w5g"><!></span>'),wi=S('<span class="markdown-base-link svelte-1ip4w5g"><!></span>');function $r(r,t){ie(t,!1);let o=F(t,"token",8);const n=gt(),m=Lt(),f=k=>{n(Ns(k))},l=k=>{qs.postMessage({type:Ws.augmentLink,data:k})},u=k=>{qs.postMessage({type:Ws.executeCommand,data:k})};let x=o().text.replace(/`/g,"");Zt();var v=H(),a=D(v),y=k=>{var g=fi(),i=b(g),c=b(i);Gt(c,t,"default",{},h=>{var p=X();J(()=>Q(p,x)),s(h,p)}),J(()=>{Nt(g,"href",(Te(o()),Re(()=>o().href))),Nt(g,"title",(Te(o()),Re(()=>o().title)))}),s(k,g)},T=k=>{var g=H(),i=D(g),c=p=>{var $=$i(),_=d(()=>St("Enter",()=>l(o().href))),z=b($),C=b(z);Gt(C,t,"default",{},U=>{var M=X();J(()=>Q(M,x)),s(U,M)}),$t("click",$,()=>l(o().href)),$t("keydown",$,function(...U){e(_)?.apply(this,U)}),$t("cut",$,()=>navigator.clipboard.writeText(x)),$t("paste",$,U=>U.preventDefault()),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=_i(),N=d(()=>St("Enter",()=>u(o().href.substring(8)))),I=b(M),E=b(I);Gt(E,t,"default",{},w=>{var A=X();J(()=>Q(A,x)),s(w,A)}),$t("click",M,()=>u(o().href.substring(8))),$t("keydown",M,function(...w){e(N)?.apply(this,w)}),$t("cut",M,()=>navigator.clipboard.writeText(x)),$t("paste",M,w=>w.preventDefault()),s(U,M)},C=U=>{var M=H(),N=D(M);ea(N,()=>(Te(o()),Re(()=>m.resolvePath?.({rootPath:"",relPath:o().href}))),I=>{var E=wi(),w=b(E);Gt(w,t,"default",{},A=>{var R=X();J(()=>Q(R,x)),s(A,R)}),s(I,E)},(I,E)=>{var w=H(),A=D(w),R=B=>{var j=ki(),V=d(()=>St("Enter",()=>f(e(E)))),G=b(j),q=b(G);Gt(q,t,"default",{},ee=>{var K=X();J(()=>Q(K,x)),s(ee,K)}),$t("click",j,()=>f(e(E))),$t("keydown",j,function(...ee){e(V)?.apply(this,ee)}),$t("cut",j,()=>navigator.clipboard.writeText(x)),$t("paste",j,ee=>ee.preventDefault()),s(B,j)},W=B=>{var j=yi(),V=b(j);Gt(V,t,"default",{},G=>{var q=X();J(()=>Q(q,x)),s(G,q)}),s(B,j)};L(A,B=>{e(E)?B(R):B(W,!1)}),s(I,w)},I=>{var E=bi(),w=b(E);Gt(w,t,"default",{},A=>{var R=X();J(()=>Q(R,x)),s(A,R)}),s(I,E)}),s(U,M)};L(_,U=>{Te(o()),Re(()=>/^command:/.test(o().href))?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{Te(o()),Re(()=>/^augment:\/\//.test(o().href))?p(c):p(h,!1)},!0),s(k,g)};L(a,k=>{Te(o()),Re(()=>/^https?:\/\//.test(o().href))?k(y):k(T,!1)}),s(r,v),ce()}var Si=S('<div class="c-thinking__title svelte-1dba5s8"> </div>'),Ti=S("<span>Thinking</span>"),Ii=S("<!> <!>",1),xi=S('<details class="c-thinking__details svelte-1dba5s8"><summary class="c-thinking__summary svelte-1dba5s8"><!></summary> <div class="c-thinking__row svelte-1dba5s8"><div class="c-thinking__vr svelte-1dba5s8"><!></div> <div class="c-thinking__content svelte-1dba5s8"><!></div></div></details>'),Ui=S('<div class="c-thinking__summary svelte-1dba5s8"><!></div>'),Ci=S('<div class="c-thinking svelte-1dba5s8"><!></div>'),Ai=S('<div class="c-thinking-container hidden-when-empty"></div>');function _r(r){r.scrollIntoView({block:"nearest",behavior:"smooth"})}var Ei=S('<div class="c-bugreport-form svelte-helebu"><!> <div><!> <!></div> <div class="l-bugreport__send svelte-helebu"><!> <div class="l-bugreport__send-btns svelte-helebu"><!></div></div></div>'),zi=S('<div class="c-bugreport-form-container"><!></div>'),Li=S('<div class="c-feedback-form svelte-1q34grt"><!> <div class="l-feedback__send svelte-1q34grt"><!> <div class="l-feedback__send-btns svelte-1q34grt"><!></div></div></div>'),Ni=S('<div class="c-feedback-form-container svelte-1q34grt"><!></div>');function bs(r,t){ie(t,!1);let o,n=F(t,"iconName",24,()=>{}),m=F(t,"idleLabel",8),f=F(t,"successLabel",8),l=F(t,"onSelect",24,()=>{}),u=F(t,"successDuration",8,500),x=F(t,"disabled",8,!1),v=ye(void 0);as(()=>{clearTimeout(o)}),Zt(),Xe.Item(r,{get color(){return e(v)},onSelect:async function(){try{await l()?.(),P(v,"success"),clearTimeout(o),o=setTimeout(()=>{P(v,void 0)},u())}catch{P(v,"error"),o=setTimeout(()=>{P(v,void 0)},u())}},get disabled(){return x()},children:(a,y)=>{var T=H(),k=D(T),g=c=>{var h=X("Action failed");s(c,h)},i=c=>{var h=H(),p=D(h),$=z=>{var C=X();J(()=>Q(C,f())),s(z,C)},_=z=>{var C=X();J(()=>Q(C,m())),s(z,C)};L(p,z=>{e(v)==="success"?z($):z(_,!1)},!0),s(c,h)};L(k,c=>{e(v)==="error"?c(g):c(i,!1)}),s(a,T)},$$slots:{default:!0,iconLeft:(a,y)=>{var T=H(),k=D(T),g=i=>{de(i,{size:1,get name(){return n()}})};L(k,i=>{n()&&i(g)}),s(a,T)}}}),ce()}var Ri=S('<div class="c-feedback__thankyou"><!></div>'),Mi=S("<!> <!>",1),Di=S("<!> <!> <!> <!> <!> <!> <!> <!>",1),Oi=S("<!> <!>",1),Pi=S('<!> <div class="c-feedback-panel svelte-j9wesd"><div class="c-feedback__ratings svelte-j9wesd"><!> <div class="c-feedback__buttons svelte-j9wesd"><!> <!> <!></div></div> <!> <!></div>',1);function Fi(r,t){ie(t,!0);const o=()=>ge($,"$currentConversation",f),n=()=>ge(g,"$feedbackRating",f),m=()=>ge(k,"$currentConversationId",f),[f,l]=Ce(),u="augment-marketplace-review-clicked",x="none",v="bugreport",a="feedback",y="none",T="bugreport",k=It(),g=kn(t.requestId,t.chatMode),i=it(fs.key);let c=ue(Qe(x)),h=ue(Qe(y));const p=gt(),$=yn(),_=$e=>({get:()=>e(c)===$e,set:Ue=>{Ue?(P(c,$e,!0),P(h,y,!0)):P(c,x,!0)}}),z=Ot("enableConversationDebugUtils");let C=d(()=>z&&!i?.isActive),U=d(()=>o()?.extraData?.isForked&&!i?.isActive);const M=_(v),N=_(a),I=()=>{P(c,x,!0)};function E($e,Ue=""){$e===n()&&$e!==rt.unset?p(or(t.requestId,rt.unset,Ue,t.chatMode)):p(or(t.requestId,$e,Ue,t.chatMode))}function w($e){$e==="dislike"?p(Wt(jt.WEBVIEW.NEGATIVE_FEEDBACK_REPORT_BUTTON,{})):$e==="menu"&&p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Report an Issue"})),M.set(!0)}function A(){p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Leave a Review"})),I(),function(){try{localStorage.setItem(u,"true")}catch{}}(),qs.postMessage({type:Ws.augmentLink,data:e(se)})}function R(){return p(Wt(jt.WEBVIEW.POSITIVE_FEEDBACK_BUTTON,{action:n()===rt.positive?"unset":"set"})),E(rt.positive)}function W(){return p(Wt(jt.WEBVIEW.NEGATIVE_FEEDBACK_BUTTON,{action:n()===rt.negative?"unset":"set"})),n()!==rt.negative?(P(h,T,!0),P(te,!0),P(oe,"dislike")):(P(h,y,!0),P(te,!1),P(oe,"none")),E(rt.negative)}async function B($e){I(),E(rt.negative,$e),K(rt.negative)}async function j($e){I(),E(rt.unset,$e),K(rt.unset)}as(()=>{V&&clearTimeout(V)});let V,G=ue("");const q="Thanks for the feedback!",ee="Your issue was reported!";function K($e){P(G,$e===rt.negative?ee:q,!0),clearTimeout(V),V=setTimeout(()=>{P(G,"")},3e3)}const Y=d(()=>n()===rt.positive),Z=d(()=>n()===rt.negative),se=d(()=>Mr()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews");let te=ue(!1),oe=ue("none");function re($e){if(P(te,$e,!0),!$e)return P(oe,"none"),void P(h,y,!0);e(oe)==="more"&&P(h,y,!0)}var ne=Pi(),le=D(ne);bn(le,{sagaName:"saveFeedback"});var ve=O(le,2),he=b(ve),we=b(he),fe=$e=>{var Ue=Ri(),De=b(Ue);ae(De,{size:1,weight:"regular",color:"secondary",children:(Ie,Le)=>{var nt=X();J(()=>Q(nt,e(G))),s(Ie,nt)},$$slots:{default:!0}}),ps(3,Ue,()=>Wo,()=>({duration:300})),s($e,Ue)};L(we,$e=>{e(G)&&$e(fe)});var me=O(we,2),_e=b(me),be=d(()=>St("Enter",R));{let $e=d(()=>"c-feedback__positive "+(e(Y)?"c-feedback--selected":"")),Ue=d(()=>e(Y)?"soft":"ghost-block"),De=d(()=>e(Y)?"success":"neutral");je(_e,{get class(){return e($e)},title:"Feedback Positive",get variant(){return e(Ue)},size:1,get color(){return e(De)},$$events:{keyup(...Ie){e(be)?.apply(this,Ie)},click:R},children:(Ie,Le)=>{de(Ie,{name:"thumbs-up",size:1})},$$slots:{default:!0}})}var ke=O(_e,2),Ae=d(()=>St("Enter",W));{let $e=d(()=>"c-feedback__negative "+(e(Z)?"c-feedback--selected":"")),Ue=d(()=>e(Z)?"soft":"ghost-block"),De=d(()=>e(Z)?"error":"neutral");je(ke,{get class(){return e($e)},title:"Feedback Negative",get variant(){return e(Ue)},size:1,get color(){return e(De)},$$events:{keyup(...Ie){e(Ae)?.apply(this,Ie)},click:W},children:(Ie,Le)=>{de(Ie,{name:"thumbs-down",size:1})},$$slots:{default:!0}})}var ze=O(ke,2);et(ze,()=>Xe.Root,($e,Ue)=>{Ue($e,{get open(){return e(te)},onOpenChange:re,nested:!1,children:(De,Ie)=>{var Le=Oi(),nt=D(Le);et(nt,()=>Xe.Trigger,(ct,pt)=>{pt(ct,{children:(Pt,Ft)=>{je(Pt,{variant:"ghost-block",size:1,title:"More",$$events:{click:()=>{e(te)||p(Wt(jt.WEBVIEW.VIEW_MESSAGE_OPTIONS,{})),P(oe,"more"),P(h,y,!0),P(te,!e(te))}},children:(xt,es)=>{de(xt,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ze=O(nt,2);et(Ze,()=>Xe.Content,(ct,pt)=>{pt(ct,{size:1,side:"bottom",align:"start",children:(Pt,Ft)=>{var xt=H(),es=D(xt),kt=mt=>{var tt=H(),Kt=D(tt);et(Kt,()=>Xe.Item,(ft,yt)=>{yt(ft,{onSelect:()=>{w("dislike"),P(te,!1),P(h,y,!0)},children:(Je,dt)=>{var bt=X("Report an Issue");s(Je,bt)},$$slots:{default:!0}})}),s(mt,tt)},Ht=mt=>{const tt=d(()=>t.getResponseText());var Kt=Di(),ft=D(Kt);bs(ft,{iconName:"share-2",idleLabel:"Share",successLabel:"Copied link",onSelect:async()=>{p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Share"})),m()&&p(Gr(m()))}});var yt=O(ft,2),Je=We=>{bs(We,{iconName:"copy",idleLabel:"Copy Response",successLabel:"Copied Response",onSelect:async()=>{p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Copy Response"})),await navigator.clipboard.writeText(e(tt)||"")}})};L(yt,We=>{e(tt)&&We(Je)});var dt=O(yt,2);bs(dt,{iconName:"clipboard",idleLabel:"Copy Request ID",successLabel:"Copied Request ID",onSelect:async()=>{p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Copy Request ID"})),await navigator.clipboard.writeText(t.requestId)}});var bt=O(dt,2),Be=We=>{var wt=Mi(),Ut=D(wt);bs(Ut,{iconName:"git-branch-plus",idleLabel:"Fork Conversation",successLabel:"Forking Conversation",onSelect:async()=>{p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Fork Conversation"})),m()&&p(wn(m(),{preserveContext:!0,switchToForked:!0,forkFromExchangeId:t.requestId}))}});var ts=O(Ut,2),ss=ns=>{bs(ns,{iconName:"arrow-left",idleLabel:"Go to Parent Conversation",successLabel:"Going to Parent Conversation",onSelect:async()=>{if(p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Go to Parent Conversation"})),!o())return;const Ms=o().extraData,cs=Ms?.forkedFrom?.conversationId;cs&&p(Sn(cs,{}))}})};L(ts,ns=>{e(U)&&ns(ss)}),s(We,wt)};L(bt,We=>{e(C)&&We(Be)});var ot=O(bt,2);et(ot,()=>Xe.Separator,(We,wt)=>{wt(We,{})});var qt=O(ot,2);et(qt,()=>Xe.Item,(We,wt)=>{wt(We,{onSelect:()=>{w("menu"),P(te,!1),P(h,y,!0)},children:(Ut,ts)=>{var ss=X("Report an Issue");s(Ut,ss)},$$slots:{default:!0}})});var Jt=O(qt,2);et(Jt,()=>Xe.Item,(We,wt)=>{wt(We,{onSelect:()=>{p(Wt(jt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Give Feedback"})),N.set(!0),P(te,!1)},children:(Ut,ts)=>{var ss=X("Give Feedback");s(Ut,ss)},$$slots:{default:!0}})});var Ts=O(Jt,2);et(Ts,()=>Xe.Item,(We,wt)=>{wt(We,{onSelect:()=>{A()},children:(Ut,ts)=>{var ss=X("Leave a Review");s(Ut,ss)},$$slots:{default:!0}})}),s(mt,Kt)};L(es,mt=>{e(h)===T?mt(kt):mt(Ht,!1)}),s(Pt,xt)},$$slots:{default:!0}})}),s(De,Le)},$$slots:{default:!0}})});var xe=O(he,2),Ee=$e=>{var Ue=M.get,De=M.set;(function(Ie,Le){ie(Le,!0);let nt=F(Le,"showBugreportForm",15,!1),Ze=Qe({explanation:"",stepsToReproduce:""});function ct(){Le.onSubmit(`
Explanation: ${Ze.explanation}
Steps to reproduce: ${Ze.stepsToReproduce}
`)}function pt(){nt(!1)}var Pt=zi(),Ft=b(Pt);Xt(Ft,{size:0,variant:"surface",children:(xt,es)=>{var kt=Ei(),Ht=b(kt);Fs(Ht,{name:"explanation",rows:3,placeholder:"Explanation of the time issue was encountered here...",color:"neutral",variant:"soft",label:"Report an issue*",required:!0,focus:!0,get value(){return Ze.explanation},set value(ot){Ze.explanation=ot},topRightAction:ot=>{var qt=d(()=>St("Enter",pt));je(ot,{title:"Cancel",variant:"ghost-block",color:"neutral",size:.5,$$events:{keyup(...Jt){e(qt)?.apply(this,Jt)},click:pt},children:(Jt,Ts)=>{de(Jt,{name:"x"})},$$slots:{default:!0}})},$$slots:{topRightAction:!0}});var mt=O(Ht,2),tt=b(mt);Fs(tt,{name:"stepsToReproduce",rows:3,placeholder:"Steps to reproduce the issue...",color:"neutral",variant:"soft",label:"How to reproduce*",required:!0,get value(){return Ze.stepsToReproduce},set value(Be){Ze.stepsToReproduce=Be}});var Kt=O(tt,2);ae(Kt,{size:0,weight:"light",color:"secondary",children:(Be,ot)=>{var qt=X("* required fields");s(Be,qt)},$$slots:{default:!0}});var ft=O(mt,2),yt=b(ft);ms(yt,{get text(){return Le.requestId},tooltip:"Copy request ID",textSnippet:ot=>{var qt=X("Request ID");s(ot,qt)},$$slots:{textSnippet:!0}});var Je=O(yt,2),dt=b(Je),bt=d(()=>St("Enter",ct));{let Be=d(()=>Ze.explanation.trim().length===0||Ze.stepsToReproduce.trim().length===0);zt(dt,{type:"submit",title:"Share ",color:"accent",get disabled(){return e(Be)},size:1,$$events:{keyup(...ot){e(bt)?.apply(this,ot)},click:ct},children:(ot,qt)=>{var Jt=X("Submit");s(ot,Jt)},$$slots:{default:!0}})}Dt(ft,Be=>_r?.(Be)),s(xt,kt)},$$slots:{default:!0}}),s(Ie,Pt),ce()})($e,{get showBugreportForm(){return Ue()},set showBugreportForm(Ie){De(Ie)},get requestId(){return t.requestId},onSubmit:B})};L(xe,$e=>{M.get()&&$e(Ee)});var Se=O(xe,2),Ke=$e=>{var Ue=N.get,De=N.set;(function(Ie,Le){ie(Le,!0);let nt=F(Le,"showFeedbackForm",15,!1),Ze=ue("");function ct(){Le.onSubmit(`
Feedback: ${e(Ze)}
`)}function pt(){nt(!1)}var Pt=Ni(),Ft=b(Pt);Xt(Ft,{size:0,variant:"surface",children:(xt,es)=>{var kt=Li(),Ht=b(kt);Fs(Ht,{name:"explanation",rows:3,placeholder:"Tell us what you think of Augment...",color:"neutral",variant:"soft",label:"Give Feedback",required:!0,focus:!0,get value(){return e(Ze)},set value(dt){P(Ze,dt,!0)},topRightAction:dt=>{var bt=d(()=>St("Enter",pt));je(dt,{title:"Cancel",variant:"ghost-block",color:"neutral",size:.5,$$events:{keyup(...Be){e(bt)?.apply(this,Be)},click:pt},children:(Be,ot)=>{de(Be,{name:"x"})},$$slots:{default:!0}})},$$slots:{topRightAction:!0}});var mt=O(Ht,2),tt=b(mt);ms(tt,{get text(){return Le.requestId},tooltip:"Copy request ID",iconName:"clipboard",textSnippet:dt=>{var bt=X("Request ID");s(dt,bt)},$$slots:{textSnippet:!0}});var Kt=O(tt,2),ft=b(Kt),yt=d(()=>St("Enter",ct));{let Je=d(()=>e(Ze).trim().length===0);zt(ft,{type:"submit",title:"Share ",color:"accent",get disabled(){return e(Je)},size:1,$$events:{keyup(...dt){e(yt)?.apply(this,dt)},click:ct},children:(dt,bt)=>{var Be=X("Submit");s(dt,Be)},$$slots:{default:!0}})}Dt(mt,Je=>_r?.(Je)),s(xt,kt)},$$slots:{default:!0}}),s(Ie,Pt),ce()})($e,{get showFeedbackForm(){return Ue()},set showFeedbackForm(Ie){De(Ie)},get requestId(){return t.requestId},onSubmit:j})};L(Se,$e=>{N.get()&&$e(Ke)}),s(r,ne),ce(),l()}var qi=S("<strong>Here are some questions you can ask Augment:</strong>"),Wi=S('<!> <div class="l-questions svelte-1nimdct"></div>',1);function ji(r,t){ie(t,!0);let o=F(t,"showIntroText",3,!0);const n=gt();function m(v){n(Tn(t.conversationId,v))}let f=d(()=>t.turn.questions||[]);var l=H(),u=D(l),x=v=>{var a=Wi(),y=D(a),T=g=>{Ka(g,{children:(i,c)=>{var h=qi();s(i,h)},$$slots:{default:!0}})};L(y,g=>{o()&&g(T)});var k=O(y,2);Oe(k,20,()=>e(f),g=>g,(g,i)=>{var c=d(()=>St("Enter",()=>m(i)));zt(g,{variant:"ghost",size:1,color:"accent",alignment:"left",$$events:{keyup(...h){e(c)?.apply(this,h)},click:()=>m(i)},children:(h,p)=>{var $=X();J(()=>Q($,i)),s(h,$)},$$slots:{default:!0,iconLeft:(h,p)=>{de(h,{name:"send-horizontal",size:2,slot:"iconLeft"})}}})}),s(v,a)};L(u,v=>{t.turn.questionsLoaded&&e(f).length>0&&v(x)}),s(r,l),ce()}var Bi=(r,t)=>t.onOpenLocalFile(t.fileDetails),Gi=S('<div class="c-tooluse-filepath svelte-1bzkivf" role="button" tabindex="0" data-testid="file-link"><!></div>');Rs(["click","keydown"]);var Vi=S('<span class="c-tooluse-arg"><!></span>');function Hi(r,t){ie(t,!0);const o=gt(),n=Lt(),m=y=>{o(Ns(y))};let f=ue(!1),l=ue(void 0);Me(()=>{e(f)&&async function(y){if(typeof y=="string")try{P(l,await n.resolvePath?.({rootPath:"",relPath:y}),!0)}catch{P(l,void 0)}}(t.value)});var u=Vi(),x=b(u),v=y=>{(function(T,k){ie(k,!0);{let g=d(()=>[is.Hover]);He(T,{get content(){return k.fileDetails.pathName},get triggerOn(){return e(g)},children:(i,c)=>{var h=Gi();h.__click=[Bi,k];var p=d(()=>St("Enter",()=>k.onOpenLocalFile(k.fileDetails)));h.__keydown=function(..._){e(p)?.apply(this,_)};var $=b(h);vs($,{get filepath(){return k.fileDetails.pathName},leftIcon:z=>{de(z,{name:"file"})},$$slots:{leftIcon:!0}}),s(i,h)},$$slots:{default:!0}})}ce()})(y,{get fileDetails(){return e(l)},onOpenLocalFile:m})},a=y=>{ae(y,{size:1,children:(T,k)=>{var g=X();J(()=>Q(g,t.value)),s(T,g)},$$slots:{default:!0}})};L(x,y=>{e(l)?y(v):y(a,!1)}),Dt(u,(y,T)=>$s?.(y,T),()=>({onVisible:()=>P(f,!0),scrollTarget:document.body})),s(r,u),ce()}var Ki=S('<div class="c-tooluse__value svelte-rbof7e"><!></div>'),Ji=S('<div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!>',1),Yi=S('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),Xi=S('<img alt="Tool result" class="c-tooluse__image svelte-rbof7e"/>'),Qi=S('<div class="c-tooluse__image-container svelte-rbof7e"><!></div>'),Zi=S('<div class="c-tooluse__structured-content svelte-rbof7e"></div>'),ec=S('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),tc=S('<div class="tool-output svelte-rbof7e"><div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!></div>'),sc=S('<div class="c-tooluse__details svelte-rbof7e"><!> <!></div>');function Ua(r,t){ie(t,!0);let o=F(t,"showOutput",3,!0),n=d(()=>Object.entries(t.toolUseInput).reduce((a,[y,T])=>(Array.isArray(T)?a[y]=T.map(k=>JSON.stringify(k)):a[y]=[JSON.stringify(T)],a),{})),m=d(()=>t.toolUseState?.result?.contentNodes&&t.toolUseState.result.contentNodes.length>0);function f(a){return a.image_data?`data:${a.media_type};base64,${a.image_data}`:null}var l=sc(),u=b(l);Oe(u,17,()=>Object.entries(e(n)),Ye,(a,y)=>{var T=d(()=>Fo(e(y),2)),k=Ji(),g=D(k),i=b(g);ae(i,{size:1,weight:"medium",children:(h,p)=>{var $=X();J(()=>Q($,e(T)[0])),s(h,$)},$$slots:{default:!0}});var c=O(g,2);Oe(c,17,()=>e(T)[1],Ye,(h,p)=>{var $=Ki();Hi(b($),{get value(){return e(p)}}),s(h,$)}),s(a,k)});var x=O(u,2),v=a=>{var y=tc(),T=b(y),k=b(T);ae(k,{size:1,weight:"medium",children:(h,p)=>{var $=X("output");s(h,$)},$$slots:{default:!0}});var g=O(T,2),i=h=>{var p=Zi();Oe(p,21,()=>t.toolUseState.result.contentNodes,Ye,($,_)=>{var z=H(),C=D(z),U=N=>{ae(N,{size:0,type:"monospace",children:(I,E)=>{var w=Yi(),A=b(w);J(R=>Q(A,R),[()=>e(_).text_content.trim()]),s(I,w)},$$slots:{default:!0}})},M=N=>{var I=H(),E=D(I),w=A=>{var R=H(),W=D(R),B=V=>{var G=Qi(),q=b(G);Xt(q,{insetContent:!0,size:1,class:"c-image-card",children:(ee,K)=>{var Y=Xi();J(Z=>Nt(Y,"src",Z),[()=>f(e(_).image_content)]),s(ee,Y)},$$slots:{default:!0}}),s(V,G)},j=V=>{ae(V,{size:1,color:"error",children:(G,q)=>{var ee=X("Failed to load image: Image data not found");s(G,ee)},$$slots:{default:!0}})};L(W,V=>{f(e(_).image_content)?V(B):V(j,!1)}),s(A,R)};L(E,A=>{e(_).type===rr.ContentImage&&e(_).image_content&&A(w)},!0),s(N,I)};L(C,N=>{e(_).type===rr.ContentText&&e(_).text_content?N(U):N(M,!1)}),s($,z)}),s(h,p)},c=h=>{ae(h,{size:1,type:"monospace",children:(p,$)=>{var _=ec(),z=b(_);J(C=>Q(z,C),[()=>t.toolUseState.result?.text?.trim()]),s(p,_)},$$slots:{default:!0}})};L(g,h=>{e(m)&&t.toolUseState.result?.contentNodes?h(i):h(c,!1)}),s(a,y)};L(x,a=>{!o()||t.toolUseState.phase!==pe.completed&&t.toolUseState.phase!==pe.error||a(v)}),s(r,l),ce()}function io(r){if(r==null)return"";if(Array.isArray(r))return r.map(t=>io(t)).join(", ");if(typeof r=="object"){const t=Object.entries(r);return t.length===0?"{}":t.map(([o,n])=>`${o}: ${io(n)}`).join(", ")}return String(r)}function oc(r,t){const o=function(n){let m=[];for(const f of Object.values(n))Array.isArray(f)?m=m.concat(f.map(l=>io(l))):m.push(io(f));return m.join(" ")}(t);return r==="apply_patch"&&o&&o.length>10?o.substring(0,10)+"...":o}const Ca=Symbol("toolContext");function _t(){const r=it(Ca);if(!r)throw new Error("ToolUseContext context not found");return r}function rc(r){const t=Rt(r);let o;const n=eo(t,(m,f)=>{if(m.toolUse.tool_use_id===o?.toolUse.tool_use_id&&m.toolUse.input_json===o?.toolUse.input_json&&m.toolUse.tool_name===o?.toolUse.tool_name&&m.toolUseState.phase===o?.toolUseState.phase&&m.toolUseState.result?.isError===o?.toolUseState.result?.isError&&m.toolUseState.result?.text===o?.toolUseState.result?.text&&m.isLastTurn===o?.isLastTurn&&m.requestId===o?.requestId&&m.turnIndex===o?.turnIndex)return;o=m;const l=function(u){try{return JSON.parse(u)??{}}catch(x){return console.error("Failed to parse tool input JSON",x),{}}}(m.toolUse.input_json);f({...o,toolUseInput:l??{}})});return Vt(Ca,n),{writableCtx:t,readableCtx:n}}var ac=S('<div class="svelte-xpcnzb"><!></div>'),nc=S('<span class="c-tool-approval-panel__approve-btn-text svelte-xpcnzb">Approve</span>'),lc=S('<div class="c-tool-approval-panel__content svelte-xpcnzb"><!> <div class="c-tool-approval-panel__actions svelte-xpcnzb"><!> <!></div></div>'),ic=S('<div class="c-tool-approval-panel svelte-xpcnzb"><!> <div class="tooltip-pointer svelte-xpcnzb"></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),cc=S('<div class="c-cancel-hover svelte-172oyl5"><!></div>'),dc=S('<div class="c-tooluse-status svelte-3yk79m"><!></div>');function Js(r,t){ie(t,!0);const o=()=>ge(f,"$ctx",n),[n,m]=Ce(),f=_t();let l=F(t,"isCommandError",3,!1),u=F(t,"toolUseState",31,()=>Qe(o().toolUseState));function x(k){k.stopPropagation(),o().onToolCancel(o().requestId,o().toolUse.tool_use_id)}Me(()=>{u(o().toolUseState)});var v=dc(),a=b(v),y=k=>{var g=H(),i=D(g),c=h=>{de(h,{name:"pause"})};L(i,h=>{o().isLastTurn&&h(c)}),s(k,g)},T=k=>{var g=H(),i=D(g),c=p=>{ks(p,{status:"error",content:"Command failed"})},h=p=>{var $=H(),_=D($),z=U=>{ks(U,{content:"Waiting for end of message...",children:(M,N)=>{Ss(M,{size:1})},$$slots:{default:!0}})},C=U=>{var M=H(),N=D(M),I=w=>{ks(w,{content:"Looking up tool...",children:(A,R)=>{Ss(A,{size:1})},$$slots:{default:!0}})},E=w=>{var A=H(),R=D(A),W=j=>{(function(V,G){ie(G,!0);let q=ue(!0);const ee=new Fr({onHoverStart(){P(q,!1)},onHoverEnd(){P(q,!0)},hoverTriggerDuration:0});var K=cc(),Y=b(K);{let Z=d(()=>[is.Hover]);He(Y,{get triggerOn(){return e(Z)},content:"Cancel",children:(se,te)=>{je(se,{size:0,color:"neutral",get onclick(){return G.onClick},variant:"ghost-block",class:"c-cancel-hover__btn",get loading(){return e(q)},children:(oe,re)=>{de(oe,{name:"x"})},$$slots:{default:!0}})},$$slots:{default:!0}})}Dt(K,(Z,se)=>Pr?.(Z,se),()=>ee),s(V,K),ce()})(j,{onClick:x})},B=j=>{var V=H(),G=D(V),q=K=>{ks(K,{status:"error",content:"Cancelled"})},ee=K=>{var Y=H(),Z=D(Y),se=oe=>{ks(oe,{status:"error",content:"Failed"})},te=oe=>{var re=H(),ne=D(re),le=he=>{ks(he,{status:"error",content:"Cancelling...",children:(we,fe)=>{Ss(we,{size:1})},$$slots:{default:!0}})},ve=he=>{ks(he,{status:"success",content:"Completed"})};L(ne,he=>{u().phase===pe.cancelling?he(le):he(ve,!1)},!0),s(oe,re)};L(Z,oe=>{u().phase===pe.error?oe(se):oe(te,!1)},!0),s(K,Y)};L(G,K=>{u().phase===pe.cancelled?K(q):K(ee,!1)},!0),s(j,V)};L(R,j=>{u().phase===pe.running?j(W):j(B,!1)},!0),s(w,A)};L(N,w=>{u().phase===pe.checkingSafety?w(I):w(E,!1)},!0),s(U,M)};L(_,U=>{u().phase===pe.new?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{l()?p(c):p(h,!1)},!0),s(k,g)};L(a,k=>{u().phase===pe.runnable?k(y):k(T,!1)}),J(()=>Nt(v,"data-tool-use-state",u().phase)),s(r,v),ce(),m()}var uc=S('<span class="c-tooluse__tool-name-text svelte-l7l81c"> </span>'),vc=S('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),pc=S('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),gc=S('<span class="svelte-l7l81c"></span>'),hc=S('<div><div class="c-tooluse-header__label svelte-l7l81c"><!> <!> <!> <!> <div class="c-tooluse__main-bar__tool-status svelte-l7l81c"><div class="c-tooluse__header-actions svelte-l7l81c"><!></div> <!></div></div></div>');function Fe(r,t){ie(t,!0);const o=()=>ge(k,"$collapsed",m),n=()=>ge(g,"$expandable",m),[m,f]=Ce(),l=_t();let u=F(t,"toolName",19,()=>{}),x=F(t,"toolUseInput",31,()=>Qe(ge(l,"$ctx",m).toolUseInput)),v=F(t,"formattedToolArgs",19,()=>{}),a=F(t,"class",3,"");Me(()=>{v()&&x({args:v()})});let y=d(()=>()=>oc(u(),x()));const T=Ja(),k=T.collapsed,g=T.expandable;var i=hc();let c;var h=b(i),p=b(h),$=j=>{xa(j,{get expandable(){return n()},get collapsed(){return o()},children:(V,G)=>{var q=H(),ee=D(q);Ge(ee,()=>t.icon??vt),s(V,q)},$$slots:{default:!0}})};L(p,j=>{t.icon&&j($)});var _=O(p,2);ae(_,{size:1,weight:"medium",color:"primary",class:"c-tooluse__content-btn-name",children:(j,V)=>{var G=H(),q=D(G),ee=Y=>{var Z=H(),se=D(Z);Ge(se,()=>t.toolNameSnippet),s(Y,Z)},K=Y=>{var Z=H(),se=D(Z),te=oe=>{var re=uc(),ne=b(re);J(()=>Q(ne,u())),s(oe,re)};L(se,oe=>{u()&&oe(te)},!0),s(Y,Z)};L(q,Y=>{t.toolNameSnippet?Y(ee):Y(K,!1)}),s(j,G)},$$slots:{default:!0}});var z=O(_,2),C=j=>{var V=vc(),G=b(V);Ge(G,()=>t.secondary??vt,()=>({toolName:u(),formattedToolArgs:v()})),s(j,V)},U=j=>{var V=H(),G=D(V),q=ee=>{var K=pc(),Y=b(K);ae(Y,{size:1,class:"c-tooluse__content-btn-args",children:(Z,se)=>{var te=X();J(oe=>Q(te,oe),[()=>e(y)()]),s(Z,te)},$$slots:{default:!0}}),s(ee,K)};L(G,ee=>{e(y)()&&ee(q)},!0),s(j,V)};L(z,j=>{t.secondary?j(C):j(U,!1)});var M=O(z,2),N=j=>{var V=H(),G=D(V);Ge(G,()=>t.toolAction),s(j,V)},I=j=>{var V=gc();s(j,V)};L(M,j=>{t.toolAction?j(N):j(I,!1)});var E=O(M,2),w=b(E),A=b(w);Ge(A,()=>t.headerActions??vt);var R=O(w,2),W=j=>{var V=H(),G=D(V);Ge(G,()=>t.toolStatus),s(j,V)},B=j=>{Js(j,{})};L(R,j=>{t.toolStatus?j(W):j(B,!1)}),J(j=>c=at(i,1,`c-tooluse__main-bar ${a()??""}`,"svelte-l7l81c",c,j),[()=>({"is-collapsed":o(),"is-expandable":n()})]),s(r,i),ce(),f()}var mc=S('<div class="c-tool-use__header-container svelte-kv049e" role="button"><div class="c-tool-use__header svelte-kv049e"><div class="c-tool-use__content svelte-kv049e"><!></div></div></div>'),fc=S('<div class="c-tool-use__details svelte-kv049e"><!> <!></div>'),$c=S("<div><!> <!> <!></div>");function qe(r,t){ie(t,!0);const o=()=>ge(f,"$ctx",n),[n,m]=Ce(),f=_t(),l=Qa(0);let u=F(t,"showToolOutput",3,!0),x=F(t,"toolUse",27,()=>Qe(o().toolUse)),v=F(t,"toolUseState",27,()=>Qe(o().toolUseState)),a=F(t,"toolUseInput",27,()=>Qe(o().toolUseInput)),y=F(t,"collapsed",15,!0),T=F(t,"toggle",31,()=>{}),k=d(()=>u()===void 0?!Xn(x().tool_name):u()),g=ue(void 0);var i=$c();let c;var h=b(i);vo(h,{class:"c-tool-use__container",get expandable(){return e(k)},get toggle(){return T()},set toggle(U){T(U)},get collapsed(){return y()},set collapsed(U){y(U)},get isHeaderStuck(){return e(g)},set isHeaderStuck(U){P(g,U,!0)},header:U=>{var M=mc();Nt(M,"tabindex",0),M.__click=function(...R){T()?.apply(this,R)};var N=b(M),I=b(N),E=b(I),w=R=>{var W=H(),B=D(W);Ge(B,()=>t.header,()=>({toolUseInput:a(),toolUse:x()})),s(R,W)},A=R=>{Fe(R,{get toolUseInput(){return a()},get toolName(){return x().tool_name}})};L(E,R=>{t.header?R(w):R(A,!1)}),s(U,M)},children:(U,M)=>{var N=fc(),I=b(N),E=R=>{var W=H(),B=D(W);Ge(B,()=>t.details,()=>({toolUseInput:a()})),s(R,W)},w=R=>{Ua(R,{get toolUseInput(){return a()},get toolUseState(){return v()},get showOutput(){return e(k)}})};L(I,R=>{t.details?R(E):R(w,!1)});var A=O(I,2);Ge(A,()=>t.error??vt),s(U,N)},$$slots:{header:!0,default:!0}});var p=O(h,2);Ge(p,()=>t.secondary??vt);var $=O(p,2),_=C=>{var U=H(),M=D(U);Ge(M,()=>t.actions),s(C,U)},z=C=>{(function(U,M){ie(M,!1);const N=()=>ge(w,"$ctx",I),[I,E]=Ce(),w=_t();function A(){N().onToolSkip(N().requestId,N().toolUse.tool_use_id)}function R(){N().onToolRun(N().requestId,N().toolUse,N().toolUseInput)}function W(G){G.stopPropagation(),R()}Zt();var B=H(),j=D(B),V=G=>{var q=ic(),ee=b(q);No(0,{name:"allowTool",handler:R});var K=O(ee,4);ta(K,()=>({"--after-box-shadow":"none"})),Xt(K.lastChild,{borderless:!0,children:(Y,Z)=>{var se=lc(),te=b(se);ae(te,{size:1,children:(le,ve)=>{var he=X("Waiting for user input");s(le,he)},$$slots:{default:!0}});var oe=O(te,2),re=b(oe);zt(re,{size:1,variant:"solid",color:"neutral",$$events:{click:A},children:(le,ve)=>{var he=X("Skip");s(le,he)},$$slots:{default:!0}});var ne=O(re,2);{const le=he=>{var we=ac();Ro(b(we),{commandName:"allowTool",keysOnly:!0}),s(he,we)};let ve=Qt(()=>[is.Hover]);He(ne,{get triggerOn(){return e(ve)},delayDurationMs:300,content:le,children:(he,we)=>{zt(he,{size:1,variant:"solid",color:"accent",class:"c-tool-approval-panel__approve-btn-pulse",$$events:{click:W},children:(fe,me)=>{var _e=nc();s(fe,_e)},$$slots:{default:!0,iconLeft:(fe,me)=>{de(fe,{slot:"iconLeft",name:"circle-play"})}}})},$$slots:{content:!0,default:!0}})}s(Y,se)},$$slots:{default:!0}}),ps(3,q,()=>Dr,()=>({y:-2,duration:150})),s(G,q)};L(j,G=>{N().toolUseState.phase===pe.runnable&&N().isLastTurn&&G(V)}),s(U,B),ce(),E()})(C,{})};L($,C=>{t.actions?C(_):C(z,!1)}),Dt(i,C=>l?.(C)),J(C=>c=at(i,1,"c-tool-use svelte-kv049e",null,c,C),[()=>({"is-sticky":e(g),"is-expandable":e(k)})]),s(r,i),ce(),m()}Rs(["click"]);var _c=S("<div><!></div>"),kc=S('<div class="c-message-actions svelte-109jn4a"></div>');function yc(r,t){var o=kc();Oe(o,21,()=>t.items,Ye,(n,m)=>{{let f=d(()=>`${e(m).id}-button`),l=d(()=>({neutral:e(m).label,success:e(m).successMessage}));Go(n,{get"data-testid"(){return e(f)},variant:"ghost-block",size:1,defaultColor:"neutral",get disabled(){return e(m).disabled},icon:!0,stickyColor:!1,onClick:u=>(e(m).action(u),e(m).successMessage?"success":"neutral"),get tooltip(){return e(l)},children:(u,x)=>{var v=H(),a=D(v),y=T=>{de(T,{get name(){return e(m).lucideIconName}})};L(a,T=>{e(m).lucideIconName&&T(y)}),s(u,v)},$$slots:{default:!0}})}}),s(r,o)}var bc=S("<!> <!>",1),wc=S("<!> <!>",1),Sc=S('<span class="c-feedback__thankyou svelte-1muhiky"> </span>'),Tc=S('<!> <div class="l-feedback__send svelte-1muhiky"><!> <div class="l-feedback__send-btns svelte-1muhiky"><!> <!></div></div>',1),Ic=S('<div class="c-feedback__input-container svelte-1muhiky"><!></div>'),xc=S('<div class="c-feedback svelte-1muhiky"><div class="c-feedback__ratings svelte-1muhiky"><div class="c-feedback__buttons svelte-1muhiky"><!> <!> <!> <!></div> <!></div> <!></div>');function Uc(r,t){ie(t,!0);const o="augment-marketplace-review-clicked";let n=F(t,"showFeedbackInput",15,!1),m=F(t,"tooltipItems",19,()=>[]),f=ue(Qe({selectedRating:t.feedbackState?.selectedRating??rt.unset,feedbackNote:t.feedbackState?.feedbackNote??""})),l=ue(!1),u=ue(void 0),x=ue(void 0),v=d(()=>Mr()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews");function a(){n(!1),t.onSendUserRating(t.requestId,e(f).selectedRating,e(f).feedbackNote),P(i,"Thanks for the feedback!"),clearTimeout(g),g=setTimeout(()=>{P(i,"")},3e3)}async function y(A){e(f).selectedRating=A,n(!0),await Io(),e(x)?.focus()}function T(){n(!1),t.feedbackState?P(f,{...t.feedbackState},!0):e(f).selectedRating=rt.unset}function k(A){A.key==="Escape"&&(A.preventDefault(),T())}let g,i=ue("");var c=xc(),h=b(c),p=b(h),$=b(p);He($,{content:"Give feedback",children:(A,R)=>{var W=d(()=>St("Enter",()=>y(rt.positive)));{let B=d(()=>"c-feedback__positive "+(e(f).selectedRating===rt.positive?"c-feedback--selected":"")),j=d(()=>e(f).selectedRating===rt.positive?"success":"neutral");je(A,{get class(){return e(B)},title:"Feedback Positive",variant:"ghost-block",size:1,get color(){return e(j)},$$events:{keyup(...V){e(W)?.apply(this,V)},click:()=>y(rt.positive)},children:(V,G)=>{de(V,{name:"thumbs-up"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var _=O($,2);He(_,{content:"Give feedback",children:(A,R)=>{var W=d(()=>St("Enter",()=>y(rt.negative)));{let B=d(()=>"c-feedback__negative "+(e(f).selectedRating===rt.negative?"c-feedback--selected":"")),j=d(()=>e(f).selectedRating===rt.negative?"error":"neutral");je(A,{get class(){return e(B)},title:"Feedback Negative",variant:"ghost-block",size:1,get color(){return e(j)},$$events:{keyup(...V){e(W)?.apply(this,V)},click:()=>y(rt.negative)},children:(V,G)=>{de(V,{name:"thumbs-down"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var z=O(_,2),C=A=>{ms(A,{get text(){return t.reponseText},tooltip:"Copy response"})};L(z,A=>{t.reponseText&&A(C)});var U=O(z,2);et(U,()=>Xe.Root,(A,R)=>{Mt(R(A,{children:(W,B)=>{var j=wc(),V=D(j);et(V,()=>Xe.Trigger,(q,ee)=>{ee(q,{children:(K,Y)=>{{let Z=d(()=>[is.Hover]);He(K,{content:"More options",get triggerOn(){return e(Z)},children:(se,te)=>{je(se,{title:"More options",variant:"ghost-block",size:1,color:"neutral",children:(oe,re)=>{de(oe,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var G=O(V,2);et(G,()=>Xe.Content,(q,ee)=>{ee(q,{size:1,side:"right",align:"end",children:(K,Y)=>{var Z=bc(),se=D(Z),te=oe=>{var re=H(),ne=D(re);Oe(ne,17,m,Ye,(le,ve)=>{{let he=d(()=>e(ve).successMessage??`${e(ve).label} completed`);bs(le,{get iconName(){return e(ve).lucideIconName},get idleLabel(){return e(ve).label},get successLabel(){return e(he)},get disabled(){return e(ve).disabled},onSelect:async()=>{e(ve).action(new Event("click"))}})}}),s(oe,re)};L(se,oe=>{m().length>0&&oe(te)}),bs(O(se,2),{iconName:"clipboard",idleLabel:"Copy request ID",successLabel:"Copied request ID",onSelect:async()=>{await navigator.clipboard?.writeText(t.requestId)}}),s(K,Z)},$$slots:{default:!0}})}),s(W,j)},$$slots:{default:!0}}),W=>P(u,W,!0),()=>e(u))});var M=O(p,2),N=A=>{zt(A,{size:1,variant:"ghost",color:"neutral",$$events:{click:()=>{P(l,!0),function(){try{localStorage.setItem(o,"true")}catch{}}(),qs.postMessage({type:Ws.augmentLink,data:e(v)})}},iconLeft:W=>{de(W,{name:"star"})},children:(W,B)=>{var j=X("Leave a review for Augment!");s(W,j)},$$slots:{iconLeft:!0,default:!0}})},I=A=>{var R=Sc(),W=b(R);J(()=>Q(W,e(i))),s(A,R)};L(M,A=>{e(f).selectedRating!==rt.positive||!e(l)&&function(){try{return localStorage.getItem(o)==="true"}catch{return!0}}()?A(I,!1):A(N)});var E=O(h,2),w=A=>{var R=Ic(),W=b(R);Xt(W,{size:2,children:(B,j)=>{var V=Tc(),G=D(V);Fs(G,{class:"c-feedback__textarea",rows:3,placeholder:"Enter your feedback...",color:"neutral",variant:"soft",onkeydown:k,get value(){return e(f).feedbackNote},set value(oe){e(f).feedbackNote=oe},get textInput(){return e(x)},set textInput(oe){P(x,oe,!0)}});var q=O(G,2),ee=b(q);ms(ee,{get text(){return t.requestId},tooltip:"Copy request ID",textSnippet:re=>{var ne=X("Request ID");s(re,ne)},$$slots:{textSnippet:!0}});var K=O(ee,2),Y=b(K),Z=d(()=>St("Enter",T));zt(Y,{title:"Cancel",variant:"soft",color:"neutral",size:1,$$events:{keyup(...oe){e(Z)?.apply(this,oe)},click:T},children:(oe,re)=>{var ne=X("Cancel");s(oe,ne)},$$slots:{default:!0}});var se=O(Y,2),te=d(()=>St("Enter",a));{let oe=d(()=>!e(f).feedbackNote.trim());zt(se,{title:"Share ",color:"accent",get disabled(){return e(oe)},size:1,$$events:{keyup(...re){e(te)?.apply(this,re)},click:a},children:(re,ne)=>{var le=X();J(()=>Q(le,t.feedbackState?"Update feedback":"Share feedback")),s(re,le)},$$slots:{default:!0}})}Dt(q,oe=>{return re=oe,void re.scrollIntoView({block:"end",behavior:"smooth"});var re}),s(B,V)},$$slots:{default:!0}}),s(A,R)};L(E,A=>{n()&&A(w)}),s(r,c),ce()}var Cc=S('<div class="memory-meta svelte-fikraf"><!></div>');function Ac(r,t){ie(t,!0);const[o,n]=Ce(),m=Ot("enableDebugFeatures"),f=Lt(),l=In();var u=Cc();Uc(b(u),{get requestId(){return t.requestId},get reponseText(){return t.memoryData.memory},feedbackState:void 0,onSendUserRating:async(x,v,a)=>{const y=`${a||""}

Memory version: ${ge(l,"$memoriesParams",o)?.memory_retrieval_version}`,T=`${y}

Created memory: ${t.memoryData.memory}`,k=ge(m,"$enableDebugFeatures",o)?T:y;await f.sendUserRating(x,Os.memories,v,k)}}),s(r,u),ce(),n()}var Ec=S("<div><!></div> <div><!></div>",1),zc=S('<div class="memory-content svelte-15shl9p"><!> <div><!></div> <div><!></div> <!></div>'),Lc=S("<div><!></div>"),Nc=S('<div><div class="c-show-more__content svelte-rs6o7w"><!></div> <!></div>');function Gs(r,t){ie(t,!0);let o,n=F(t,"expanded",15),m=F(t,"maxHeight",3,200),f=F(t,"transitionDurationMs",19,()=>{}),l=F(t,"collapseText",3,"Show less"),u=F(t,"paddingBottom",3,30),x=F(t,"showOnHover",3,!1),v=F(t,"overflowThreshold",3,10),a=F(t,"class",3,""),y=ue(0),T=ue(!1),k=!!n(),g=d(()=>f()??Math.min(Math.max(500,e(y)+m()),200));function i(){k=!0,n(!n()),clearTimeout(o),o=setTimeout(()=>{k=!1},e(g))}var c=Nc();let h;var p=b(c),$=b(p);Ge($,()=>t.children??vt),Dt(p,C=>function(U){let M;function N(E){if(k)return;const w=E.scrollHeight;P(y,w+E.clientHeight),P(T,w>m()+v())}function I(E){M?.disconnect(),M=new ResizeObserver(()=>{requestAnimationFrame(()=>{N(E)})}),M.observe(E)}return n()&&P(y,U.scrollHeight+U.clientHeight),N(U),I(U),{update(E){I(E),N(E)},destroy(){M?.disconnect()}}}(C));var _=O(p,2),z=C=>{var U=Lc();let M;var N=b(U),I=E=>{Ia(E,{get expanded(){return n()},onClick:i})};L(N,E=>{n()&&!l()||E(I)}),J(E=>M=at(U,1,"c-show-more__button-container svelte-rs6o7w",null,M,E),[()=>({"c-show-more__button-container--no-overflow":n()})]),s(C,U)};L(_,C=>{(n()||!n()&&e(T))&&C(z)}),J(C=>{h=at(c,1,`c-show-more ${a()??""}`,"svelte-rs6o7w",h,C),Ks(p,`max-height: ${n()?e(y)?e(y)+u()+"px":"unset":m()+"px"};--show-more-transition: ${e(g)??""}ms ease-in-out;`)},[()=>({"c-show-more--expanded":n(),"c-show-more--show-on-hover":x()})]),s(r,c),ce()}var Rc=S('<span class="c-tool-memory-retrieval__header__icon svelte-1dwosli"><!></span>'),Mc=S('<!> <span class="c-tool-memory-retrieval__metadata__source svelte-1dwosli"><!></span>',1),Dc=S('<div class="c-tool-memory-retrieval__secondary svelte-1dwosli"><!></div>'),Oc=S('<div class="c-tool-memory-retrieval__details svelte-1dwosli"> </div>');function Oo(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=F(t,"noRetrieval",3,!1);qe(r,{header:l=>{Fe(l,{class:"c-tool-memory-retrieval__header",toolName:"Augment Context Engine",icon:v=>{var a=Rc(),y=b(a);de(y,{name:"augment-logo"}),s(v,a)},secondary:v=>{var a=Dc(),y=b(a),T=k=>{var g=Mc(),i=D(g);ae(i,{size:1,color:"secondary",children:(_,z)=>{var C=X("Retrieving from:");s(_,C)},$$slots:{default:!0}});var c=O(i,2),h=b(c),p=_=>{var z=H(),C=D(z);Ge(C,()=>t.retrieval),s(_,z)},$=_=>{ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X();J(()=>Q(U,t.retrievalText)),s(z,U)},$$slots:{default:!0}})};L(h,_=>{t.retrieval?_(p):_($,!1)}),s(k,g)};L(y,k=>{n()||k(T)}),s(v,a)},$$slots:{icon:!0,secondary:!0}})},details:l=>{Gs(l,{maxHeight:150,showOnHover:!0,overflowThreshold:0,children:(u,x)=>{var v=Oc(),a=b(v);J(()=>Q(a,o().information_request||o().query||"")),s(u,v)},$$slots:{default:!0}})},$$slots:{header:!0,details:!0}}),ce()}var Pc=S("<!>Commit History",1),Fc=S("<span><!></span>"),qc=S('<span class="c-open-terminal-button-wrapper"><!></span>');function Wc(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=F(t,"size",3,0),m=F(t,"color",3,"neutral"),f=F(t,"variant",3,"ghost-block"),l=F(t,"stickyColor",3,!1),u=ue(!1),x=ue(!1),v=ue(!1);const a=Lt();let y;async function T($){return $?.stopPropagation?.(),$?.preventDefault?.(),await a.showTerminal(t.terminalId,e(k))?"success":(P(u,!1),"failure")}let k=d(()=>o().command),g=d(()=>t.phase===pe.running);Me(()=>{t.terminalId,e(k),t.phase,t.toolResult,Re(()=>{P(x,!1),y!==void 0&&(clearTimeout(y),y=void 0)})});let i=d(()=>(t.terminalId!==void 0||e(k)!==void 0||e(g))&&e(v)&&!e(x));Me(()=>{e(i)&&async function(){if(!e(x))try{const $=await a.canShowTerminal(t.terminalId,e(k));P(u,$,!0),P(x,!0),!$&&t.terminalId===void 0&&e(g)&&(y=setTimeout(()=>{P(x,!1),y=void 0},1e3))}catch($){console.warn("Failed to check terminal availability:",$),P(x,!0)}}()});var c=qc(),h=b(c),p=$=>{var _=Fc(),z=b(_);{const C=M=>{de(M,{name:"external-link"})};let U=d(()=>!t.text);Go(z,{get defaultColor(){return m()},get stickyColor(){return l()},get size(){return n()},get variant(){return f()},tooltip:{neutral:"Open Terminal",success:"Opening terminal..."},stateVariant:{success:"soft"},onClick:T,get icon(){return e(U)},iconLeft:C,children:(M,N)=>{var I=H(),E=D(I);Ge(E,()=>t.text??vt),s(M,I)},$$slots:{iconLeft:!0,default:!0}})}J(()=>at(_,1,`c-open-terminal-button-container c-open-terminal-button__size--${n()??""}`,"svelte-w84z3c")),s($,_)};L(h,$=>{e(u)&&$(p)}),Dt(c,($,_)=>$s?.($,_),()=>({onVisible:()=>P(v,!0),scrollTarget:document.body})),s(r,c),ce()}var jc=S('<pre class="svelte-aj3tks"> </pre>'),Bc=S('<div class="c-shell-error__message svelte-aj3tks"><!></div>'),Gc=S('<div class="c-shell-error svelte-aj3tks"><div class="c-shell-error__code svelte-aj3tks"><!> <!></div> <!></div>');function Et(r,t){ie(t,!0);let o=F(t,"isError",3,!1),n=F(t,"text",3,""),m=F(t,"hideDetailedMessage",3,!1),f=d(()=>n()?n().split(`
`)[0]:""),l=d(()=>m()?e(f):n());var u=H(),x=D(u),v=a=>{var y=Gc(),T=b(y),k=b(T);ae(k,{size:1,weight:"medium",children:(h,p)=>{var $=X("Error");s(h,$)},$$slots:{default:!0}});var g=O(k,2);{let h=d(()=>n()??"");ms(g,{get text(){return e(h)}})}var i=O(T,2),c=h=>{Gs(h,{maxHeight:90,children:(p,$)=>{var _=Bc(),z=b(_);ae(z,{size:1,weight:"light",type:"monospace",children:(C,U)=>{var M=jc(),N=b(M);J(()=>Q(N,e(l))),s(C,M)},$$slots:{default:!0}}),s(p,_)},$$slots:{default:!0}})};L(i,h=>{e(l)&&h(c)}),s(a,y)};L(x,a=>{o()&&a(v)}),s(r,u),ce()}var Vc=S('<pre class="c-shell-tooluse__value"> </pre>'),Hc=S('<div class="c-shell-tooluse__content"><!></div>'),Kc=S('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <!></div>'),Jc=S('<pre class="c-shell-tooluse__value"> </pre>'),Yc=S('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <div class="c-shell-tooluse__content"><!></div></div>'),Xc=S('<div class="c-shell-tooluse__details svelte-huxgkx"><!> <!></div>');function Qc(r,t){ie(t,!0);let o=d(()=>{let u=[];return typeof t.toolUseInput.command_type=="string"?t.toolUseInput.command_type==="simple"&&Array.isArray(t.toolUseInput.simple_command)&&t.toolUseInput.simple_command.length>0?u=[["Command",[t.toolUseInput.simple_command[0]]],["Args",t.toolUseInput.simple_command.slice(1)]]:t.toolUseInput.command_type==="complex"&&typeof t.toolUseInput.complex_command=="string"&&(u=[["Command",[t.toolUseInput.complex_command]]]):typeof t.toolUseInput.command=="string"&&(u=[["Command",[t.toolUseInput.command]]]),u});var n=Xc(),m=b(n);Oe(m,17,()=>e(o),Ye,(u,x)=>{var v=d(()=>Fo(e(x),2));let a=()=>e(v)[1];var y=Kc(),T=b(y),k=b(T);ae(k,{size:1,weight:"medium",color:"primary",children:(c,h)=>{var p=X();J(()=>Q(p,e(v)[0])),s(c,p)},$$slots:{default:!0}});var g=O(k,2);{let c=d(()=>a().join(`
`));ms(g,{get text(){return e(c)}})}var i=O(T,2);Oe(i,17,a,Ye,(c,h)=>{var p=Hc();Gs(b(p),{maxHeight:90,children:($,_)=>{ae($,{size:1,color:"secondary",children:(z,C)=>{var U=Vc(),M=b(U);J(()=>Q(M,e(h))),s(z,U)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(c,p)}),s(u,y)});var f=O(m,2),l=u=>{var x=Yc(),v=b(x),a=b(v);ae(a,{size:1,weight:"medium",color:"primary",children:(k,g)=>{var i=X("Output");s(k,i)},$$slots:{default:!0}});var y=O(a,2);ms(y,{get text(){return t.result.output}});var T=O(v,2);Gs(b(T),{maxHeight:90,children:(k,g)=>{ae(k,{size:1,color:"secondary",type:"monospace",children:(i,c)=>{var h=Jc(),p=b(h);J($=>Q(p,$),[()=>t.result.output?.trim()]),s(i,h)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(u,x)};L(f,u=>{t.result.output&&t.toolUseState.phase!==pe.error&&u(l)}),s(r,n),ce()}const kr=16e3;function Zc(r){if(!r)return{reason:"",returnCode:0,output:""};if(r.length>kr)return{reason:"Output too large",returnCode:0,output:r.slice(-1*kr)};const t=r.includes("<return-code>"),o=r.includes("<output>");if(!t&&!o)return{reason:"",returnCode:0,output:r};const n=t?/<return-code>\s*(-?\d+)\s*<\/return-code>/.exec(r):null,m=o?/<output>\s*(.*?)\s*<\/output>/s.exec(r):null;let f="",l="0",u=r;return n&&(l=n[1],f=r.substring(0,n.index)),m&&(u=m[1],n||(f=r.substring(0,m.index))),{reason:f,returnCode:Number(l),output:u}}function gs(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({}));const n=ma(Zc,`shell-tool-component-${t.toolUse.tool_use_id}`);let m=d(()=>function(u){if(typeof u.command_type=="string"){if(u.command_type==="simple"&&Array.isArray(u.simple_command)&&u.simple_command.length>0)return u.simple_command.join(" ");if(u.command_type==="complex"&&typeof u.complex_command=="string")return u.complex_command}else if(typeof u.command=="string")return u.command;return""}(o())),f=d(()=>n(t.toolUseState.result?.text??"")),l=d(()=>function(u,x,v){if(x.terminal_id!==null&&x.terminal_id!==void 0)return x.terminal_id;if(u==="launch-process"&&v){const a=v.match(/[Tt]erminal ID (\d+)/);if(a)return parseInt(a[1],10)}}(t.toolUse.tool_name,o(),t.toolUseState.result?.text));qe(r,{header:a=>{Fe(a,{toolName:"Terminal",icon:i=>{de(i,{name:"square-terminal"})},secondary:i=>{var c=H(),h=D(c),p=_=>{He(_,{get content(){return e(m)},class:"c-shell-tool-component__secondary",children:(z,C)=>{ae(z,{size:1,type:"monospace",color:"secondary",children:(U,M)=>{var N=X();J(I=>Q(N,`$ ${I??""}`),[()=>e(m).replace(/^\s*\$/,"").trim()]),s(U,N)},$$slots:{default:!0}})},$$slots:{default:!0}})},$=_=>{ae(_,{size:1,color:"secondary",children:(z,C)=>{var U=X();J(M=>Q(U,M),[()=>function(M,N){const I=!(N===pe.completed||N===pe.error);switch(M){case"launch-process":return I?"Launching Process...":"Launched Process";case"kill-process":return I?"Killing Process...":"Killed Process";case"read-process":return I?"Reading from Process...":"Read from Process";case"write-process":return I?"Writing to Process...":"Wrote to Process";case"list-processes":return I?"Listing Processes":"Listed Processes";case"wait-process":return I?"Waiting for Process...":"Waited for Process";case"read-terminal":return I?"Reading from Terminal...":"Read from Terminal"}return""}(t.toolUse.tool_name,t.toolUseState.phase)]),s(z,U)},$$slots:{default:!0}})};L(h,_=>{e(m)?_(p):_($,!1)}),s(i,c)},toolAction:i=>{{let c=d(()=>t.toolUseState.result?.text);Wc(i,{get terminalId(){return e(l)},get toolUseInput(){return o()},get toolResult(){return e(c)},get phase(){return t.toolUseState.phase}})}},toolStatus:i=>{{let c=d(()=>!!e(f).returnCode&&e(f).returnCode!==0);Js(i,{get isCommandError(){return e(c)}})}},$$slots:{icon:!0,secondary:!0,toolAction:!0,toolStatus:!0}})},details:a=>{Qc(a,{get toolUseInput(){return o()},get result(){return e(f)},get toolUseState(){return t.toolUseState}})},error:a=>{{let y=d(()=>!e(f).returnCode&&t.toolUseState.phase===pe.error),T=d(()=>t.toolUseState.result?.text);Et(a,{get isError(){return e(y)},get text(){return e(T)}})}},$$slots:{header:!0,details:!0,error:!0}}),ce()}var ed=S('<div><div class="editor-container svelte-1vyiv45"></div></div>');function Aa(r,t){ie(t,!0);const[o,n]=Ce();let m,f,l=ue(void 0),u=ue(void 0);as(()=>{e(l)?.dispose(),m?.dispose(),f?.dispose()}),Hs(()=>{e(u)&&(P(l,Ds.createDiffEditor(e(u),{lineNumbers:"off",hideUnchangedRegions:{enabled:!0,revealLineCount:3,minimumLineCount:3,contextLineCount:3},scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},lightbulb:{enabled:Ds.ShowLightbulbIconMode.Off},automaticLayout:!0,enableSplitViewResizing:!1,diffCodeLens:!1,renderOverviewRuler:!1,renderSideBySide:!1,glyphMargin:!1,folding:!1,showFoldingControls:"never",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineDecorationsWidth:0}),!0),e(l).getOriginalEditor().updateOptions({lineNumbers:"off"}),e(l).getModifiedEditor().updateOptions({lineNumbers:"off"}))}),Me(()=>{(function(a,y,T){const k=[m,f];y=y||"",T=T||"",m=Ds.createModel(y,void 0,a!==void 0?ir.parse("file://"+a+`#${crypto.randomUUID()}`):void 0),f=Ds.createModel(T,void 0,a!==void 0?ir.parse("file://"+a+`#${crypto.randomUUID()}`):void 0),e(l)&&e(l).setModel({original:m,modified:f}),k.forEach(g=>g?.dispose())})(t.path,t.originalCode,t.modifiedCode)}),Me(()=>{if(e(l)){const a=ge(qo,"$themeStore",o),y=Bn(a?.category,a?.intensity),T={theme:y};Ds.setTheme(y),e(l).getModifiedEditor().updateOptions(T),e(l).getOriginalEditor().updateOptions(T),e(l).layout()}});var x=ed(),v=b(x);Ks(v,"height:200px"),Mt(v,a=>P(u,a),()=>e(u)),s(r,x),ce(),n()}function Ea(r){return r.command==="str_replace"&&typeof r.old_str_start_line_number_1=="number"&&typeof r.old_str_end_line_number_1=="number"?{start:r.old_str_start_line_number_1,stop:r.old_str_end_line_number_1}:null}function yr(r){return Ea(r)||(r.view_range&&Array.isArray(r.view_range)?{start:r.view_range[0],stop:r.view_range[1]}:{start:0,stop:0})}var td=S("<!> <!>",1),sd=S('<div class="c-edit-file-tool-use-details__loading">Loading...</div>'),od=S('<div class="c-edit-file-tool-use-details svelte-1wof8pl"><div class="c-edit-file-tool-use-details__header svelte-1wof8pl"><!> <div class="c-edit-file-tool-use-details__header__counts svelte-1wof8pl"><!></div></div> <!></div>');function rd(r,t){ie(t,!0);const o=()=>ge(l,"$ctx",m),n=()=>ge(c,"$remoteAgentsModel",m),[m,f]=Ce(),l=_t();let u=F(t,"toolUseInput",31,()=>Qe(o().toolUseInput)),x=F(t,"toolUseState",31,()=>Qe(o().toolUseState)),v=F(t,"requestId",31,()=>Qe(o().requestId)),a=F(t,"turnIndex",19,()=>o().turnIndex);const y=d(()=>Ea(u())),T=d(()=>e(y)?.start),k=d(()=>e(y)?.stop);let g=ue(!1),i=ue(!1);const c=it(fs.key),h=Lt();let p=d(()=>x().phase===pe.completed),$=ue(void 0);async function _(){if(!e(z))return;if(e(C))return void function(){if(!e(C)||e(g))return;const j=sa(n()?.currentConversation?.exchanges??[],a());if(!j)return void console.warn("no changed files for remote agent turn",a());let V=j.find(G=>G.new_path===u().path);V||(V=j.find(G=>u().path.includes(G.new_path))),V?(P($,{relPath:V.new_path||V.old_path,originalCode:V.old_contents,modifiedCode:V.new_contents},!0),P(g,!0)):console.warn("no changed file for path",u().path)}();const B=(await h.getAgentEditContentsByRequestId(v())).at(0);B?(B.originalCode===B.modifiedCode&&console.warn("no changes for requestId",v()),P($,B,!0),P(g,!0)):console.warn("no contents for requestId",v())}Me(()=>{v(v()),u(u()),x(x()),P(g,!1)});let z=d(()=>e(p)&&!e(g)&&e(i));Me(()=>{e(z)&&_()});let C=d(()=>!!c?.isActive),U=d(()=>At(u().path,"").split("/").at(-1)??"");var M=od(),N=b(M),I=b(N);ae(I,{size:1,color:"primary",class:"c-edit-file-tool-use-details__header__icon",children:(B,j)=>{var V=td(),G=D(V);Vo(G,{get filename(){return e(U)}});var q=O(G,2);vs(q,{get filepath(){return e(U)}}),s(B,V)},$$slots:{default:!0}});var E=O(I,2),w=b(E);{let B=d(()=>At(u().path,"")),j=d(()=>At(u().snippet,""));ho(w,{get path(){return e(B)},get codeSnippetToLocate(){return e(j)},get start(){return e(T)},get stop(){return e(k)},size:1})}var A=O(N,2),R=B=>{Aa(B,ut(()=>e($),{get path(){return e(U)}}))},W=B=>{var j=sd();s(B,j)};L(A,B=>{e($)?B(R):B(W,!1)}),Dt(M,(B,j)=>$s?.(B,j),()=>({onVisible:()=>P(i,!0),scrollTarget:document.body})),s(r,M),ce(),f()}var ad=S('<div class="c-line-diff-count svelte-14dvwb6"><!></div>');function za(r,t){ie(t,!0);const o=()=>ge(x,"$intersectionStore",n),[n,m]=Ce(),f=_t(),l=Lt(),{enabled:u}=ha(),x=function(g,i,c=Yo()){if(c.has(g))return Rt(c.get(g));const h=Rt(i);return h.subscribe(p=>{c.set(g,p)}),h}(`line-diff-count-${t.requestId}`,{totalAddedLines:0,totalRemovedLines:0,hasLoaded:!1,isError:!1});let v=ge(u,"$intersectionObserverEnabled",n);Me(()=>{ge(f,"$ctx",n).toolUseState.phase!==pe.completed||o().hasLoaded||!v||o().isError||y(t.requestId)});let a=ue(0);async function y(g){try{const i=await l.getAgentEditChangesByRequestId(g);if(!(i&&i.length>0))throw new Error("No changes found");{const c=i.reduce((h,p)=>({totalAddedLines:h.totalAddedLines+(p.totalAddedLines??0),totalRemovedLines:h.totalRemovedLines+(p.totalRemovedLines??0)}),{totalAddedLines:0,totalRemovedLines:0});uo(x,{totalAddedLines:c.totalAddedLines,totalRemovedLines:c.totalRemovedLines,hasLoaded:!0,isError:!1})}}catch(i){console.warn(`Loading changes  for ${g} retry ${e(a)}: `,i),Ga(a)>3?(tr(x,Re(o).hasLoaded=!0,Re(o)),tr(x,Re(o).isError=!0,Re(o)),console.warn(`Loading changes failed for ${g}: `,i)):g&&(await new Promise(c=>setTimeout(c,500)),await y(g))}}var T=ad(),k=b(T);{let g=d(()=>!o().hasLoaded);ca(k,{get loading(){return e(g)},get totalAddedLines(){return o().totalAddedLines},get totalRemovedLines(){return o().totalRemovedLines},size:0,tooltips:!0})}Dt(T,(g,i)=>$s?.(g,i),()=>({onVisible:()=>v=!0,scrollTarget:document.body})),s(r,T),ce(),m()}var nd=S("<!> <!>",1),ld=S('<div class="c-str-replace__details"><!></div>');function La(r,t){ie(t,!0);const[o,n]=Ce(),m=_t();let f=F(t,"toolUseInput",19,()=>({})),l=d(()=>At(f().path||f().file_path,"")),u=d(()=>f().command==="str_replace");qe(r,{get showToolOutput(){return e(u)},header:y=>{Fe(y,{icon:c=>{var h=H(),p=D(h),$=z=>{de(z,{name:"file-pen"})},_=z=>{de(z,{name:"file"})};L(p,z=>{e(u)?z($):z(_,!1)}),s(c,h)},toolNameSnippet:c=>{{let h=d(()=>yr(f()));(function(p,$){ie($,!0);const _=()=>ge(N,"$ctx",z),[z,C]=Ce();let U=F($,"start",19,()=>{}),M=F($,"stop",19,()=>{});const N=_t();var I=H(),E=D(I),w=R=>{var W=X();J(()=>Q(W,_().toolUseInput.edit_summary??_().toolUseState.phase===pe.running?"Reading file...":U()&&M()?`Read lines ${U()}-${M()}`:"Read file")),s(R,W)},A=R=>{var W=X();J(()=>Q(W,_().toolUseState.phase===pe.running?"Editing file...":"Edited file")),s(R,W)};L(E,R=>{_().toolUseInput.command==="view"?R(w):R(A,!1)}),s(p,I),ce(),C()})(c,ut(()=>e(h)))}},secondary:c=>{{let h=d(()=>yr(f()));Bs(c,ut({get filepath(){return e(l)}},()=>e(h)))}},toolStatus:c=>{var h=nd(),p=D(h);za(p,{get requestId(){return ge(m,"$ctx",o).requestId}}),Js(O(p,2),{}),s(c,h)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0,toolStatus:!0}})},details:y=>{var T=ld(),k=b(T),g=i=>{rd(i,{})};L(k,i=>{t.toolUseState.phase===pe.completed&&i(g)}),s(y,T)},error:y=>{var T=H(),k=D(T),g=i=>{Et(i,ut(()=>t.toolUseState.result??{}))};L(k,i=>{t.toolUseState.phase===pe.error&&i(g)}),s(y,T)},$$slots:{header:!0,details:!0,error:!0}}),ce(),n()}const br="*** Add File: ",wr="*** Delete File: ",Sr="*** Update File: ";function id(r){const{added:t,updated:o,deleted:n}=function(m){const f=m.trim().split(`
`),l=new Set,u=new Set,x=new Set;for(const v of f)v.startsWith(br)&&l.add(v.slice(br.length)),v.startsWith(Sr)&&u.add(v.slice(Sr.length)),v.startsWith(wr)&&x.add(v.slice(wr.length));return{added:[...l],updated:[...u],deleted:[...x]}}(r);return[...new Set([...t,...o,...n])]}var cd=S('<div class="c-apply-patch-tool-use-details__error svelte-1yvt4wj"><!></div>'),dd=S('<span class="c-apply-patch-tool-use-details__move-path svelte-1yvt4wj"><!> <span class="c-apply-patch-tool-use-details__move-arrow svelte-1yvt4wj">→</span> <!></span>'),ud=S("<!> <!>",1),vd=S('<div><div class="c-apply-patch-tool-use-details__header svelte-1yvt4wj"><!> <div class="c-apply-patch-tool-use-details__header__actions svelte-1yvt4wj"><!></div></div> <!></div>'),pd=S('<div class="c-apply-patch-tool-use-details__loading svelte-1yvt4wj">Loading...</div>'),gd=S('<div class="c-apply-patch-tool-use-details svelte-1yvt4wj"><!></div>');function hd(r,t){ie(t,!0);const o=()=>ge(l,"$ctx",m),n=()=>ge(g,"$remoteAgentsModel",m),[m,f]=Ce(),l=_t();let u=F(t,"toolUseInput",27,()=>Qe(o().toolUseInput)),x=F(t,"toolUseState",27,()=>Qe(o().toolUseState)),v=F(t,"requestId",27,()=>Qe(o().requestId)),a=F(t,"turnIndex",19,()=>o().turnIndex),y=ue(!1),T=ue(!1);const k=Lt(),g=it(fs.key);let i=d(()=>x().phase===pe.completed),c=ue(Qe([])),h=ue(void 0);async function p(){if(e($))if(e(_))(function(){if(e(_)&&!e(y))try{const N=sa(n()?.currentConversation?.exchanges??[],a());if(!N||N.length===0)return console.warn("no changed files for remote agent turn",a()),void P(y,!0);P(c,N.map(I=>({relPath:I.new_path||I.old_path,originalCode:I.old_contents,modifiedCode:I.new_contents,oldPath:I.change_type===rl.renamed?I.old_path:void 0})),!0),P(y,!0)}catch(N){console.error("Error loading remote agent contents:",N),P(h,"Failed to load file changes from remote agent"),P(y,!0)}})();else try{const N=await k.getAgentEditContentsByRequestId(v());N.length===0&&console.warn("No contents found for requestId:",v()),P(c,N.map(I=>({relPath:I.relPath,originalCode:I.originalCode,modifiedCode:I.modifiedCode,oldPath:void 0})),!0),P(y,!0)}catch(N){console.error("Error loading contents:",N),P(h,"Failed to load file changes"),P(y,!0)}}Me(()=>{v(),u(),x(),P(y,!1),P(h,void 0)});let $=d(()=>e(i)&&!e(y)&&e(T));Me(()=>{e($)&&p()});let _=d(()=>!!g?.isActive);var z=gd(),C=b(z),U=N=>{var I=cd(),E=b(I);ae(E,{size:1,color:"error",children:(w,A)=>{var R=X();J(()=>Q(R,e(h))),s(w,R)},$$slots:{default:!0}}),s(N,I)},M=N=>{var I=H(),E=D(I),w=R=>{var W=H(),B=D(W);Oe(B,17,()=>e(c),Ye,(j,V)=>{const G=d(()=>!!e(V).oldPath),q=d(()=>Jn(e(V).relPath));var ee=vd();let K;var Y=b(ee),Z=b(Y);ae(Z,{size:1,color:"primary",class:"c-apply-patch-tool-use-details__header__icon",children:(oe,re)=>{var ne=ud(),le=D(ne);Vo(le,{get filename(){return e(q)}});var ve=O(le,2),he=fe=>{var me=dd(),_e=b(me);vs(_e,{get filepath(){return e(V).oldPath}});var be=O(_e,4);vs(be,{get filepath(){return e(V).relPath}}),s(fe,me)},we=fe=>{vs(fe,{get filepath(){return e(q)}})};L(ve,fe=>{e(G)&&e(V).oldPath?fe(he):fe(we,!1)}),s(oe,ne)},$$slots:{default:!0}});var se=O(Z,2),te=b(se);ho(te,{get path(){return e(V).relPath},size:1}),Aa(O(Y,2),{get originalCode(){return e(V).originalCode},get modifiedCode(){return e(V).modifiedCode},get path(){return e(V).relPath}}),J(oe=>K=at(ee,1,"c-apply-patch-tool-use-details__file svelte-1yvt4wj",null,K,oe),[()=>({"c-apply-patch-tool-use-details__file--move":e(G)})]),s(j,ee)}),s(R,W)},A=R=>{var W=pd();s(R,W)};L(E,R=>{e(c).length>0?R(w):R(A,!1)},!0),s(N,I)};L(C,N=>{e(h)?N(U):N(M,!1)}),Dt(z,(N,I)=>$s?.(N,I),()=>({onVisible:()=>P(T,!0),scrollTarget:document.body})),s(r,z),ce(),f()}var md=S("<!> <!>",1),fd=S("<span><!></span>");function Na(r,t){ie(t,!0);let o=F(t,"size",3,0),n=F(t,"href",19,()=>{});function m(x){x?.preventDefault(),x?.stopPropagation(),qs.postMessage({type:Ws.augmentLink,data:n()})}var f=fd(),l=b(f),u=x=>{je(x,{variant:"ghost-block",color:"neutral",size:1,onclick:m,children:(v,a)=>{de(v,{name:"external-link"})},$$slots:{default:!0}})};L(l,x=>{n()&&x(u)}),J(()=>at(f,1,`c-open-link-button c-open-link-button__size--${o()??""}`,"svelte-dyu2w8")),s(r,f),ce()}var $d=S("<img/>"),_d=S('<div class="c-web-fetch-container svelte-1s8mpu9"><span class="c-web-fetch-favicon-container svelte-1s8mpu9"><!> <span class="c-web-fetch-url svelte-1s8mpu9"> </span></span></div>');function Ra(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({}));function n(l,u){switch(l){case pe.running:return`Getting information from ${u}...`;case pe.error:return"Error";case pe.cancelled:return"Cancelled";case pe.runnable:return`Waiting for user approval to get ${u}`;case pe.completed:default:return""}}let m=d(()=>At(o().url,"")),f=d(()=>function(l){try{return new URL(l).hostname}catch{return""}}(e(m)));qe(r,{header:x=>{{const v=T=>{de(T,{name:"globe"})},a=T=>{Na(T,{get href(){return e(m)}})};let y=d(()=>[n(t.toolUseState.phase,e(f))]);Fe(x,{get toolName(){return t.toolName},get formattedToolArgs(){return e(y)},icon:v,toolAction:a,$$slots:{icon:!0,toolAction:!0}})}},details:x=>{var v=_d(),a=b(v),y=b(a),T=c=>{var h=H(),p=D(h);ea(p,()=>async function($){return new Promise((_,z)=>{const C=new Image,U=`https://www.google.com/s2/favicons?domain=${$}&sz=12`;U?(C.onload=()=>{_(U)},C.onerror=M=>{console.warn(M),z(M)},C.src=U):z(new Error("No favicon URL"))})}(e(f)||""),$=>{Ss($,{size:1,class:"c-web-fetch-favicon"})},($,_)=>{var z=$d();J(()=>{Nt(z,"src",e(_)),Nt(z,"alt",`Website favicon ${e(_)??""}`)}),s($,z)}),s(c,h)},k=c=>{Ss(c,{size:1,class:"c-web-fetch-favicon"})};L(y,c=>{e(f)?c(T):c(k,!1)});var g=O(y,2),i=b(g);J(()=>Q(i,o().url||"")),s(x,v)},$$slots:{header:!0,details:!0}}),ce()}var kd=S("<!> Codebase",1),yd=S("<span></span>"),bd=S('<code class="svelte-1dzy6ao"> </code>'),wd=S("Pattern Search <!> <!>",1);function Sd(r,t){ie(t,!0);const[o,n]=Ce(),m=_t();let f=F(t,"start",19,()=>{}),l=F(t,"stop",19,()=>{}),u=F(t,"isDirectory",3,!1),x=F(t,"searchQueryRegex",19,()=>{}),v=F(t,"caseSensitive",3,!1),a=F(t,"isRulesFile",3,!1);var y=H(),T=D(y),k=i=>{var c=H(),h=D(c),p=_=>{var z=X("Searching for pattern...");s(_,z)},$=_=>{var z=H(),C=D(z),U=N=>{var I=X("Reading directory...");s(N,I)},M=N=>{var I=H(),E=D(I),w=R=>{var W=X("Reading rules file...");s(R,W)},A=R=>{var W=X("Reading file...");s(R,W)};L(E,R=>{a()?R(w):R(A,!1)},!0),s(N,I)};L(C,N=>{u()?N(U):N(M,!1)},!0),s(_,z)};L(h,_=>{x()?_(p):_($,!1)}),s(i,c)},g=i=>{var c=H(),h=D(c),p=_=>{var z=X("Read directory");s(_,z)},$=_=>{var z=H(),C=D(z),U=N=>{var I=wd(),E=O(D(I));ae(E,{size:1,color:"secondary",type:"monospace",children:(R,W)=>{var B=bd(),j=b(B);J(()=>Q(j,x())),s(R,B)},$$slots:{default:!0}});var w=O(E,2),A=R=>{ae(R,{size:1,color:"secondary",children:(W,B)=>{var j=X("(case-sensitive)");s(W,j)},$$slots:{default:!0}})};L(w,R=>{v()&&R(A)}),s(N,I)},M=N=>{var I=H(),E=D(I),w=R=>{var W=X("Read rules file");s(R,W)},A=R=>{var W=H(),B=D(W),j=G=>{var q=X("Read file");s(G,q)},V=G=>{var q=X();J(()=>Q(q,`Read lines ${f()??""}-${l()??""}`)),s(G,q)};L(B,G=>{f()&&l()?G(V,!1):G(j)},!0),s(R,W)};L(E,R=>{a()?R(w):R(A,!1)},!0),s(N,I)};L(C,N=>{x()?N(U):N(M,!1)},!0),s(_,z)};L(h,_=>{u()?_(p):_($,!1)},!0),s(i,c)};L(T,i=>{ge(m,"$ctx",o).toolUseState.phase<=pe.running?i(k):i(g,!1)}),s(r,y),ce(),n()}var Td=S('<code class="c-view-tool-use-details__value svelte-1uvztgz"> </code>'),Id=S('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>',1),xd=S('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>'),Ud=S('<div class="c-view-tool-use-details svelte-1uvztgz"><div class="c-view-tool-use-details__content svelte-1uvztgz"><!> <!></div></div>');function Cd(r,t){ie(t,!0);const[o,n]=Ce(),m=_t();let f=F(t,"toolUseInput",19,()=>ge(m,"$ctx",o).toolUseInput),l=d(()=>typeof f().search_query_regex=="string"?f().search_query_regex:void 0),u=d(()=>typeof f().case_sensitive=="boolean"&&f().case_sensitive),x=d(()=>typeof f().context_lines_before=="number"?f().context_lines_before:5),v=d(()=>typeof f().context_lines_after=="number"?f().context_lines_after:5),a=d(()=>f().view_range&&Array.isArray(f().view_range)&&(f().view_range[0]!==0||f().view_range[1]!==0)?f().view_range:void 0);var y=H(),T=D(y),k=g=>{var i=Ud(),c=b(i),h=b(c),p=z=>{var C=Id(),U=D(C),M=b(U);ae(M,{size:1,class:"c-view-tool-use-details__label",children:(B,j)=>{var V=X("Search Pattern");s(B,V)},$$slots:{default:!0}});var N=O(M,2);ae(N,{size:1,color:"secondary",children:(B,j)=>{var V=Td(),G=b(V);J(()=>Q(G,e(l))),s(B,V)},$$slots:{default:!0}});var I=O(U,2),E=b(I);ae(E,{size:1,class:"c-view-tool-use-details__label",children:(B,j)=>{var V=X("Case Sensitive");s(B,V)},$$slots:{default:!0}});var w=O(E,2);ae(w,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(B,j)=>{var V=X();J(()=>Q(V,e(u)?"Yes":"No")),s(B,V)},$$slots:{default:!0}});var A=O(I,2),R=b(A);ae(R,{size:1,class:"c-view-tool-use-details__label",children:(B,j)=>{var V=X("Context Lines");s(B,V)},$$slots:{default:!0}});var W=O(R,2);ae(W,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(B,j)=>{var V=X();J(()=>Q(V,`${e(x)??""} before, ${e(v)??""} after`)),s(B,V)},$$slots:{default:!0}}),s(z,C)};L(h,z=>{e(l)&&z(p)});var $=O(h,2),_=z=>{var C=xd(),U=b(C);ae(U,{size:1,class:"c-view-tool-use-details__label",children:(N,I)=>{var E=X("View Range");s(N,E)},$$slots:{default:!0}});var M=O(U,2);ae(M,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(N,I)=>{var E=X();J(()=>Q(E,`Lines ${e(a)[0]??""} to ${(e(a)[1]===-1?"end":e(a)[1])??""}`)),s(N,E)},$$slots:{default:!0}}),s(z,C)};L($,z=>{e(a)&&z(_)}),s(g,i)};L(T,g=>{(e(l)||e(a))&&g(k)}),s(r,y),ce(),n()}const Ad="Here's the result of running `cat -n`",Ed="Total lines in file:";function yo(r){return r.view_range&&Array.isArray(r.view_range)?{start:r.view_range[0],stop:r.view_range[1]}:{start:0,stop:0}}function Tr(r){return typeof r.search_query_regex=="string"?r.search_query_regex:void 0}var zd=S("<span>Render Mermaid</span>"),Ld=S("<span> </span>"),Nd=S('<div class="c-mermaid-wrapper svelte-pw0otf"><!></div>'),Rd=S('<div class="c-mermaid-loading svelte-pw0otf"><!></div>'),Md=S('<div class="c-mermaid-error svelte-pw0otf"><!></div>'),Dd=S('<div class="c-mermaid-tool"><!></div>'),Od=S("<!> ",1),Pd=S("<!> ",1),Fd=S("<!> ",1),qd=S('<div class="c-task-diff-badges svelte-6ivqgh"><!> <!> <!></div>');function bo(r,t){ie(t,!0);var o=qd(),n=b(o),m=v=>{He(v,{content:"Added",children:(a,y)=>{var T=H(),k=D(T);et(k,()=>oo.Root,(g,i)=>{i(g,{color:"neutral",size:0,children:(c,h)=>{var p=Od(),$=D(p);de($,{name:"circle-fading-plus",size:1});var _=O($);J(()=>Q(_,` ${t.taskCounts.created??""}`)),s(c,p)},$$slots:{default:!0}})}),s(a,T)},$$slots:{default:!0}})};L(n,v=>{t.taskCounts.created>0&&v(m)});var f=O(n,2),l=v=>{He(v,{content:"Updated",children:(a,y)=>{var T=H(),k=D(T);et(k,()=>oo.Root,(g,i)=>{i(g,{color:"neutral",size:0,children:(c,h)=>{var p=Pd(),$=D(p);de($,{name:"circle-fading-arrow-up",size:1});var _=O($);J(()=>Q(_,` ${t.taskCounts.updated??""}`)),s(c,p)},$$slots:{default:!0}})}),s(a,T)},$$slots:{default:!0}})};L(f,v=>{t.taskCounts.updated>0&&v(l)});var u=O(f,2),x=v=>{He(v,{content:"Deleted",children:(a,y)=>{var T=H(),k=D(T);et(k,()=>oo.Root,(g,i)=>{i(g,{color:"neutral",size:0,children:(c,h)=>{var p=Fd(),$=D(p);de($,{name:"trash-2",size:1});var _=O($);J(()=>Q(_,` ${t.taskCounts.deleted??""}`)),s(c,p)},$$slots:{default:!0}})}),s(a,T)},$$slots:{default:!0}})};L(u,v=>{t.taskCounts.deleted>0&&v(x)}),s(r,o),ce()}function Ma(r,t=new Set(Object.values(ht))){const o={...r,isVisible:!1,subTasksData:[]};let n=!1;if(r.subTasksData&&r.subTasksData.length>0){const f=[];for(const l of r.subTasksData){const u=Ma(l,t);f.push(u),u.isVisible&&(n=!0)}o.subTasksData=f}const m=function(f,l){return l.size!==0&&l.has(f.state)}(r,t);return o.isVisible=m||n,o}function Wd(r,t){const o=r.map(n=>Ma(n));return{uuid:`dummy-root-${t}`,name:`${t} Tasks`,description:`Tasks that were ${t.toLowerCase()}`,state:ht.NOT_STARTED,subTasks:r.map(n=>n.uuid),subTasksData:o,lastUpdated:Date.now(),lastUpdatedBy:po.AGENT,isVisible:!0}}function Ir(r,t){try{r(Un()),t()}finally{r(Cn())}}const jd=(r,t=vt)=>{var o=Bd(),n=D(o);je(n,{size:.5,variant:"ghost-block",color:"neutral",readonly:!0,children:(l,u)=>{de(l,{get name(){return t().icon},size:2})},$$slots:{default:!0}});var m=O(n,2),f=b(m);ae(f,{size:1,children:(l,u)=>{var x=X();J(()=>Q(x,t().name)),s(l,x)},$$slots:{default:!0}}),s(r,o)};var Bd=S('<!> <div class="c-task-diff-renderer__item-name svelte-ui33ty"><!></div>',1),Gd=S('<div class="c-task-diff-renderer__empty svelte-ui33ty"><!></div>'),Vd=S('<div class="c-task-diff-renderer"><!></div>');function wo(r,t){ie(t,!0);const[o,n]=Ce(),m=(c,h=vt)=>{var p=H(),$=D(p),_=z=>{no(z,{get taskUuid(){return e(a)[h().name]},editable:!1})};L($,z=>{e(a)[h().name]&&z(_)}),s(c,p)},f=It(),l=to(f),u=gt(),x=d(()=>An(t.text,ge(l,"$rootTaskUuid",o))),v=d(()=>[{name:"Created",icon:"circle-fading-plus",tasks:e(x).created},{name:"Updated",icon:"circle-fading-arrow-up",tasks:e(x).updated},{name:"Deleted",icon:"trash-2",tasks:e(x).deleted}].filter(c=>c.tasks.length>0));let a=ue(Qe({}));Me(()=>{const c={},h=[];return Ir(u,()=>{for(const p of e(v)){for(const _ of p.tasks)u(Ao(_)),h.push(_.uuid);const $=Wd(p.tasks,p.name);c[p.name]=$.uuid,u(Ao($)),h.push($.uuid)}}),P(a,c,!0),()=>{Ir(u,()=>{for(const p of h)u(En(p))})}});const y=d(()=>e(v).length>0);var T=Vd(),k=b(T),g=c=>{var h=H(),p=D(h);Oe(p,17,()=>e(v),$=>$.name,($,_)=>{{let z=d(()=>`id-${e(_).name}`);va($,{get id(){return e(z)},class:"c-task-tree-item",get item(){return e(_)},hasNestedItems:!0,disabled:!0,expandable:!1,expanded:!0,get headerContents(){return jd},get contents(){return m}})}}),s(c,h)},i=c=>{var h=Gd(),p=b(h);ae(p,{size:1,color:"neutral",children:($,_)=>{var z=X("No task changes to display");s($,z)},$$slots:{default:!0}}),s(c,h)};L(k,c=>{e(y)?c(g):c(i,!1)}),s(r,T),ce(),n()}function Zs(r,t){ie(t,!1);const o=hs.tryGetFromContext();Zt(),je(r,{variant:"ghost-block",color:"neutral",size:.5,onclick:function(n){n?.stopPropagation(),o?.setActiveTab(js.tasks)},children:(n,m)=>{de(n,{name:"external-link",size:1})},$$slots:{default:!0}}),ce()}var Hd=S('<div class="c-task-list-tool__no-diff svelte-177zs5s"><!></div>'),Kd=S('<div class="c-task-list-tool__details svelte-177zs5s"><!></div>'),Jd=S('<div class="c-task-list-tool-use-details__empty svelte-vshkmb"><!></div>'),Yd=S('<div class="c-task-list-tool-use-details__section svelte-vshkmb"><div class="c-task-list-tool-use-details__section-header svelte-vshkmb"><!></div> <div class="c-task-list-tool-use-details__task-list"><!></div></div>'),Xd=S('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),Qd=S('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),Zd=S('<div class="c-task-list-tool-use-details svelte-vshkmb"><!></div>'),eu=S('<div class="c-view-task-list-tool__details svelte-1mvzn7s"><!></div>'),tu=S('<div class="c-reorganize-task-list-tool__no-diff svelte-1528ctp"><!></div>'),su=S('<div class="c-reorganize-task-list-tool__details svelte-1528ctp"><!></div>'),ou=S('<div class="c-add-tasks-tool__no-diff svelte-1rjuhj"><!></div>'),ru=S('<div class="c-add-tasks-tool__details svelte-1rjuhj"><!></div>'),au=S('<div class="searching svelte-c2wciv">Searching...</div>'),nu=S('<div class="no-results svelte-c2wciv">No search results available</div>'),lu=S('<div class="tool-content svelte-c2wciv"><!></div>'),iu=S('<span class="total-info svelte-h9oju"> </span>'),cu=S('<span class="range-info svelte-h9oju"> <!></span>'),du=S("<span><!></span>"),uu=S('<span class="context-info svelte-z37tjo"> </span>'),vu=S('<span class="search-info svelte-z37tjo">Pattern <code class="svelte-z37tjo"> </code> <!></span>'),pu=S("<span><!></span>");const xr={[Ct.shell]:gs,[Ct.webFetch]:function(r,t){let o=F(t,"toolUseInput",19,()=>({}));Ra(r,{toolName:"Web Fetch",get toolUseInput(){return o()},get toolUseState(){return t.toolUseState}})},[Ct.strReplaceEditor]:La,[Ct.applyPatch]:function(r,t){ie(t,!0);const[o,n]=Ce(),m=_t();let f=F(t,"toolUseInput",19,()=>({}));qe(r,{showToolOutput:!0,header:v=>{Fe(v,{toolName:"Apply Patch",icon:k=>{de(k,{name:"file-diff"})},secondary:k=>{(function(g,i){ie(i,!0);const c=()=>ge($,"$ctx",h),[h,p]=Ce(),$=_t();let _=d(()=>{const z=c().toolUseInput.input;return typeof z=="string"?id(z).length:0});ae(g,{size:1,color:"secondary",children:(z,C)=>{var U=H(),M=D(U),N=E=>{var w=X();J(A=>Q(w,`Changing ${A??""}`),[()=>Bt(e(_),"file")]),s(E,w)},I=E=>{var w=H(),A=D(w),R=W=>{var B=X();J(j=>Q(B,`Changed ${j??""}`),[()=>Bt(e(_),"file")]),s(W,B)};L(A,W=>{c().toolUseState.phase===pe.completed&&W(R)},!0),s(E,w)};L(M,E=>{c().toolUseState.phase===pe.running?E(N):E(I,!1)}),s(z,U)},$$slots:{default:!0}}),ce(),p()})(k,{})},toolStatus:k=>{var g=md(),i=D(g);za(i,{get requestId(){return ge(m,"$ctx",o).requestId}}),Js(O(i,2),{}),s(k,g)},$$slots:{icon:!0,secondary:!0,toolStatus:!0}})},details:v=>{var a=H(),y=D(a),T=k=>{hd(k,{get toolUseInput(){return f()},get toolUseState(){return t.toolUseState}})};L(y,k=>{t.toolUseState.phase===pe.completed&&k(T)}),s(v,a)},error:v=>{var a=H(),y=D(a),T=k=>{Et(k,ut(()=>t.toolUseState.result??{}))};L(y,k=>{t.toolUseState.phase===pe.error&&k(T)}),s(v,a)},$$slots:{header:!0,details:!0,error:!0}}),ce(),n()},[Ct.codebaseRetrieval]:function(r,t){ie(t,!0);const o=()=>ge(l,"$enableCommitIndexing",n),[n,m]=Ce();let f=F(t,"toolUseInput",19,()=>({}));const l=Ot("enableCommitIndexing");{const u=v=>{var a=H(),y=D(a),T=k=>{var g=kd(),i=D(g);de(i,{name:"code"}),s(k,g)};L(y,k=>{o()&&k(T)}),s(v,a)};let x=d(()=>!o());Oo(r,{get toolUseInput(){return f()},get noRetrieval(){return e(x)},retrieval:u,$$slots:{retrieval:!0}})}ce(),m()},[Ct.removeFiles]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=d(()=>Array.isArray(o().file_paths)?o().file_paths.filter(m=>typeof m=="string"):[]);qe(r,{showToolOutput:!1,header:f=>{Fe(f,{toolName:"Remove",icon:x=>{de(x,{name:"file-minus"})},secondary:x=>{var v=yd();Oe(v,20,()=>e(n),a=>a,(a,y)=>{vs(a,{get filepath(){return y}})}),s(x,v)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ce()},[Ct.view]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>At(o().path||o().file_path,"")),f=d(()=>o().type==="directory"),l=d(()=>Tr(o())!==void 0),u=d(()=>!e(f)&&!e(l)&&function(v){if(!v)return!1;const a=v.replace(/\\/g,"/"),y=`${ar}/${nr}/`,T=`${ar}\\${nr}\\`;return a.includes(y)||a.includes(T)}(e(m))&&t.toolUseState.phase===pe.completed),x=d(()=>e(u)&&t.toolUseState.result?.text?function(v){if(!v)return"";const a=v.split(`
`);let y=0,T=a.length;for(let g=0;g<a.length;g++){const i=a[g];if(i.startsWith(Ad)&&(y=g+1),i.startsWith(Ed)||i.trim()===""){T=g;break}}const k=a.slice(y,T).map(g=>{const i=g.match(/^\s*(\d+)\s+(.*)$/);return i?i[2]:g}).join(`
`).trim();return xn.extractContent(k)}(t.toolUseState.result.text):"");{const v=k=>{Fe(k,{icon:h=>{var p=H(),$=D(p),_=C=>{de(C,{name:"folder"})},z=C=>{var U=H(),M=D(U),N=E=>{de(E,{name:"search"})},I=E=>{de(E,{name:"file"})};L(M,E=>{e(l)?E(N):E(I,!1)},!0),s(C,U)};L($,C=>{e(f)?C(_):C(z,!1)}),s(h,p)},toolNameSnippet:h=>{{let p=d(()=>yo(o())),$=d(()=>Tr(o())),_=d(()=>function(z){return typeof z.case_sensitive=="boolean"&&z.case_sensitive}(o()));Sd(h,ut(()=>e(p),{get isDirectory(){return e(f)},get searchQueryRegex(){return e($)},get caseSensitive(){return e(_)},get isRulesFile(){return e(u)}}))}},secondary:h=>{var p=H(),$=D(p),_=C=>{{let U=d(()=>yo(o()));vs(C,ut({get filepath(){return e(m)}},()=>e(U)))}},z=C=>{{let U=d(()=>yo(o()));Bs(C,ut({get filepath(){return e(m)}},()=>e(U)))}};L($,C=>{e(f)?C(_):C(z,!1)}),s(h,p)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0}})},a=k=>{var g=H(),i=D(g),c=p=>{Gs(p,{maxHeight:90,children:($,_)=>{{let z=d(()=>({text:e(x),lang:"text",type:"code",raw:e(x)}));Uo($,{get token(){return e(z)}})}},$$slots:{default:!0}})},h=p=>{Cd(p,{get toolUseInput(){return o()}})};L(i,p=>{e(u)&&t.toolUseState.result?.text?p(c):p(h,!1)}),s(k,g)},y=k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)};let T=d(()=>e(l)||e(u));qe(r,{get showToolOutput(){return e(T)},get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:v,details:a,error:y,$$slots:{header:!0,details:!0,error:!0}})}ce()},[Ct.viewTaskList]:function(r,t){ie(t,!0);let o=ue(!0);qe(r,{showToolOutput:!0,get collapsed(){return e(o)},set collapsed(l){P(o,l,!0)},header:l=>{Fe(l,{toolName:"View Task List",icon:v=>{de(v,{name:"list-checks"})},secondary:v=>{Zs(v,{})},$$slots:{icon:!0,secondary:!0}})},details:l=>{var u=eu(),x=b(u),v=a=>{(function(y,T){ie(T,!0);const k=()=>ge(c,"$ctx",g),[g,i]=Ce(),c=_t();let h=F(T,"toolUseInput",31,()=>Qe(k().toolUseInput)),p=F(T,"toolUseState",31,()=>Qe(k().toolUseState)),$=F(T,"requestId",31,()=>Qe(k().requestId));const _=gt();Me(()=>{h(k().toolUseInput)}),Me(()=>{p(k().toolUseState)}),Me(()=>{$(k().requestId)});let z=ue(!1);const C=d(()=>p().phase===pe.completed);let U=ue(void 0),M=ue(void 0);Me(()=>{if(e(C)&&!e(z)&&p().result?.text){P(z,!0),P(U,p().result.text,!0);try{P(M,zn(Ln(e(U))),!0),_(Ao(e(M)))}catch(A){console.error("Failed to parse task list markdown:",A)}}});var N=Zd(),I=b(N),E=A=>{no(A,{get taskUuid(){return e(M).uuid},editable:!1})},w=A=>{var R=H(),W=D(R),B=V=>{var G=Jd(),q=b(G);ae(q,{size:1,color:"neutral",children:(ee,K)=>{var Y=X("No tasks to display");s(ee,Y)},$$slots:{default:!0}}),s(V,G)},j=V=>{var G=H(),q=D(G),ee=Y=>{var Z=Yd(),se=b(Z),te=b(se);ae(te,{size:1,weight:"medium",color:"primary",children:(ne,le)=>{var ve=X("Task List");s(ne,ve)},$$slots:{default:!0}});var oe=O(se,2),re=b(oe);Co(re,{get markdown(){return e(U)}}),s(Y,Z)},K=Y=>{var Z=H(),se=D(Z),te=re=>{var ne=Xd(),le=b(ne);ae(le,{size:1,color:"neutral",children:(ve,he)=>{var we=X("Loading...");s(ve,we)},$$slots:{default:!0}}),s(re,ne)},oe=re=>{var ne=Qd(),le=b(ne);ae(le,{size:1,color:"neutral",children:(ve,he)=>{var we=X("Waiting for task list...");s(ve,we)},$$slots:{default:!0}}),s(re,ne)};L(se,re=>{e(C)?re(te):re(oe,!1)},!0),s(Y,Z)};L(q,Y=>{e(U)?Y(ee):Y(K,!1)},!0),s(V,G)};L(W,V=>{e(M)!==void 0?V(B):V(j,!1)},!0),s(A,R)};L(I,A=>{e(M)!==void 0&&e(M).subTasks?.length>0?A(E):A(w,!1)}),s(y,N),ce(),i()})(a,{get toolUseState(){return t.toolUseState},editable:!1})};L(x,a=>{t.toolUseState.phase===pe.completed&&a(v)}),s(l,u)},error:l=>{var u=H(),x=D(u),v=a=>{Et(a,ut(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))};L(x,a=>{t.toolUseState.phase===pe.error&&a(v)}),s(l,u)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[Ct.reorganizeTaskList]:function(r,t){ie(t,!0);const[o,n]=Ce();let m=ue(!0);const f=It(),l=to(f),u=d(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),x=d(()=>t.toolUseState.result?.text||""),v=d(()=>e(u)?$o(e(x),ge(l,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0}),a=d(()=>e(v).created>0||e(v).updated>0||e(v).deleted>0);qe(r,{get collapsed(){return e(m)},set collapsed(g){P(m,g,!0)},header:g=>{Fe(g,{toolName:"Reorganize Task List",icon:p=>{de(p,{name:"list-checks"})},secondary:p=>{Zs(p,{})},headerActions:p=>{var $=H(),_=D($),z=C=>{bo(C,{get taskCounts(){return e(v)}})};L(_,C=>{e(a)&&C(z)}),s(p,$)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:g=>{var i=su(),c=b(i),h=$=>{wo($,{get text(){return e(x)}})},p=$=>{var _=H(),z=D(_),C=U=>{var M=tu(),N=b(M);ae(N,{size:1,color:"neutral",children:(I,E)=>{var w=X("No task changes to display");s(I,w)},$$slots:{default:!0}}),s(U,M)};L(z,U=>{e(u)&&!e(a)&&U(C)},!0),s($,_)};L(c,$=>{e(u)&&e(a)?$(h):$(p,!1)}),s(g,i)},error:g=>{Et(g,ut(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),ce(),n()},[Ct.updateTasks]:function(r,t){ie(t,!0);const[o,n]=Ce();let m=ue(!0);const f=It(),l=to(f),u=d(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),x=d(()=>t.toolUseState.result?.text||""),v=d(()=>e(u)?$o(e(x),ge(l,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0}),a=d(()=>e(v).created>0||e(v).updated>0||e(v).deleted>0);qe(r,{get collapsed(){return e(m)},set collapsed(g){P(m,g,!0)},header:g=>{Fe(g,{toolName:"Update Task List",icon:p=>{de(p,{name:"list-checks"})},secondary:p=>{Zs(p,{})},headerActions:p=>{var $=H(),_=D($),z=C=>{bo(C,{get taskCounts(){return e(v)}})};L(_,C=>{e(a)&&C(z)}),s(p,$)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:g=>{var i=Kd(),c=b(i),h=$=>{wo($,{get text(){return e(x)}})},p=$=>{var _=H(),z=D(_),C=U=>{var M=Hd(),N=b(M);ae(N,{size:1,color:"neutral",children:(I,E)=>{var w=X("No task changes to display");s(I,w)},$$slots:{default:!0}}),s(U,M)};L(z,U=>{e(u)&&!e(a)&&U(C)},!0),s($,_)};L(c,$=>{e(u)&&e(a)?$(h):$(p,!1)}),s(g,i)},error:g=>{var i=H(),c=D(i),h=p=>{Et(p,ut(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))};L(c,p=>{t.toolUseState.phase===pe.error&&p(h)}),s(g,i)},$$slots:{header:!0,details:!0,error:!0}}),ce(),n()},[Ct.addTasks]:function(r,t){ie(t,!0);const[o,n]=Ce();let m=ue(!0);const f=It(),l=to(f),u=d(()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError),x=d(()=>t.toolUseState.result?.text||""),v=d(()=>e(u)?$o(e(x),ge(l,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0}),a=d(()=>e(v).created>0||e(v).updated>0||e(v).deleted>0);qe(r,{get collapsed(){return e(m)},set collapsed(g){P(m,g,!0)},header:g=>{Fe(g,{toolName:"Add Tasks",icon:p=>{de(p,{name:"list-checks"})},secondary:p=>{Zs(p,{})},headerActions:p=>{var $=H(),_=D($),z=C=>{bo(C,{get taskCounts(){return e(v)}})};L(_,C=>{e(a)&&C(z)}),s(p,$)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:g=>{var i=ru(),c=b(i),h=$=>{wo($,{get text(){return e(x)}})},p=$=>{var _=H(),z=D(_),C=U=>{var M=ou(),N=b(M);ae(N,{size:1,color:"neutral",children:(I,E)=>{var w=X("No task changes to display");s(I,w)},$$slots:{default:!0}}),s(U,M)};L(z,U=>{e(u)&&!e(a)&&U(C)},!0),s($,_)};L(c,$=>{e(u)&&e(a)?$(h):$(p,!1)}),s(g,i)},error:g=>{Et(g,ut(()=>t.toolUseState.result??{},{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),ce(),n()},[Ct.renderMermaid]:function(r,t){ie(t,!0);let o=ue(!1);const n=Lt();let m=d(()=>t.toolUseInput.title||"Mermaid Diagram"),f=d(()=>t.toolUseInput.diagram_definition||""),l=d(()=>({type:"code",lang:"mermaid",text:e(f),raw:"```mermaid\n"+e(f)+"\n```"}));function u(x){x?.stopPropagation(),n?.openMermaidDiagramPanel(e(f),e(m))}qe(r,{showToolOutput:!0,get collapsed(){return e(o)},set collapsed(a){P(o,a,!0)},header:a=>{Fe(a,{icon:i=>{de(i,{name:"workflow"})},toolNameSnippet:i=>{var c=zd();s(i,c)},secondary:i=>{var c=Ld(),h=b(c);J(()=>Q(h,e(m))),s(i,c)},headerActions:i=>{var c=H(),h=D(c),p=$=>{He($,{content:"Open in new tab",side:"bottom",children:(_,z)=>{je(_,{variant:"ghost-block",color:"neutral",size:.5,onclick:u,children:(C,U)=>{de(C,{name:"external-link",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})};L(h,$=>{t.toolUseState.phase===pe.completed&&e(f)&&$(p)}),s(i,c)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0,headerActions:!0}})},details:a=>{var y=Dd(),T=b(y),k=i=>{var c=Nd();Ta(b(c),{get token(){return e(l)},get title(){return e(m)}}),s(i,c)},g=i=>{var c=H(),h=D(c),p=_=>{var z=Rd(),C=b(z);ae(C,{children:(U,M)=>{var N=X("Rendering Mermaid diagram...");s(U,N)},$$slots:{default:!0}}),s(_,z)},$=_=>{var z=H(),C=D(z),U=M=>{var N=Md(),I=b(N);ae(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`Error rendering Mermaid diagram: ${(t.toolUseState.result?.text||"Unknown error")??""}`)),s(E,A)},$$slots:{default:!0}}),s(M,N)};L(C,M=>{t.toolUseState.phase===pe.error&&M(U)},!0),s(_,z)};L(h,_=>{t.toolUseState.phase===pe.running?_(p):_($,!1)},!0),s(i,c)};L(T,i=>{t.toolUseState.phase===pe.completed&&e(l)?i(k):i(g,!1)}),s(a,y)},$$slots:{header:!0,details:!0}}),ce()},[Ct.grepSearch]:function(r,t){ie(t,!0);var o={toolUseInput:{}};return qe(r,{header:f=>{Fe(f,{toolName:"Grep Search",icon:u=>{de(u,{name:"search"})},$$slots:{icon:!0}})},details:f=>{var l=lu(),u=b(l),x=a=>{{let y=d(()=>({text:t.toolUseState.result.text,lang:"text",type:"code",raw:t.toolUseState.result.text}));Uo(a,{get token(){return e(y)}})}},v=a=>{var y=H(),T=D(y),k=i=>{var c=au();s(i,c)},g=i=>{var c=nu();s(i,c)};L(T,i=>{t.toolUseState?.phase==="running"?i(k):i(g,!1)},!0),s(a,y)};L(u,a=>{t.toolUseState?.result?.text?a(x):a(v,!1)}),s(f,l)},$$slots:{header:!0,details:!0}}),ce(o)},[Ct.viewRangeUntruncated]:function(r,t){ie(t,!1);const o=()=>ge(f,"$ctx",n),[n,m]=Ce(),f=_t();function l(a){return typeof a.start_line=="number"?a.start_line:void 0}function u(a){return typeof a.end_line=="number"?a.end_line:void 0}function x(a){if(!a)return;const y=a.match(/<!-- toolType: ([^>]+) -->/);return y?y[1]:void 0}function v(a){return a?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(a):!1}Zt(),qe(r,{header:y=>{{const T=i=>{de(i,{name:"zoom-in"})},k=i=>{var c=du(),h=b(c);ae(h,{size:1,class:"c-view-range-untruncated__secondary",children:(p,$)=>{var _=H(),z=D(_),C=M=>{var N=X();J(I=>Q(N,I),[()=>v(x(o().toolUseState.result?.text))?"Reading terminal output range...":"Reading full output range..."]),s(M,N)},U=M=>{var N=H(),I=D(N),E=A=>{const R=Qt(()=>l(o().toolUseInput)),W=Qt(()=>u(o().toolUseInput)),B=Qt(()=>function(ee){if(!ee)return;const K=ee.match(/lines \d+-\d+ of (\d+) total lines/);if(K)return parseInt(K[1],10);const Y=ee.match(/Viewing lines \d+-\d+ \((\d+) total lines\)/);return Y?parseInt(Y[1],10):void 0}(o().toolUseState.result?.text));var j=cu(),V=b(j),G=O(V),q=ee=>{var K=iu(),Y=b(K);J(()=>Q(Y,`of ${e(B)??""} total lines`)),s(ee,K)};L(G,ee=>{e(B)&&ee(q)}),J(()=>Q(V,`View lines ${e(R)??""}-${e(W)??""} `)),s(A,j)},w=A=>{var R=X();J(W=>Q(R,W),[()=>v(x(o().toolUseState.result?.text))?"View terminal output range":"View full output range"]),s(A,R)};L(I,A=>{l(o().toolUseInput)&&u(o().toolUseInput)?A(E):A(w,!1)},!0),s(M,N)};L(z,M=>{o().toolUseState.phase<=pe.running?M(C):M(U,!1)}),s(p,_)},$$slots:{default:!0}}),s(i,c)};let g=Qt(()=>{return v(i=x(o().toolUseState.result?.text))?"View Terminal Output":i==="web-fetch"?"View Web Page":"View Full Output";var i});Fe(y,{get toolName(){return e(g)},icon:T,secondary:k,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ce(),m()},[Ct.searchUntruncated]:function(r,t){ie(t,!1);const o=()=>ge(f,"$ctx",n),[n,m]=Ce(),f=_t();function l(a){return typeof a.search_term=="string"?a.search_term:void 0}function u(a){return typeof a.context_lines=="number"?a.context_lines:2}function x(a){if(!a)return;const y=a.match(/<!-- toolType: ([^>]+) -->/);return y?y[1]:void 0}function v(a){return a?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(a):!1}Zt(),qe(r,{header:y=>{{const T=i=>{de(i,{name:"search"})},k=i=>{var c=pu(),h=b(c);ae(h,{size:1,class:"c-search-untruncated__secondary",children:(p,$)=>{var _=H(),z=D(_),C=M=>{var N=X();J(I=>Q(N,I),[()=>v(x(o().toolUseState.result?.text))?"Searching terminal output...":"Searching full output..."]),s(M,N)},U=M=>{var N=H(),I=D(N),E=A=>{var R=vu(),W=O(b(R)),B=b(W),j=O(W,2),V=G=>{var q=uu(),ee=b(q);J(K=>Q(ee,`(${K??""} context lines)`),[()=>u(o().toolUseInput)]),s(G,q)};L(j,G=>{u(o().toolUseInput)!==2&&G(V)}),J(G=>Q(B,G),[()=>l(o().toolUseInput)]),s(A,R)},w=A=>{var R=X();J(W=>Q(R,W),[()=>v(x(o().toolUseState.result?.text))?"Search terminal output":"Search full output"]),s(A,R)};L(I,A=>{l(o().toolUseInput)?A(E):A(w,!1)},!0),s(M,N)};L(z,M=>{o().toolUseState.phase<=pe.running?M(C):M(U,!1)}),s(p,_)},$$slots:{default:!0}}),s(i,c)};let g=Qt(()=>{return v(i=x(o().toolUseState.result?.text))?"Search Terminal Output":i==="web-fetch"?"Search Web Page":"Search Full Output";var i});Fe(y,{get toolName(){return e(g)},icon:T,secondary:k,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ce(),m()}};var gu=(r,t)=>e(t)?.focus(),hu=S('<button class="c-monaco-output-block__overlay svelte-1jc5ewx" aria-label="Focus editor"></button>'),mu=S('<div class="c-monaco-output-block__monaco-container svelte-1jc5ewx"><!> <!></div>'),fu=S('<div class="c-monaco-output-block__empty-state svelte-1jc5ewx"><!></div>'),$u=S('<div class="c-monaco-output-block svelte-1jc5ewx"><div class="c-monaco-output-block__header svelte-1jc5ewx"><!> <div class="c-monaco-output-block__actions svelte-1jc5ewx"><!> <!> <!></div></div> <!></div>');function Ur(r,t){ie(t,!0);let o,n=F(t,"label",19,()=>{}),m=F(t,"doScrollToBottom",3,!1),f=F(t,"monacoOptions",19,()=>({lineNumbers:"off",wordWrap:"off",lineDecorationsWidth:0,folding:!1,showFoldingControls:"never",readOnly:!0,stickyScroll:{enabled:!1},overviewRulerLanes:0,scrollbar:{vertical:"auto",horizontal:"auto",alwaysConsumeMouseWheel:!1,verticalScrollbarSize:5}})),l=F(t,"showCopyButton",3,!0),u=F(t,"showViewInFileButton",3,!0),x=ue(void 0),v=ue(void 0),a=ue(!1);function y(w){w||(o&&clearTimeout(o),o=void 0,P(x,void 0))}async function T(){if(t.content){o&&clearTimeout(o);try{await navigator.clipboard.writeText(t.content),P(x,"Copied!"),o=setTimeout(()=>e(v)?.requestClose(),1500)}catch(w){console.error("Failed to copy:",w),P(x,"Copy failed"),o=setTimeout(()=>e(v)?.requestClose(),1500)}}}let k=ue(void 0);Me(()=>{m()&&e(k)&&m()&&e(k)&&(e(k)?.layout(),e(k).revealLine(e(k).getModel().getLineCount()))}),Me(()=>{e(k)&&e(k)&&(e(k).onDidFocusEditorText(()=>{P(a,!0)}),e(k).onDidBlurEditorText(()=>{P(a,!1)}))});var g=$u(),i=b(g),c=b(i),h=w=>{var A=H(),R=D(A);Ge(R,()=>t.labelSnippet),s(w,A)},p=w=>{ae(w,{size:1,weight:"medium",children:(A,R)=>{var W=X();J(()=>Q(W,n())),s(A,W)},$$slots:{default:!0}})};L(c,w=>{t.labelSnippet?w(h):w(p,!1)});var $=O(c,2),_=b($),z=w=>{{let A=d(()=>e(x)||"Copy to clipboard"),R=d(()=>[is.Hover]);Mt(He(w,{onOpenChange:y,get content(){return e(A)},side:"bottom",get triggerOn(){return e(R)},children:(W,B)=>{{let j=d(()=>!t.content);je(W,{variant:"ghost-block",color:"neutral",size:1,get disabled(){return e(j)},$$events:{click:T},children:(V,G)=>{de(V,{name:"copy"})},$$slots:{default:!0}})}},$$slots:{default:!0}}),W=>P(v,W,!0),()=>e(v))}};L(_,w=>{l()&&w(z)});var C=O(_,2),U=w=>{He(w,{content:"View full content in editor",side:"bottom",children:(A,R)=>{{let W=d(()=>!t.content);je(A,{variant:"ghost-block",color:"neutral",size:1,get disabled(){return e(W)},$$events:{click(...B){t.onViewInFile?.apply(this,B)}},children:(B,j)=>{de(B,{name:"external-link"})},$$slots:{default:!0}})}},$$slots:{default:!0}})};L(C,w=>{u()&&w(U)});var M=O(C,2);Ge(M,()=>t.actions??vt);var N=O(i,2),I=w=>{var A=mu(),R=b(A),W=j=>{var V=hu();V.__click=[gu,k],s(j,V)};L(R,j=>{e(a)||j(W)});var B=O(R,2);et(B,()=>Gn.Root,(j,V)=>{V(j,{children:(G,q)=>{Bo(G,{height:100,get options(){return f()},get text(){return t.content},get lang(){return t.language},get editorInstance(){return e(k)},set editorInstance(ee){P(k,ee,!0)}})},$$slots:{default:!0}})}),s(w,A)},E=w=>{var A=fu(),R=b(A);ae(R,{size:1,color:"secondary",children:(W,B)=>{var j=X("No content available.");s(W,j)},$$slots:{default:!0}}),s(w,A)};L(N,w=>{t.content?w(I):w(E,!1)}),s(r,g),ce()}Rs(["click"]);var us=(r=>(r.SUCCESS="SUCCESS",r.SKIPPED="SKIPPED",r.FAILED="FAILED",r))(us||{}),_u=S("<div><!></div>");function So(r,t){var o=_u(),n=b(o),m=l=>{Ss(l,{size:1})},f=l=>{var u=H(),x=D(u),v=y=>{de(y,{name:"circle-check"})},a=y=>{var T=H(),k=D(T),g=c=>{de(c,{name:"circle-x"})},i=c=>{var h=H(),p=D(h),$=_=>{de(_,{name:"ban"})};L(p,_=>{t.commandResult==="skipped"&&_($)},!0),s(c,h)};L(k,c=>{t.commandResult==="error"?c(g):c(i,!1)},!0),s(y,T)};L(x,y=>{t.commandResult==="success"?y(v):y(a,!1)},!0),s(l,u)};L(n,l=>{t.commandResult==="loading"?l(m):l(f,!1)}),J(()=>at(o,1,`c-setup-script-command-status c-setup-script-command-status--${t.commandResult??""}`,"svelte-n0cgm1")),s(r,o)}var ku=S(" <!>",1),yu=S('<div class="c-setup-script-tool__save-button svelte-pndipf"><!></div>'),bu=S('<div class="c-setup-script-tool__save-option-icon svelte-pndipf"><!></div>'),wu=S('<div class="c-setup-script-tool__save-option-container svelte-pndipf"><span> </span> <!></div>'),Su=S("<!> <!>",1),Tu=S("<div><!></div>"),Iu=S('<div class="c-setup-script-tool__row svelte-pndipf"><div><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div></div>'),xu=S("View <!>",1),Uu=S('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <!></div>'),Cu=S("View <!>",1),Au=S('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__actions"><!></div></div>'),Eu=S('<div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div>'),zu=S('<div class="c-setup-script-tool svelte-pndipf"><div class="c-setup-script-tool__id svelte-pndipf"></div> <div class="c-setup-script-tool__script svelte-pndipf"><!> <div class="c-setup-script-tool__script__actions svelte-pndipf"><!></div></div> <div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div> <!></div>');function Ve(r,t){let o=F(t,"color",3,"neutral"),n=F(t,"size",3,0);var m=H(),f=D(m);et(f,()=>oo.Root,(l,u)=>{u(l,{get color(){return o()},get size(){return n()},children:(x,v)=>{var a=H(),y=D(a);Ge(y,()=>t.children),s(x,a)},$$slots:{default:!0}})}),s(r,m)}function Lu(r,t){t(!t())}var Nu=S('<strong> </strong> <span class="c-collapsible-content__toggle-icon svelte-i6ryvq"> </span>',1),Ru=S("<div><div><!></div></div>"),Mu=S('<div class="c-collapsible-content"><button class="c-collapsible-content__toggle svelte-i6ryvq"><!></button> <!></div>');Rs(["click"]);var Du=S("<strong> </strong>"),Ou=S('<div class="c-tool-result-fields__status-row svelte-1ckik1b"><!> <!></div>'),Pu=S("<strong> </strong>"),Fu=S("<!> <!>",1),qu=S("<strong> </strong> ",1),Wu=S('<div class="c-tool-result-fields__field svelte-1ckik1b"><!></div>'),ju=S('<div class="c-tool-result-fields svelte-1ckik1b"></div>');function As(r,t){function o(f,l){return l.split(".").reduce((u,x)=>u?.[x],f)}ie(t,!0);let n=d(()=>t.fields.filter(f=>{const l=o(t.data,f.key);return!(!l&&l!==0&&l!==!1)&&!(f.condition&&!f.condition(t.data))}));var m=ju();Oe(m,21,()=>e(n),Ye,(f,l)=>{const u=d(()=>function(T){const k=o(t.data,T.key);return T.transform?T.transform(k):String(k||"")}(e(l)));var x=H(),v=D(x),a=T=>{{let k=d(()=>e(l).maxHeight||"300px");(function(g,i){ie(i,!0);let c=F(i,"expanded",15,!1),h=F(i,"maxHeight",3,"300px"),p=F(i,"showBorder",3,!0),$=F(i,"contentClass",3,"");const _=`collapsible-${Math.random().toString(36).substring(2,11)}`;var z=Mu(),C=b(z);C.__click=[Lu,c];var U=b(C);ae(U,{size:1,color:"neutral",children:(I,E)=>{var w=Nu(),A=D(w),R=b(A),W=O(A,2),B=b(W);J(()=>{Q(R,`${i.label??""}:`),Q(B,c()?"▼":"▶")}),s(I,w)},$$slots:{default:!0}});var M=O(C,2),N=I=>{var E=Ru(),w=b(E);let A;var R=b(w);Ge(R,()=>i.children??vt),J(W=>{at(E,1,`c-collapsible-content__display ${$()??""}`,"svelte-i6ryvq"),Nt(E,"id",_),Ks(E,`max-height: ${h()??""};`),A=at(w,1,"c-collapsible-content__inner svelte-i6ryvq",null,A,W)},[()=>({bordered:p()})]),s(I,E)};L(M,I=>{c()&&I(N)}),J(()=>{Nt(C,"aria-expanded",c()),Nt(C,"aria-controls",_)}),s(g,z),ce()})(T,{get label(){return e(l).label},get maxHeight(){return e(k)},children:(g,i)=>{var c=H(),h=D(c),p=_=>{{let z=d(()=>e(l).color||"neutral");ae(_,{size:1,type:"monospace",get color(){return e(z)},children:(C,U)=>{var M=X();J(()=>Q(M,e(u))),s(C,M)},$$slots:{default:!0}})}},$=_=>{{let z=d(()=>e(l).color||"neutral");ae(_,{size:1,get color(){return e(z)},children:(C,U)=>{var M=X();J(()=>Q(M,e(u))),s(C,M)},$$slots:{default:!0}})}};L(h,_=>{e(l).type==="monospace"?_(p):_($,!1)}),s(g,c)},$$slots:{default:!0}})}},y=T=>{var k=Wu(),g=b(k),i=h=>{var p=Ou(),$=b(p);ae($,{size:1,color:"neutral",children:(z,C)=>{var U=Du(),M=b(U);J(()=>Q(M,`${e(l).label??""}:`)),s(z,U)},$$slots:{default:!0}});var _=O($,2);{let z=d(()=>e(l).statusColor||"neutral");Ve(_,{get color(){return e(z)},children:(C,U)=>{var M=X();J(()=>Q(M,e(u))),s(C,M)},$$slots:{default:!0}})}s(h,p)},c=h=>{var p=H(),$=D(p),_=C=>{var U=Fu(),M=D(U);ae(M,{size:1,color:"neutral",children:(I,E)=>{var w=Pu(),A=b(w);J(()=>Q(A,`${e(l).label??""}:`)),s(I,w)},$$slots:{default:!0}});var N=O(M,2);{let I=d(()=>e(l).color||"neutral");ae(N,{size:1,type:"monospace",get color(){return e(I)},children:(E,w)=>{var A=X();J(()=>Q(A,e(u))),s(E,A)},$$slots:{default:!0}})}s(C,U)},z=C=>{{let U=d(()=>e(l).color||"neutral");ae(C,{size:1,get color(){return e(U)},children:(M,N)=>{var I=qu(),E=D(I),w=b(E),A=O(E);J(()=>{Q(w,`${e(l).label??""}:`),Q(A,` ${e(u)??""}`)}),s(M,I)},$$slots:{default:!0}})}};L($,C=>{e(l).type==="monospace"?C(_):C(z,!1)},!0),s(h,p)};L(g,h=>{e(l).type==="status"?h(i):h(c,!1)}),s(T,k)};L(v,T=>{e(l).collapsible?T(a):T(y,!1)}),s(f,x)}),s(r,m),ce()}var Bu=S('<div class="c-start-worker-tool__counts svelte-1tg2ggt"><!> <!></div>'),Gu=S('<div class="c-start-worker-tool__running"><!></div>'),Vu=S(" <!>",1),Hu=S("<strong>Agent ID:</strong> ",1),Ku=S("<strong>Status:</strong> ",1),Ju=S('<div class="c-start-worker-tool__success-details"><!> <!></div>'),Yu=S("<strong>Error:</strong> ",1),Xu=S('<div class="c-start-worker-tool__error-details"><!></div>'),Qu=S('<div class="c-start-worker-tool__worker-header svelte-1tg2ggt"><div class="c-start-worker-tool__worker-title svelte-1tg2ggt"><!> <!></div></div> <div class="c-start-worker-tool__worker-details svelte-1tg2ggt"><!> <!></div>',1),Zu=S('<div class="c-start-worker-tool__results svelte-1tg2ggt"></div>'),ev=S('<div class="c-start-worker-tool__no-results"><!></div>'),tv=S('<div class="c-start-worker-tool__details svelte-1tg2ggt"><!></div>'),sv=S('<div class="c-send-instruction-tool__counts svelte-cnqzvu"><!> <!></div>'),ov=S('<div class="c-send-instruction-tool__running"><!></div>'),rv=S(" <!>",1),av=S("<strong>Agent ID:</strong> ",1),nv=S('<div class="c-send-instruction-tool__success-details"><!> <!></div>'),lv=S("<strong>Error:</strong> ",1),iv=S("<strong>Target Agent ID:</strong> ",1),cv=S('<div class="c-send-instruction-tool__error-details"><!> <!></div>'),dv=S('<div class="c-send-instruction-tool__instruction-header svelte-cnqzvu"><div class="c-send-instruction-tool__instruction-title svelte-cnqzvu"><!> <!></div></div> <div class="c-send-instruction-tool__instruction-details svelte-cnqzvu"><!></div>',1),uv=S('<div class="c-send-instruction-tool__results svelte-cnqzvu"></div>'),vv=S('<div class="c-send-instruction-tool__no-results"><!></div>'),pv=S('<div class="c-send-instruction-tool__details svelte-cnqzvu"><!></div>'),gv=S('<div class="c-read-worker-state-tool__counts svelte-1a2g1md"><!> <!></div>'),hv=S('<div class="c-read-worker-state-tool__running"><!></div>'),mv=S("<strong>Status:</strong>"),fv=S('<div class="c-read-worker-state-tool__status-row svelte-1a2g1md"><!> <!></div>'),$v=S('<div class="c-read-worker-state-tool__success-details"><!> <!> <!></div>'),_v=S("<strong>Error:</strong> ",1),kv=S('<div class="c-read-worker-state-tool__error-details"><!></div>'),yv=S('<div class="c-read-worker-state-tool__worker-header svelte-1a2g1md"><div class="c-read-worker-state-tool__worker-title svelte-1a2g1md"><!> <!></div></div> <div class="c-read-worker-state-tool__worker-details svelte-1a2g1md"><!></div>',1),bv=S('<div class="c-read-worker-state-tool__results svelte-1a2g1md"></div>'),wv=S('<div class="c-read-worker-state-tool__no-results"><!></div>'),Sv=S('<div class="c-read-worker-state-tool__details svelte-1a2g1md"><!></div>'),Tv=S('<div class="c-wait-worker-tool__counts svelte-116gs6l"><!> <!></div>'),Iv=S('<div class="c-wait-worker-tool__running"><!></div>'),xv=S("<strong>Target Status:</strong>"),Uv=S("<strong>Final Status:</strong>"),Cv=S("<strong>Wait Time:</strong> ",1),Av=S('<div class="c-wait-worker-tool__success-details"><div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <!></div>'),Ev=S("<strong>Error:</strong> ",1),zv=S("<strong>Agent ID:</strong> ",1),Lv=S("<strong>Target Status:</strong> ",1),Nv=S("<strong>Timeout:</strong> ",1),Rv=S('<div class="c-wait-worker-tool__error-details"><!> <!> <!> <!></div>'),Mv=S('<div class="c-wait-worker-tool__wait-header svelte-116gs6l"><div class="c-wait-worker-tool__wait-title svelte-116gs6l"><!> <!></div></div> <div class="c-wait-worker-tool__wait-details svelte-116gs6l"><!></div>',1),Dv=S('<div class="c-wait-worker-tool__results svelte-116gs6l"></div>'),Ov=S('<div class="c-wait-worker-tool__no-results"><!></div>'),Pv=S('<div class="c-wait-worker-tool__details svelte-116gs6l"><!></div>'),Fv=S('<div class="c-stop-worker-tool__counts svelte-1s0pbm1"><!> <!></div>'),qv=S('<div class="c-stop-worker-tool__running"><!></div>'),Wv=S("<strong>Agent ID:</strong> ",1),jv=S('<div class="c-stop-worker-tool__success-details"><!> <!></div>'),Bv=S("<strong>Error:</strong> ",1),Gv=S("<strong>Agent ID:</strong> ",1),Vv=S('<div class="c-stop-worker-tool__error-details"><!> <!></div>'),Hv=S('<div class="c-stop-worker-tool__agent-header svelte-1s0pbm1"><div class="c-stop-worker-tool__agent-title svelte-1s0pbm1"><!> <!></div></div> <div class="c-stop-worker-tool__agent-details svelte-1s0pbm1"><!></div>',1),Kv=S('<div class="c-stop-worker-tool__results svelte-1s0pbm1"></div>'),Jv=S('<div class="c-stop-worker-tool__no-results"><!></div>'),Yv=S('<div class="c-stop-worker-tool__details svelte-1s0pbm1"><!></div>'),Xv=S('<div class="c-delete-worker-tool__counts svelte-1wenjkg"><!> <!></div>'),Qv=S('<div class="c-delete-worker-tool__running"><!></div>'),Zv=S("<strong>Agent ID:</strong> ",1),ep=S('<div class="c-delete-worker-tool__success-details"><!> <!></div>'),tp=S("<strong>Error:</strong> ",1),sp=S("<strong>Agent ID:</strong> ",1),op=S('<div class="c-delete-worker-tool__error-details"><!> <!></div>'),rp=S('<div class="c-delete-worker-tool__agent-header svelte-1wenjkg"><div class="c-delete-worker-tool__agent-title svelte-1wenjkg"><!> <!></div></div> <div class="c-delete-worker-tool__agent-details svelte-1wenjkg"><!></div>',1),ap=S('<div class="c-delete-worker-tool__results svelte-1wenjkg"></div>'),np=S('<div class="c-delete-worker-tool__no-results"><!></div>'),lp=S('<div class="c-delete-worker-tool__details svelte-1wenjkg"><!></div>'),ip=S('<div class="c-read-edits-tool__counts svelte-spvkd4"><!> <!> <!></div>'),cp=S('<div class="c-read-edits-tool__running"><!></div>'),dp=S("<strong>Agent ID:</strong> ",1),up=S("<strong> </strong>"),vp=S('<div class="c-read-edits-tool__file-edit svelte-spvkd4"><div class="c-read-edits-tool__file-header svelte-spvkd4"><!> <!></div> <!></div>'),pp=S('<div class="c-read-edits-tool__file-edits svelte-spvkd4"><!> <!></div>'),gp=S('<div class="c-read-edits-tool__success-details"><!> <!></div>'),hp=S("<strong>Error:</strong> ",1),mp=S("<strong>Agent ID:</strong> ",1),fp=S('<div class="c-read-edits-tool__error-details"><!> <!></div>'),$p=S('<div class="c-read-edits-tool__agent-header svelte-spvkd4"><div class="c-read-edits-tool__agent-title svelte-spvkd4"><!> <!></div></div> <div class="c-read-edits-tool__agent-details svelte-spvkd4"><!></div>',1),_p=S('<div class="c-read-edits-tool__results svelte-spvkd4"></div>'),kp=S('<div class="c-read-edits-tool__no-results"><!></div>'),yp=S('<div class="c-read-edits-tool__details svelte-spvkd4"><!></div>'),bp=S('<div class="c-apply-edits-tool__counts svelte-8hutmy"><!> <!> <!></div>');const Cr={[st.editFile]:La,[st.readFile]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=d(()=>At(o().file_path,""));qe(r,{header:f=>{{const l=v=>{de(v,{name:"file"})},u=v=>{Bs(v,{get filepath(){return e(n)}})};let x=d(()=>[e(n)]);Fe(f,{toolName:"Read",get formattedToolArgs(){return e(x)},icon:l,secondary:u,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ce()},[st.saveFile]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=d(()=>At(o().path,At(o().file_path,""))),m=d(()=>t.toolUseState.phase===pe.cancelled?"File creation cancelled":t.toolUseState.phase===pe.cancelling?"Cancelling creation of file":t.toolUseState.phase===pe.completed?"Created file":t.toolUseState.phase===pe.error?"File creation failed.":"Creating file...");{const f=x=>{Fe(x,{get toolName(){return e(m)},icon:y=>{de(y,{name:"file-plus"})},secondary:y=>{Bs(y,{get filepath(){return e(n)}})},$$slots:{icon:!0,secondary:!0}})},l=x=>{var v=_c(),a=b(v);{let y=d(()=>At(o().file_content,"")),T=d(()=>At(o().path,""));Bo(a,{get text(){return e(y)},get pathName(){return e(T)}})}s(x,v)};let u=d(()=>t.toolUseState.phase===pe.completed);qe(r,{get showToolOutput(){return e(u)},header:f,details:l,$$slots:{header:!0,details:!0}})}ce()},[st.launchProcess]:gs,[st.killProcess]:gs,[st.readProcess]:gs,[st.writeProcess]:gs,[st.listProcesses]:gs,[st.waitProcess]:gs,[st.openBrowser]:function(r,t){let o=F(t,"toolUseInput",19,()=>({}));Ra(r,{toolName:"Open in Browser",get toolUseInput(){return o()},get toolUseState(){return t.toolUseState}})},[st.remember]:function(r,t){ie(t,!0);const[o,n]=Ce();let m=F(t,"toolUseInput",19,()=>({}));const f=Ot("enableMemoryRetrieval");var l=H(),u=D(l),x=a=>{qe(a,{header:k=>{{const g=c=>{de(c,{name:"archive"})};let i=d(()=>[At(m().memory,"")]);Fe(k,{toolName:"Remember",get formattedToolArgs(){return e(i)},icon:g,$$slots:{icon:!0}})}},details:k=>{{let g=d(()=>({memoriesRequestId:"",memory:At(m().memory,""),isFlushed:!0}));(function(i,c){ie(c,!0);let h=d(()=>c.memoryData?function(w){const A=w.match(/^\[SCOPE:\s*([^\]]+)\]/);if(A)return A[1].trim()}(c.memoryData.memory):void 0),p=d(()=>c.memoryData?c.memoryData.memory.replace(/^\[SCOPE:\s*[^\]]+\]\s*/,"").trim():void 0);var $=zc(),_=b($),z=w=>{var A=Ec(),R=D(A),W=b(R);ae(W,{size:1,weight:"light",color:"secondary",children:(V,G)=>{var q=X("Scope");s(V,q)},$$slots:{default:!0}});var B=O(R,2),j=b(B);ae(j,{size:1,weight:"light",children:(V,G)=>{var q=X();J(()=>Q(q,e(h))),s(V,q)},$$slots:{default:!0}}),s(w,A)};L(_,w=>{e(h)&&w(z)});var C=O(_,2),U=b(C);ae(U,{size:1,weight:"light",color:"secondary",children:(w,A)=>{var R=X("Content");s(w,R)},$$slots:{default:!0}});var M=O(C,2),N=b(M);ae(N,{size:1,weight:"light",children:(w,A)=>{var R=X();J(()=>Q(R,e(p))),s(w,R)},$$slots:{default:!0}});var I=O(M,2),E=w=>{Ac(w,{get memoryData(){return c.memoryData},get requestId(){return c.requestId}})};L(I,w=>{c.requestId&&w(E)}),s(i,$),ce()})(k,{get memoryData(){return e(g)},get requestId(){return t.toolUseState.requestId}})}},$$slots:{header:!0,details:!0}})},v=a=>{qe(a,{header:T=>{{const k=i=>{de(i,{name:"archive"})};let g=d(()=>[At(m().memory,"")]);Fe(T,{toolName:"Remember",get formattedToolArgs(){return e(g)},icon:k,$$slots:{icon:!0}})}},$$slots:{header:!0}})};L(u,a=>{ge(f,"$enableMemoryRetrieval",o)?a(x):a(v,!1)}),s(r,l),ce(),n()},[st.diagnostics]:function(r){qe(r,{header:o=>{Fe(o,{toolName:"Diagnostics",icon:m=>{de(m,{name:"circle-alert",size:2})},$$slots:{icon:!0}})},$$slots:{header:!0}})},[st.setupScript]:function(r,t){ie(t,!0);let o=d(()=>{try{const q=t.toolUse?.input_json||"{}";return typeof q=="string"?JSON.parse(q):{}}catch(q){return console.error("Failed to parse tool input JSON:",q),{}}}),n=d(()=>{try{const q=t.toolUseState.result?.text||"{}";return typeof q=="string"?JSON.parse(q):q}catch(q){return console.error("Failed to parse tool result:",q),null}}),m=d(()=>e(o).script_content||""),f=d(()=>e(n)?.script_result||null),l=d(()=>e(n)?.test_results||[]),u=d(()=>t.toolUseState.phase===pe.running),x=d(()=>{try{return e(u)&&e(o).test_commands&&Array.isArray(e(o).test_commands)?e(o).test_commands:[]}catch(q){return console.error("Failed to parse test commands:",q),[]}}),v=ue(Qe([])),a=ue(()=>{});const y=Lt(),T=it(fs.key),k="setup.sh",g=gt();function i(q){g(Ns({repoRoot:"",pathName:q.path,allowOutOfWorkspace:!0,openLocalUri:q.location==="home"}))}async function c(q){q.stopPropagation();const ee=e(v).length>0?e(v)[0]:null;try{ee?i(ee):y.openScratchFile(e(m),"shellscript")}catch(K){console.error("Error opening script in editor:",K)}}function h(q,ee="plaintext"){y.openScratchFile(q,ee)}async function p(){if(T)try{const q=(await T.listSetupScripts()).filter(ee=>ee.content.trim()===e(m).trim());P(v,q,!0)}catch(q){console.error("Error checking existing scripts:",q)}}let $=d(()=>{const q=e(v).some(ee=>ee.location==="git");return[{id:"home",...e(v).some(ee=>ee.location==="home")?{label:"Saved locally (in home directory)",lucideIcon:"check"}:{label:"Save locally (in home directory)",endIcon:void 0,lucidIcon:void 0}},{id:"git",...q?{label:"Saved in git repository",lucideIcon:"check"}:{label:"Save in git repository",endIcon:void 0,lucidIcon:void 0}}]});Hs(async()=>{await p()});const _={[us.SUCCESS]:"success",[us.FAILED]:"error",[us.SKIPPED]:"skipped"};let z=d(()=>e(u)?"Running script...":t.toolUseState.phase===pe.completed?"Script ran successfully":t.toolUseState.phase===pe.error?e(f)?.status===us.FAILED?"Script failed to run":e(l).some(q=>q.status===us.FAILED)?"Script ran with failed tests":e(l).some(q=>q.status===us.SKIPPED)?"Script ran but skipped tests":"Script failed":t.toolUseState.phase===pe.cancelled?"Script cancelled":t.toolUseState.phase===pe.runnable?"Waiting for user approval to run":"");var C={toolUseInput:{}},U=zu(),M=b(U),N=O(M,2),I=b(N);ae(I,{size:2,weight:"medium",children:(q,ee)=>{var K=X("Setup script created");s(q,K)},$$slots:{default:!0}});var E=O(I,2),w=b(E);ae(w,{size:1,children:(q,ee)=>{var K=ku(),Y=D(K);Js(O(Y),{}),J(()=>Q(Y,`${e(z)??""} `)),s(q,K)},$$slots:{default:!0}});var A=O(N,2),R=b(A),W=q=>{Ur(q,{label:"Generated script",get content(){return e(m)},language:"bash",onViewInFile:c,actions:K=>{var Y=Tu(),Z=b(Y);et(Z,()=>Xe.Root,(se,te)=>{te(se,{get requestOpen(){return e(a)},set requestOpen(oe){P(a,oe,!0)},children:(oe,re)=>{var ne=Su(),le=D(ne);et(le,()=>Xe.Trigger,(he,we)=>{we(he,{children:(fe,me)=>{He(fe,{content:"Save script",side:"bottom",children:(_e,be)=>{var ke=yu(),Ae=b(ke);zt(Ae,{variant:"ghost-block",color:"neutral",size:1,$$events:{click(...xe){e(a)?.apply(this,xe)}},iconLeft:xe=>{de(xe,{name:"save"})},children:(xe,Ee)=>{var Se=X("Save");s(xe,Se)},$$slots:{iconLeft:!0,default:!0}}),s(_e,ke)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ve=O(le,2);et(ve,()=>Xe.Content,(he,we)=>{we(he,{side:"bottom",align:"start",children:(fe,me)=>{var _e=H(),be=D(_e);Oe(be,17,()=>e($),Ye,(ke,Ae)=>{var ze=H(),xe=D(ze);et(xe,()=>Xe.Item,(Ee,Se)=>{Se(Ee,{onSelect:Ke=>{(async function($e,Ue){$e.stopPropagation();const De=e(v).find(Ie=>Ie.location===Ue);if(De&&i(De),T){try{const Ie=Ue,Le=await T.saveSetupScript(k,e(m),Ie);if(Le.success&&Le.path){const nt={name:k,path:Le.path,content:e(m),location:Ie};e(v).push(nt),i(nt)}else console.error("Failed to save script:",Le.error)}catch(Ie){console.error("Error saving script:",Ie)}await p()}else console.error("RemoteAgentsModel not available")})(Ke,e(Ae).id)},children:(Ke,$e)=>{var Ue=wu(),De=b(Ue),Ie=b(De),Le=O(De,2),nt=Ze=>{var ct=bu(),pt=b(ct);de(pt,{get name(){return e(Ae).lucideIcon}}),s(Ze,ct)};L(Le,Ze=>{e(Ae).lucideIcon&&Ze(nt)}),J(()=>Q(Ie,e(Ae).label)),s(Ke,Ue)},$$slots:{default:!0}})}),s(ke,ze)}),s(fe,_e)},$$slots:{default:!0}})}),s(oe,ne)},$$slots:{default:!0}})}),s(K,Y)},$$slots:{actions:!0}})};L(R,q=>{e(m)&&q(W)});var B=O(R,2),j=q=>{var ee=H(),K=D(ee),Y=Z=>{Ur(Z,{get content(){return e(f).output},language:"bash",doScrollToBottom:!0,onViewInFile:()=>h(e(f).output||"No output available","bash"),labelSnippet:te=>{var oe=Iu(),re=b(oe),ne=b(re);{let he=d(()=>e(u)?"loading":e(f).status?_[e(f).status]:"none");So(ne,{get commandResult(){return e(he)}})}var le=O(re,2),ve=b(le);ae(ve,{size:1,weight:"medium",children:(he,we)=>{var fe=H(),me=D(fe),_e=ke=>{var Ae=X("Running script...");s(ke,Ae)},be=ke=>{var Ae=H(),ze=D(Ae),xe=Se=>{var Ke=X("Script ran successfully");s(Se,Ke)},Ee=Se=>{var Ke=H(),$e=D(Ke),Ue=De=>{var Ie=X("Script failed to run");s(De,Ie)};L($e,De=>{e(f).status===us.FAILED&&De(Ue)},!0),s(Se,Ke)};L(ze,Se=>{e(f).status===us.SUCCESS?Se(xe):Se(Ee,!1)},!0),s(ke,Ae)};L(me,ke=>{e(u)?ke(_e):ke(be,!1)}),s(he,fe)},$$slots:{default:!0}}),s(te,oe)},$$slots:{labelSnippet:!0}})};L(K,Z=>{e(f)?.output&&Z(Y)}),s(q,ee)};L(B,q=>{(e(f)||e(u))&&q(j)});var V=O(A,2),G=q=>{var ee=Eu(),K=b(ee);ae(K,{size:1,weight:"medium",class:"c-setup-script-tool__section-header",children:(te,oe)=>{var re=X("Test Results:");s(te,re)},$$slots:{default:!0}});var Y=O(K,2),Z=te=>{var oe=H(),re=D(oe);Oe(re,17,()=>e(x),Ye,(ne,le)=>{var ve=Uu(),he=b(ve);So(b(he),{commandResult:"loading"});var we=O(he,2),fe=b(we);He(fe,{get content(){return e(le)},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(_e,be)=>{ae(_e,{size:1,weight:"medium",children:(ke,Ae)=>{var ze=X();J(()=>Q(ze,e(le))),s(ke,ze)},$$slots:{default:!0}})},$$slots:{default:!0}});var me=O(we,2);He(me,{content:"View full test result in editor",side:"bottom",children:(_e,be)=>{zt(_e,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>h(e(le))},children:(ke,Ae)=>{var ze=xu(),xe=O(D(ze));de(xe,{name:"external-link"}),s(ke,ze)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(ne,ve)}),s(te,oe)},se=te=>{var oe=H(),re=D(oe);Oe(re,17,()=>e(l),Ye,(ne,le)=>{var ve=Au(),he=b(ve),we=b(he);{let ke=d(()=>e(le).status?_[e(le).status]:"none");So(we,{get commandResult(){return e(ke)}})}var fe=O(he,2),me=b(fe);He(me,{get content(){return e(le).command},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(ke,Ae)=>{ae(ke,{size:1,type:"monospace",children:(ze,xe)=>{var Ee=X();J(()=>Q(Ee,e(le).command)),s(ze,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}});var _e=O(fe,2),be=b(_e);He(be,{content:"View full test result in editor",side:"bottom",children:(ke,Ae)=>{zt(ke,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>h(e(le).output||"No output available")},children:(ze,xe)=>{var Ee=Cu(),Se=O(D(Ee));de(Se,{name:"external-link"}),s(ze,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(ne,ve)}),s(te,oe)};L(Y,te=>{e(u)&&e(x).length>0?te(Z):te(se,!1)}),s(q,ee)};return L(V,q=>{(e(l).length>0||e(u)&&e(x).length>0)&&q(G)}),J(()=>Nt(M,"data-tool-id",t.toolUse.tool_use_id)),s(r,U),ce(C)},[st.readTerminal]:gs,[st.gitCommitRetrieval]:function(r,t){let o=F(t,"toolUseInput",19,()=>({}));Oo(r,{retrievalText:"Commit History",get toolUseInput(){return o()},retrieval:m=>{ae(m,{size:1,color:"neutral",children:(f,l)=>{var u=Pc(),x=D(u);de(x,{name:"git-commit-horizontal"}),s(f,u)},$$slots:{default:!0}})},$$slots:{retrieval:!0}})},[st.memoryRetrieval]:function(r,t){let o=F(t,"toolUseInput",19,()=>({}));Oo(r,{retrievalText:"Memories",get toolUseInput(){return o()}})},[st.startWorkerAgent]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().workers)?o().workers:[]),f=d(()=>(()=>{const a=[];return e(m).length>0&&a.push(Bt(e(m).length,"worker")),a})()),l=d(()=>(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),y=Array.isArray(a.startedWorkers)?a.startedWorkers:[],T=Array.isArray(a.failedWorkers)?a.failedWorkers:[];return[...y,...T]}catch(a){console.error("Failed to parse start worker agent tool response:",a)}return[]})()),u=d(()=>e(l).filter(a=>a.success).length),x=d(()=>e(l).filter(a=>!a.success).length),v=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:k=>{Fe(k,{toolName:"Start Worker Agents",get formattedToolArgs(){return e(f)},icon:c=>{de(c,{name:"users-round"})},secondary:c=>{var h=H(),p=D(h),$=_=>{var z=Bu(),C=b(z),U=I=>{Ve(I,{color:"success",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(u)??""} started`)),s(E,A)},$$slots:{default:!0}})};L(C,I=>{e(u)>0&&I(U)});var M=O(C,2),N=I=>{Ve(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(x)??""} failed`)),s(E,A)},$$slots:{default:!0}})};L(M,I=>{e(x)>0&&I(N)}),s(_,z)};L(p,_=>{e(v)&&e(n)&&_($)}),s(c,h)},$$slots:{icon:!0,secondary:!0}})},details:k=>{var g=tv(),i=b(g),c=p=>{var $=Gu(),_=b($);ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X("Starting worker agents...");s(z,U)},$$slots:{default:!0}}),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=Zu();Oe(M,21,()=>e(l),Ye,(N,I)=>{const E=d(()=>e(m)[e(I).index]||{});Xt(N,{class:"c-start-worker-tool__worker-card",children:(w,A)=>{var R=Qu(),W=D(R),B=b(W),j=b(B);ae(j,{size:1,weight:"medium",children:(Y,Z)=>{var se=Vu(),te=D(se),oe=O(te),re=ne=>{var le=X();J(()=>Q(le,`- ${e(E).summary??""}`)),s(ne,le)};L(oe,ne=>{e(E).summary&&ne(re)}),J(()=>Q(te,`Worker ${e(I).index+1} `)),s(Y,se)},$$slots:{default:!0}});var V=O(j,2);{let Y=d(()=>e(I).success?"success":"error");Ve(V,{get color(){return e(Y)},children:(Z,se)=>{var te=X();J(()=>Q(te,e(I).success?"Started":"Failed")),s(Z,te)},$$slots:{default:!0}})}var G=O(W,2),q=b(G),ee=Y=>{var Z=Ju(),se=b(Z);ae(se,{size:1,color:"neutral",children:(re,ne)=>{var le=Hu(),ve=O(D(le));J(()=>Q(ve,` ${e(I).workerAgentId??""}`)),s(re,le)},$$slots:{default:!0}});var te=O(se,2),oe=re=>{ae(re,{size:1,color:"neutral",children:(ne,le)=>{var ve=Ku(),he=O(D(ve));J(()=>Q(he,` ${e(I).status??""}`)),s(ne,ve)},$$slots:{default:!0}})};L(te,re=>{e(I).status&&re(oe)}),s(Y,Z)},K=Y=>{var Z=Xu(),se=b(Z);ae(se,{size:1,color:"error",children:(te,oe)=>{var re=Yu(),ne=O(D(re));J(()=>Q(ne,` ${(e(I).error||"Unknown error")??""}`)),s(te,re)},$$slots:{default:!0}}),s(Y,Z)};L(q,Y=>{e(I).success?Y(ee):Y(K,!1)}),As(O(q,2),{get data(){return e(E)},fields:[{key:"initial_prompt",label:"Initial Prompt",type:"monospace",collapsible:!0}]}),s(w,R)},$$slots:{default:!0}})}),s(U,M)},C=U=>{var M=H(),N=D(M),I=E=>{var w=ev(),A=b(w);ae(A,{size:1,color:"neutral",children:(R,W)=>{var B=X("No worker agents were started.");s(R,B)},$$slots:{default:!0}}),s(E,w)};L(N,E=>{t.toolUseState.phase!==pe.completed||e(v)||E(I)},!0),s(U,M)};L(_,U=>{t.toolUseState.phase===pe.completed&&e(v)?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{t.toolUseState.phase===pe.running?p(c):p(h,!1)}),s(k,g)},error:k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.sendInstructionToWorkerAgent]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().instruction_operations)?o().instruction_operations:[]),f=d(()=>(()=>{const a=[];return e(m).length>0&&a.push(Bt(e(m).length,"instruction")),a})()),l=d(()=>(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),y=Array.isArray(a.instructionResults)?a.instructionResults:[],T=Array.isArray(a.failedInstructions)?a.failedInstructions:[];return[...y,...T]}catch(a){console.error("Failed to parse send instruction tool response:",a)}return[]})()),u=d(()=>e(l).filter(a=>a.success).length),x=d(()=>e(l).filter(a=>!a.success).length),v=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:k=>{Fe(k,{toolName:"Send Instructions",get formattedToolArgs(){return e(f)},icon:c=>{de(c,{name:"message-square"})},secondary:c=>{var h=H(),p=D(h),$=_=>{var z=sv(),C=b(z),U=I=>{Ve(I,{color:"success",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(u)??""} sent`)),s(E,A)},$$slots:{default:!0}})};L(C,I=>{e(u)>0&&I(U)});var M=O(C,2),N=I=>{Ve(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(x)??""} failed`)),s(E,A)},$$slots:{default:!0}})};L(M,I=>{e(x)>0&&I(N)}),s(_,z)};L(p,_=>{e(v)&&e(n)&&_($)}),s(c,h)},$$slots:{icon:!0,secondary:!0}})},details:k=>{var g=pv(),i=b(g),c=p=>{var $=ov(),_=b($);ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X("Sending instructions to worker agents...");s(z,U)},$$slots:{default:!0}}),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=uv();Oe(M,21,()=>e(l),Ye,(N,I)=>{const E=d(()=>e(m)[e(I).index]||{});Xt(N,{class:"c-send-instruction-tool__instruction-card",children:(w,A)=>{var R=dv(),W=D(R),B=b(W),j=b(B);ae(j,{size:1,weight:"medium",children:(Y,Z)=>{var se=rv(),te=D(se),oe=O(te),re=ne=>{var le=X();J(()=>Q(le,`- ${e(E).summary??""}`)),s(ne,le)};L(oe,ne=>{e(E).summary&&ne(re)}),J(()=>Q(te,`Instruction ${e(I).index+1} `)),s(Y,se)},$$slots:{default:!0}});var V=O(j,2);{let Y=d(()=>e(I).success?"success":"error");Ve(V,{get color(){return e(Y)},children:(Z,se)=>{var te=X();J(()=>Q(te,e(I).success?"Sent":"Failed")),s(Z,te)},$$slots:{default:!0}})}var G=O(W,2),q=b(G),ee=Y=>{var Z=nv(),se=b(Z);ae(se,{size:1,color:"neutral",children:(te,oe)=>{var re=av(),ne=O(D(re));J(()=>Q(ne,` ${e(I).agentId??""}`)),s(te,re)},$$slots:{default:!0}}),As(O(se,2),{get data(){return e(I)},fields:[{key:"instructionSent",label:"Instruction",type:"monospace",collapsible:!0}]}),s(Y,Z)},K=Y=>{var Z=cv(),se=b(Z);ae(se,{size:1,color:"error",children:(re,ne)=>{var le=lv(),ve=O(D(le));J(()=>Q(ve,` ${(e(I).error||"Unknown error")??""}`)),s(re,le)},$$slots:{default:!0}});var te=O(se,2),oe=re=>{ae(re,{size:1,color:"neutral",children:(ne,le)=>{var ve=iv(),he=O(D(ve));J(()=>Q(he,` ${e(E).worker_agent_id??""}`)),s(ne,ve)},$$slots:{default:!0}})};L(te,re=>{e(E).worker_agent_id&&re(oe)}),s(Y,Z)};L(q,Y=>{e(I).success?Y(ee):Y(K,!1)}),s(w,R)},$$slots:{default:!0}})}),s(U,M)},C=U=>{var M=H(),N=D(M),I=E=>{var w=vv(),A=b(w);ae(A,{size:1,color:"neutral",children:(R,W)=>{var B=X("No instructions were sent.");s(R,B)},$$slots:{default:!0}}),s(E,w)};L(N,E=>{t.toolUseState.phase!==pe.completed||e(v)||E(I)},!0),s(U,M)};L(_,U=>{t.toolUseState.phase===pe.completed&&e(v)?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{t.toolUseState.phase===pe.running?p(c):p(h,!1)}),s(k,g)},error:k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.readWorkerState]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[]),f=d(()=>e(m).length>0?[Bt(e(m).length,"agent")]:["all agents"]),l=d(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),y=Array.isArray(a.workerStates)?a.workerStates:[],T=Array.isArray(a.failedReads)?a.failedReads:[];return[...y,...T]}catch(a){console.error("Failed to parse read worker state tool response:",a)}return[]}),u=d(()=>e(l).filter(a=>a.success).length),x=d(()=>e(l).filter(a=>!a.success).length),v=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:k=>{Fe(k,{toolName:"Read Worker States",get formattedToolArgs(){return e(f)},icon:c=>{de(c,{name:"info"})},secondary:c=>{var h=H(),p=D(h),$=_=>{var z=gv(),C=b(z),U=I=>{Ve(I,{color:"success",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(u)??""} read`)),s(E,A)},$$slots:{default:!0}})};L(C,I=>{e(u)>0&&I(U)});var M=O(C,2),N=I=>{Ve(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(x)??""} failed`)),s(E,A)},$$slots:{default:!0}})};L(M,I=>{e(x)>0&&I(N)}),s(_,z)};L(p,_=>{e(v)&&e(n)&&_($)}),s(c,h)},$$slots:{icon:!0,secondary:!0}})},details:k=>{var g=Sv(),i=b(g),c=p=>{var $=hv(),_=b($);ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X("Reading worker agent states...");s(z,U)},$$slots:{default:!0}}),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=bv();Oe(M,21,()=>e(l),Ye,(N,I,E)=>{Xt(N,{class:"c-read-worker-state-tool__worker-card",children:(w,A)=>{var R=yv(),W=D(R),B=b(W),j=b(B);ae(j,{size:1,weight:"medium",children:(Y,Z)=>{var se=X();J(()=>Q(se,`Agent ${(e(I).agentId||`${E+1}`)??""}`)),s(Y,se)},$$slots:{default:!0}});var V=O(j,2);{let Y=d(()=>e(I).success?"success":"error");Ve(V,{get color(){return e(Y)},children:(Z,se)=>{var te=X();J(()=>Q(te,e(I).success?"Active":"Error")),s(Z,te)},$$slots:{default:!0}})}var G=O(W,2),q=b(G),ee=Y=>{var Z=$v(),se=b(Z),te=re=>{var ne=fv(),le=b(ne);ae(le,{size:1,color:"neutral",children:(he,we)=>{var fe=mv();s(he,fe)},$$slots:{default:!0}});var ve=O(le,2);{let he=d(()=>function(we){switch(we?.toLowerCase()){case"running":case"active":return"success";case"idle":case"waiting":return"info";case"stopped":case"paused":return"warning";case"error":case"failed":return"error";default:return"neutral"}}(e(I).status));Ve(ve,{get color(){return e(he)},children:(we,fe)=>{var me=X();J(()=>Q(me,e(I).status)),s(we,me)},$$slots:{default:!0}})}s(re,ne)};L(se,re=>{e(I).status&&re(te)});var oe=O(se,2);As(oe,{get data(){return e(I)},fields:[{key:"lastExchangeSummary",label:"Latest Exchange",type:"monospace",collapsible:!0}]}),As(O(oe,2),{get data(){return e(I)},fields:[{key:"sessionSummary",label:"Session Summary",type:"monospace",collapsible:!0}]}),s(Y,Z)},K=Y=>{var Z=kv(),se=b(Z);ae(se,{size:1,color:"error",children:(te,oe)=>{var re=_v(),ne=O(D(re));J(()=>Q(ne,` ${(e(I).error||"Unknown error")??""}`)),s(te,re)},$$slots:{default:!0}}),s(Y,Z)};L(q,Y=>{e(I).success?Y(ee):Y(K,!1)}),s(w,R)},$$slots:{default:!0}})}),s(U,M)},C=U=>{var M=H(),N=D(M),I=E=>{var w=wv(),A=b(w);ae(A,{size:1,color:"neutral",children:(R,W)=>{var B=X("No worker agent states were read.");s(R,B)},$$slots:{default:!0}}),s(E,w)};L(N,E=>{t.toolUseState.phase!==pe.completed||e(v)||E(I)},!0),s(U,M)};L(_,U=>{t.toolUseState.phase===pe.completed&&e(v)?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{t.toolUseState.phase===pe.running?p(c):p(h,!1)}),s(k,g)},error:k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.waitForWorkerAgent]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().wait_operations)?o().wait_operations:[]),f=d(()=>(()=>{const T=[];return e(m).length>0&&T.push(Bt(e(m).length,"agent")),T})()),l=d(()=>(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const T=JSON.parse(t.toolUseState.result.text),k=Array.isArray(T.waitResults)?T.waitResults:[],g=Array.isArray(T.failedWaits)?T.failedWaits:[];return[...k,...g]}catch(T){console.error("Failed to parse wait for worker agent tool response:",T)}return[]})()),u=d(()=>e(l).filter(T=>T.success).length),x=d(()=>e(l).filter(T=>!T.success).length),v=d(()=>e(l).length>0);function a(T){switch(T?.toLowerCase()){case"idle":return"success";case"failed":return"error";case"running":case"active":return"info";default:return"neutral"}}function y(T){if(T<60)return`${T}s`;if(T<3600){const k=Math.floor(T/60),g=T%60;return g>0?`${k}m ${g}s`:`${k}m`}{const k=Math.floor(T/3600),g=Math.floor(T%3600/60);return g>0?`${k}h ${g}m`:`${k}h`}}qe(r,{get collapsed(){return e(n)},set collapsed(i){P(n,i,!0)},header:i=>{Fe(i,{toolName:"Wait for Worker Agents",get formattedToolArgs(){return e(f)},icon:p=>{de(p,{name:"clock"})},secondary:p=>{var $=H(),_=D($),z=C=>{var U=Tv(),M=b(U),N=w=>{Ve(w,{color:"success",children:(A,R)=>{var W=X();J(()=>Q(W,`${e(u)??""} completed`)),s(A,W)},$$slots:{default:!0}})};L(M,w=>{e(u)>0&&w(N)});var I=O(M,2),E=w=>{Ve(w,{color:"error",children:(A,R)=>{var W=X();J(()=>Q(W,`${e(x)??""} failed`)),s(A,W)},$$slots:{default:!0}})};L(I,w=>{e(x)>0&&w(E)}),s(C,U)};L(_,C=>{e(v)&&e(n)&&C(z)}),s(p,$)},$$slots:{icon:!0,secondary:!0}})},details:i=>{var c=Pv(),h=b(c),p=_=>{var z=Iv(),C=b(z);ae(C,{size:1,color:"neutral",children:(U,M)=>{var N=X("Waiting for worker agents...");s(U,N)},$$slots:{default:!0}}),s(_,z)},$=_=>{var z=H(),C=D(z),U=N=>{var I=Dv();Oe(I,21,()=>e(l),Ye,(E,w)=>{const A=d(()=>e(m)[e(w).index]||{});Xt(E,{class:"c-wait-worker-tool__wait-card",children:(R,W)=>{var B=Mv(),j=D(B),V=b(j),G=b(V);ae(G,{size:1,weight:"medium",children:(se,te)=>{var oe=X();J(()=>Q(oe,`Wait ${e(w).index+1} - Agent ${e(w).agentId??""}`)),s(se,oe)},$$slots:{default:!0}});var q=O(G,2);{let se=d(()=>e(w).success?"success":"error");Ve(q,{get color(){return e(se)},children:(te,oe)=>{var re=X();J(()=>Q(re,e(w).success?"Completed":"Failed")),s(te,re)},$$slots:{default:!0}})}var ee=O(j,2),K=b(ee),Y=se=>{var te=Av(),oe=b(te),re=b(oe);ae(re,{size:1,color:"neutral",children:(me,_e)=>{var be=xv();s(me,be)},$$slots:{default:!0}});var ne=O(re,2);{let me=d(()=>a(e(w).targetStatus));Ve(ne,{get color(){return e(me)},children:(_e,be)=>{var ke=X();J(()=>Q(ke,e(w).targetStatus)),s(_e,ke)},$$slots:{default:!0}})}var le=O(oe,2),ve=b(le);ae(ve,{size:1,color:"neutral",children:(me,_e)=>{var be=Uv();s(me,be)},$$slots:{default:!0}});var he=O(ve,2);{let me=d(()=>a(e(w).status));Ve(he,{get color(){return e(me)},children:(_e,be)=>{var ke=X();J(()=>Q(ke,e(w).status)),s(_e,ke)},$$slots:{default:!0}})}var we=O(le,2),fe=me=>{ae(me,{size:1,color:"neutral",children:(_e,be)=>{var ke=Cv(),Ae=O(D(ke));J(ze=>Q(Ae,` ${ze??""}`),[()=>y(e(w).waitedSeconds)]),s(_e,ke)},$$slots:{default:!0}})};L(we,me=>{e(w).waitedSeconds!==void 0&&me(fe)}),s(se,te)},Z=se=>{var te=Rv(),oe=b(te);ae(oe,{size:1,color:"error",children:(fe,me)=>{var _e=Ev(),be=O(D(_e));J(()=>Q(be,` ${(e(w).error||"Unknown error")??""}`)),s(fe,_e)},$$slots:{default:!0}});var re=O(oe,2),ne=fe=>{ae(fe,{size:1,color:"neutral",children:(me,_e)=>{var be=zv(),ke=O(D(be));J(()=>Q(ke,` ${e(A).worker_agent_id??""}`)),s(me,be)},$$slots:{default:!0}})};L(re,fe=>{e(A).worker_agent_id&&fe(ne)});var le=O(re,2),ve=fe=>{ae(fe,{size:1,color:"neutral",children:(me,_e)=>{var be=Lv(),ke=O(D(be));J(()=>Q(ke,` ${e(A).target_status??""}`)),s(me,be)},$$slots:{default:!0}})};L(le,fe=>{e(A).target_status&&fe(ve)});var he=O(le,2),we=fe=>{ae(fe,{size:1,color:"neutral",children:(me,_e)=>{var be=Nv(),ke=O(D(be));J(Ae=>Q(ke,` ${Ae??""}`),[()=>y(e(A).timeout_seconds)]),s(me,be)},$$slots:{default:!0}})};L(he,fe=>{e(A).timeout_seconds&&fe(we)}),s(se,te)};L(K,se=>{e(w).success?se(Y):se(Z,!1)}),s(R,B)},$$slots:{default:!0}})}),s(N,I)},M=N=>{var I=H(),E=D(I),w=A=>{var R=Ov(),W=b(R);ae(W,{size:1,color:"neutral",children:(B,j)=>{var V=X("No wait operations were completed.");s(B,V)},$$slots:{default:!0}}),s(A,R)};L(E,A=>{t.toolUseState.phase!==pe.completed||e(v)||A(w)},!0),s(N,I)};L(C,N=>{t.toolUseState.phase===pe.completed&&e(v)?N(U):N(M,!1)},!0),s(_,z)};L(h,_=>{t.toolUseState.phase===pe.running?_(p):_($,!1)}),s(i,c)},error:i=>{var c=H(),h=D(c),p=$=>{Et($,ut(()=>t.toolUseState.result??{}))};L(h,$=>{t.toolUseState.phase===pe.error&&$(p)}),s(i,c)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.stopWorkerAgent]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[]),f=d(()=>e(m).length>0?[Bt(e(m).length,"agent")]:["all agents"]),l=d(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),y=Array.isArray(a.stopResults)?a.stopResults:[],T=Array.isArray(a.failedStops)?a.failedStops:[];return[...y,...T]}catch(a){console.error("Failed to parse stop worker agent tool response:",a)}return[]}),u=d(()=>e(l).filter(a=>a.success).length),x=d(()=>e(l).filter(a=>!a.success).length),v=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:k=>{Fe(k,{toolName:"Stop Worker Agents",get formattedToolArgs(){return e(f)},icon:c=>{de(c,{name:"square"})},secondary:c=>{var h=H(),p=D(h),$=_=>{var z=Fv(),C=b(z),U=I=>{Ve(I,{color:"success",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(u)??""} stopped`)),s(E,A)},$$slots:{default:!0}})};L(C,I=>{e(u)>0&&I(U)});var M=O(C,2),N=I=>{Ve(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(x)??""} failed`)),s(E,A)},$$slots:{default:!0}})};L(M,I=>{e(x)>0&&I(N)}),s(_,z)};L(p,_=>{e(v)&&e(n)&&_($)}),s(c,h)},$$slots:{icon:!0,secondary:!0}})},details:k=>{var g=Yv(),i=b(g),c=p=>{var $=qv(),_=b($);ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X("Stopping worker agents...");s(z,U)},$$slots:{default:!0}}),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=Kv();Oe(M,21,()=>e(l),Ye,(N,I,E)=>{Xt(N,{class:"c-stop-worker-tool__agent-card",children:(w,A)=>{var R=Hv(),W=D(R),B=b(W),j=b(B);ae(j,{size:1,weight:"medium",children:(Y,Z)=>{var se=X();J(()=>Q(se,`Agent ${(e(I).agentId||`${E+1}`)??""}`)),s(Y,se)},$$slots:{default:!0}});var V=O(j,2);{let Y=d(()=>e(I).success?"success":"error");Ve(V,{get color(){return e(Y)},children:(Z,se)=>{var te=X();J(()=>Q(te,e(I).success?"Stopped":"Failed")),s(Z,te)},$$slots:{default:!0}})}var G=O(W,2),q=b(G),ee=Y=>{var Z=jv(),se=b(Z);ae(se,{size:1,color:"neutral",children:(oe,re)=>{var ne=Wv(),le=O(D(ne));J(()=>Q(le,` ${e(I).agentId??""}`)),s(oe,ne)},$$slots:{default:!0}});var te=O(se,2);ae(te,{size:1,color:"success",children:(oe,re)=>{var ne=X("Worker agent has been successfully stopped.");s(oe,ne)},$$slots:{default:!0}}),s(Y,Z)},K=Y=>{var Z=Vv(),se=b(Z);ae(se,{size:1,color:"error",children:(re,ne)=>{var le=Bv(),ve=O(D(le));J(()=>Q(ve,` ${(e(I).error||"Unknown error")??""}`)),s(re,le)},$$slots:{default:!0}});var te=O(se,2),oe=re=>{ae(re,{size:1,color:"neutral",children:(ne,le)=>{var ve=Gv(),he=O(D(ve));J(()=>Q(he,` ${e(I).agentId??""}`)),s(ne,ve)},$$slots:{default:!0}})};L(te,re=>{e(I).agentId&&re(oe)}),s(Y,Z)};L(q,Y=>{e(I).success?Y(ee):Y(K,!1)}),s(w,R)},$$slots:{default:!0}})}),s(U,M)},C=U=>{var M=H(),N=D(M),I=E=>{var w=Jv(),A=b(w);ae(A,{size:1,color:"neutral",children:(R,W)=>{var B=X("No worker agents were stopped.");s(R,B)},$$slots:{default:!0}}),s(E,w)};L(N,E=>{t.toolUseState.phase!==pe.completed||e(v)||E(I)},!0),s(U,M)};L(_,U=>{t.toolUseState.phase===pe.completed&&e(v)?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{t.toolUseState.phase===pe.running?p(c):p(h,!1)}),s(k,g)},error:k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.deleteWorkerAgent]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[]),f=d(()=>{const a=[];return e(m).length>0?a.push(Bt(e(m).length,"agent")):a.push("all agents"),a}),l=d(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),y=Array.isArray(a.deleteResults)?a.deleteResults:[],T=Array.isArray(a.failedDeletes)?a.failedDeletes:[];return[...y,...T]}catch(a){console.error("Failed to parse delete worker agent tool response:",a)}return[]}),u=d(()=>e(l).filter(a=>a.success).length),x=d(()=>e(l).filter(a=>!a.success).length),v=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(k){P(n,k,!0)},header:k=>{Fe(k,{toolName:"Delete Worker Agents",get formattedToolArgs(){return e(f)},icon:c=>{de(c,{name:"trash-2"})},secondary:c=>{var h=H(),p=D(h),$=_=>{var z=Xv(),C=b(z),U=I=>{Ve(I,{color:"success",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(u)??""} deleted`)),s(E,A)},$$slots:{default:!0}})};L(C,I=>{e(u)>0&&I(U)});var M=O(C,2),N=I=>{Ve(I,{color:"error",children:(E,w)=>{var A=X();J(()=>Q(A,`${e(x)??""} failed`)),s(E,A)},$$slots:{default:!0}})};L(M,I=>{e(x)>0&&I(N)}),s(_,z)};L(p,_=>{e(v)&&e(n)&&_($)}),s(c,h)},$$slots:{icon:!0,secondary:!0}})},details:k=>{var g=lp(),i=b(g),c=p=>{var $=Qv(),_=b($);ae(_,{size:1,color:"neutral",children:(z,C)=>{var U=X("Deleting worker agents...");s(z,U)},$$slots:{default:!0}}),s(p,$)},h=p=>{var $=H(),_=D($),z=U=>{var M=ap();Oe(M,21,()=>e(l),Ye,(N,I,E)=>{Xt(N,{class:"c-delete-worker-tool__agent-card",children:(w,A)=>{var R=rp(),W=D(R),B=b(W),j=b(B);ae(j,{size:1,weight:"medium",children:(Y,Z)=>{var se=X();J(()=>Q(se,`Agent ${(e(I).agentId||`${E+1}`)??""}`)),s(Y,se)},$$slots:{default:!0}});var V=O(j,2);{let Y=d(()=>e(I).success?"success":"error");Ve(V,{get color(){return e(Y)},children:(Z,se)=>{var te=X();J(()=>Q(te,e(I).success?"Deleted":"Failed")),s(Z,te)},$$slots:{default:!0}})}var G=O(W,2),q=b(G),ee=Y=>{var Z=ep(),se=b(Z);ae(se,{size:1,color:"neutral",children:(oe,re)=>{var ne=Zv(),le=O(D(ne));J(()=>Q(le,` ${e(I).agentId??""}`)),s(oe,ne)},$$slots:{default:!0}});var te=O(se,2);ae(te,{size:1,color:"success",children:(oe,re)=>{var ne=X("Worker agent and its resources have been successfully deleted.");s(oe,ne)},$$slots:{default:!0}}),s(Y,Z)},K=Y=>{var Z=op(),se=b(Z);ae(se,{size:1,color:"error",children:(re,ne)=>{var le=tp(),ve=O(D(le));J(()=>Q(ve,` ${(e(I).error||"Unknown error")??""}`)),s(re,le)},$$slots:{default:!0}});var te=O(se,2),oe=re=>{ae(re,{size:1,color:"neutral",children:(ne,le)=>{var ve=sp(),he=O(D(ve));J(()=>Q(he,` ${e(I).agentId??""}`)),s(ne,ve)},$$slots:{default:!0}})};L(te,re=>{e(I).agentId&&re(oe)}),s(Y,Z)};L(q,Y=>{e(I).success?Y(ee):Y(K,!1)}),s(w,R)},$$slots:{default:!0}})}),s(U,M)},C=U=>{var M=H(),N=D(M),I=E=>{var w=np(),A=b(w);ae(A,{size:1,color:"neutral",children:(R,W)=>{var B=X("No worker agents were deleted.");s(R,B)},$$slots:{default:!0}}),s(E,w)};L(N,E=>{t.toolUseState.phase!==pe.completed||e(v)||E(I)},!0),s(U,M)};L(_,U=>{t.toolUseState.phase===pe.completed&&e(v)?U(z):U(C,!1)},!0),s(p,$)};L(i,p=>{t.toolUseState.phase===pe.running?p(c):p(h,!1)}),s(k,g)},error:k=>{var g=H(),i=D(g),c=h=>{Et(h,ut(()=>t.toolUseState.result??{}))};L(i,h=>{t.toolUseState.phase===pe.error&&h(c)}),s(k,g)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.readWorkerAgentEdits]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[]),f=d(()=>e(m).length>0?[Bt(e(m).length,"agent")]:["all agents"]),l=d(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const y=JSON.parse(t.toolUseState.result.text),T=Array.isArray(y.editResults)?y.editResults:[],k=Array.isArray(y.failedReads)?y.failedReads:[];return[...T,...k]}catch(y){console.error("Failed to parse read worker agent edits tool response:",y)}return[]}),u=d(()=>e(l).filter(y=>y.success).length),x=d(()=>e(l).filter(y=>!y.success).length),v=d(()=>e(l).reduce((y,T)=>y+(T.success&&T.fileEdits?T.fileEdits.length:0),0)),a=d(()=>e(l).length>0);qe(r,{get collapsed(){return e(n)},set collapsed(g){P(n,g,!0)},header:g=>{Fe(g,{toolName:"Read Worker Agent Edits",get formattedToolArgs(){return e(f)},icon:h=>{de(h,{name:"file"})},secondary:h=>{var p=H(),$=D(p),_=z=>{var C=ip(),U=b(C),M=A=>{Ve(A,{color:"success",children:(R,W)=>{var B=X();J(j=>Q(B,j),[()=>Bt(e(u),"agent")]),s(R,B)},$$slots:{default:!0}})};L(U,A=>{e(u)>0&&A(M)});var N=O(U,2),I=A=>{Ve(A,{color:"info",children:(R,W)=>{var B=X();J(j=>Q(B,j),[()=>Bt(e(v),"edit")]),s(R,B)},$$slots:{default:!0}})};L(N,A=>{e(v)>0&&A(I)});var E=O(N,2),w=A=>{Ve(A,{color:"error",children:(R,W)=>{var B=X();J(()=>Q(B,`${e(x)??""} failed`)),s(R,B)},$$slots:{default:!0}})};L(E,A=>{e(x)>0&&A(w)}),s(z,C)};L($,z=>{e(a)&&e(n)&&z(_)}),s(h,p)},$$slots:{icon:!0,secondary:!0}})},details:g=>{var i=yp(),c=b(i),h=$=>{var _=cp(),z=b(_);ae(z,{size:1,color:"neutral",children:(C,U)=>{var M=X("Reading worker agent file edits...");s(C,M)},$$slots:{default:!0}}),s($,_)},p=$=>{var _=H(),z=D(_),C=M=>{var N=_p();Oe(N,21,()=>e(l),Ye,(I,E,w)=>{Xt(I,{class:"c-read-edits-tool__agent-card",children:(A,R)=>{var W=$p(),B=D(W),j=b(B),V=b(j);ae(V,{size:1,weight:"medium",children:(Z,se)=>{var te=X();J(()=>Q(te,`Agent ${(e(E).agentId||`${w+1}`)??""}`)),s(Z,te)},$$slots:{default:!0}});var G=O(V,2);{let Z=d(()=>e(E).success?"success":"error");Ve(G,{get color(){return e(Z)},children:(se,te)=>{var oe=X();J(()=>Q(oe,e(E).success?"Read":"Failed")),s(se,oe)},$$slots:{default:!0}})}var q=O(B,2),ee=b(q),K=Z=>{var se=gp(),te=b(se);ae(te,{size:1,color:"neutral",children:(le,ve)=>{var he=dp(),we=O(D(he));J(()=>Q(we,` ${e(E).agentId??""}`)),s(le,he)},$$slots:{default:!0}});var oe=O(te,2),re=le=>{var ve=pp(),he=b(ve);ae(he,{size:1,color:"neutral",children:(fe,me)=>{var _e=up(),be=b(_e);J(()=>Q(be,`File Edits (${e(E).fileEdits.length??""}):`)),s(fe,_e)},$$slots:{default:!0}});var we=O(he,2);Oe(we,17,()=>e(E).fileEdits,Ye,(fe,me)=>{var _e=vp(),be=b(_e),ke=b(be);ae(ke,{size:1,weight:"medium",type:"monospace",children:(ze,xe)=>{var Ee=X();J(()=>Q(Ee,e(me).filePath)),s(ze,Ee)},$$slots:{default:!0}});var Ae=O(ke,2);{let ze=d(()=>function(xe){switch(xe?.toLowerCase()){case"created":case"added":return"success";case"modified":case"updated":return"info";case"deleted":case"removed":return"error";case"renamed":case"moved":return"warning";default:return"neutral"}}(e(me).changeType));Ve(Ae,{get color(){return e(ze)},children:(xe,Ee)=>{var Se=X();J(()=>Q(Se,e(me).changeType)),s(xe,Se)},$$slots:{default:!0}})}As(O(be,2),{get data(){return e(me)},fields:[{key:"content",label:"Content",type:"monospace",collapsible:!0}]}),s(fe,_e)}),s(le,ve)},ne=le=>{ae(le,{size:1,color:"neutral",children:(ve,he)=>{var we=X("No file edits found for this agent.");s(ve,we)},$$slots:{default:!0}})};L(oe,le=>{e(E).fileEdits&&e(E).fileEdits.length>0?le(re):le(ne,!1)}),s(Z,se)},Y=Z=>{var se=fp(),te=b(se);ae(te,{size:1,color:"error",children:(ne,le)=>{var ve=hp(),he=O(D(ve));J(()=>Q(he,` ${(e(E).error||"Unknown error")??""}`)),s(ne,ve)},$$slots:{default:!0}});var oe=O(te,2),re=ne=>{ae(ne,{size:1,color:"neutral",children:(le,ve)=>{var he=mp(),we=O(D(he));J(()=>Q(we,` ${e(E).agentId??""}`)),s(le,he)},$$slots:{default:!0}})};L(oe,ne=>{e(E).agentId&&ne(re)}),s(Z,se)};L(ee,Z=>{e(E).success?Z(K):Z(Y,!1)}),s(A,W)},$$slots:{default:!0}})}),s(M,N)},U=M=>{var N=H(),I=D(N),E=w=>{var A=kp(),R=b(A);ae(R,{size:1,color:"neutral",children:(W,B)=>{var j=X("No worker agent edits were found.");s(W,j)},$$slots:{default:!0}}),s(w,A)};L(I,w=>{t.toolUseState.phase!==pe.completed||e(a)||w(E)},!0),s(M,N)};L(z,M=>{t.toolUseState.phase===pe.completed&&e(a)?M(C):M(U,!1)},!0),s($,_)};L(c,$=>{t.toolUseState.phase===pe.running?$(h):$(p,!1)}),s(g,i)},error:g=>{var i=H(),c=D(i),h=p=>{Et(p,ut(()=>t.toolUseState.result??{}))};L(c,p=>{t.toolUseState.phase===pe.error&&p(h)}),s(g,i)},$$slots:{header:!0,details:!0,error:!0}}),ce()},[st.applyWorkerAgentEdits]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=ue(!0),m=d(()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[]),f=d(()=>{const p=[];return e(m).length>0&&p.push(Bt(e(m).length,"agent")),p}),l=d(()=>{if(t.toolUseState.phase===pe.completed&&t.toolUseState.result?.text)try{return JSON.parse(t.toolUseState.result.text)}catch{return null}return null}),u=d(()=>t.toolUseState.phase===pe.completed&&e(l)),x=d(()=>e(l)?.appliedFiles?.length||0),v=d(()=>e(l)?.conflictFiles?.length||0),a=d(()=>e(l)?.errors?.length||0);const y={icon:void 0,color:"error",text:"Errors",lucideIconName:"x"},T={icon:void 0,color:"warning",text:"Conflicts",lucideIconName:"circle-alert"},k={icon:void 0,color:"success",text:"Success",lucideIconName:"circle-check"},g={icon:void 0,color:"neutral",text:"Apply",lucideIconName:"circle-check"};let i=d(()=>{if(t.toolUseState.phase===pe.error)return y;if(e(l)){const p=e(l).errors&&e(l).errors.length>0,$=e(l).conflictFiles&&e(l).conflictFiles.length>0;if(p)return y;if($)return T;if(e(l).success)return k}return g}),c=d(()=>{const p={};e(m).length>0&&(p.workerAgentIds=e(m).join(", "));const $=o().application_method||"direct_files";p.applicationMethod=$;const _=o().target_files||[];_.length>0&&(p.targetFiles=_.join(", "));const z=o().target_branch||"current";return z!=="current"&&(p.targetBranch=z),e(l)?(e(l).message&&(p.status=e(l).message),e(l).appliedFiles&&Array.isArray(e(l).appliedFiles)&&e(l).appliedFiles.length>0&&(p.appliedFiles=e(l).appliedFiles.join(", ")),e(l).conflictFiles&&Array.isArray(e(l).conflictFiles)&&e(l).conflictFiles.length>0&&(p.conflictFiles=e(l).conflictFiles.join(", ")),e(l).errors&&Array.isArray(e(l).errors)&&e(l).errors.length>0&&(p.errors=e(l).errors.join("; ")),e(l).method&&(p.method=e(l).method)):t.toolUseState.result?.text&&(p.result=t.toolUseState.result.text),p}),h=d(()=>[{key:"workerAgentIds",label:"Worker Agent IDs",type:"text",color:"neutral"},{key:"applicationMethod",label:"Application Method",type:"text",color:"neutral"},{key:"method",label:"Applied Method",type:"text",color:"accent",condition:()=>e(c).method&&e(c).method!==e(c).applicationMethod},{key:"targetFiles",label:"Target Files",type:"text",color:"neutral",condition:()=>e(c).targetFiles},{key:"targetBranch",label:"Target Branch",type:"text",color:"neutral",condition:()=>e(c).targetBranch},{key:"status",label:"Status",type:"text",color:e(l)?.success?"success":"neutral"},{key:"appliedFiles",label:"Applied Files",type:"text",color:"success",condition:()=>e(c).appliedFiles},{key:"conflictFiles",label:"Conflict Files",type:"text",color:"error",condition:()=>e(c).conflictFiles},{key:"errors",label:"Errors",type:"text",color:"error",condition:()=>e(c).errors,collapsible:!0},{key:"result",label:"Raw Result",type:"monospace",color:"neutral",condition:()=>e(c).result,collapsible:!0}]);qe(r,{showToolOutput:!0,get collapsed(){return e(n)},set collapsed(_){P(n,_,!0)},header:_=>{Fe(_,{toolName:"Apply Worker Edits",get formattedToolArgs(){return e(f)},icon:U=>{de(U,{get name(){return e(i).lucideIconName}})},secondary:U=>{var M=H(),N=D(M),I=E=>{var w=bp(),A=b(w),R=G=>{Ve(G,{color:"success",children:(q,ee)=>{var K=X();J(()=>Q(K,`${e(x)??""} applied`)),s(q,K)},$$slots:{default:!0}})};L(A,G=>{e(x)>0&&G(R)});var W=O(A,2),B=G=>{Ve(G,{color:"warning",children:(q,ee)=>{var K=X();J(()=>Q(K,`${e(v)??""} conflicts`)),s(q,K)},$$slots:{default:!0}})};L(W,G=>{e(v)>0&&G(B)});var j=O(W,2),V=G=>{Ve(G,{color:"error",children:(q,ee)=>{var K=X();J(()=>Q(K,`${e(a)??""} errors`)),s(q,K)},$$slots:{default:!0}})};L(j,G=>{e(a)>0&&G(V)}),s(E,w)};L(N,E=>{e(u)&&e(n)&&E(I)}),s(U,M)},$$slots:{icon:!0,secondary:!0}})},details:_=>{As(_,{get data(){return e(c)},get fields(){return e(h)}})},$$slots:{header:!0,details:!0}}),ce()}};function Ar(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({}));qe(r,{showToolOutput:!1,header:m=>{{const f=u=>{de(u,{name:"globe"})};let l=d(()=>[At(o().query,"")]);Fe(m,{toolName:"Web",get formattedToolArgs(){return e(l)},icon:f,$$slots:{icon:!0}})}},$$slots:{header:!0}}),ce()}function Es(r,t){ie(t,!0);const o=()=>ge(f,"$ctx",n),[n,m]=Ce(),f=_t();let l=d(()=>function(v={}){const{summary:a,...y}=v;let T=a??y.query;return{formattedToolArgs:T?[T]:void 0,toolUseInput:y}}(o().toolUseInput)),u=d(()=>e(l).formattedToolArgs),x=d(()=>e(l).toolUseInput);qe(r,{showToolOutput:!0,header:y=>{Fe(y,{get toolName(){return t.toolName},get formattedToolArgs(){return e(u)},icon:g=>{var i=H(),c=D(i);Ge(c,()=>t.icon??vt),s(g,i)},toolAction:g=>{{let i=d(()=>function(c={}){const{href:h}=c;return typeof h=="string"?h:void 0}(e(x)));Na(g,{get href(){return e(i)}})}},$$slots:{icon:!0,toolAction:!0}})},details:y=>{Ua(y,{get toolUseInput(){return e(x)},get toolUseState(){return o().toolUseState}})},$$slots:{header:!0,details:!0}}),ce(),m()}var wp=S('<span class="c-supabase-tool__summary svelte-c6z2oa"><!></span>');const Er={[ds.webSearch]:Ar,[ds.webSearchV1]:Ar,[ds.gitHub]:function(r){Es(r,{toolName:"GitHub",icon:o=>{de(o,{name:"github"})},$$slots:{icon:!0}})},[ds.linear]:function(r){Es(r,{toolName:"Linear",icon:o=>{de(o,{name:"linear"})},$$slots:{icon:!0}})},[ds.notion]:function(r){Es(r,{toolName:"Notion",icon:o=>{de(o,{name:"notion"})},$$slots:{icon:!0}})},[ds.jira]:function(r){Es(r,{toolName:"Jira",icon:o=>{de(o,{name:"jira"})},$$slots:{icon:!0}})},[ds.confluence]:function(r){Es(r,{toolName:"Confluence",icon:o=>{de(o,{name:"confluence"})},$$slots:{icon:!0}})},[ds.supabase]:function(r,t){ie(t,!0);let o=F(t,"toolUseInput",19,()=>({})),n=d(()=>o().summary||"");qe(r,{showToolOutput:!1,header:f=>{Fe(f,{toolName:"Supabase",get toolUseInput(){return o()},icon:x=>{de(x,{name:"supabase"})},secondary:x=>{var v=wp(),a=b(v);ae(a,{size:1,children:(y,T)=>{var k=X();J(()=>Q(k,e(n))),s(y,k)},$$slots:{default:!0}}),s(x,v)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ce()},[ds.glean]:function(r){Es(r,{toolName:"Glean",icon:o=>{de(o,{name:"glean"})},$$slots:{icon:!0}})}};var Sp=S('<span class="c-mcp-tool__summary svelte-1jljdf0"><!></span>');function Tp(r,t){ie(t,!0);const o=()=>ge(u,"$ctx",m),n=()=>ge(v,"$toolIdentity",m),[m,f]=Ce();let l=F(t,"toolUseInput",19,()=>({}));const u=_t();let x=d(()=>o().toolUse.tool_name);const v=Vr(o().toolUse.tool_name);let a=d(()=>n()?.found?n().mcpServerName:o().toolUse.mcp_server_name),y=d(()=>n()?.found?n().mcpToolName:o().toolUse.mcp_tool_name),T=d(()=>Qn(e(a))),k=d(()=>e(a)?e(T)?.displayName??e(a).replace(/_+/g," "):e(y)||e(x)||"MCP"),g=d(()=>e(a)&&e(y)||"");qe(r,{showToolOutput:!0,header:c=>{Fe(c,{get toolName(){return e(k)},get toolUseInput(){return l()},icon:$=>{{let _=d(()=>e(T)?.iconName||"mcp");de($,{get name(){return e(_)}})}},secondary:$=>{var _=Sp(),z=b(_);ae(z,{size:1,children:(C,U)=>{var M=X();J(()=>Q(M,e(g))),s(C,M)},$$slots:{default:!0}}),s($,_)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ce(),f()}function Ip(r,t){const o=((n=r.tool_name)in Cr?Cr[n]:void 0)??function(f){return f in Er?Er[f]:void 0}(r.tool_name)??function(f){return f in xr?xr[f]:void 0}(r.tool_name);var n;return o||function(f){if(f&&f.found&&(f.mcpToolName||f.mcpServerName))return Tp}(t)||qe}function Po(r,t){ie(t,!0);const o=()=>ge(T,"$toolIdentity",f),n=()=>ge(e(h),"$toolUseState",f),m=()=>ge(p,"$readableCtx",f),[f,l]=Ce();let u=F(t,"onToolRun",3,()=>{}),x=F(t,"onToolCancel",3,()=>{}),v=F(t,"onToolSkip",3,()=>{}),a=F(t,"turnIndex",3,0),y=F(t,"isGroupListItem",3,!1);const T=Vr(t.toolUse.tool_name);Me(()=>{o()||c(Nn(t.toolUse.tool_name))});let k=d(()=>Ip(t.toolUse,o()));const g=Rn(),i=it(fs.key),c=gt(),h=d(()=>ge(g,"$isRemote",f)?Vs(i.getToolUseState(t.toolUse.tool_use_id)):Hr(t.requestId,t.toolUse.tool_use_id)),{readableCtx:p,writableCtx:$}=rc({toolUse:t.toolUse,toolUseState:n(),isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:u(),onToolCancel:x(),onToolSkip:v(),turnIndex:a(),isGroupListItem:y()});Me(()=>{uo($,{toolUse:t.toolUse,toolUseState:n(),isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:u(),onToolCancel:x(),onToolSkip:v(),turnIndex:a(),isGroupListItem:y()})});var _=H(),z=D(_),C=U=>{var M=H(),N=D(M);et(N,()=>e(k),(I,E)=>{E(I,ut(m))}),s(U,M)};L(z,U=>{n()&&U(C)}),s(r,_),ce(),l()}var xp=S('<div class="l-tooluse-list svelte-1jzshyv"></div>');function Up(r,t){ie(t,!0);const o=()=>ge(e(y),"$displayableToolUseNodes",n),[n,m]=Ce();let f=F(t,"remoteAgentsModel",19,()=>{}),l=F(t,"turnIndex",3,0);const u=gt();function x(i,c,h){u(Yr(t.conversationId,i,c.tool_use_id,h))}function v(i,c){u(Jr(i,c))}function a(i,c){u(Kr(i,c))}const y=d(()=>ge(f(),"$remoteAgentsModel",n)?.isActive?Vs(Qr(t.requestId,t.toolUseNodes,f())):Xr(t.conversationId,t.requestId));var T=H(),k=D(T),g=i=>{var c=xp();Oe(c,5,o,Ye,(h,p)=>{const $=d(()=>e(p).tool_use);var _=H(),z=D(_),C=U=>{Po(U,{get toolUse(){return e($)},get isLastTurn(){return t.isLastTurn},get requestId(){return t.requestId},onToolRun:x,onToolCancel:v,onToolSkip:a,get turnIndex(){return l()},isGroupListItem:!0})};L(z,U=>{e($)&&U(C)}),s(h,_)}),s(i,c)};L(k,i=>{t.toolUseNodes!==void 0&&t.toolUseNodes.length>0&&i(g)}),s(r,T),ce(),m()}Rs(["click","keydown"]);const Cp={time:la,timeDateFull:ia,timeDate:function(r){return(r instanceof Date?r:new Date(r)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}};var Ap=S("<div><!></div>"),Ep=S("<div><!></div>");const Da=Symbol("conversationNavigationItems");function ah(r={all:[]}){const t=Rt(r);return Vt(Da,t),t}function zp(){return it(Da)}var Lp=S('<div class="c-conversation-navigation__tooltip svelte-m1594">Up <!></div>'),Np=S("<!> <!>",1),Rp=S('<div class="c-conversation-navigation__tooltip svelte-m1594">Down <!></div>'),Mp=S("<!> <!>",1),Dp=S('<div class="c-conversation-navigation svelte-m1594"><!> <!></div>'),Op=S("<div><!></div>");const Pp={Controls:function(r,t){ie(t,!0);const o=()=>ge(l,"$conversationNavigationItems",n),[n,m]=Ce(),f=F(t,"trackNavigationInDirection",19,()=>{}),l=zp(),u=d(()=>o().prev),x=d(()=>o().next),v=d(()=>o().scrollTo),a=d(()=>o().scrollToBottom),y=d(()=>o().canScrollToBottom),T=d(()=>e(y));function k(p){Mn()&&(f()?.("down",p),e(T)&&(e(x)&&e(v)?e(v)(e(x).offsetTop-45):e(y)&&e(a)&&e(a)()))}function g(p){f()?.("up",p),e(u)&&e(v)&&e(v)(e(u).offsetTop-45)}var i=H(),c=D(i),h=p=>{var $=Dp(),_=b($);He(_,{side:"top",nested:!1,content:U=>{var M=Lp();Ro(O(b(M)),{commandName:"scrollConversationUp",keysOnly:!0}),s(U,M)},children:(U,M)=>{var N=Np(),I=D(N);No(0,{name:"scrollConversationUp",handler:()=>g("keybinding")});var E=O(I,2);{let w=d(()=>!e(u));je(E,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>g("button"),get disabled(){return e(w)},children:(A,R)=>{de(A,{name:"arrow-up"})},$$slots:{default:!0}})}s(U,N)},$$slots:{content:!0,default:!0}});var z=O(_,2);He(z,{side:"top",nested:!1,content:U=>{var M=Rp();Ro(O(b(M)),{commandName:"scrollConversationDown",keysOnly:!0}),s(U,M)},children:(U,M)=>{var N=Mp(),I=D(N);No(0,{name:"scrollConversationDown",handler:()=>k("keybinding")});var E=O(I,2);{let w=d(()=>!e(T));je(E,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>k("button"),get disabled(){return e(w)},children:(A,R)=>{de(A,{name:"arrow-down"})},$$slots:{default:!0}})}s(U,N)},$$slots:{content:!0,default:!0}}),s(p,$)};L(c,p=>{(e(u)||e(y))&&p(h)}),s(r,i),ce(),m()},Item:function(r,t){var o=Op(),n=b(o);Ge(n,()=>t.children??vt),J(()=>Nt(o,"data-navigation-id",t.id)),s(r,o)}};var Fp=S('<div class="c-chat-message__content hidden-when-empty svelte-6ub04x"><!></div>'),qp=S('<div class="c-chat-message__user-actions svelte-6ub04x"><!></div>'),Wp=S('<!> <div class="c-chat-message__user svelte-6ub04x"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1),jp=S("<div><!></div> <!> <!>",1);function Bp(r,t){ie(t,!0);const[o,n]=Ce();let m=F(t,"isAugment",3,!1),f=F(t,"timestamp",19,()=>{}),l=F(t,"isEditing",11,!1);const u=Ot("enableDesignSystemRichTextEditor");var x=jp(),v=D(x);let a;var y=b(v),T=c=>{var h=H(),p=D(h),$=_=>{var z=Fp(),C=b(z);Ge(C,()=>t.content??vt),s(_,z)};L(p,_=>{t.content&&_($)}),s(c,h)},k=c=>{var h=Wp(),p=D(h);{let U=d(()=>String(f()));et(p,()=>Pp.Item,(M,N)=>{N(M,{get id(){return e(U)},children:(I,E)=>{(function(w,A){ie(A,!0);let R=F(A,"timestamp",19,()=>{}),W=F(A,"showTooltip",3,!0),B=F(A,"tooltipSide",3,"right"),j=F(A,"textColor",3,"secondary"),V=F(A,"textSize",3,1),G=F(A,"format",3,la),q=F(A,"class",3,""),ee=d(()=>typeof G()=="function"?G():Cp[G()]);var K=H(),Y=D(K),Z=se=>{var te=H(),oe=D(te),re=le=>{{let ve=d(()=>ia(R()));He(le,{get content(){return e(ve)},get side(){return B()},children:(he,we)=>{var fe=Ap(),me=b(fe);ae(me,{get color(){return j()},get size(){return V()},children:(_e,be)=>{var ke=X();J(Ae=>Q(ke,Ae),[()=>e(ee)(R())]),s(_e,ke)},$$slots:{default:!0}}),J(()=>at(fe,1,`c-timestamp-display ${q()??""}`,"svelte-81luuj")),s(he,fe)},$$slots:{default:!0}})}},ne=le=>{var ve=Ep(),he=b(ve);ae(he,{get color(){return j()},get size(){return V()},children:(we,fe)=>{var me=X();J(_e=>Q(me,_e),[()=>e(ee)(R())]),s(we,me)},$$slots:{default:!0}}),J(()=>at(ve,1,`c-timestamp-display ${q()??""}`,"svelte-81luuj")),s(le,ve)};L(oe,le=>{W()?le(re):le(ne,!1)}),s(se,te)};L(Y,se=>{R()&&se(Z)}),s(w,K),ce()})(I,{get timestamp(){return f()}})},$$slots:{default:!0}})})}var $=O(p,2),_=b($),z=U=>{var M=qp(),N=b(M);Ge(N,()=>t.userActions??vt),s(U,M)};L(_,U=>{t.userActions&&U(z)});var C=O(_,2);{let U=d(()=>"c-chat-message__content "+(ge(u,"$enableDesignSystemRichTextEditor",o)?"c-chat-message__content--rich-text":""));ta(C,()=>({"--callout-flex-direction":"column","--callout-gap":"var(--ds-spacing-4)","--callout-body-overflow":"hidden","--callout-width":l()?"100%":"unset","--callout-max-width":"100%","--callout-padding":"var(--ds-spacing-1)","--text-font-size":"0.75rem","--text-line-height":"1rem","--text-letter-spacing":"0.0025em"})),al(C.lastChild,{color:"neutral",size:1,variant:"ghost",get class(){return e(U)},children:(M,N)=>{var I=H(),E=D(I);Ge(E,()=>t.content??vt),s(M,I)},$$slots:{default:!0}})}s(c,h)};L(y,c=>{m()?c(T):c(k,!1)});var g=O(v,2);Ge(g,()=>t.footer??vt);var i=O(g,2);Ge(i,()=>t.edit??vt),J(c=>a=at(v,1,"c-chat-message svelte-6ub04x",null,a,c),[()=>({"c-chat-message--augment":m()})]),s(r,x),ce(),n()}function Gp(r){return async()=>{if(r.currentAgentId)try{const t=await r.getConversationUrl(r.currentAgentId);t&&await navigator.clipboard.writeText(t)}catch(t){console.error("Failed to get conversation URL: ",t)}}}var Vp=S("<div><!></div>");function Hp(r,t){ie(t,!0);const o=()=>ge(v,"$currentConversationId",n),[n,m]=Ce(),f=it(fs.key),l={share:"share-2",retry:"refresh-ccw"},u=k=>({lucideIconName:l[k]}),x=Ot("enableShareService"),v=It(),a=gt(),y=d(()=>[...function(g,i,c){return{tooltipItems:[{label:"Share",action:c?.isActive?Gp(c):g,id:"share-message",disabled:!i,icon:"share",successMessage:"Link copied!"}]}}(()=>{o()&&a(Gr(o()))},ge(x,"$enableShareService",n),ge(f,"$remoteAgentsModel",n)).tooltipItems.map(g=>({...g,...u(g.icon)})),...t.isLastTurn&&t.turn?.status===rs.failed?[{label:"Retry",action:()=>{o()&&t.turn&&(a(Dn(o(),t.turn)),a(Wt(jt.WEBVIEW.MESSAGE_SEND_RETRY_CLICKED,{source:"button",errorMessagePreview:t.turn.display_error_message?.substring(0,100),requestId:t.turn.request_id})))},id:"retry-message",disabled:!1,...u("retry")}]:[]]);var T=Vp();at(T,1,"c-aug-msg__actions svelte-h10o63",null,{},{"c-aug-msg__actions-visible":!1}),yc(b(T),{get items(){return e(y)}}),ps(3,T,()=>Wo,()=>({duration:200})),s(r,T),ce(),m()}var Kp=S('<span class="c-animated-number-indicator svelte-tgxfrx"><!></span>');function Jp(r,t){ie(t,!0);let o=F(t,"value",3,0),n=F(t,"size",3,1),m=F(t,"maxDuration",3,500),f=F(t,"delay",3,0),l=F(t,"autoStart",3,!1),u=F(t,"skipAnimation",3,!1);const x=new Zn(0),v=Qe({value:0}),a=d(()=>String(v.value).length);Hs(()=>x.on("change",k=>{v.value=Math.round(k)})),Me(()=>{if(!l())return x.set(0),void(v.value=0);if(u())return x.set(o()),void(v.value=o());const k=function(i){if(i===0)return .016;const c=Math.log10(i+1)/Math.log10(1e3),h=300+(m()-300)*Math.min(c,1);return(i<20?Math.max(300,400):h)/1e3}(o()),g=el(x,o(),{duration:k,delay:f()/1e3,ease:[.42,0,.58,1]});return()=>{g.stop()}});var y=Kp(),T=b(y);ae(T,{get size(){return n()},get color(){return t.color},children:(k,g)=>{var i=X();J(()=>Q(i,v.value)),s(k,i)},$$slots:{default:!0}}),J(()=>Ks(y,`--digits:${e(a)??""}`)),s(r,y),ce()}var Yp=S('<!> <span class="c-turn-summary-item__label-container svelte-1jr8nef"><!> <span class="c-turn-summary__label svelte-1jr8nef"><!></span></span>',1),Xp=S('<span class="c-turn-summary-item__content svelte-1jr8nef"><!></span>'),Qp=S('<div class="c-turn-summary-item svelte-1jr8nef"><!></div>');function Zp(r,t){ie(t,!0);const o=d(()=>On(t.entry.value,t.entry.singularLabel,t.entry.pluralLabel));function n(){t.entry.callback&&t.entry.callback()}const m={difference:"file-diff"};var f=Qp(),l=b(f);He(l,{get content(){return e(o)},children:(u,x)=>{{let v=d(()=>t.entry.callback?n:ys),a=d(()=>!t.entry.callback);zt(u,{get onclick(){return e(v)},variant:"ghost",color:"neutral",size:.5,get readonly(){return e(a)},children:(y,T)=>{var k=Xp();(g=>{var i=Yp(),c=D(i);{let z=d(()=>m[t.entry.icon]||t.entry.icon);de(c,{get name(){return e(z)},size:2})}var h=O(c,2),p=b(h);nl(p,()=>`${t.animationResetKey}-${t.index}-${t.entry.value}`,z=>{{let C=d(()=>t.index*t.fadeInDelay*1.1);Jp(z,{get value(){return t.entry.value},size:1,get autoStart(){return t.shouldStartNumbers},get delay(){return e(C)},get skipAnimation(){return t.entry.skipAnimation}})}});var $=O(p,2),_=b($);ae(_,{size:1,children:(z,C)=>{var U=X();J(()=>Q(U,` ${e(o)??""}`)),s(z,U)},$$slots:{default:!0}}),s(g,i)})(b(k)),s(y,k)},$$slots:{default:!0}})}},$$slots:{default:!0}}),s(r,f),ce()}var eg=S('<div class="c-scroll-navigation-buttons svelte-fpyp6u"><!> <!></div>'),tg=S('<div class="c-turn-summary__item svelte-n2atb8"><!></div>'),sg=S('<div class="c-turn-summary__list svelte-n2atb8"></div>'),og=S("<!> <!>",1),rg=S('<div slot="header" class="c-turn-summary svelte-n2atb8"><!></div>');function ag(r,t){ie(t,!0);const o=F(t,"entries",19,()=>[]);let n=ue(!1),m=ue(void 0),f=ue(void 0);const l=d(()=>(o()||[]).filter(x=>x.value>0));let u;Me(()=>{if(e(m))return u||(u=new ga({threshold:1})),u.once(e(m),()=>{P(n,!0),u?.destroy()})}),vo(r,{expandable:!1,$$slots:{header:(x,v)=>{var a=rg(),y=b(a),T=g=>{var i=og(),c=D(i);tl(c,{stretch:!0,get containerElement(){return e(f)},set containerElement(h){P(f,h,!0)},children:(h,p)=>{var $=sg();Oe($,23,()=>e(l),_=>_.singularLabel,(_,z,C)=>{var U=tg();Zp(b(U),{get entry(){return e(z)},get index(){return e(C)},animationResetKey:0,get shouldStartNumbers(){return e(n)},fadeInDelay:100}),ps(5,U,()=>Dr,()=>({duration:250,x:40,delay:100*e(C)})),s(_,U)}),s(h,$)},$$slots:{default:!0}}),function(h,p){ie(p,!0);let $=F(p,"scrollableElement",3,null),_=ue(!1),z=ue(!1),C=ue(!1);function U(){if(!$())return P(z,!1),void P(C,!1);const{scrollLeft:R,scrollWidth:W,clientWidth:B}=$(),j=W-B;P(z,R>0),P(C,R<j-1)}function M(){$()?(P(_,$().scrollWidth>$().clientWidth),U()):P(_,!1)}function N(){if(!$()||!e(z))return;const R=($().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle($()).gap)||0);$().scrollBy({left:-R,behavior:"smooth"})}function I(){if(!$()||!e(C))return;const R=($().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle($()).gap)||0);$().scrollBy({left:R,behavior:"smooth"})}Me(()=>{if($())return M(),$().addEventListener("scroll",U),()=>{$().removeEventListener("scroll",U)}}),Hs(()=>{if(typeof ResizeObserver<"u"&&$()){const R=new ResizeObserver(()=>{M()});return R.observe($()),$().parentElement&&R.observe($().parentElement),U(),()=>{R.disconnect()}}});var E=H(),w=D(E),A=R=>{var W=eg(),B=b(W);{let V=d(()=>!e(z));je(B,{size:.5,variant:"ghost-block",color:"neutral",onclick:N,get disabled(){return e(V)},class:"c-scroll-navigation-buttons__button-left",children:(G,q)=>{de(G,{name:"chevron-left",size:1})},$$slots:{default:!0}})}var j=O(B,2);{let V=d(()=>!e(C));je(j,{size:.5,variant:"ghost-block",color:"neutral",onclick:I,get disabled(){return e(V)},children:(G,q)=>{de(G,{name:"chevron-right",size:1})},$$slots:{default:!0}})}s(R,W)};L(w,R=>{e(_)&&R(A)}),s(h,E),ce()}(O(c,2),{get scrollableElement(){return e(f)}}),s(g,i)},k=g=>{ae(g,{size:1,color:"secondary",children:(i,c)=>{var h=X("No activity to report.");s(i,h)},$$slots:{default:!0}})};L(y,g=>{e(n)&&e(l).length>0?g(T):g(k,!1)}),Mt(a,g=>P(m,g),()=>e(m)),s(x,a)}}}),ce()}const Yt={PENDING_MEMORY:{SINGULAR:"Pending Memory",PLURAL:"Pending Memories"},MEMORY_CREATED:{SINGULAR:"Memory Created",PLURAL:"Memories Created"},FILE_CHANGED:{SINGULAR:"File Changed",PLURAL:"Files Changed"},FILE_EXAMINED:{SINGULAR:"File Examined",PLURAL:"Files Examined"},TOOL_USED:{SINGULAR:"Tool Used",PLURAL:"Tools Used"},CREDITS_CONSUMED:{SINGULAR:"Credit",PLURAL:"Credits"},FILE_INDEXED:{SINGULAR:"File Indexed",PLURAL:"Files Indexed"},SECOND:{SINGULAR:"Second",PLURAL:"Seconds"}};function ng(r,t){ie(t,!0);const o=()=>ge(a,"$enableMemoryRetrieval",n),[n,m]=Ce(),f=Ot("enableCreditsConsumedInTurnSummary"),l=Pn(),u=hs.getFromContext(),{availableTabs:x}=u,v=gt(),a=Ot("enableMemoryRetrieval"),y=Fn,T=It(),k=Zr(T,t.requestId);let g=d(()=>ge(x,"$availableTabs",n).includes(js.agentEdits)),i=d(()=>{const z=gl(ge(k,"$exchangesGroup",n))||[],C=[],U=[];let M=0,N=0;for(const E of z)o()&&il(E)&&M++,E.type===ls.TOOL_USE&&N++,dl(E)&&C.push(E),cl(E)&&U.push(E);const I=function(E){const w=new Map;for(const A of E)if(A.type===ls.BILLING_METADATA&&A.billing_metadata){const{transaction_id:R,credits_consumed:W}=A.billing_metadata;R&&typeof W=="number"&&w.set(R,W)}return Array.from(w.values()).reduce((A,R)=>A+(typeof R=="number"?R:0),0)}(z);return{conversationMemoryCount:M,conversationToolUseCount:N,conversationStrReplaceFiles:dr(C),conversationViewFiles:dr(U),conversationCreditsConsumed:I}});const c=d(()=>[...ge(f,"$enableCreditsConsumedInTurnSummary",n)?[{singularLabel:Yt.CREDITS_CONSUMED.SINGULAR,pluralLabel:Yt.CREDITS_CONSUMED.PLURAL,value:e(i).conversationCreditsConsumed,icon:"coins"}]:[],...o()?[{singularLabel:Yt.PENDING_MEMORY.SINGULAR,pluralLabel:Yt.PENDING_MEMORY.PLURAL,value:ge(l,"$memories",n).length,icon:"archive",callback:()=>{o()&&v(y(qn.memories))}},{singularLabel:Yt.MEMORY_CREATED.SINGULAR,pluralLabel:Yt.MEMORY_CREATED.PLURAL,value:e(i).conversationMemoryCount,icon:"archive"}]:[],{singularLabel:Yt.FILE_CHANGED.SINGULAR,pluralLabel:Yt.FILE_CHANGED.PLURAL,value:e(i).conversationStrReplaceFiles,icon:"file-diff",callback:e(g)?()=>{e(g)&&u.setActiveTab(js.agentEdits)}:void 0},{singularLabel:Yt.FILE_EXAMINED.SINGULAR,pluralLabel:Yt.FILE_EXAMINED.PLURAL,value:e(i).conversationViewFiles,icon:"file-search-2"},{singularLabel:Yt.TOOL_USED.SINGULAR,pluralLabel:Yt.TOOL_USED.PLURAL,value:e(i).conversationToolUseCount,icon:"wrench"}]),h=d(()=>e(c).some(z=>z.value>0));var p=H(),$=D(p),_=z=>{ag(z,{get entries(){return e(c)}})};L($,z=>{e(h)&&z(_)}),s(r,p),ce(),m()}function zr(r){return[st.strReplaceEditor,st.editFile].includes(r.tool_name)}var lg=S('<div class="l-tooluse-list svelte-t0psfi"></div>'),ig=S('<div class="l-tooluse-list svelte-t0psfi"></div>'),cg=S('<div slot="header"><div class="l-tooluse-list__container svelte-t0psfi"><div class="l-tooluse-list__container__left svelte-t0psfi"><!> <!></div> <div class="l-tooluse-list__container__right svelte-t0psfi"><!> <!></div></div></div>');function dg(r,t){ie(t,!0);const o=()=>ge(l(),"$remoteAgentsModel",m),n=()=>ge(e(y),"$displayableToolUseNodes",m),[m,f]=Ce();let l=F(t,"remoteAgentsModel",19,()=>{}),u=F(t,"turnIndex",3,0);const x=gt(),{store:v}=go(),a=Lt(),y=d(()=>o()?.isActive?Vs(Qr(t.requestId,t.toolUseNodes,l())):Xr(t.conversationId,t.requestId));function T(N,I,E){x(Yr(t.conversationId,N,I.tool_use_id,E))}function k(N,I){x(Jr(N,I))}function g(N,I){x(Kr(N,I))}function i(N,I){return Hr.select(v.getState(),N,I)}let c=ue(!1),h=ue(0),p=ue(0),$=ue(!1);const _=d(()=>t.toolUseNodes.filter(N=>N.tool_use!==void 0&&zr(N.tool_use))),z=d(()=>e(_).every(N=>{const I=N.tool_use,E=N.requestId??t.requestId;return(o()?.isActive?o().getToolUseState(I.tool_use_id):i(E,I.tool_use_id)).phase===pe.completed}));Me(()=>{e(z)&&e(c)&&!e($)&&async function(){if(e($)||!e(c))return;let N=0,I=0;const E=t.toolUseNodes.filter(w=>{if(!w.tool_use||!zr(w.tool_use))return!1;const A=w.tool_use,R=w.requestId??t.requestId;return(o()?.isActive?o().getToolUseState(A.tool_use_id):i(R,A.tool_use_id)).phase===pe.completed});for(const w of E)try{const A=w.requestId??t.requestId,R=await a.getAgentEditChangesByRequestId(A);if(R&&R.length>0)for(const W of R)N+=W.totalAddedLines??0,I+=W.totalRemovedLines??0}catch(A){console.warn("Failed to load changes for tool use:",w.tool_use?.tool_use_id,A)}P(h,N,!0),P(p,I,!0),P($,!0)}()});var C=H(),U=D(C),M=N=>{var I=H(),E=D(I),w=R=>{var W=lg();Oe(W,5,n,Ye,(B,j)=>{const V=d(()=>e(j).tool_use);var G=H(),q=D(G),ee=K=>{{let Y=d(()=>e(j).requestId??t.requestId);Po(K,{get toolUse(){return e(V)},get isLastTurn(){return t.isLastTurn},get requestId(){return e(Y)},onToolRun:T,onToolCancel:k,onToolSkip:g,get turnIndex(){return u()}})}};L(q,K=>{e(V)&&K(ee)}),s(B,G)}),s(R,W)},A=R=>{vo(R,{stickyHeader:!1,stickyHeaderTop:0,children:(W,B)=>{var j=ig();Oe(j,21,()=>t.toolUseNodes,Ye,(V,G)=>{const q=d(()=>e(G).tool_use);var ee=H(),K=D(ee),Y=Z=>{{let se=d(()=>e(G).requestId??t.requestId);Po(Z,{get toolUse(){return e(q)},get isLastTurn(){return t.isLastTurn},get requestId(){return e(se)},onToolRun:T,onToolCancel:k,onToolSkip:g,get turnIndex(){return u()},isGroupListItem:!0})}};L(K,Z=>{e(q)&&Z(Y)}),s(V,ee)}),s(W,j)},$$slots:{default:!0,header:(W,B)=>{var j=cg(),V=b(j),G=b(V),q=b(G);so(q,{color:"neutral",size:1,variant:"soft",children:(se,te)=>{var oe=X();J(()=>Q(oe,t.toolUseNodes.length)),s(se,oe)},$$slots:{default:!0}});var ee=O(q,2);ae(ee,{size:1,weight:"medium",color:"secondary",children:(se,te)=>{var oe=X("Tools used");s(se,oe)},$$slots:{default:!0}});var K=O(G,2),Y=b(K);ca(Y,{get totalAddedLines(){return e(h)},get totalRemovedLines(){return e(p)}});var Z=O(Y,2);Ya(Z,{size:.5}),Dt(V,(se,te)=>$s?.(se,te),()=>({onVisible:()=>P(c,!0),scrollTarget:document.body})),s(W,j)}}})};L(E,R=>{n().length===1?R(w):R(A,!1)}),s(N,I)};L(U,N=>{n()?.length&&N(M)}),s(r,C),ce(),f()}var ug=S("<!> <!> <!>",1),vg=S('<div class="c-aug-msg__suggestions svelte-18c6goi"><!></div>'),pg=S('<div class="c-aug-msg__feedback svelte-18c6goi"><!></div>'),gg=S('<div class="l-turn-summary-container svelte-18c6goi"><!></div> <div class="c-aug-msg__actions-row svelte-18c6goi"><!></div> <!>',1),hg=S('<div class="c-aug-msg__footer hidden-when-empty svelte-18c6goi"><!> <!></div>'),mg=S("<div><!></div>");function nh(r,t){ie(t,!0);const o=()=>ge(e(i),"$isLastTurn",m),n=()=>ge(k,"$currentConversationId",m),[m,f]=Ce();let l=F(t,"turn",19,()=>{}),u=F(t,"requestId",19,()=>{}),x=F(t,"turnIndex",3,0),v=F(t,"showFooter",3,!0);const a=it(fs.key),y=Ot("showThinkingSummary"),T=Ot("enableGroupedTools"),k=It(),g=Wn(k),i=d(()=>t.isLastTurn?Vs(t.isLastTurn):jn(k,u())),{store:c}=go(),h=Lt(),p=d(()=>ge(a,"$remoteAgentsModel",m)?.isActive?Os.remoteAgent:ge(g,"$isAgentic",m)?Os.agent:Os.chat);let $=d(()=>Za(l()));const _=Rt(u()||"");Me(()=>{u()&&u()!==ge(_,"$requestIdStore",m)&&_.set(u())}),Vt("requestId",_);const z=Rt(l()?.status);Me(()=>{l()&&l().status!==ge(z,"$requestStatusStore",m)&&z.set(l().status)}),Vt("requestStatus",z);let C=ue(!1),U=d(()=>{let N=[];return N=l()&&l().status!==rs.sent&&u()&&o()&&l().structured_output_nodes&&l().structured_output_nodes.length>0?l().structured_output_nodes.find(I=>I.type===ls.SUGGESTED_QUESTIONS)?.content.split(`
`)??[]:[],N});Me(()=>{e(U).length>0&&!e(C)&&(P(C,!0),h.reportWebviewClientEvent(os.chatDisplaySuggestedQuestions))});var M=mg();{const N=E=>{var w=ug(),A=D(w),R=G=>{const q=d(()=>l().structured_output_nodes.filter(ee=>ee.type===ls.THINKING&&ee.thinking?.summary));(function(ee,K){ie(K,!0);var Y=H(),Z=D(Y),se=te=>{var oe=Ai();Oe(oe,21,()=>K.nodes,Ye,(re,ne)=>{var le=H(),ve=D(le),he=we=>{const fe=d(()=>function(xe,Ee=30){if(!xe)return{title:"",summary:""};const Se=xe.match(/^\s*(\*\*|__)(.+?)\1\s*\n?/);if(Se)return{title:Se[2].trim(),summary:xe.slice(Se[0].length).trimStart()};const Ke=xe.trimStart();return{title:Ke.length>Ee?Ke.slice(0,Ee)+"...":Ke,summary:xe}}(e(ne).thinking?.summary)),me=d(()=>e(fe).summary.trim().length>0);var _e=Ci();const be=xe=>{var Ee=Ii(),Se=D(Ee),Ke=Ie=>{var Le=Si(),nt=b(Le);J(()=>Q(nt,e(fe).title)),s(Ie,Le)},$e=Ie=>{var Le=Ti();s(Ie,Le)};L(Se,Ie=>{e(fe).title?Ie(Ke):Ie($e,!1)});var Ue=O(Se,2),De=Ie=>{de(Ie,{name:"chevron-right",class:"c-thinking__chevron"})};L(Ue,Ie=>{e(me)&&Ie(De)}),s(xe,Ee)};var ke=b(_e),Ae=xe=>{var Ee=xi(),Se=b(Ee),Ke=b(Se);be(Ke);var $e=O(Se,2),Ue=b($e),De=b(Ue);_n(De,{orientation:"vertical",size:4});var Ie=O(Ue,2),Le=b(Ie);{let nt=d(()=>({code:hr,codespan:fr,link:$r}));Co(Le,{get renderers(){return e(nt)},get markdown(){return e(fe).summary}})}s(xe,Ee)},ze=xe=>{var Ee=Ui(),Se=b(Ee);be(Se),s(xe,Ee)};L(ke,xe=>{e(me)?xe(Ae):xe(ze,!1)}),s(we,_e)};L(ve,we=>{e(ne).thinking?.summary&&we(he)}),s(re,le)}),s(te,oe)};L(Z,te=>{K.nodes.length>0&&te(se)}),s(ee,Y),ce()})(G,{get nodes(){return e(q)}})};L(A,G=>{l()&&u()&&l().structured_output_nodes&&ge(y,"$showThinkingSummary",m)&&G(R)});var W=O(A,2),B=G=>{{let q=d(()=>({code:hr,codespan:fr,link:$r}));Co(G,{get renderers(){return e(q)},get markdown(){return t.markdown}})}};L(W,G=>{t.markdown.trim().length>0&&G(B)});var j=O(W,2),V=G=>{const q=d(()=>l().structured_output_nodes.filter(Z=>Z.type===ls.TOOL_USE));var ee=H(),K=D(ee),Y=Z=>{var se=H(),te=D(se),oe=ne=>{dg(ne,{get requestId(){return u()},get remoteAgentsModel(){return a},get conversationId(){return n()},get toolUseNodes(){return e(q)},get isLastTurn(){return o()},get turnIndex(){return x()}})},re=ne=>{Up(ne,{get requestId(){return u()},get remoteAgentsModel(){return a},get conversationId(){return n()},get toolUseNodes(){return e(q)},get isLastTurn(){return o()},get turnIndex(){return x()}})};L(te,ne=>{ge(T,"$enableGroupedTools",m)?ne(oe):ne(re,!1)}),s(Z,se)};L(K,Z=>{e(q).length>0&&Z(Y)}),s(G,ee)};L(j,G=>{n()&&e(p)!==Os.chat&&l()&&u()&&l().structured_output_nodes&&G(V)}),s(E,w)},I=E=>{var w=hg(),A=b(w),R=j=>{var V=vg(),G=b(V);{let q=d(()=>({questionsLoaded:!0,questions:e(U),status:l().status,request_message:l().request_message,request_id:l().request_id,chatItemType:en.summaryResponse}));ji(G,{get conversationId(){return n()},get turn(){return e(q)},showIntroText:!1})}s(j,V)};L(A,j=>{n()&&l()&&e(U).length>0&&j(R)});var W=O(A,2),B=j=>{var V=gg(),G=D(V),q=b(G);{let te=d(()=>l()?.request_id);ng(q,{get requestId(){return e(te)}})}var ee=O(G,2),K=b(ee),Y=te=>{var oe=pg();Fi(b(oe),{get requestId(){return u()},getResponseText:()=>{const re=c.getState(),ne=t.group?t.group.map(({turn:le})=>le):Zr.select(re,n(),u());return pl(ne)},get chatMode(){return e(p)}}),ps(3,oe,()=>Wo,()=>({duration:200})),s(te,oe)},Z=te=>{Hp(te,{get turn(){return l()},get isLastTurn(){return o()}})};L(K,te=>{l()&&n()&&[rs.success,rs.failed,rs.cancelled].includes(l().status)&&u()?te(Y):te(Z,!1)});var se=O(ee,2);L(se,te=>{}),s(j,V)};L(W,j=>{v()&&e($)&&j(B)}),s(E,w)};Bp(b(M),{isAugment:!0,content:N,footer:I,$$slots:{content:!0,footer:!0}})}s(r,M),ce(),f()}export{nh as A,Yt as B,js as C,oh as D,ca as E,Fi as F,sh as G,us as H,Pp as I,ia as J,Hg as K,$r as L,yc as M,Yg as N,ah as O,Eo as P,rh as Q,No as R,Ve as S,ur as T,Ro as a,So as b,cr as c,Jg as d,ml as e,hs as f,eh as g,mo as h,Dl as i,Ko as j,Xg as k,Il as l,Kg as m,Qg as n,Zg as o,no as p,ha as q,zp as r,th as s,Vg as t,Bp as u,ag as v,oa as w,ji as x,xa as y,$s as z};
//# sourceMappingURL=AugmentMessage-BDJkLW0G.js.map
