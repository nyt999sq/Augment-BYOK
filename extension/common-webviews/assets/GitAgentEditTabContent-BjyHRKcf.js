import{v as je,x as p,aa as ee,F as y,m as te,ab as n,z as e,ad as at,G as nt,H as h,Q as x,P as v,N as t,B as Pe,L as F,R as j,J as ke,T as we,ae as G,S as Ce,a7 as Fe,O as k,I as ue,K as ce,M as wt,aT as qt,V as Tt,af as Ct,A as s,ac as yt,C as ft,D as W,aR as Et,Z as vt,_ as jt,a6 as xt,ak as Te,a3 as zt,ar as Ft,ai as Vt,Y as Wt}from"./Icon-CaBYD5oO.js";import{k as Jt}from"./key-CsCKik6T.js";import{G as ot,a as Re,M as _t,I as Kt,b as Bt,P as It,C as Qt,c as Mt}from"./main-panel-BWaqdbJR.js";import{T as de,a as d,b as Yt}from"./TextTooltipAugment-B4cqQh4H.js";import{B as ye}from"./types-CaiUesx9.js";import{I as Qe}from"./IconButtonAugment-Rffikxkp.js";import{B as Pt}from"./ButtonAugment-DECgcPdk.js";import{T as Nt}from"./TextCombo-89YZbRHm.js";import{g as Xt,a as Zt}from"./marked.esm-CBEAPn3z.js";import{b as es,o as ts,D as ut,x as Ot,n as ss,y as rs,i as is}from"./extension-client-context-CwKdOhUw.js";import{C as bt,a as kt}from"./Markdown-oTNiBtsM.js";import{S as At}from"./AugmentMessage-BDJkLW0G.js";import{R as Ht,P as os,K as as}from"./Keybindings-4dJzjBQT.js";import"./design-system-init-DCR3FqZN.js";import"./index-DF_yYUtg.js";import"./await-bImbqfxU.js";import"./index-BBZh5tbU.js";import"./message-broker-CliB7GoL.js";import"./RemoteAgentStatusIndicator-qmKRPmeO.js";import"./utils-DpHtg3Qz.js";import"./index-nbgGMYE9.js";import"./OpenFileButton-BnBhQVIy.js";import"./remote-agents-client-DV0OXQaI.js";import"./SuccessfulButton-Df7hGnns.js";import"./CalloutAugment-DfDZpfuE.js";import"./Chevron-Ct6H6suA.js";import"./BaseTextInput-CPpF4fmq.js";import"./shared-app-state-BibCi4jI.js";import"./index-Dt79ugWJ.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./index-Ct3ef_qL.js";import"./shared-webview-store-model-BEcw7czj.js";import"./ra-diff-ops-model-Bh6ZhEmC.js";import"./Filespan-CzwbVFJm.js";import"./noop-CVINQ7cR.js";import"./TextAreaAugment-BzfuWeQA.js";import"./toggleHighContrast-iCsKcMx3.js";import"./mermaid-Bezvo2Lx.js";import"./CopyButton-BCoIBrt5.js";import"./LanguageIcon-Du_otND8.js";import"./index-B4NDmpYR.js";import"./IconFilePath-BTkL5YPt.js";import"./next-edit-types-B8NR3rVy.js";import"./keypress-fD7XHdyk.js";try{lt=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(St=new lt.Error().stack)&&(lt._sentryDebugIds=lt._sentryDebugIds||{},lt._sentryDebugIds[St]="df36c9f9-e748-474c-ae13-7de586f55451",lt._sentryDebugIdIdentifier="sentry-dbid-df36c9f9-e748-474c-ae13-7de586f55451")}catch{}var lt,St,ns=h("<!> <!> <!>",1),ls=h("<!> <!> <!>",1),cs=h('<div class="c-git-repo-chips svelte-1gcvbyl"><!></div>'),ds=h("<!> <!>",1),gs=h("<span><!></span>"),us=h('<div><!> <div class="c-git-file-item__buttons svelte-17nlls9"><!> <!> <!> <!></div></div>');function vs(ze,r){je(r,!1);const o=te(),g=te(),J=te(),z=te(),M=te(),m=te(),O=te();let c=p(r,"file",8),E=p(r,"onViewDiff",8),K=p(r,"showStageAction",8,!1),q=p(r,"showUnstageAction",8,!1),Q=p(r,"showRevertAction",8,!1);const{controller:a}=ot.requireContext();async function l(){try{await a.stageFile(e(o))}catch(i){console.error(`Failed to stage file ${e(o)}:`,i)}}async function u(){try{await a.unstageFile(e(o))}catch(i){console.error(`Failed to unstage file ${e(o)}:`,i)}}const se=es();function re(){se(ts({pathName:e(o),repoRoot:""}))}async function ie(){try{await a.resetToIndexFile(e(o))}catch(i){console.error(`Failed to reset file ${e(o)}:`,i)}}ee(()=>n(c()),()=>{y(o,c().qualifiedPathName.relPath)}),ee(()=>e(o),()=>{y(g,Xt(e(o)))}),ee(()=>e(o),()=>{y(J,Zt(e(o)))}),ee(()=>n(c()),()=>{var i;y(z,(i=c().statusRow,Re.isUntracked(i)?"file-x":Re.isNew(i)&&Re.hasStaged(i)?"file-plus":Re.isDeleted(i)?"file-minus":"file-diff"))}),ee(()=>n(c()),()=>{var i;y(M,(i=c().statusRow,Re.isUntracked(i)||Re.isNew(i)&&Re.hasStaged(i)?"var(--ds-color-success-9)":Re.isDeleted(i)?"var(--ds-color-error-9)":"var(--ds-color-neutral-11)"))}),ee(()=>n(c()),()=>{y(m,function(i){if(Re.isUntracked(i)){if(Re.hasUnstaged(i)&&K())return"Untracked file - unstaged changes";if(Re.hasStaged(i)&&q())return"Untracked file - staged for commit"}if(Re.isNew(i)){if(Re.hasStaged(i)&&q())return"New file - staged for commit";if(Re.hasUnstaged(i)&&K())return"New file - unstaged changes"}if(Re.isDeleted(i)){if(Re.hasStaged(i)&&q())return"File deleted - staged for commit";if(Re.hasUnstaged(i)&&K())return"File deleted - unstaged"}return Re.hasStaged(i)?"File modified - staged for commit":Re.hasUnstaged(i)?"File modified - unstaged changes":"File status"}(c().statusRow))}),ee(()=>n(c()),()=>{y(O,Re.isUntracked(c().statusRow))}),at(),nt();var _=us();let w;var C=v(_);Pt(C,{variant:"ghost",color:"neutral",size:1,alignment:"left",class:"c-git-file-item__file-button",$$events:{click(...i){E()?.apply(this,i)}},children:(i,oe)=>{var I=ds(),U=F(I);{let T=k(()=>(n(d),ue(()=>[d.Hover]))),D=k(()=>e(O)?"View Diff â€¢ Untracked file":"View Diff");de(U,{class:"c-git-file-item__file-tooltip",get triggerOn(){return e(T)},get content(){return e(D)},children:(ae,_e)=>{Nt(ae,{shrink:!0,size:1,greyTextTruncateDirection:"left",$$slots:{text:(S,Y)=>{var ne=G();Ce(()=>Fe(ne,e(g))),t(S,ne)},grayText:(S,Y)=>{var ne=G();Ce(()=>Fe(ne,e(J)||"")),t(S,ne)}}})},$$slots:{default:!0}})}var ve=j(U,2);wt(ve,r,"changeSummary",{},null),t(i,I)},$$slots:{default:!0,iconLeft:(i,oe)=>{var I=ce(),U=F(I),ve=T=>{{let D=k(()=>(n(d),ue(()=>[d.Hover])));de(T,{get triggerOn(){return e(D)},get content(){return e(m)},children:(ae,_e)=>{var S=gs(),Y=v(S);ke(Y,{get name(){return e(z)},size:1}),Ce(()=>qt(S,`color: ${e(M)??""}`)),t(ae,S)},$$slots:{default:!0}})}};x(U,T=>{e(z)&&T(ve)}),t(i,I)}}});var R=j(C,2),A=v(R);{let i=k(()=>(n(d),ue(()=>[d.Hover])));de(A,{get triggerOn(){return e(i)},content:"Open file",children:(oe,I)=>{Qe(oe,{variant:"ghost",size:1,$$events:{click:re},children:(U,ve)=>{ke(U,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var B=j(A,2),P=i=>{{let oe=k(()=>(n(d),ue(()=>[d.Hover])));de(i,{get triggerOn(){return e(oe)},content:"Reset to staged state (or HEAD if not staged)",children:(I,U)=>{Qe(I,{variant:"ghost",size:1,$$events:{click:ie},children:(ve,T)=>{ke(ve,{name:"trash-2"})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(B,i=>{Q()&&i(P)});var N=j(B,2),$=i=>{{let oe=k(()=>(n(d),ue(()=>[d.Hover])));de(i,{get triggerOn(){return e(oe)},content:"Stage file: Mark changes as reviewed, approved, and ready to commit",children:(I,U)=>{Qe(I,{variant:"ghost",size:1,$$events:{click:l},children:(ve,T)=>{ke(ve,{name:"plus"})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(N,i=>{K()&&i($)});var H=j(N,2),ge=i=>{{let oe=k(()=>(n(d),ue(()=>[d.Hover])));de(i,{get triggerOn(){return e(oe)},content:"Unstage file: Mark changes as not ready to commit",children:(I,U)=>{Qe(I,{variant:"ghost",size:1,$$events:{click:u},children:(ve,T)=>{ke(ve,{name:"circle-minus"})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(H,i=>{q()&&i(ge)}),Ce(i=>w=Tt(_,1,"c-git-file-item svelte-17nlls9",null,w,i),[()=>({"c-git-file-item--untracked":e(O)})]),t(ze,_),Pe()}var fs=h('<div class="c-git-file-list__empty svelte-sayqy6"><!></div>'),hs=h('<div class="c-git-file-list svelte-sayqy6"><!></div>');function Ut(ze,r){je(r,!1);let o=p(r,"files",24,()=>[]);const g="unstaged";let J=p(r,"showStageAction",8,!1),z=p(r,"showUnstageAction",8,!1),M=p(r,"showRevertAction",8,!1),m=p(r,"onViewDiff",8);var O={fileType:g};nt();var c=hs(),E=v(c),K=Q=>{var a=ce(),l=F(a);Ct(l,1,o,u=>`${g}-${u.qualifiedPathName.relPath}+${u.changesSummary?.unstagedChanges?.addedLines}-${u.changesSummary?.unstagedChanges?.removedLines}`,(u,se)=>{vs(u,{get file(){return e(se)},get showStageAction(){return J()},get showUnstageAction(){return z()},get showRevertAction(){return M()},onViewDiff:()=>m()(e(se)),$$slots:{changeSummary:(re,ie)=>{var _=ce(),w=F(_);wt(w,r,"changeSummary",{get file(){return e(se)}},null),t(re,_)}}})}),t(Q,a)},q=Q=>{var a=fs(),l=v(a);wt(l,r,"empty",{},u=>{}),t(Q,a)};return x(E,Q=>{n(o()),ue(()=>o()&&o().length>0)?Q(K):Q(q,!1)}),t(ze,c),Yt(r,"fileType",g),Pe(O)}var ms=h('<div class="c-git-section-summary svelte-1oxdpot"><!> <!> <!></div>');function Dt(ze,r){je(r,!1);const o=te(),g=te(),J=te(),z=te(),M=te(),m=te();let O=p(r,"files",24,()=>{}),c=p(r,"changeType",8,"unstaged"),E=te();ee(()=>n(O()),()=>{y(o,O()?.length||0)}),ee(()=>(n(O()),n(c())),()=>{y(g,O()?.reduce((a,l)=>{const u=c()==="staged"?l.changesSummary?.stagedChanges:l.changesSummary?.unstagedChanges;return a+(u?.addedLines||0)},0)||0)}),ee(()=>(n(O()),n(c())),()=>{y(J,O()?.reduce((a,l)=>{const u=c()==="staged"?l.changesSummary?.stagedChanges:l.changesSummary?.unstagedChanges;return a+(u?.removedLines||0)},0)||0)}),ee(()=>e(o),()=>{y(z,e(o)===1?"file":"files")}),ee(()=>n(c()),()=>{y(E,c()==="staged"?"check":"search")}),ee(()=>n(c()),()=>{y(M,c()==="staged"?"success":"warning")}),ee(()=>n(c()),()=>{y(m,c()==="staged"?"reviewed and ready to commit":"with changes not yet reviewed")}),at(),nt();var K=ce(),q=F(K),Q=a=>{var l=ms(),u=v(l);{let w=k(()=>(n(d),ue(()=>[d.Hover])));de(u,{get triggerOn(){return e(w)},get content(){return`${e(o)??""} ${e(z)??""} ${e(m)??""}`},children:(C,R)=>{ye.Root(C,{variant:"soft",get color(){return e(M)},size:1,children:(A,B)=>{we(A,{size:1,weight:"medium",children:(P,N)=>{var $=G();Ce(()=>Fe($,e(o))),t(P,$)},$$slots:{default:!0}})},$$slots:{default:!0,leftButtons:(A,B)=>{ye.IconButton(A,{slot:"leftButtons",children:(P,N)=>{ke(P,{get name(){return e(E)},size:1})},$$slots:{default:!0}})}}})},$$slots:{default:!0}})}var se=j(u,2),re=w=>{{let C=k(()=>(n(d),ue(()=>[d.Hover])));de(w,{get triggerOn(){return e(C)},get content(){return`${e(g)??""} lines added across all files`},children:(R,A)=>{ye.Root(R,{variant:"soft",color:"success",size:1,children:(B,P)=>{we(B,{size:1,weight:"medium",children:(N,$)=>{var H=G();Ce(()=>Fe(H,`+${e(g)??""}`)),t(N,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(se,w=>{e(g)>0&&w(re)});var ie=j(se,2),_=w=>{{let C=k(()=>(n(d),ue(()=>[d.Hover])));de(w,{get triggerOn(){return e(C)},get content(){return`${e(J)??""} lines removed across all files`},children:(R,A)=>{ye.Root(R,{variant:"soft",color:"error",size:1,children:(B,P)=>{we(B,{size:1,weight:"medium",children:(N,$)=>{var H=G();Ce(()=>Fe(H,`-${e(J)??""}`)),t(N,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(ie,w=>{e(J)>0&&w(_)}),t(a,l)};x(q,a=>{e(o)>0&&a(Q)}),t(ze,K),Pe()}var $s=h('<div class="c-git-change-summary svelte-1dm378"><!> <!></div>');function Lt(ze,r){je(r,!0);let o=p(r,"addedLines",3,0),g=p(r,"removedLines",3,0),J=s(()=>o()>0||g()>0);var z=ce(),M=F(z),m=O=>{var c=$s(),E=v(c),K=a=>{{let l=s(()=>[d.Hover]);de(a,{get triggerOn(){return e(l)},get content(){return`${o()??""} lines added`},children:(u,se)=>{At(u,{color:"success",children:(re,ie)=>{var _=G();Ce(()=>Fe(_,`+${o()??""}`)),t(re,_)},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(E,a=>{o()>0&&a(K)});var q=j(E,2),Q=a=>{{let l=s(()=>[d.Hover]);de(a,{get triggerOn(){return e(l)},get content(){return`${g()??""} lines removed`},children:(u,se)=>{At(u,{color:"error",children:(re,ie)=>{var _=G();Ce(()=>Fe(_,`-${g()??""}`)),t(re,_)},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(q,a=>{g()>0&&a(Q)}),t(O,c)};x(M,O=>{e(J)&&O(m)}),t(ze,z),Pe()}var ps=h('<div class="c-git-section-changes__content svelte-1dl5jtk"><!></div>'),ys=h('<div class="c-git-section-changes__header svelte-1dl5jtk"><div class="c-git-section-changes__header-left svelte-1dl5jtk"><!> <!> <!></div> <div class="c-git-section-changes__controls svelte-1dl5jtk"><!> <!></div></div>'),ws=h('<div class="c-git-section-changes c-git-section-changes__wrapper svelte-1dl5jtk"><!></div>');function Cs(ze,r){je(r,!1);const o=()=>W(e(z),"$unstagedFiles",g),[g,J]=ft(),z=te(),M=te(),m=te(),{model:O,controller:c}=ot.requireContext();async function E(){if(c)try{await c.stageAllUnstaged()}catch(l){console.error("Failed to stage all unstaged files:",l)}}async function K(){if(c&&o())try{const l=o().map(u=>u.qualifiedPathName.relPath);await c.resetToIndexFiles(l)}catch(l){console.error("Failed to reset all unstaged files:",l)}}ee(()=>{},()=>{yt(y(z,O.fileCollectionsModel.unstagedFiles),"$unstagedFiles",g)}),ee(()=>{},()=>{yt(y(M,O.fileCollectionsModel.unstagedFilesWithUI),"$unstagedFilesWithUI",g)}),ee(()=>o(),()=>{y(m,(o()?.length??0)>0)}),at(),nt();var q=ce(),Q=F(q),a=l=>{var u=ws(),se=v(u);bt(se,{children:(re,ie)=>{var _=ps();Ut(v(_),{get files(){return W(e(M),"$unstagedFilesWithUI",g)},showStageAction:!0,showUnstageAction:!1,showRevertAction:!0,onViewDiff:w=>c?.openGitDiff(w.qualifiedPathName.relPath,!1),$$slots:{changeSummary:(w,C)=>{const R=k(()=>C.file);{let A=k(()=>(n(e(R)),ue(()=>e(R).changesSummary?.unstagedChanges?.addedLines||0))),B=k(()=>(n(e(R)),ue(()=>e(R).changesSummary?.unstagedChanges?.removedLines||0)));Lt(w,{slot:"changeSummary",get addedLines(){return e(A)},get removedLines(){return e(B)}})}}}}),t(re,_)},$$slots:{default:!0,header:(re,ie)=>{var _=ys(),w=v(_),C=v(w);kt(C,{});var R=j(C,2);{let N=k(()=>(n(d),ue(()=>[d.Hover])));de(R,{get triggerOn(){return e(N)},content:"Unstaged files: Files with changes that are not queued to commit to git",children:($,H)=>{we($,{size:1,weight:"bold",class:"c-git-section-changes__title",children:(ge,i)=>{var oe=G("Unreviewed");t(ge,oe)},$$slots:{default:!0}})},$$slots:{default:!0}})}Dt(j(R,2),{get files(){return o()},changeType:"unstaged"});var A=j(w,2),B=v(A);{let N=k(()=>(n(d),ue(()=>[d.Hover])));de(B,{get triggerOn(){return e(N)},content:"Reset all to staged state (or HEAD if not staged)",children:($,H)=>{Qe($,{variant:"ghost",size:1,$$events:{click:K},children:(ge,i)=>{ke(ge,{name:"trash-2"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var P=j(B,2);{let N=k(()=>(n(d),ue(()=>[d.Hover])));de(P,{get triggerOn(){return e(N)},content:"Stage files: Mark all changes as reviewed, approved, and ready to commit",children:($,H)=>{Qe($,{variant:"ghost",size:1,$$events:{click:E},children:(ge,i)=>{ke(ge,{name:"plus"})},$$slots:{default:!0}})},$$slots:{default:!0}})}t(re,_)}}}),t(l,u)};x(Q,l=>{e(m)&&l(a)}),t(ze,q),Pe(),J()}var zs=h('<div class="c-git-section-staged__content svelte-1jgkyxv"><!></div>'),_s=h('<div class="c-git-section-staged__header svelte-1jgkyxv"><div class="c-git-section-staged__header-left svelte-1jgkyxv"><!> <!> <!></div> <div class="c-git-section-staged__controls svelte-1jgkyxv"><!></div></div>'),bs=h('<div class="c-git-section-staged c-git-section-staged__wrapper svelte-1jgkyxv"><!></div>');function ks(ze,r){je(r,!1);const o=()=>W(e(z),"$stagedFiles",g),[g,J]=ft(),z=te(),M=te(),m=te(),{model:O,controller:c}=ot.requireContext();async function E(){if(c)try{await c.unstageAllStaged()}catch(a){console.error("Failed to unstage all staged files:",a)}}ee(()=>{},()=>{yt(y(z,O.fileCollectionsModel.stagedFiles),"$stagedFiles",g)}),ee(()=>{},()=>{yt(y(M,O.fileCollectionsModel.stagedFilesWithUI),"$stagedFilesWithUI",g)}),ee(()=>o(),()=>{y(m,(o()?.length??0)>0)}),at(),nt();var K=ce(),q=F(K),Q=a=>{var l=bs(),u=v(l);bt(u,{children:(se,re)=>{var ie=zs();Ut(v(ie),{get files(){return W(e(M),"$stagedFilesWithUI",g)},showStageAction:!1,showUnstageAction:!0,onViewDiff:_=>c?.openGitDiff(_.qualifiedPathName.relPath,!0),$$slots:{changeSummary:(_,w)=>{const C=k(()=>w.file);{let R=k(()=>(n(e(C)),ue(()=>e(C).changesSummary?.stagedChanges?.addedLines||0))),A=k(()=>(n(e(C)),ue(()=>e(C).changesSummary?.stagedChanges?.removedLines||0)));Lt(_,{slot:"changeSummary",get addedLines(){return e(R)},get removedLines(){return e(A)}})}}}}),t(se,ie)},$$slots:{default:!0,header:(se,re)=>{var ie=_s(),_=v(ie),w=v(_);kt(w,{});var C=j(w,2);{let B=k(()=>(n(d),ue(()=>[d.Hover])));de(C,{get triggerOn(){return e(B)},content:"Staged files: Files that are reviewed, approved, and ready to commit to git",children:(P,N)=>{we(P,{size:1,weight:"bold",class:"c-git-section-staged__title",children:($,H)=>{var ge=G("Reviewed and Approved");t($,ge)},$$slots:{default:!0}})},$$slots:{default:!0}})}Dt(j(C,2),{get files(){return o()},changeType:"staged"});var R=j(_,2),A=v(R);{let B=k(()=>(n(d),ue(()=>[d.Hover])));de(A,{get triggerOn(){return e(B)},content:"Mark all changes as unapproved and not ready to commit",children:(P,N)=>{Qe(P,{variant:"ghost",size:1,$$events:{click:E},children:($,H)=>{ke($,{name:"circle-minus"})},$$slots:{default:!0}})},$$slots:{default:!0}})}t(se,ie)}}}),t(a,l)};x(q,a=>{e(m)&&a(Q)}),t(ze,K),Pe(),J()}function Rs(ze,r,o,g,J){e(r)&&o.repositoryPath!==g()&&e(r).selectRepository(o.repositoryPath)}var Ss=h('<span class="c-git-repository-section__expand-placeholder svelte-1kzm13i"><!></span>'),xs=h('<div class="c-git-repository-section__error svelte-1kzm13i"><!></div>'),Fs=h('<div class="c-git-repository-section__loading svelte-1kzm13i"><!></div>'),Bs=h('<div class="c-git-repository-section__header svelte-1kzm13i"><div class="c-git-repository-section__header-left svelte-1kzm13i"><!> <!></div> <div class="c-git-repository-section__header-right svelte-1kzm13i"><!></div></div>'),Is=h('<div class="c-git-repository-section__content svelte-1kzm13i"><!> <!></div>'),Ms=h('<div class="c-git-repository-section__empty svelte-1kzm13i"><!></div>'),Os=h('<div tabindex="-1"><!></div>');function As(ze,r){je(r,!0);const o=()=>W(e(u),"$activeRepository",M),g=()=>W(e(R),"$isOperationInProgress",M),J=()=>W(e(C),"$lastError",M),z=()=>W(e(se),"$availableRepositories",M),[M,m]=ft();let O=p(r,"defaultOpen",3,!0);ot.setInContext(r.model,r.controller);const c=_t.getContext();let E=vt(!O());function K(){e(l)&&r.repositoryPath!==o()&&e(l).selectRepository(r.repositoryPath)}function q(D){D.key!=="Enter"&&D.key!==" "||!e(l)||r.repositoryPath===o()||(D.preventDefault(),e(l).selectRepository(r.repositoryPath))}async function Q(){if(!g())try{await r.controller.refreshRepository()}catch(D){console.error("Failed to refresh repository:",D)}}let a=s(()=>c?.model),l=s(()=>c?.controller),u=s(()=>e(a)?.activeRepository),se=s(()=>e(a)?.availableRepositories),re=s(()=>r.model.repositoryState),ie=s(()=>r.model.fileCollectionsModel.unstagedFiles),_=s(()=>r.model.fileCollectionsModel.stagedFiles),w=s(()=>r.model.repositoryStateModel.isInitialized),C=s(()=>r.model.lastError),R=s(()=>r.model.operationStatusModel.isOperationInProgress),A=s(()=>W(e(re),"$repositoryState",M)?.metadata?.currentBranch),B=s(()=>W(e(_),"$stagedFiles",M)?.length||0),P=s(()=>W(e(ie),"$unstagedFiles",M)?.length||0),N=s(()=>W(e(w),"$isGitInitialized",M)&&!J()),$=s(J),H=s(()=>e(B)>0||e(P)>0),ge=s(()=>z()&&z().length===1);jt(()=>{e(ge)&&e(E)&&y(E,!1)});let i=s(()=>r.repositoryPath?r.repositoryPath.split("/").pop()||r.repositoryPath:void 0),oe=s(()=>z()&&z().length>1&&o()===r.repositoryPath),I=s(()=>z()&&z().length>1);var U=Os();let ve;U.__focusin=[Rs,l,r,o,u],U.__click=function(...D){(e(I)?K:void 0)?.apply(this,D)},U.__keydown=function(...D){(e(I)?q:void 0)?.apply(this,D)};var T=v(U);bt(T,{class:"c-git-repository-section",stickyHeader:!0,get defaultOpen(){return O()},get collapsed(){return e(E)},set collapsed(_e){y(E,_e,!0)},header:_e=>{var S=Bs(),Y=v(S),ne=v(Y),fe=L=>{kt(L,{})},f=L=>{var X=Ss(),$e=v(X);ke($e,{name:"file-diff"}),t(L,X)};x(ne,L=>{e(ge)?L(f,!1):L(fe)});var b=j(ne,2),V=L=>{(function(X,$e){je($e,!1);const he=te(),pe=te(),le=te(),me=te();let Z=p($e,"repositoryName",24,()=>{}),xe=p($e,"currentBranch",24,()=>{}),Ae=p($e,"stagedCount",8,0),Be=p($e,"unstagedCount",8,0),Oe=p($e,"isValid",8,!0),Ne=p($e,"isCollapsed",8,!1);ee(()=>n(Z()),()=>{y(he,Z()?Z().split("/").pop()||Z():void 0)}),ee(()=>n(xe()),()=>{y(pe,xe()||"unknown")}),ee(()=>(n(Ae()),n(Be())),()=>{y(le,Ae()+Be())}),ee(()=>e(le),()=>{y(me,e(le)>0)}),at(),nt();var Ue=cs(),Ee=v(Ue),De=Ge=>{var Je=ls(),Ve=F(Je),Ye=He=>{{let We=k(()=>(n(d),ue(()=>[d.Hover]))),Ze=k(()=>Z()||e(he));de(He,{get triggerOn(){return e(We)},get content(){return`Repository: ${e(Ze)??""}`},children:(mt,tt)=>{ye.Root(mt,{variant:"soft",color:"accent",size:1,children:(st,rt)=>{we(st,{size:1,weight:"medium",children:(it,Me)=>{var et=G();Ce(()=>Fe(et,e(he))),t(it,et)},$$slots:{default:!0}})},$$slots:{default:!0,leftButtons:(st,rt)=>{ye.IconButton(st,{slot:"leftButtons",children:(it,Me)=>{ke(it,{name:"folder"})},$$slots:{default:!0}})}}})},$$slots:{default:!0}})}};x(Ve,He=>{e(he)&&He(Ye)});var Xe=j(Ve,2);{let He=k(()=>(n(d),ue(()=>[d.Hover]))),We=k(()=>xe()||"unknown");de(Xe,{get triggerOn(){return e(He)},get content(){return`Current branch: ${e(We)??""}`},children:(Ze,mt)=>{ye.Root(Ze,{variant:"soft",color:"neutral",size:1,children:(tt,st)=>{we(tt,{size:1,weight:"medium",children:(rt,it)=>{var Me=G();Ce(()=>Fe(Me,e(pe))),t(rt,Me)},$$slots:{default:!0}})},$$slots:{default:!0,leftButtons:(tt,st)=>{ye.IconButton(tt,{slot:"leftButtons",children:(rt,it)=>{ke(rt,{name:"git-branch"})},$$slots:{default:!0}})}}})},$$slots:{default:!0}})}var ht=j(Xe,2),ct=He=>{var We=ns(),Ze=F(We),mt=Me=>{{let et=k(()=>(n(d),ue(()=>[d.Hover]))),dt=k(Be),$t=k(()=>Be()===1?"file":"files");de(Me,{get triggerOn(){return e(et)},get content(){return`${e(dt)??""} unstaged ${e($t)??""} with changes not yet reviewed`},children:(gt,Rt)=>{ye.Root(gt,{variant:"soft",color:"warning",size:1,children:(Ke,pt)=>{var qe=G();Ce(()=>Fe(qe,Be())),t(Ke,qe)},$$slots:{default:!0,leftButtons:(Ke,pt)=>{ye.IconButton(Ke,{slot:"leftButtons",children:(qe,Gt)=>{ke(qe,{name:"search"})},$$slots:{default:!0}})}}})},$$slots:{default:!0}})}};x(Ze,Me=>{Be()>0&&Me(mt)});var tt=j(Ze,2),st=Me=>{{let et=k(()=>(n(d),ue(()=>[d.Hover]))),dt=k(Ae),$t=k(()=>Ae()===1?"file":"files");de(Me,{get triggerOn(){return e(et)},get content(){return`${e(dt)??""} staged ${e($t)??""} reviewed and ready to commit`},children:(gt,Rt)=>{ye.Root(gt,{variant:"soft",color:"success",size:1,children:(Ke,pt)=>{var qe=G();Ce(()=>Fe(qe,Ae())),t(Ke,qe)},$$slots:{default:!0,leftButtons:(Ke,pt)=>{ye.IconButton(Ke,{slot:"leftButtons",children:(qe,Gt)=>{ke(qe,{name:"check"})},$$slots:{default:!0}})}}})},$$slots:{default:!0}})}};x(tt,Me=>{Ae()>0&&Me(st)});var rt=j(tt,2),it=Me=>{{let et=k(()=>(n(d),ue(()=>[d.Hover])));de(Me,{get triggerOn(){return e(et)},content:"Repository is clean with no staged or unstaged changes",children:(dt,$t)=>{ye.Root(dt,{variant:"soft",color:"neutral",size:1,children:(gt,Rt)=>{we(gt,{size:1,color:"neutral",children:(Ke,pt)=>{var qe=G("No changes");t(Ke,qe)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(rt,Me=>{e(me)||Me(it)}),t(He,We)};x(ht,He=>{Ne()&&He(ct)}),t(Ge,Je)},Le=Ge=>{{let Je=k(()=>(n(d),ue(()=>[d.Hover])));de(Ge,{get triggerOn(){return e(Je)},content:"Repository path is invalid or not a git repository",children:(Ve,Ye)=>{ye.Root(Ve,{variant:"soft",color:"error",size:1,children:(Xe,ht)=>{we(Xe,{size:1,color:"error",children:(ct,He)=>{var We=G("Invalid repository");t(ct,We)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}};x(Ee,Ge=>{Oe()?Ge(De):Ge(Le,!1)}),t(X,Ue),Pe()})(L,{get repositoryName(){return e(i)},get currentBranch(){return e(A)},get stagedCount(){return e(B)},get unstagedCount(){return e(P)},get isValid(){return e(N)},get isCollapsed(){return e(E)}})},Ie=L=>{var X=ce(),$e=F(X),he=le=>{var me=xs(),Z=v(me);we(Z,{size:1,color:"error",children:(xe,Ae)=>{var Be=G();Ce(()=>Fe(Be,e($))),t(xe,Be)},$$slots:{default:!0}}),t(le,me)},pe=le=>{var me=Fs(),Z=v(me);we(Z,{size:1,color:"neutral",children:(xe,Ae)=>{var Be=G("Loading repository info...");t(xe,Be)},$$slots:{default:!0}}),t(le,me)};x($e,le=>{e($)?le(he):le(pe,!1)},!0),t(L,X)};x(b,L=>{e(N)?L(V):L(Ie,!1)});var be=j(Y,2),Se=v(be);{let L=s(()=>[d.Hover]);de(Se,{get triggerOn(){return e(L)},content:"Sync git state - refresh repository status, branches, and file changes",children:(X,$e)=>{Qe(X,{variant:"ghost-block",color:"neutral",size:1,get disabled(){return g()},$$events:{click:Q},children:(he,pe)=>{ke(he,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}})}t(_e,S)},children:_e=>{var S=ce(),Y=F(S),ne=f=>{var b=Is(),V=v(b);Cs(V,{}),ks(j(V,2),{}),t(f,b)},fe=f=>{var b=ce(),V=F(b),Ie=be=>{var Se=Ms(),L=v(Se);we(L,{size:1,color:"neutral",children:(X,$e)=>{var he=G("No changes to review");t(X,he)},$$slots:{default:!0}}),t(be,Se)};x(V,be=>{e(N)&&!e(H)&&be(Ie)},!0),t(f,b)};x(Y,f=>{e(N)&&e(H)?f(ne):f(fe,!1)}),t(_e,S)},$$slots:{header:!0,default:!0}}),Ce(D=>{ve=Tt(U,1,"c-git-repository-card svelte-1kzm13i",null,ve,D),xt(U,"role",e(I)?"button":void 0),xt(U,"aria-label",e(I)?`Repository ${e(i)||r.repositoryPath}`:void 0)},[()=>({"c-git-repository-card--can-highlight":z()&&z().length>1,"c-git-repository-card--highlighted":e(oe)})]),t(ze,U),Pe(),m()}Et(["focusin","click","keydown"]);var Hs=h('<div class="c-git-repository-badge svelte-p4qldl"><div class="c-git-repository-badge__chips svelte-p4qldl"><!> <!> <!></div></div>'),Ts=h('<div class="c-git-repository-selector__item-content svelte-zgdx39"><!></div>'),js=h("<!> <!>",1),Ps=h("<!> <!>",1),Ns=h('<div class="c-git-repository-selector svelte-zgdx39"><!></div>');function Us(ze,r){je(r,!0);let o=p(r,"activeRepository",19,()=>{}),g=p(r,"availableRepositories",19,()=>[]),J=p(r,"repositoryStates",19,()=>new Map);function z(E){const K=J().get(E),q=E.split("/").pop()||E;let Q,a;if(K?.repositoryStateModel?.metadata){const l=K.repositoryStateModel.metadata;Q=Ft(l.currentBranch);const u=Ft(l.headOid);a=u?u.substring(0,7):void 0}return{repositoryName:q,currentBranch:Q,shortCommit:a}}let M=s(()=>o()?z(o()):{repositoryName:void 0,currentBranch:void 0,shortCommit:void 0}),m=vt(void 0);var O=Ns(),c=v(O);Te(c,()=>ut.Root,(E,K)=>{zt(K(E,{children:(q,Q)=>{var a=Ps(),l=F(a);Te(l,()=>ut.Trigger,(se,re)=>{re(se,{children:(ie,_)=>{(function(w,C){je(C,!0);let R=p(C,"repositoryName",19,()=>{}),A=p(C,"currentBranch",19,()=>{}),B=p(C,"shortCommit",19,()=>{}),P=s(()=>R()?R().split("/").pop()||R():"No repository"),N=s(()=>A()||"unknown"),$=s(()=>B()||"unknown");var H=Hs(),ge=v(H),i=v(ge);{let T=s(()=>R()||e(P)),D=s(()=>[d.Hover]);de(i,{get content(){return e(T)},get triggerOn(){return e(D)},children:(ae,_e)=>{var S=ce(),Y=F(S);{const ne=fe=>{var f=ce(),b=F(f);Te(b,()=>ye.IconButton,(V,Ie)=>{Ie(V,{children:(be,Se)=>{ke(be,{name:"folder"})},$$slots:{default:!0}})}),t(fe,f)};Te(Y,()=>ye.Root,(fe,f)=>{f(fe,{variant:"soft",color:"accent",size:1,leftButtons:ne,children:(b,V)=>{we(b,{class:"c-git-repository-badge__text",size:1,weight:"medium",children:(Ie,be)=>{var Se=G();Ce(()=>Fe(Se,e(P))),t(Ie,Se)},$$slots:{default:!0}})},$$slots:{leftButtons:!0,default:!0}})})}t(ae,S)},$$slots:{default:!0}})}var oe=j(i,2),I=T=>{var D=ce(),ae=F(D);{const _e=S=>{var Y=ce(),ne=F(Y);Te(ne,()=>ye.IconButton,(fe,f)=>{f(fe,{children:(b,V)=>{ke(b,{name:"git-branch"})},$$slots:{default:!0}})}),t(S,Y)};Te(ae,()=>ye.Root,(S,Y)=>{Y(S,{variant:"soft",color:"neutral",size:1,leftButtons:_e,children:(ne,fe)=>{we(ne,{class:"c-git-repository-badge__text",size:1,weight:"medium",children:(f,b)=>{var V=G();Ce(()=>Fe(V,e(N))),t(f,V)},$$slots:{default:!0}})},$$slots:{leftButtons:!0,default:!0}})})}t(T,D)};x(oe,T=>{A()&&T(I)});var U=j(oe,2),ve=T=>{var D=ce(),ae=F(D);{const _e=S=>{var Y=ce(),ne=F(Y);Te(ne,()=>ye.IconButton,(fe,f)=>{f(fe,{children:(b,V)=>{ke(b,{name:"git-commit-vertical"})},$$slots:{default:!0}})}),t(S,Y)};Te(ae,()=>ye.Root,(S,Y)=>{Y(S,{variant:"soft",color:"neutral",size:1,leftButtons:_e,children:(ne,fe)=>{we(ne,{class:"c-git-repository-badge__text",size:1,family:"mono",children:(f,b)=>{var V=G();Ce(()=>Fe(V,e($))),t(f,V)},$$slots:{default:!0}})},$$slots:{leftButtons:!0,default:!0}})})}t(T,D)};x(U,T=>{B()&&T(ve)}),t(w,H),Pe()})(ie,{get repositoryName(){return e(M).repositoryName},currentBranch:void 0,shortCommit:void 0})},$$slots:{default:!0}})});var u=j(l,2);Te(u,()=>ut.Content,(se,re)=>{re(se,{size:1,side:"top",align:"start",children:(ie,_)=>{var w=js(),C=F(w);Te(C,()=>ut.Label,(A,B)=>{B(A,{children:(P,N)=>{var $=G("Select Repository");t(P,$)},$$slots:{default:!0}})});var R=j(C,2);Ct(R,16,g,A=>A,(A,B)=>{const P=s(()=>z(B)),N=s(()=>B===o());var $=ce(),H=F($);Te(H,()=>ut.Item,(ge,i)=>{i(ge,{onSelect:()=>async function(oe){try{e(m)?.requestClose(),oe!==o()&&await r.onSelectRepository(oe)}catch(I){console.error("Failed to select repository:",I)}}(B),get highlight(){return e(N)},children:(oe,I)=>{var U=Ts(),ve=v(U);Nt(ve,{shrink:!0,$$slots:{text:(T,D)=>{we(T,{slot:"text",size:1,weight:"medium",children:(ae,_e)=>{var S=G();Ce(()=>Fe(S,e(P).repositoryName)),t(ae,S)},$$slots:{default:!0}})},grayText:(T,D)=>{var ae=G();Ce(()=>Fe(ae,`${(e(P).currentBranch||"")??""}${e(P).currentBranch&&e(P).shortCommit?"@":""}${(e(P).shortCommit||"")??""}`)),t(T,ae)}}}),t(oe,U)},$$slots:{default:!0}})}),t(A,$)}),t(ie,w)},$$slots:{default:!0}})}),t(q,a)},$$slots:{default:!0}}),q=>y(m,q,!0),()=>e(m))}),t(ze,O),Pe()}var Ds=h('<div class="c-git-commit-actions svelte-c9i3ym"><!></div>'),Ls=h('<div class="c-git-commit-input__badges svelte-bjnzcp"><!> <!></div>'),Gs=h("<!> <!>",1),qs=h("<div><!></div>"),Es=h("<!> <!> <!>",1),Vs=h('<div class="c-chat-input svelte-bjnzcp"><!></div>');function Ws(ze,r){je(r,!0);const o=()=>W(e(R),"$activeRepoModel",m),g=()=>W(e(D),"$commitMessage",m),J=()=>W(e(A),"$currStatus",m),z=()=>W(e(oe),"$availableRepositories",m),M=()=>W(e(ae),"$isGenerating",m),[m,O]=ft();let c=p(r,"variant",3,"solid"),E=p(r,"stagedFilesCount",3,0),K=p(r,"isCommitting",3,!1),q=p(r,"canCommit",3,!0),Q=p(r,"placeholder",3,"Write or generate a commit message..."),a=_t.getContext(),l=vt(void 0),u=vt(Vt({richTextJsonRepr:{type:"doc",content:[]},rawText:""}));function se(f){y(u,f,!0);const b=f.rawText;if(o()?.commitInputModel&&b!==g()){const V=a?.controller?.getActiveRepositoryController()||ot.getContext()?.controller;V&&V.setCommitInputMessage(b)}}async function re(){if(!e(Y))return;const f=C(e(u));try{await r.onCommit(f);const b=a?.controller?.getActiveRepositoryController()||ot.getContext()?.controller;b&&b.clearCommitInputMessage()}catch(b){console.error("Commit failed:",b)}}let ie=!1;async function _(f){if(e(ve)&&!ie){ie=!0;try{await e(ve).selectRepository(f)}catch(b){console.error("Failed to select repository:",b)}finally{ie=!1}}}async function w(){const f=a?.controller?.getActiveRepositoryController()||ot.getContext()?.controller;f&&await f.generateCommitMessage()}function C(f){return f.rawText||""}let R=s(()=>a?.model?.activeRepositoryModel),A=s(()=>o()?.currStatus),B=s(()=>o()?.fileCollectionsModel.stagedFiles),P=s(()=>o()?.flagsModel.canCommit),N=s(()=>W(e(B),"$stagedFiles",m)?.length??E()),$=s(()=>W(e(P),"$canCommitFromContext",m)??q()),H=s(()=>J()===Bt.committing||K()),ge=s(()=>a?.model),i=s(()=>e(ge)?.activeRepository),oe=s(()=>e(ge)?.availableRepositories),I=s(()=>e(ge)?.repositories),U=s(()=>e(ge)?.activeRepositoryMetadata),ve=s(()=>a?.controller),T=s(()=>o()?.commitInputModel),D=s(()=>e(T)?.message),ae=s(()=>e(T)?.isGenerating),_e=s(()=>e(T)?.placeholderText);jt(()=>{g()!==void 0&&g()!==C(e(u))&&y(u,{richTextJsonRepr:{type:"doc",content:[]},rawText:g()},!0)});let S=s(()=>C(e(u)).trim().length>0),Y=s(()=>e($)&&e(N)>0&&e(S)&&!e(H));var ne=Vs(),fe=v(ne);{const f=b=>{var V=qs(),Ie=v(V);{const be=L=>{var X=ce(),$e=F(X),he=pe=>{var le=Ls(),me=v(le);{let xe=s(()=>W(e(I),"$repositories",m)||new Map);Us(me,{get activeRepository(){return W(e(i),"$activeRepository",m)},get availableRepositories(){return z()},get repositoryStates(){return e(xe)},onSelectRepository:_})}var Z=j(me,2);{let xe=s(()=>W(e(U),"$activeRepositoryMetadata",m)?.currentBranch);(function(Ae,Be){je(Be,!1);const Oe=te();let Ne=p(Be,"currentBranch",24,()=>{});ee(()=>n(Ne()),()=>{y(Oe,Ne()||"unknown")}),at();var Ue=ce(),Ee=F(Ue),De=Le=>{ye.Root(Le,{variant:"soft",color:"neutral",size:1,children:(Ge,Je)=>{we(Ge,{size:1,weight:"medium",children:(Ve,Ye)=>{var Xe=G();Ce(()=>Fe(Xe,e(Oe))),t(Ve,Xe)},$$slots:{default:!0}})},$$slots:{default:!0,leftButtons:(Ge,Je)=>{ye.IconButton(Ge,{slot:"leftButtons",children:(Ve,Ye)=>{ke(Ve,{name:"git-branch"})},$$slots:{default:!0}})}}})};x(Ee,Le=>{Ne()&&Le(De)}),t(Ae,Ue),Pe()})(Z,{get currentBranch(){return e(xe)}})}t(pe,le)};x($e,pe=>{a&&z()&&z().length>0&&pe(he)}),t(L,X)},Se=L=>{var X=Gs(),$e=F(X);de($e,{content:"Generate commit message",children:(pe,le)=>{{let me=s(()=>(M()??!1)||J()!==Bt.idle);Qe(pe,{size:1,variant:"ghost-block",color:"neutral",get disabled(){return e(me)},$$events:{click:w},children:(Z,xe)=>{ke(Z,{name:"sparkles"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var he=j($e,2);{let pe=s(()=>!e(S)),le=s(()=>M()??!1);(function(me,Z){je(Z,!1);const xe=te();let Ae=p(Z,"onCommit",8),Be=p(Z,"variant",8,"solid"),Oe=p(Z,"stagedFilesCount",8,0),Ne=p(Z,"isCommitting",8,!1),Ue=p(Z,"canCommit",8,!0),Ee=p(Z,"disabled",8,!1),De=p(Z,"isGenerating",8,!1),Le=te("");async function Ge(){if(e(xe)&&!Ne())try{await Ae()()}catch(Ye){console.error("Failed to commit:",Ye)}}ee(()=>(n(Ue()),n(Oe()),n(Ee()),n(De())),()=>{y(xe,Ue()&&Oe()>0&&!Ee()&&!De())}),ee(()=>(n(De()),n(Ue()),n(Oe()),n(Ee()),Ot),()=>{De()?y(Le,"Generating commit message..."):Ue()?Oe()===0?y(Le,"No staged files to commit"):Ee()?y(Le,"Enter a commit message"):y(Le,`Commit ${Oe()} staged ${Ot(Oe(),"file")}`):y(Le,"Cannot commit at this time")}),at(),nt();var Je=Ds(),Ve=v(Je);de(Ve,{get content(){return e(Le)},children:(Ye,Xe)=>{{let ht=k(()=>!e(xe)||Ne()||De()),ct=k(()=>Ne()||De());Pt(Ye,{get variant(){return Be()},size:1,get disabled(){return e(ht)},get loading(){return e(ct)},class:"c-git-commit-actions__commit-button",$$events:{click:Ge},children:(He,We)=>{var Ze=G("Commit");t(He,Ze)},$$slots:{default:!0,iconLeft:(He,We)=>{ke(He,{slot:"iconLeft",name:"git-commit-horizontal"})}}})}},$$slots:{default:!0}}),t(me,Je),Pe()})(he,{onCommit:re,get variant(){return c()},get stagedFilesCount(){return e(N)},get isCommitting(){return e(H)},get canCommit(){return e($)},get disabled(){return e(pe)},get isGenerating(){return e(le)}})}t(L,X)};Te(Ie,()=>Kt.Root,(L,X)=>{X(L,{leftAlign:be,rightAlign:Se,$$slots:{leftAlign:!0,rightAlign:!0}})})}t(b,V)};Te(fe,()=>Ht.Root,(b,V)=>{zt(V(b,{editable:!0,footer:f,children:(Ie,be)=>{var Se=Es(),L=F(Se);{let he=s(()=>g()||"");Te(L,()=>Ht.Content,(pe,le)=>{le(pe,{get content(){return e(he)},onContentChanged:se})})}var X=j(L,2);{let he=s(()=>W(e(_e),"$dynamicPlaceholder",m)||Q());os(X,{get placeholder(){return e(he)}})}var $e=j(X,2);{let he=s(()=>({"Mod-Enter":()=>!!e(Y)&&(re(),!0)}));as($e,{get shortcuts(){return e(he)}})}t(Ie,Se)},$$slots:{footer:!0,default:!0}}),Ie=>y(l,Ie,!0),()=>e(l))})}t(ze,ne),Pe(),O()}var Js=h('<div class="c-git-agent-edit-tab c-git-agent-edit-tab--disabled svelte-105jwct"><!></div>'),Ks=h('<div class="c-git-agent-edit-tab c-git-agent-edit-tab--loading svelte-105jwct"><!></div>'),Qs=h('<div class="c-git-agent-edit-tab c-git-agent-edit-tab--error svelte-105jwct"><!></div>'),Ys=h('<div class="l-input-area-design-system svelte-105jwct"><!></div>'),Xs=h('<!> <!> <div class="c-git-agent-edit-tab svelte-105jwct"><div class="c-git-repository-container svelte-105jwct"></div></div>',1),Zs=h('<div class="c-git-agent-edit-tab c-git-agent-edit-tab--unavailable svelte-105jwct"><!></div>'),er=h('<div class="c-git-agent-edit-tab c-git-agent-edit-tab--unavailable svelte-105jwct"><!></div>');function Er(ze,r){je(r,!0);const o=()=>W(e(a),"$availableRepositories",m),g=()=>W(_,"$isGitEnabled",m),J=()=>W(K,"$isAgentic",m),z=()=>W(e(se),"$isGitInitialized",m),M=()=>W(e(re),"$lastError",m),[m,O]=ft(),c=_t.requireContext(),E=ss(),K=rs(E);let q=s(()=>c.model),Q=s(()=>c.controller),a=s(()=>e(q)?.availableRepositories),l=s(()=>o()?.[0]),u=s(()=>e(l)?e(q)?.getRepositoryStateModel(e(l)):void 0),se=s(()=>e(u)?.isInitialized||{subscribe:()=>()=>{}}),re=s(()=>e(q)?.lastError),ie=s(()=>e(q)?.repositories),_=is("enableAgentGitTracker"),w=s(()=>g()&&J()&&z());function C($){const H=c.controller.getActiveRepositoryController();H&&H.commit($)}Wt(async()=>{if(g()&&J())try{await e(Q).listRepositories()}catch($){console.error("Failed to list repositories:",$)}});let R=vt(void 0);var A=ce(),B=F(A),P=$=>{var H=Js(),ge=v(H);we(ge,{size:1,color:"neutral",children:(i,oe)=>{var I=G("Git tracking is disabled");t(i,I)},$$slots:{default:!0}}),t($,H)},N=$=>{var H=ce(),ge=F(H),i=I=>{var U=ce(),ve=F(U),T=ae=>{var _e=Ks(),S=v(_e);we(S,{size:1,color:"neutral",children:(Y,ne)=>{var fe=G("Initializing git interface...");t(Y,fe)},$$slots:{default:!0}}),t(ae,_e)},D=ae=>{var _e=ce(),S=F(_e),Y=fe=>{var f=Qs(),b=v(f);we(b,{size:1,color:"error",children:(V,Ie)=>{var be=G();Ce(()=>Fe(be,`Error: ${M()??""}`)),t(V,be)},$$slots:{default:!0}}),t(fe,f)},ne=fe=>{var f=ce(),b=F(f),V=be=>{var Se=Xs(),L=F(Se);It(L,{get target(){return`#${Mt.divider}`},children:(pe,le)=>{Qt(pe,{get inputArea(){return e(R)},set inputArea(me){y(R,me,!0)}})},$$slots:{default:!0}});var X=j(L,2);It(X,{get target(){return`#${Mt.input}`},children:(pe,le)=>{var me=Ys();Ws(v(me),{onCommit:C,variant:"solid",stagedFilesCount:0,isCommitting:!1,canCommit:!0,placeholder:"Enter commit message..."}),zt(me,Z=>y(R,Z),()=>e(R)),t(pe,me)},$$slots:{default:!0}});var $e=j(X,2),he=v($e);Ct(he,5,o,pe=>pe,(pe,le)=>{const me=s(()=>W(e(ie),"$repoStates",m)?.get(e(le))),Z=s(()=>e(Q)?.getRepositoryController(e(le)));var xe=ce(),Ae=F(xe),Be=Oe=>{var Ne=ce(),Ue=F(Ne);Jt(Ue,()=>e(le),Ee=>{{let De=s(()=>e(le)===o()[0]);As(Ee,{get model(){return e(me)},get controller(){return e(Z)},get repositoryPath(){return e(le)},get defaultOpen(){return e(De)}})}}),t(Oe,Ne)};x(Ae,Oe=>{e(me)&&e(Z)&&Oe(Be)}),t(pe,xe)}),t(be,Se)},Ie=be=>{var Se=Zs(),L=v(Se);we(L,{size:1,color:"neutral",children:(X,$e)=>{var he=G("Git interface not available");t(X,he)},$$slots:{default:!0}}),t(be,Se)};x(b,be=>{e(w)&&o()&&o().length>0?be(V):be(Ie,!1)},!0),t(fe,f)};x(S,fe=>{M()?fe(Y):fe(ne,!1)},!0),t(ae,_e)};x(ve,ae=>{z()?ae(D,!1):ae(T)}),t(I,U)},oe=I=>{var U=er(),ve=v(U);we(ve,{size:1,color:"neutral",children:(T,D)=>{var ae=G("Git interface only available in agent conversations");t(T,ae)},$$slots:{default:!0}}),t(I,U)};x(ge,I=>{J()?I(i):I(oe,!1)},!0),t($,H)};x(B,$=>{g()?$(N,!1):$(P)}),t(ze,A),Pe(),O()}export{Er as default};
//# sourceMappingURL=GitAgentEditTabContent-BjyHRKcf.js.map
