import{G as R}from"./graph-DeVs9-iS.js";import{b as zn,o as kn,p as En,e as en,j as Q,n as An,q as Jn,c as Qn,s as Hn,d as h,i as _,f as F,v as L,r as A}from"./_baseUniq-Tva45woW.js";import{f as S,b as Nn,a as Kn,c as Un,d as Wn,t as H,m as k,e as V,h as On,g as tn,l as D,i as Xn}from"./_basePickBy-CQZwVAZ9.js";import{b7 as Zn,b8 as $n,b9 as nr,aN as rr,ba as er,aR as In,aQ as _n,bb as tr,aM as $,ar as or,aT as ir,at as ar,bc as nn}from"./mermaid-Bezvo2Lx.js";import{aY as fn}from"./Icon-CaBYD5oO.js";try{j=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(sn=new j.Error().stack)&&(j._sentryDebugIds=j._sentryDebugIds||{},j._sentryDebugIds[sn]="0afecd20-22b8-4016-a3ca-e807bb096c36",j._sentryDebugIdIdentifier="sentry-dbid-0afecd20-22b8-4016-a3ca-e807bb096c36")}catch{}var j,sn,ur=1,dr=4;function cr(n,e){return n>e}function Y(n,e){var t={};return e=en(e),En(n,function(c,o,u){er(t,o,e(c,o,u))}),t}function M(n){return n&&n.length?Nn(n,In,cr):void 0}function on(n,e){return n&&n.length?Nn(n,en(e),Kn):void 0}function sr(n,e){if(n!==e){var t=n!==void 0,c=n===null,o=n==n,u=fn(n),r=e!==void 0,a=e===null,i=e==e,d=fn(e);if(!a&&!d&&!u&&n>e||u&&r&&i&&!a&&!d||c&&r&&i||!t&&i||!o)return 1;if(!c&&!u&&!d&&n<e||d&&t&&o&&!c&&!u||a&&t&&o||!r&&o||!i)return-1}return 0}function fr(n,e,t){e=e.length?Q(e,function(o){return _n(o)?function(u){return An(u,o.length===1?o[0]:o)}:o}):[In];var c=-1;return e=Q(e,tr(en)),function(o,u){var r=o.length;for(o.sort(u);r--;)o[r]=o[r].value;return o}(Un(n,function(o,u,r){return{criteria:Q(e,function(a){return a(o)}),index:++c,value:o}}),function(o,u){return function(r,a,i){for(var d=-1,f=r.criteria,s=a.criteria,g=f.length,v=i.length;++d<g;){var l=sr(f[d],s[d]);if(l)return d>=v?l:l*(i[d]=="desc"?-1:1)}return r.index-a.index}(o,u,t)})}var hn,z=Zn($n(hn=function(n,e){return n==null?{}:function(t,c){return Wn(t,c,function(o,u){return Jn(t,u)})}(n,e)},void 0,S),hn+""),hr=Math.ceil,gr=Math.max,C=function(n,e,t){return t&&typeof t!="number"&&$(n,e,t)&&(e=t=void 0),n=H(n),e===void 0?(e=n,n=0):e=H(e),function(c,o,u,r){for(var a=-1,i=gr(hr((o-c)/(u||1)),0),d=Array(i);i--;)d[++a]=c,c+=u;return d}(n,e,t=t===void 0?n<e?1:-1:H(t))},q=or(function(n,e){if(n==null)return[];var t=e.length;return t>1&&$(n,e[0],e[1])?e=[]:t>2&&$(e[0],e[1],e[2])&&(e=[e[0]]),fr(n,Qn(e),[])}),vr=0;function an(n){var e=++vr;return Hn(n)+e}class lr{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,t=e._prev;if(t!==e)return gn(t),t}enqueue(e){var t=this._sentinel;e._prev&&e._next&&gn(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var e=[],t=this._sentinel,c=t._prev;c!==t;)e.push(JSON.stringify(c,pr)),c=c._prev;return"["+e.join(", ")+"]"}}function gn(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function pr(n,e){if(n!=="_next"&&n!=="_prev")return e}var wr=ar(1);function br(n,e){if(n.nodeCount()<=1)return[];var t=function(o,u){var r=new R,a=0,i=0;h(o.nodes(),function(s){r.setNode(s,{v:s,in:0,out:0})}),h(o.edges(),function(s){var g=r.edge(s.v,s.w)||0,v=u(s),l=g+v;r.setEdge(s.v,s.w,l),i=Math.max(i,r.node(s.v).out+=v),a=Math.max(a,r.node(s.w).in+=v)});var d=C(i+a+3).map(function(){return new lr}),f=a+1;return h(r.nodes(),function(s){rn(d,f,r.node(s))}),{graph:r,buckets:d,zeroIdx:f}}(n,e||wr),c=function(o,u,r){for(var a,i=[],d=u[u.length-1],f=u[0];o.nodeCount();){for(;a=f.dequeue();)K(o,u,r,a);for(;a=d.dequeue();)K(o,u,r,a);if(o.nodeCount()){for(var s=u.length-2;s>0;--s)if(a=u[s].dequeue()){i=i.concat(K(o,u,r,a,!0));break}}}return i}(t.graph,t.buckets,t.zeroIdx);return S(k(c,function(o){return n.outEdges(o.v,o.w)}))}function K(n,e,t,c,o){var u=o?[]:void 0;return h(n.inEdges(c.v),function(r){var a=n.edge(r),i=n.node(r.v);o&&u.push({v:r.v,w:r.w}),i.out-=a,rn(e,t,i)}),h(n.outEdges(c.v),function(r){var a=n.edge(r),i=r.w,d=n.node(i);d.in-=a,rn(e,t,d)}),n.removeNode(c.v),u}function rn(n,e,t){t.out?t.in?n[t.out-t.in+e].enqueue(t):n[n.length-1].enqueue(t):n[0].enqueue(t)}function mr(n){var e=n.graph().acyclicer==="greedy"?br(n,function(t){return function(c){return t.edge(c).weight}}(n)):function(t){var c=[],o={},u={};function r(a){Object.prototype.hasOwnProperty.call(u,a)||(u[a]=!0,o[a]=!0,h(t.outEdges(a),function(i){Object.prototype.hasOwnProperty.call(o,i.w)?c.push(i):r(i.w)}),delete o[a])}return h(t.nodes(),r),c}(n);h(e,function(t){var c=n.edge(t);n.removeEdge(t),c.forwardName=t.name,c.reversed=!0,n.setEdge(t.w,t.v,c,an("rev"))})}function G(n,e,t,c){var o;do o=an(c);while(n.hasNode(o));return t.dummy=e,n.setNode(o,t),o}function Pn(n){var e=new R({multigraph:n.isMultigraph()}).setGraph(n.graph());return h(n.nodes(),function(t){n.children(t).length||e.setNode(t,n.node(t))}),h(n.edges(),function(t){e.setEdge(t,n.edge(t))}),e}function vn(n,e){var t,c,o=n.x,u=n.y,r=e.x-o,a=e.y-u,i=n.width/2,d=n.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*i>Math.abs(r)*d?(a<0&&(d=-d),t=d*r/a,c=d):(r<0&&(i=-i),t=i,c=i*a/r),{x:o+t,y:u+c}}function J(n){var e=k(C(Rn(n)+1),function(){return[]});return h(n.nodes(),function(t){var c=n.node(t),o=c.rank;_(o)||(e[o][c.order]=t)}),e}function ln(n,e,t,c){var o={width:0,height:0};return arguments.length>=4&&(o.rank=t,o.order=c),G(n,"border",o,e)}function Rn(n){return M(k(n.nodes(),function(e){var t=n.node(e).rank;if(!_(t))return t}))}function yr(n,e){return e()}function pn(n,e,t,c,o,u){var r={width:0,height:0,rank:u,borderType:e},a=o[e][u-1],i=G(n,"border",r,t);o[e][u]=i,n.setParent(i,c),a&&n.setEdge(a,i,{weight:1})}function xr(n){var e=n.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(t){h(t.nodes(),function(c){U(t.node(c))}),h(t.edges(),function(c){var o=t.edge(c);h(o.points,U),Object.prototype.hasOwnProperty.call(o,"y")&&U(o)})}(n),e!=="lr"&&e!=="rl"||(function(t){h(t.nodes(),function(c){W(t.node(c))}),h(t.edges(),function(c){var o=t.edge(c);h(o.points,W),Object.prototype.hasOwnProperty.call(o,"x")&&W(o)})}(n),Tn(n))}function Tn(n){h(n.nodes(),function(e){wn(n.node(e))}),h(n.edges(),function(e){wn(n.edge(e))})}function wn(n){var e=n.width;n.width=n.height,n.height=e}function U(n){n.y=-n.y}function W(n){var e=n.x;n.x=n.y,n.y=e}function kr(n){n.graph().dummyChains=[],h(n.edges(),function(e){(function(t,c){var o=c.v,u=t.node(o).rank,r=c.w,a=t.node(r).rank,i=c.name,d=t.edge(c),f=d.labelRank;if(a!==u+1){t.removeEdge(c);var s,g,v=void 0;for(g=0,++u;u<a;++g,++u)d.points=[],s=G(t,"edge",v={width:0,height:0,edgeLabel:d,edgeObj:c,rank:u},"_d"),u===f&&(v.width=d.width,v.height=d.height,v.dummy="edge-label",v.labelpos=d.labelpos),t.setEdge(o,s,{weight:d.weight},i),g===0&&t.graph().dummyChains.push(s),o=s;t.setEdge(o,r,{weight:d.weight},i)}})(n,e)})}function un(n){var e={};h(n.sources(),function t(c){var o=n.node(c);if(Object.prototype.hasOwnProperty.call(e,c))return o.rank;e[c]=!0;var u=V(k(n.outEdges(c),function(r){return t(r.w)-n.edge(r).minlen}));return u!==Number.POSITIVE_INFINITY&&u!=null||(u=0),o.rank=u})}function B(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}function Mn(n){var e,t,c=new R({directed:!1}),o=n.nodes()[0],u=n.nodeCount();for(c.setNode(o,{});Er(c,n)<u;)e=Nr(c,n),t=c.hasNode(e.v)?B(n,e):-B(n,e),Or(c,n,t);return c}function Er(n,e){return h(n.nodes(),function t(c){h(e.nodeEdges(c),function(o){var u=o.v,r=c===u?o.w:u;n.hasNode(r)||B(e,o)||(n.setNode(r,{}),n.setEdge(c,r,{}),t(r))})}),n.nodeCount()}function Nr(n,e){return on(e.edges(),function(t){if(n.hasNode(t.v)!==n.hasNode(t.w))return B(e,t)})}function Or(n,e,t){h(n.nodes(),function(c){e.node(c).rank+=t})}function jn(n,e,t){_n(e)||(e=[e]);var c=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],u={};return h(e,function(r){if(!n.hasNode(r))throw new Error("Graph does not have node: "+r);Ln(n,r,t==="post",u,c,o)}),o}function Ln(n,e,t,c,o,u){Object.prototype.hasOwnProperty.call(c,e)||(c[e]=!0,t||u.push(e),h(o(e),function(r){Ln(n,r,t,c,o,u)}),t&&u.push(e))}function T(n){n=function(c){var o=new R().setGraph(c.graph());return h(c.nodes(),function(u){o.setNode(u,c.node(u))}),h(c.edges(),function(u){var r=o.edge(u.v,u.w)||{weight:0,minlen:1},a=c.edge(u);o.setEdge(u.v,u.w,{weight:r.weight+a.weight,minlen:Math.max(r.minlen,a.minlen)})}),o}(n),un(n);var e,t=Mn(n);for(cn(t),dn(t,n);e=Gn(t);)Vn(t,n,e,Fn(t,n,e))}function dn(n,e){var t=function(c,o){return jn(c,o,"post")}(n,n.nodes());t=t.slice(0,t.length-1),h(t,function(c){(function(o,u,r){var a=o.node(r),i=a.parent;o.edge(r,i).cutvalue=Cn(o,u,r)})(n,e,c)})}function Cn(n,e,t){var c=n.node(t).parent,o=!0,u=e.edge(t,c),r=0;return u||(o=!1,u=e.edge(c,t)),r=u.weight,h(e.nodeEdges(t),function(a){var i,d,f=a.v===t,s=f?a.w:a.v;if(s!==c){var g=f===o,v=e.edge(a).weight;if(r+=g?v:-v,i=t,d=s,n.hasEdge(i,d)){var l=n.edge(t,s).cutvalue;r+=g?-l:l}}}),r}function cn(n,e){arguments.length<2&&(e=n.nodes()[0]),Sn(n,{},1,e)}function Sn(n,e,t,c,o){var u=t,r=n.node(c);return e[c]=!0,h(n.neighbors(c),function(a){Object.prototype.hasOwnProperty.call(e,a)||(t=Sn(n,e,t,a,c))}),r.low=u,r.lim=t++,o?r.parent=o:delete r.parent,t}function Gn(n){return tn(n.edges(),function(e){return n.edge(e).cutvalue<0})}function Fn(n,e,t){var c=t.v,o=t.w;e.hasEdge(c,o)||(c=t.w,o=t.v);var u=n.node(c),r=n.node(o),a=u,i=!1;u.lim>r.lim&&(a=r,i=!0);var d=F(e.edges(),function(f){return i===bn(n,n.node(f.v),a)&&i!==bn(n,n.node(f.w),a)});return on(d,function(f){return B(e,f)})}function Vn(n,e,t,c){var o=t.v,u=t.w;n.removeEdge(o,u),n.setEdge(c.v,c.w,{}),cn(n),dn(n,e),function(r,a){var i=tn(r.nodes(),function(f){return!a.node(f).parent}),d=function(f,s){return jn(f,s,"pre")}(r,i);d=d.slice(1),h(d,function(f){var s=r.node(f).parent,g=a.edge(f,s),v=!1;g||(g=a.edge(s,f),v=!0),a.node(f).rank=a.node(s).rank+(v?g.minlen:-g.minlen)})}(n,e)}function bn(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}function Ir(n){switch(n.graph().ranker){case"network-simplex":default:Pr(n);break;case"tight-tree":(function(e){un(e),Mn(e)})(n);break;case"longest-path":_r(n)}}new Error,T.initLowLimValues=cn,T.initCutValues=dn,T.calcCutValue=Cn,T.leaveEdge=Gn,T.enterEdge=Fn,T.exchangeEdges=Vn;var _r=un;function Pr(n){T(n)}function Rr(n){var e=G(n,"root",{},"_root"),t=function(r){var a={};function i(d,f){var s=r.children(d);s&&s.length&&h(s,function(g){i(g,f+1)}),a[d]=f}return h(r.children(),function(d){i(d,1)}),a}(n),c=M(L(t))-1,o=2*c+1;n.graph().nestingRoot=e,h(n.edges(),function(r){n.edge(r).minlen*=o});var u=function(r){return A(r.edges(),function(a,i){return a+r.edge(i).weight},0)}(n)+1;h(n.children(),function(r){qn(n,e,o,u,c,t,r)}),n.graph().nodeRankFactor=o}function qn(n,e,t,c,o,u,r){var a=n.children(r);if(a.length){var i=ln(n,"_bt"),d=ln(n,"_bb"),f=n.node(r);n.setParent(i,r),f.borderTop=i,n.setParent(d,r),f.borderBottom=d,h(a,function(s){qn(n,e,t,c,o,u,s);var g=n.node(s),v=g.borderTop?g.borderTop:s,l=g.borderBottom?g.borderBottom:s,w=g.borderTop?c:2*c,p=v!==l?1:o-u[r]+1;n.setEdge(i,v,{weight:w,minlen:p,nestingEdge:!0}),n.setEdge(l,d,{weight:w,minlen:p,nestingEdge:!0})}),n.parent(r)||n.setEdge(e,i,{weight:0,minlen:o+u[r]})}else r!==e&&n.setEdge(e,r,{weight:0,minlen:t})}function Tr(n,e,t){var c=function(u){for(var r;u.hasNode(r=an("_root")););return r}(n),o=new R({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(u){return n.node(u)});return h(n.nodes(),function(u){var r=n.node(u),a=n.parent(u);(r.rank===e||r.minRank<=e&&e<=r.maxRank)&&(o.setNode(u),o.setParent(u,a||c),h(n[t](u),function(i){var d=i.v===u?i.w:i.v,f=o.edge(d,u),s=_(f)?0:f.weight;o.setEdge(d,u,{weight:n.edge(i).weight+s})}),Object.prototype.hasOwnProperty.call(r,"minRank")&&o.setNode(u,{borderLeft:r.borderLeft[e],borderRight:r.borderRight[e]}))}),o}function Mr(n,e){for(var t=0,c=1;c<e.length;++c)t+=jr(n,e[c-1],e[c]);return t}function jr(n,e,t){for(var c=function(d,f){return function(s,g,v){for(var l=-1,w=s.length,p=g.length,b={};++l<w;){var m=l<p?g[l]:void 0;v(b,s[l],m)}return b}(d||[],f||[],ir)}(t,k(t,function(d,f){return f})),o=S(k(e,function(d){return q(k(n.outEdges(d),function(f){return{pos:c[f.w],weight:n.edge(f).weight}}),"pos")})),u=1;u<t.length;)u<<=1;var r=2*u-1;u-=1;var a=k(new Array(r),function(){return 0}),i=0;return h(o.forEach(function(d){var f=d.pos+u;a[f]+=d.weight;for(var s=0;f>0;)f%2&&(s+=a[f+1]),a[f=f-1>>1]+=d.weight;i+=d.weight*s})),i}function Lr(n,e){var t={};return h(n,function(c,o){var u=t[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:o};_(c.barycenter)||(u.barycenter=c.barycenter,u.weight=c.weight)}),h(e.edges(),function(c){var o=t[c.v],u=t[c.w];_(o)||_(u)||(u.indegree++,o.out.push(t[c.w]))}),function(c){var o=[];function u(i){return function(d){d.merged||(_(d.barycenter)||_(i.barycenter)||d.barycenter>=i.barycenter)&&function(f,s){var g=0,v=0;f.weight&&(g+=f.barycenter*f.weight,v+=f.weight),s.weight&&(g+=s.barycenter*s.weight,v+=s.weight),f.vs=s.vs.concat(f.vs),f.barycenter=g/v,f.weight=v,f.i=Math.min(s.i,f.i),s.merged=!0}(i,d)}}function r(i){return function(d){d.in.push(i),--d.indegree==0&&c.push(d)}}for(;c.length;){var a=c.pop();o.push(a),h(a.in.reverse(),u(a)),h(a.out,r(a))}return k(F(o,function(i){return!i.merged}),function(i){return z(i,["vs","i","barycenter","weight"])})}(F(t,function(c){return!c.indegree}))}function Cr(n,e){var t,c=function(s,g){var v={lhs:[],rhs:[]};return h(s,function(l){g(l)?v.lhs.push(l):v.rhs.push(l)}),v}(n,function(s){return Object.prototype.hasOwnProperty.call(s,"barycenter")}),o=c.lhs,u=q(c.rhs,function(s){return-s.i}),r=[],a=0,i=0,d=0;o.sort((t=!!e,function(s,g){return s.barycenter<g.barycenter?-1:s.barycenter>g.barycenter?1:t?g.i-s.i:s.i-g.i})),d=mn(r,u,d),h(o,function(s){d+=s.vs.length,r.push(s.vs),a+=s.barycenter*s.weight,i+=s.weight,d=mn(r,u,d)});var f={vs:S(r)};return i&&(f.barycenter=a/i,f.weight=i),f}function mn(n,e,t){for(var c;e.length&&(c=D(e)).i<=t;)e.pop(),n.push(c.vs),t++;return t}function Bn(n,e,t,c){var o=n.children(e),u=n.node(e),r=u?u.borderLeft:void 0,a=u?u.borderRight:void 0,i={};r&&(o=F(o,function(l){return l!==r&&l!==a}));var d=function(l,w){return k(w,function(p){var b=l.inEdges(p);if(b.length){var m=A(b,function(y,x){var O=l.edge(x),E=l.node(x.v);return{sum:y.sum+O.weight*E.order,weight:y.weight+O.weight}},{sum:0,weight:0});return{v:p,barycenter:m.sum/m.weight,weight:m.weight}}return{v:p}})}(n,o);h(d,function(l){if(n.children(l.v).length){var w=Bn(n,l.v,t,c);i[l.v]=w,Object.prototype.hasOwnProperty.call(w,"barycenter")&&(b=w,_((p=l).barycenter)?(p.barycenter=b.barycenter,p.weight=b.weight):(p.barycenter=(p.barycenter*p.weight+b.barycenter*b.weight)/(p.weight+b.weight),p.weight+=b.weight))}var p,b});var f=Lr(d,t);(function(l,w){h(l,function(p){p.vs=S(p.vs.map(function(b){return w[b]?w[b].vs:b}))})})(f,i);var s=Cr(f,c);if(r&&(s.vs=S([r,s.vs,a]),n.predecessors(r).length)){var g=n.node(n.predecessors(r)[0]),v=n.node(n.predecessors(a)[0]);Object.prototype.hasOwnProperty.call(s,"barycenter")||(s.barycenter=0,s.weight=0),s.barycenter=(s.barycenter*s.weight+g.order+v.order)/(s.weight+2),s.weight+=2}return s}function Sr(n){var e=Rn(n),t=yn(n,C(1,e+1),"inEdges"),c=yn(n,C(e-1,-1,-1),"outEdges"),o=function(f){var s={},g=F(f.nodes(),function(p){return!f.children(p).length}),v=M(k(g,function(p){return f.node(p).rank})),l=k(C(v+1),function(){return[]}),w=q(g,function(p){return f.node(p).rank});return h(w,function p(b){if(!On(s,b)){s[b]=!0;var m=f.node(b);l[m.rank].push(b),h(f.successors(b),p)}}),l}(n);xn(n,o);for(var u,r=Number.POSITIVE_INFINITY,a=0,i=0;i<4;++a,++i){Gr(a%2?t:c,a%4>=2);var d=Mr(n,o=J(n));d<r&&(i=0,u=zn(o,ur|dr),r=d)}xn(n,u)}function yn(n,e,t){return k(e,function(c){return Tr(n,c,t)})}function Gr(n,e){var t=new R;h(n,function(c){var o=c.graph().root,u=Bn(c,o,t,e);h(u.vs,function(r,a){c.node(r).order=a}),function(r,a,i){var d,f={};h(i,function(s){for(var g,v,l=r.parent(s);l;){if((g=r.parent(l))?(v=f[g],f[g]=l):(v=d,d=l),v&&v!==l)return void a.setEdge(v,l);l=g}})}(c,t,u.vs)})}function xn(n,e){h(e,function(t){h(t,function(c,o){n.node(c).order=o})})}function Fr(n){var e=function(t){var c={},o=0;function u(r){var a=o;h(t.children(r),u),c[r]={low:a,lim:o++}}return h(t.children(),u),c}(n);h(n.graph().dummyChains,function(t){for(var c=n.node(t),o=c.edgeObj,u=function(s,g,v,l){var w,p,b=[],m=[],y=Math.min(g[v].low,g[l].low),x=Math.max(g[v].lim,g[l].lim);w=v;do w=s.parent(w),b.push(w);while(w&&(g[w].low>y||x>g[w].lim));for(p=w,w=l;(w=s.parent(w))!==p;)m.push(w);return{path:b.concat(m.reverse()),lca:p}}(n,e,o.v,o.w),r=u.path,a=u.lca,i=0,d=r[i],f=!0;t!==o.w;){if(c=n.node(t),f){for(;(d=r[i])!==a&&n.node(d).maxRank<c.rank;)i++;d===a&&(f=!1)}if(!f){for(;i<r.length-1&&n.node(d=r[i+1]).minRank<=c.rank;)i++;d=r[i]}n.setParent(t,d),t=n.successors(t)[0]}})}function Vr(n,e){var t={};return A(e,function(c,o){var u=0,r=0,a=c.length,i=D(o);return h(o,function(d,f){var s=function(v,l){if(v.node(l).dummy)return tn(v.predecessors(l),function(w){return v.node(w).dummy})}(n,d),g=s?n.node(s).order:a;(s||d===i)&&(h(o.slice(r,f+1),function(v){h(n.predecessors(v),function(l){var w=n.node(l),p=w.order;!(p<u||g<p)||w.dummy&&n.node(v).dummy||Yn(t,l,v)})}),r=f+1,u=g)}),o}),t}function Yn(n,e,t){if(e>t){var c=e;e=t,t=c}var o=n[e];o||(n[e]=o={}),o[t]=!0}function qr(n,e,t){if(e>t){var c=e;e=t,t=c}return!!n[e]&&Object.prototype.hasOwnProperty.call(n[e],t)}function Br(n,e,t,c,o){var u={},r=function(d,f,s,g){var v=new R,l=d.graph(),w=function(p,b,m){return function(y,x,O){var E,I=y.node(x),P=y.node(O),N=0;if(N+=I.width/2,Object.prototype.hasOwnProperty.call(I,"labelpos"))switch(I.labelpos.toLowerCase()){case"l":E=-I.width/2;break;case"r":E=I.width/2}if(E&&(N+=m?E:-E),E=0,N+=(I.dummy?b:p)/2,N+=(P.dummy?b:p)/2,N+=P.width/2,Object.prototype.hasOwnProperty.call(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":E=P.width/2;break;case"r":E=-P.width/2}return E&&(N+=m?E:-E),E=0,N}}(l.nodesep,l.edgesep,g);return h(f,function(p){var b;h(p,function(m){var y=s[m];if(v.setNode(y),b){var x=s[b],O=v.edge(x,y);v.setEdge(x,y,Math.max(w(d,m,b),O||0))}b=m})}),v}(n,e,t,o),a=o?"borderLeft":"borderRight";function i(d,f){for(var s=r.nodes(),g=s.pop(),v={};g;)v[g]?d(g):(v[g]=!0,s.push(g),s=s.concat(f(g))),g=s.pop()}return i(function(d){u[d]=r.inEdges(d).reduce(function(f,s){return Math.max(f,u[s.v]+r.edge(s))},0)},r.predecessors.bind(r)),i(function(d){var f=r.outEdges(d).reduce(function(g,v){return Math.min(g,u[v.w]-r.edge(v))},Number.POSITIVE_INFINITY),s=n.node(d);f!==Number.POSITIVE_INFINITY&&s.borderType!==a&&(u[d]=Math.max(u[d],f))},r.successors.bind(r)),h(c,function(d){u[d]=u[t[d]]}),u}function Yr(n,e){return on(L(e),function(t){var c,o,u=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return o=function(a,i){var d=function(f,s){return f.node(s).width}(n,i)/2;u=Math.max(a+d,u),r=Math.min(a-d,r)},(c=t)==null||nr(c,kn(o),rr),u-r})}function Dr(n){var e,t=J(n),c=nn(Vr(n,t),function(r,a){var i={};function d(f,s,g,v,l){var w;h(C(s,g),function(p){w=f[p],r.node(w).dummy&&h(r.predecessors(w),function(b){var m=r.node(b);m.dummy&&(m.order<v||m.order>l)&&Yn(i,b,w)})})}return A(a,function(f,s){var g,v=-1,l=0;return h(s,function(w,p){if(r.node(w).dummy==="border"){var b=r.predecessors(w);b.length&&(g=r.node(b[0]).order,d(s,l,p,v,g),l=p,v=g)}d(s,l,s.length,g,f.length)}),s}),i}(n,t)),o={};h(["u","d"],function(r){e=r==="u"?t:L(t).reverse(),h(["l","r"],function(a){a==="r"&&(e=k(e,function(s){return L(s).reverse()}));var i=(r==="u"?n.predecessors:n.successors).bind(n),d=function(s,g,v,l){var w={},p={},b={};return h(g,function(m){h(m,function(y,x){w[y]=y,p[y]=y,b[y]=x})}),h(g,function(m){var y=-1;h(m,function(x){var O=l(x);if(O.length){O=q(O,function(Dn){return b[Dn]});for(var E=(O.length-1)/2,I=Math.floor(E),P=Math.ceil(E);I<=P;++I){var N=O[I];p[x]===x&&y<b[N]&&!qr(v,x,N)&&(p[N]=x,p[x]=w[x]=w[N],y=b[N])}}})}),{root:w,align:p}}(0,e,c,i),f=Br(n,e,d.root,d.align,a==="r");a==="r"&&(f=Y(f,function(s){return-s})),o[r+a]=f})});var u=Yr(n,o);return function(r,a){var i=L(a),d=V(i),f=M(i);h(["u","d"],function(s){h(["l","r"],function(g){var v,l=s+g,w=r[l];if(w!==a){var p=L(w);(v=g==="l"?d-V(p):f-M(p))&&(r[l]=Y(w,function(b){return b+v}))}})})}(o,u),function(r,a){return Y(r.ul,function(i,d){if(a)return r[a.toLowerCase()][d];var f=q(k(r,d));return(f[1]+f[2])/2})}(o,n.graph().align)}function zr(n){var e,t;(function(c){var o=J(c),u=c.graph().ranksep,r=0;h(o,function(a){var i=M(k(a,function(d){return c.node(d).height}));h(a,function(d){c.node(d).y=r+i/2}),r+=i+u})})(n=Pn(n)),e=Dr(n),t=function(c,o){n.node(o).x=c},e&&En(e,kn(t))}function te(n,e){var t=yr;t("layout",()=>{var c=t("  buildLayoutGraph",()=>function(o){var u=new R({multigraph:!0,compound:!0}),r=Z(o.graph());return u.setGraph(nn({},Jr,X(r,Ar),z(r,Qr))),h(o.nodes(),function(a){var i=Z(o.node(a));u.setNode(a,Xn(X(i,Hr),Kr)),u.setParent(a,o.parent(a))}),h(o.edges(),function(a){var i=Z(o.edge(a));u.setEdge(a,nn({},Wr,X(i,Ur),z(i,Xr)))}),u}(n));t("  runLayout",()=>function(o,u){u("    makeSpaceForEdgeLabels",()=>function(r){var a=r.graph();a.ranksep/=2,h(r.edges(),function(i){var d=r.edge(i);d.minlen*=2,d.labelpos.toLowerCase()!=="c"&&(a.rankdir==="TB"||a.rankdir==="BT"?d.width+=d.labeloffset:d.height+=d.labeloffset)})}(o)),u("    removeSelfEdges",()=>function(r){h(r.edges(),function(a){if(a.v===a.w){var i=r.node(a.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:a,label:r.edge(a)}),r.removeEdge(a)}})}(o)),u("    acyclic",()=>mr(o)),u("    nestingGraph.run",()=>Rr(o)),u("    rank",()=>Ir(Pn(o))),u("    injectEdgeLabelProxies",()=>function(r){h(r.edges(),function(a){var i=r.edge(a);if(i.width&&i.height){var d=r.node(a.v),f={rank:(r.node(a.w).rank-d.rank)/2+d.rank,e:a};G(r,"edge-proxy",f,"_ep")}})}(o)),u("    removeEmptyRanks",()=>function(r){var a=V(k(r.nodes(),function(s){return r.node(s).rank})),i=[];h(r.nodes(),function(s){var g=r.node(s).rank-a;i[g]||(i[g]=[]),i[g].push(s)});var d=0,f=r.graph().nodeRankFactor;h(i,function(s,g){_(s)&&g%f!=0?--d:d&&h(s,function(v){r.node(v).rank+=d})})}(o)),u("    nestingGraph.cleanup",()=>function(r){var a=r.graph();r.removeNode(a.nestingRoot),delete a.nestingRoot,h(r.edges(),function(i){r.edge(i).nestingEdge&&r.removeEdge(i)})}(o)),u("    normalizeRanks",()=>function(r){var a=V(k(r.nodes(),function(i){return r.node(i).rank}));h(r.nodes(),function(i){var d=r.node(i);On(d,"rank")&&(d.rank-=a)})}(o)),u("    assignRankMinMax",()=>function(r){var a=0;h(r.nodes(),function(i){var d=r.node(i);d.borderTop&&(d.minRank=r.node(d.borderTop).rank,d.maxRank=r.node(d.borderBottom).rank,a=M(a,d.maxRank))}),r.graph().maxRank=a}(o)),u("    removeEdgeLabelProxies",()=>function(r){h(r.nodes(),function(a){var i=r.node(a);i.dummy==="edge-proxy"&&(r.edge(i.e).labelRank=i.rank,r.removeNode(a))})}(o)),u("    normalize.run",()=>kr(o)),u("    parentDummyChains",()=>Fr(o)),u("    addBorderSegments",()=>function(r){h(r.children(),function a(i){var d=r.children(i),f=r.node(i);if(d.length&&h(d,a),Object.prototype.hasOwnProperty.call(f,"minRank")){f.borderLeft=[],f.borderRight=[];for(var s=f.minRank,g=f.maxRank+1;s<g;++s)pn(r,"borderLeft","_bl",i,f,s),pn(r,"borderRight","_br",i,f,s)}})}(o)),u("    order",()=>Sr(o)),u("    insertSelfEdges",()=>function(r){var a=J(r);h(a,function(i){var d=0;h(i,function(f,s){var g=r.node(f);g.order=s+d,h(g.selfEdges,function(v){G(r,"selfedge",{width:v.label.width,height:v.label.height,rank:g.rank,order:s+ ++d,e:v.e,label:v.label},"_se")}),delete g.selfEdges})})}(o)),u("    adjustCoordinateSystem",()=>function(r){var a=r.graph().rankdir.toLowerCase();a!=="lr"&&a!=="rl"||Tn(r)}(o)),u("    position",()=>zr(o)),u("    positionSelfEdges",()=>function(r){h(r.nodes(),function(a){var i=r.node(a);if(i.dummy==="selfedge"){var d=r.node(i.e.v),f=d.x+d.width/2,s=d.y,g=i.x-f,v=d.height/2;r.setEdge(i.e,i.label),r.removeNode(a),i.label.points=[{x:f+2*g/3,y:s-v},{x:f+5*g/6,y:s-v},{x:f+g,y:s},{x:f+5*g/6,y:s+v},{x:f+2*g/3,y:s+v}],i.label.x=i.x,i.label.y=i.y}})}(o)),u("    removeBorderNodes",()=>function(r){h(r.nodes(),function(a){if(r.children(a).length){var i=r.node(a),d=r.node(i.borderTop),f=r.node(i.borderBottom),s=r.node(D(i.borderLeft)),g=r.node(D(i.borderRight));i.width=Math.abs(g.x-s.x),i.height=Math.abs(f.y-d.y),i.x=s.x+i.width/2,i.y=d.y+i.height/2}}),h(r.nodes(),function(a){r.node(a).dummy==="border"&&r.removeNode(a)})}(o)),u("    normalize.undo",()=>function(r){h(r.graph().dummyChains,function(a){var i,d=r.node(a),f=d.edgeLabel;for(r.setEdge(d.edgeObj,f);d.dummy;)i=r.successors(a)[0],r.removeNode(a),f.points.push({x:d.x,y:d.y}),d.dummy==="edge-label"&&(f.x=d.x,f.y=d.y,f.width=d.width,f.height=d.height),a=i,d=r.node(a)})}(o)),u("    fixupEdgeLabelCoords",()=>function(r){h(r.edges(),function(a){var i=r.edge(a);if(Object.prototype.hasOwnProperty.call(i,"x"))switch(i.labelpos!=="l"&&i.labelpos!=="r"||(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset}})}(o)),u("    undoCoordinateSystem",()=>xr(o)),u("    translateGraph",()=>function(r){var a=Number.POSITIVE_INFINITY,i=0,d=Number.POSITIVE_INFINITY,f=0,s=r.graph(),g=s.marginx||0,v=s.marginy||0;function l(w){var p=w.x,b=w.y,m=w.width,y=w.height;a=Math.min(a,p-m/2),i=Math.max(i,p+m/2),d=Math.min(d,b-y/2),f=Math.max(f,b+y/2)}h(r.nodes(),function(w){l(r.node(w))}),h(r.edges(),function(w){var p=r.edge(w);Object.prototype.hasOwnProperty.call(p,"x")&&l(p)}),a-=g,d-=v,h(r.nodes(),function(w){var p=r.node(w);p.x-=a,p.y-=d}),h(r.edges(),function(w){var p=r.edge(w);h(p.points,function(b){b.x-=a,b.y-=d}),Object.prototype.hasOwnProperty.call(p,"x")&&(p.x-=a),Object.prototype.hasOwnProperty.call(p,"y")&&(p.y-=d)}),s.width=i-a+g,s.height=f-d+v}(o)),u("    assignNodeIntersects",()=>function(r){h(r.edges(),function(a){var i,d,f=r.edge(a),s=r.node(a.v),g=r.node(a.w);f.points?(i=f.points[0],d=f.points[f.points.length-1]):(f.points=[],i=g,d=s),f.points.unshift(vn(s,i)),f.points.push(vn(g,d))})}(o)),u("    reversePoints",()=>function(r){h(r.edges(),function(a){var i=r.edge(a);i.reversed&&i.points.reverse()})}(o)),u("    acyclic.undo",()=>function(r){h(r.edges(),function(a){var i=r.edge(a);if(i.reversed){r.removeEdge(a);var d=i.forwardName;delete i.reversed,delete i.forwardName,r.setEdge(a.w,a.v,i,d)}})}(o))}(c,t)),t("  updateInputGraph",()=>function(o,u){h(o.nodes(),function(r){var a=o.node(r),i=u.node(r);a&&(a.x=i.x,a.y=i.y,u.children(r).length&&(a.width=i.width,a.height=i.height))}),h(o.edges(),function(r){var a=o.edge(r),i=u.edge(r);a.points=i.points,Object.prototype.hasOwnProperty.call(i,"x")&&(a.x=i.x,a.y=i.y)}),o.graph().width=u.graph().width,o.graph().height=u.graph().height}(n,c))})}var Ar=["nodesep","edgesep","ranksep","marginx","marginy"],Jr={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Qr=["acyclicer","ranker","rankdir","align"],Hr=["width","height"],Kr={width:0,height:0},Ur=["minlen","weight","width","height","labeloffset"],Wr={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Xr=["labelpos"];function X(n,e){return Y(z(n,e),Number)}function Z(n){var e={};return h(n,function(t,c){e[c.toLowerCase()]=t}),e}export{te as l};
//# sourceMappingURL=layout-Dkcc45vG.js.map
