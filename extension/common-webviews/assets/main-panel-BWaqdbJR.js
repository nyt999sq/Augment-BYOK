const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RemoteAgentThreadTitle-D_CLsbo8.js","./Icon-CaBYD5oO.js","./Icon-CWaUcQrN.css","./OpenFileButton-BnBhQVIy.js","./TextTooltipAugment-B4cqQh4H.js","./IconButtonAugment-Rffikxkp.js","./IconButtonAugment-C5YuOP3Q.css","./TextTooltipAugment-BrStpLh1.css","./index-nbgGMYE9.js","./message-broker-CliB7GoL.js","./marked.esm-CBEAPn3z.js","./marked-CiHxamUn.css","./extension-client-context-CwKdOhUw.js","./index-B4NDmpYR.js","./_commonjsHelpers-CwkBNZ52.js","./types-CaiUesx9.js","./types-Do4WQCrW.css","./await-bImbqfxU.js","./index-DF_yYUtg.js","./index-C0nJVisN.css","./BaseTextInput-CPpF4fmq.js","./BaseTextInput-DRN2HXtk.css","./Chevron-Ct6H6suA.js","./Chevron-BvwCR8GX.css","./extension-client-context-Dj7vR6Ei.css","./remote-agents-client-DV0OXQaI.js","./SuccessfulButton-Df7hGnns.js","./ButtonAugment-DECgcPdk.js","./ButtonAugment-BdekU6N_.css","./SuccessfulButton-BDZRP7A9.css","./OpenFileButton-Dz9EvsKp.css","./design-system-init-DCR3FqZN.js","./design-system-init-B00RcY-y.css","./index-BBZh5tbU.js","./index-BfCo9mu2.css","./AugmentMessage-BDJkLW0G.js","./index-Ct3ef_qL.js","./Markdown-oTNiBtsM.js","./toggleHighContrast-iCsKcMx3.js","./toggleHighContrast-C5ZQUaPo.css","./Markdown-BYdFgLHb.css","./noop-CVINQ7cR.js","./Filespan-CzwbVFJm.js","./Filespan-DBFcC0Za.css","./mermaid-Bezvo2Lx.js","./CopyButton-BCoIBrt5.js","./CopyButton-CejWQ-s8.css","./LanguageIcon-Du_otND8.js","./LanguageIcon-6rdAPCNm.css","./keypress-fD7XHdyk.js","./TextAreaAugment-BzfuWeQA.js","./TextAreaAugment-C3YgGx7o.css","./utils-DpHtg3Qz.js","./CalloutAugment-DfDZpfuE.js","./CalloutAugment-VvLaGQMh.css","./key-CsCKik6T.js","./AugmentMessage-BcMQrsKc.css","./RemoteAgentStatusIndicator-qmKRPmeO.js","./RemoteAgentStatusIndicator-wc-ehh4U.css","./shared-app-state-BibCi4jI.js","./index-Dt79ugWJ.js","./shared-app-state-3h2gUBbE.css","./shared-webview-store-model-BEcw7czj.js","./ra-diff-ops-model-Bh6ZhEmC.js","./Keybindings-4dJzjBQT.js","./TextCombo-89YZbRHm.js","./TextCombo-B7DuYcHs.css","./Keybindings-D3F--4X8.css","./IconFilePath-BTkL5YPt.js","./next-edit-types-B8NR3rVy.js","./IconFilePath-B4VZo0AU.css","./GitAgentEditTab-CvjK6d4D.js","./GitAgentEditTab-DNQY3qU8.css","./GitAgentEditTabContent-BjyHRKcf.js","./GitAgentEditTabContent-sGTQGzvQ.css","./RemoteMessageSection-OPbxN2sc.js","./diff-operations-D1Km8fUV.js","./RepoBadge-DexbRR0E.js","./RepoBadge-DzN41so8.css","./RemoteMessageSection-CgfDg388.css"])))=>i.map(i=>d[i]);
import{aV as fc,bz as _c,bA as yc,as as It,ar as Rt,W as jt,w as Yt,v as me,x as S,H as h,J as Te,z as t,A as d,P as b,R as $,T as qe,ae as ie,S as he,a7 as He,N as r,Q as k,B as fe,ak as Ae,am as Fn,V as ft,br as ai,a9 as bc,a0 as hs,y as kt,K as B,L as w,a3 as Pt,D as V,C as je,Z as Oe,F as X,aI as es,af as Vt,ai as Wn,_ as rt,Y as Jt,X as Ht,aG as Cn,aO as kn,$ as ms,a8 as Ao,a4 as st,a5 as wt,aR as Nn,a6 as nt,aS as Eo,ag as $n,aZ as un,aL as Rn,aj as fs,bb as Dn,aT as jn,G as _n,M as Ln,bB as $c,aA as wc,b1 as Xs,bC as ii,bD as qs,bE as li,bs as kc,I as nn,bk as ci,b3 as Cs,E as vo,ab as In,b0 as Ac,b6 as Ec,O as Ir,bF as Cc,at as an,aa as bs,m as zn,ad as go,aK as di,bg as ea,bG as Tc,a1 as Sc,bn as Ic,bH as ss,aH as Rc}from"./Icon-CaBYD5oO.js";import"./design-system-init-DCR3FqZN.js";import{_ as Hs,t as or,S as xc,M as ui}from"./index-DF_yYUtg.js";import{bK as Gn,cY as ds,cZ as vi,c_ as Co,c$ as Ns,d0 as zs,d1 as ta,U as gt,V as Ze,d2 as To,cv as Rr,D as Je,d3 as _r,b as Ct,i as Ot,d4 as gi,d5 as So,d6 as Mc,d7 as qr,d8 as Dc,d9 as Oc,da as Nc,db as hi,dc as pi,cs as zc,T as mi,dd as xr,c3 as Io,Z as cr,de as fi,df as Js,dg as Lc,z as Hr,H as Mr,x as Pc,a0 as Wr,v as ys,k as Bc,q as ln,dh as Fc,di as Jr,dj as qc,dk as yr,g as Hc,dl as Wc,dm as ho,dn as Gc,dp as Uc,dq as Vc,dr as jc,ds as _i,dt as Kc,du as na,dv as Yc,dw as Xc,dx as Jc,dy as Qc,n as qn,y as ts,dz as Zc,dA as ed,a as Yn,dB as td,o as $s,dC as nd,dD as po,dE as sd,dF as rd,dG as od,dH as ad,dI as id,dJ as ld,ck as cd,cl as yi,dK as dd,dL as ud,c8 as Qr,dM as vd,ci as gd,dN as hd,e as pd,dO as md,dP as ar,dQ as fd,dR as bi,dS as _d,dT as yd,bb as bd,dU as $i,dV as $d,aq as wd,am as kd,ar as Ad,an as Ed,ao as Cd,ap as sa,dW as ra,as as Td,dX as oa,c as Sd,ax as Id,dY as Rd,dZ as xd,av as Md,d_ as Dd,d$ as Od,e0 as Nd,aB as zd,e1 as Ro,e2 as Ld,e3 as Pd,e4 as Bd,e5 as Fd,e6 as qd,e7 as Hd,e8 as Wd,e9 as Ar,ea as aa,eb as wi,L as Ws,ec as ia,O as Gd,P as us,ed as ki,ee as Ud,B as xo,h as Ai,ef as Ei,eg as Vd,eh as la,ei as ca,ej as Ci,ek as jd,el as Ti,em as Si,a6 as Ii,en as Kd,eo as Yd,ep as Xd,eq as Jd,er as Qd,cS as Zd,es as Ri,b4 as mo,et as Mo,eu as da,ev as eu,ew as xi,ex as Mi,ey as tu,ez as Di,eA as Dr,eB as nu,eC as su,eD as Oi,cR as Zr,eE as ua,eF as va,eG as ru,eH as Ni,eI as ou,eJ as au,eK as zi,eL as iu,eM as lu,eN as cu,eO as du,E as dr,eP as Li,a$ as xs,eQ as uu,a4 as vu,a9 as gu,a3 as hu,a8 as rs,eR as pu,eS as mu,eT as fu,I as fo,J as Do,K as _u,eU as yu,t as bu,X as $u,eV as ga,eW as wu,Y as ku,eX as Au,eY as Pi,eZ as Eu,e_ as Cu,c5 as Tu,cT as Su,e$ as Iu,f0 as eo,f1 as Ru,f2 as xu,f3 as ir,f4 as Mu,f5 as Bi,f6 as Fi,f7 as Is,f8 as ha,f9 as Du,fa as Ou,fb as Nu,fc as zu,fd as Lu,fe as pa,ff as Pu,fg as Bu,fh as Fu,fi as qu,fj as Hu,fk as Wu,fl as Gu,fm as Uu,fn as Vu,c1 as ju,c2 as Ku,fo as ma,fp as _o,cW as is,fq as qi,fr as Yu,fs as Xu,w as Hi,d as Ju,ft as Qu,fu as Zu,fv as ev,fw as tv,fx as nv,u as Wi,fy as sv,fz as rv,fA as ov,fB as av,cV as fa,F as iv,S as lv}from"./extension-client-context-CwKdOhUw.js";import{I as Nt,a as yn,B as cv,b as Jn}from"./IconButtonAugment-Rffikxkp.js";import{a as Gs}from"./await-bImbqfxU.js";import{O as Gi,c as Us}from"./index-BBZh5tbU.js";import{d as Ui,c as yo,R as on,a as fn,m as dv,e as uv,E as Oo,f as ur,C as pn,g as vv,T as gv,h as _a,i as No,j as hv,s as pv,k as mv,l as fv,n as _v,o as yv,p as bv,q as $v,w as Vi,r as ya,t as ls,u as Gr,M as wv,A as ji,L as kv,v as Av,B as br,x as Ev,F as Cv,y as Tv,z as Sv,D as Ki,G as Ur,H as to,I as Iv,J as Rv,K as xv,N as Mv,O as Dv,P as Ov}from"./AugmentMessage-BDJkLW0G.js";import{b as ws,A as Vn,S as Or,E as Tn,i as vr,h as ba,e as zo,f as Lo,g as Yi,j as Nr,k as Nv,l as Xi,m as zv,n as Ji,M as gr,o as Lv}from"./message-broker-CliB7GoL.js";import{g as Pv,b as Bv,c as Fv,R as qv,d as Hv,S as Qi,v as Wv,a as Gv}from"./RemoteAgentStatusIndicator-qmKRPmeO.js";import{R as dn,a as Zi}from"./OpenFileButton-BnBhQVIy.js";import{T as it,a as Xt,b as Pn,H as Uv,o as Vv,d as no,C as el,t as jv}from"./TextTooltipAugment-B4cqQh4H.js";import{g as tl,a as $a,t as Kv,f as Yv}from"./marked.esm-CBEAPn3z.js";import{B as xt}from"./ButtonAugment-DECgcPdk.js";import{C as ks}from"./CalloutAugment-DfDZpfuE.js";import{k as Ts}from"./key-CsCKik6T.js";import{B as xn}from"./types-CaiUesx9.js";import"./Chevron-Ct6H6suA.js";import{b as bo}from"./BaseTextInput-CPpF4fmq.js";import{f as Xv,N as $o,s as zr,g as Jv,a as nl,h as wa,i as ka,j as Qv,c as sl,m as Po,b as rl,d as En,e as Zv,T as eg,u as tg,v as ng,S as sg}from"./shared-app-state-BibCi4jI.js";import{R as Er,a as Zn,b as Ms}from"./index-nbgGMYE9.js";import{e as rg,f as og,h as ag}from"./utils-DpHtg3Qz.js";import{t as tn,a as ps,s as Bo,b as As,f as Aa}from"./index-Ct3ef_qL.js";import{S as ol}from"./shared-webview-store-model-BEcw7czj.js";import{R as Ea}from"./ra-diff-ops-model-Bh6ZhEmC.js";import{F as Cr}from"./Filespan-CzwbVFJm.js";import{n as Ks}from"./noop-CVINQ7cR.js";import{T as ig}from"./TextAreaAugment-BzfuWeQA.js";import"./toggleHighContrast-iCsKcMx3.js";import{M as lg,b as cg,c as dg,d as ug,g as vg,C as al,a as gg}from"./Markdown-oTNiBtsM.js";import"./mermaid-Bezvo2Lx.js";import"./SuccessfulButton-Df7hGnns.js";import"./CopyButton-BCoIBrt5.js";import{e as hg}from"./LanguageIcon-Du_otND8.js";import{C as so,b as pg,c as mg,d as fg,e as hr,A as Fo,P as qo,R as _s,K as il,n as _g,g as Ca,a as yg,f as ll}from"./Keybindings-4dJzjBQT.js";import{s as cl,d as bg}from"./index-B4NDmpYR.js";import{I as $g}from"./IconFilePath-BTkL5YPt.js";import{o as wg}from"./keypress-fD7XHdyk.js";import{T as dl}from"./TextCombo-89YZbRHm.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./remote-agents-client-DV0OXQaI.js";import"./index-Dt79ugWJ.js";import"./next-edit-types-B8NR3rVy.js";try{Ss=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Zo=new Ss.Error().stack)&&(Ss._sentryDebugIds=Ss._sentryDebugIds||{},Ss._sentryDebugIds[Zo]="b552ad34-d987-41bc-9e93-5985ca193416",Ss._sentryDebugIdIdentifier="sentry-dbid-b552ad34-d987-41bc-9e93-5985ca193416")}catch{}var Ss,Zo;const kg=[];function Ag(s,e=!1,n=!1){return Tr(s,new Map,"",kg,null,n)}function Tr(s,e,n,o,a=null,i=!1){if(typeof s=="object"&&s!==null){var l=e.get(s);if(l!==void 0)return l;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(fc(s)){var c=Array(s.length);e.set(s,c),a!==null&&e.set(a,c);for(var u=0;u<s.length;u+=1){var v=s[u];u in s&&(c[u]=Tr(v,e,n,o,null,i))}return c}if(_c(s)===yc){for(var m in c={},e.set(s,c),a!==null&&e.set(a,c),s)c[m]=Tr(s[m],e,n,o,null,i);return c}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function"&&!i)return Tr(s.toJSON(),e,n,o,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}const Eg=Gn(s=>s.mainPanel.visibleApp),Sr={chat:{icon:"message-square",type:"chat",primaryText:"Chat",bannerText:"Running locally"},localAgent:{icon:"wand-sparkles",type:"localAgent",primaryText:"Agent",bannerText:"Running locally"},remoteAgent:{icon:"cloud-upload",type:"remoteAgent",primaryText:"Remote Agent",bannerText:"Running in the cloud"}};function Ho(s){return s==="remoteAgent"?Sr.remoteAgent:s==="chat"?Sr.chat:Sr.localAgent}const Vr=(s,e)=>({chatMode:s,agentExecution:e}),Cg=Vr(ws.chat),Ta=Vr(ws.agent,ds.manual),Sa=Vr(ws.agent,ds.auto),Tg=Vr(ws.remoteAgent);class gs{constructor(e,n,o){this._reduxStore=e,this._remoteAgentsModel=n,this._config=o,this._chatModeType=It([this.isAgentic,this._remoteAgentsModel],([a,i])=>{const l=function(c,u){return u?.isActive?"remoteAgent":c?"localAgent":"chat"}(a,i);return Ho(l).type}),this._remoteAgentsModel.subscribe(a=>{a.isRemoteAgentSshWindow===this._prevRemoteAgentWindowOpts.isRemoteAgentSshWindow&&a.remoteAgentSshWindowId===this._prevRemoteAgentWindowOpts.remoteAgentId||(this._prevRemoteAgentWindowOpts={remoteAgentId:a.remoteAgentSshWindowId,isRemoteAgentSshWindow:a.isRemoteAgentSshWindow},this.handleisRemoteAgentSshWindow(a))})}static key="chatModeModel";_prevRemoteAgentWindowOpts={remoteAgentId:void 0,isRemoteAgentSshWindow:!1};_chatModeType;get isAgentic(){return vi.withStore(this._reduxStore)()}get agentExecutionMode(){return Co.withStore(this._reduxStore)()}handleisRemoteAgentSshWindow(e){e.isRemoteAgentSshWindow&&this.setToRemoteAgent(e.remoteAgentSshWindowId)}getCurrentModeSelectorMode(){const e=Rt(this.isAgentic);return this._remoteAgentsModel.isActive?Ns.remoteAgent:e?Ns.agent:Ns.chat}async reportModeSelectorEvent(e,n){try{const o=n||this.getCurrentModeSelectorMode();this._config.enableBackgroundAgents&&await this._remoteAgentsModel.reportChatModeEvent(e,o)}catch(o){console.error("Failed to report chat mode event:",o)}}reportModeSelectorOpen(){this.reportModeSelectorEvent(zs.open)}reportModeSelectorClose(){this.reportModeSelectorEvent(zs.close)}reportModeSelectorInit(){this.reportModeSelectorEvent(zs.init)}async toggleChatAgentAutoMode(e){if(!this.isInAgentState())return;const n=Rt(this.agentExecutionMode)===ds.auto?ds.manual:ds.auto;this._reduxStore.dispatch(ta(n)),this._reduxStore.dispatch(gt(Ze.WEBVIEW.AGENT_EXECUTION_MODE_TOGGLED,{source:e,newMode:n}))}isInAgentState(){const e=this.getCurrentModeState();return e===Sa||e===Ta}getCurrentModeState(){const e=Rt(this.isAgentic),n=Rt(this.agentExecutionMode);return this._remoteAgentsModel.isActive?Tg:e&&n===ds.auto?Sa:e&&n===ds.manual?Ta:Cg}get isRemoteAgentSshWindow(){return this._remoteAgentsModel.isRemoteAgentSshWindow}get remoteAgentSshWindowId(){return this._remoteAgentsModel.remoteAgentSshWindowId}get isRemoteAgentActive(){return this._remoteAgentsModel.isActive}async setToLocal(e){this.isRemoteAgentSshWindow||(this._remoteAgentsModel.setIsActive(!1),e&&this._reduxStore.dispatch(ta(e)))}async setToRemoteAgent(e){if(this.isRemoteAgentSshWindow&&(e&&this.remoteAgentSshWindowId&&e!==this.remoteAgentSshWindowId&&(e=this.remoteAgentSshWindowId),!e&&this.remoteAgentSshWindowId&&(e=this.remoteAgentSshWindowId)),this._remoteAgentsModel.setIsActive(!0),e)this._remoteAgentsModel.setCurrentAgent(e);else if(e===null)this._remoteAgentsModel.clearCurrentAgent();else if(!this._remoteAgentsModel?.currentAgent){const n=this._remoteAgentsModel.agentOverviews.length>0?this._remoteAgentsModel.agentOverviews[0]:void 0;n&&this._remoteAgentsModel.setCurrentAgent(n.remote_agent_id)}}async createNewThread(e){e==="remoteAgent"&&(this._remoteAgentsModel.setIsActive(!0),this.setToRemoteAgent(null))}findLatestRemoteAgentThread(){if(this._remoteAgentsModel.currentAgent)return this._remoteAgentsModel.currentAgent.remote_agent_id;const e=this._remoteAgentsModel.agentOverviews||[];return e.length>0?e[0].remote_agent_id:void 0}get chatModeType(){return this._chatModeType}async handleSetToThreadType(e,n){if(e!=="remoteAgent")return void console.error("Dont use chat mode model for anything else besides remote agent");if(!this._remoteAgentsModel)return void console.error("No remote agents model found");const o=this.findLatestRemoteAgentThread();o?await this.switchToThread("remoteAgent",o,n):await this.createNewThread("remoteAgent")}switchToThread(e,n,o){return(!this.isRemoteAgentSshWindow||!(e!=="remoteAgent"||this.remoteAgentSshWindowId&&n!==this.remoteAgentSshWindowId))&&(e==="remoteAgent"?To(n)?this.setToRemoteAgent(null):this.setToRemoteAgent(n):(this._reduxStore.dispatch(Rr(n,{noopIfSameConversation:!0})),this.setToLocal(o)),!0)}handleMessageFromExtension(e){const n=e.data;return n.type===jt.remoteAgentSelectAgentId&&(this.setToRemoteAgent(n.data.agentId),!0)}}var wn=(s=>(s.Pinned="Pinned",s.Active="Ready for Review",s.Today="Today",s.New="New",s.ThisWeek="Last 7 days",s.ThisMonth="Last 30 days",s.Older="Older",s))(wn||{});const Sg=300,Ig=[wn.Active,wn.Pinned,wn.New,wn.Today,wn.ThisWeek,wn.ThisMonth,wn.Older];function Rg(s){return s.sort((e,n)=>n.sortTimestamp.getTime()-e.sortTimestamp.getTime())}function Ia(s,e,n=Sg){const o=new Map,a=new Date(new Date().setHours(0,0,0,0)),i=[{age:wn.Today,date:a},{age:wn.ThisWeek,date:new Date(a.getTime()-6048e5)},{age:wn.ThisMonth,date:new Date(a.getTime()-2592e6)}];for(const v of s){const m=v.sortTimestamp;let y;y=v.isNew?wn.New:e[v.id]?wn.Pinned:v.type==="remoteAgent"&&v.has_updates?wn.Active:i.find(f=>m>=f.date)?.age||wn.Older,o.set(y,[...o.get(y)||[],v])}const l=Ig.map(v=>({groupTitle:v,threads:Rg(o.get(v)||[])})).filter(v=>v.threads.length>0);let c=0;const u=[];for(const v of l){const m=[];for(const y of v.threads){if(c>=n)break;m.push(y),c++}u.push({groupTitle:v.groupTitle,threads:m})}return u}function xg(s,e,n){const o=e===s.id?n:void 0;if(o)return o.exchanges.slice(0,20).map(i=>i.exchange.request_message||"").join(" ");const a=s.agent;return a?[a.session_summary||"",...a.turn_summaries||[]].join(" "):""}function Mg(s){if(!s.agent||!s.agent.workspace_setup?.starting_files?.github_commit_ref)return"";const e=s.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[e,Pv(e),Bv(e)].filter(Boolean).join(" ")}const Ra=new WeakMap,Dg=s=>s.type==="remoteAgent";class Lr{constructor(e){this._asyncMsgSender=e}static key="gitReferenceModel";_githubTimeoutMs=9e4;_currentRepositoryUrl=Yt(void 0);async listUserRepos(e){try{const n=await this._asyncMsgSender.send({type:jt.listGithubReposForAuthenticatedUserRequest,data:{page:e}},this._githubTimeoutMs);return{repos:n.data.repos,hasNextPage:n.data.hasNextPage,nextPage:n.data.nextPage,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to list user repos:",n),{repos:[],hasNextPage:!1,nextPage:0,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async listRepoBranches(e,n){try{const o=await this._asyncMsgSender.send({type:jt.listGithubRepoBranchesRequest,data:{repo:e,page:n}},this._githubTimeoutMs);return{branches:o.data.branches,hasNextPage:o.data.hasNextPage,nextPage:o.data.nextPage,error:o.data.error,isDevDeploy:o.data.isDevDeploy}}catch(o){return console.error("Failed to list repo branches:",o),{branches:[],hasNextPage:!1,nextPage:0,error:`Error: ${o instanceof Error?o.message:String(o)}`}}}async getGithubRepo(e){try{const n=await this._asyncMsgSender.send({type:jt.getGithubRepoRequest,data:{repo:e}},this._githubTimeoutMs);return{repo:n.data.repo,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to get GitHub repo:",n),{repo:e,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async getCurrentLocalBranch(){try{return(await this._asyncMsgSender.send({type:jt.getCurrentLocalBranchRequest},1e4)).data.branch}catch(e){return void console.error("Failed to get current local branch:",e)}}async listBranches(e=""){try{return{branches:(await this._asyncMsgSender.send({type:jt.getGitBranchesRequest,data:{prefix:e}},1e4)).data.branches}}catch(n){return console.error("Failed to fetch branches:",n),{branches:[]}}}async getWorkspaceDiff(e){try{return(await this._asyncMsgSender.send({type:jt.getWorkspaceDiffRequest,data:{branchName:e}},1e4)).data.diff}catch(n){return console.error("Failed to get workspace diff:",n),""}}get currentRepositoryUrl(){return this._currentRepositoryUrl}async getRemoteUrl(){const e=Rt(this._currentRepositoryUrl);if(e)return{remoteUrl:e};try{const n=await this._asyncMsgSender.send({type:jt.getRemoteUrlRequest},1e4);return n.data.error?this._currentRepositoryUrl.set(void 0):this._currentRepositoryUrl.set(n.data.remoteUrl),{remoteUrl:n.data.remoteUrl}}catch(n){return console.error("Failed to get remote url:",n),{remoteUrl:"",error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async fetch(){try{await this._asyncMsgSender.send({type:jt.gitFetchRequest},1e4)}catch(e){console.error("Failed to fetch remote branch:",e)}}async isGitRepository(){try{return(await this._asyncMsgSender.send({type:jt.isGitRepositoryRequest},1e4)).data.isGitRepository}catch(e){return console.error("Failed to check if is git repository:",e),!1}}async isGithubAuthenticated(){try{return(await this._asyncMsgSender.send({type:jt.isGithubAuthenticatedRequest},this._githubTimeoutMs)).data.isAuthenticated}catch(e){return console.error("Failed to check GitHub authentication status:",e),!1}}async authenticateGithub(){try{const e=await this._asyncMsgSender.send({type:jt.authenticateGithubRequest},this._githubTimeoutMs);return{success:e.data.success,message:e.data.message,url:e.data.url}}catch(e){return console.error("Failed to authenticate with GitHub:",e),{success:!1,message:`Error: ${e instanceof Error?e.message:String(e)}`}}}async revokeGithubAccess(){try{const e=await this._asyncMsgSender.send({type:jt.revokeGithubAccessRequest},1e4);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Failed to revoke GitHub access:",e),{success:!1,message:`Error: ${e instanceof Error?e.message:String(e)}`}}}}var Og=h('<div class="c-mode-display__bottom svelte-dxxia1"><!></div>'),Ng=h('<div class="c-mode-display svelte-dxxia1"><div class="c-mode-display__top svelte-dxxia1"><!> <!> <!></div> <!></div>'),zg=h('<div class="c-mode-display-item svelte-3vmnfj"><!></div>'),Lg=h("<div><!></div>");function Ls(s,e){let n=S(e,"description",3,""),o=S(e,"selected",3,!1),a=hs(e,["$$slots","$$events","$$legacy","onSelect","description","chatMode","selected"]),i=d(()=>ai(e.class,"")),l=d(()=>bc(a,["class"]));var c=Lg();let u;var v=b(c);Ae(v,()=>Je.Item,(m,y)=>{y(m,Fn({get onSelect(){return e.onSelect}},()=>t(l),{children:(f,g)=>{var A=zg();(function(C,_){me(_,!0);let p=S(_,"description",3,""),E=S(_,"doShowSecondaryText",3,!0),M=d(()=>Ho(_.chatMode));var I=Ng(),T=b(I),O=b(T);Te(O,{get name(){return t(M).icon},size:1});var P=$(O,2);qe(P,{size:1,children:(x,N)=>{var W=ie();he(()=>He(W,t(M).primaryText)),r(x,W)},$$slots:{default:!0}});var H=$(P,2),D=x=>{qe(x,{size:1,class:"c-mode-secondary-label",children:(N,W)=>{var F=ie();he(()=>He(F,t(M).secondaryText)),r(N,F)},$$slots:{default:!0}})};k(H,x=>{t(M).secondaryText&&x(D)});var U=$(T,2),j=x=>{var N=Og(),W=b(N);qe(W,{size:0,class:"c-mode-secondary-label",color:"secondary",children:(F,G)=>{var z=ie();he(()=>He(z,p())),r(F,z)},$$slots:{default:!0}}),r(x,N)};k(U,x=>{p()&&E()&&x(j)}),r(C,I),fe()})(b(A),{get chatMode(){return e.chatMode},get description(){return n()}}),r(f,A)},$$slots:{default:!0}}))}),he(m=>u=ft(c,1,`c-mode-display-item-container ${t(i)??""}`,"svelte-3vmnfj",u,m),[()=>({"c-mode-display-item--selected":o()})]),r(s,c)}function ul(s){switch(s){case"remoteAgent":return _r.remoteAgent;case"localAgent":return _r.agent;case"chat":return _r.chat;default:return _r.unknown}}const xa="new-thread-button";var Pg=h('<div class="c-new-thread-dropdown__tooltip svelte-7ts7rl">New Thread</div>'),Bg=h('<div class="c-new-thread-dropdown__button-container"><!></div>'),Fg=h("<!> <!>",1),qg=h('<div class="c-new-thread-dropdown__content"><!> <!> <!></div>'),Hg=h("<!> <!>",1);function Wg(s,e){me(e,!0);const[n,o]=je();let a=S(e,"isDropdownOpen",15,!1),i=S(e,"showLabel",3,!0),l=S(e,"onNewThreadCreated",3,()=>{});const c=kt(dn.key),u=kt(gs.key),v=Ct(),m=Ot("enableBackgroundAgents"),y=Ot("enableAgentMode");async function f(p){p==="remoteAgent"?(await c.reportRemoteAgentNewThreadButtonEvent(gi.click,ul(p)),u.createNewThread(p)):(v(So(p)),v(gt(Ze.WEBVIEW.THREAD_CREATION_ATTEMPTED,{source:"button"}))),g?.requestClose(),l()(p)}let g;function A(p){a(p)}var C=B(),_=w(C);Ae(_,()=>Je.Root,(p,E)=>{Pt(E(p,{onOpenChange:A,nested:!1,children:(M,I)=>{var T=Hg(),O=w(T);Ae(O,()=>Je.Trigger,(H,D)=>{D(H,{$$events:{click:U=>{U.stopPropagation()}},children:(U,j)=>{{const x=W=>{var F=Pg();r(W,F)};let N=d(()=>!a()&&void 0);it(U,{side:"top",nested:!1,get open(){return t(N)},content:x,children:(W,F)=>{var G=Bg(),z=b(G),q=R=>{xt(R,{size:.5,variant:"ghost",color:"neutral","data-testid":xa,children:(Y,Z)=>{qe(Y,{size:1,truncate:!0,children:(Q,K)=>{var J=ie("New Thread");r(Q,J)},$$slots:{default:!0}})},$$slots:{default:!0,iconLeft:(Y,Z)=>{Te(Y,{name:"plus",slot:"iconLeft"})}}})},L=R=>{Nt(R,{size:.5,variant:"ghost-block",color:"neutral","data-testid":xa,children:(Y,Z)=>{Te(Y,{name:"plus"})},$$slots:{default:!0}})};k(z,R=>{i()?R(q):R(L,!1)}),r(W,G)},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})});var P=$(O,2);Ae(P,()=>Je.Content,(H,D)=>{D(H,{size:1,side:"bottom",align:"start",children:(U,j)=>{var x=qg(),N=b(x),W=q=>{Ls(q,{chatMode:"localAgent",onSelect:()=>f("localAgent"),isConversationAgentic:!0,description:"Complete coding tasks autonomously."})};k(N,q=>{V(y,"$enableAgentMode",n)&&q(W)});var F=$(N,2);Ls(F,{chatMode:"chat",onSelect:()=>f("chat"),isConversationAgentic:!1,description:"Ask questions, collaborate on projects."});var G=$(F,2),z=q=>{var L=Fg(),R=w(L);Ae(R,()=>Je.Separator,(Y,Z)=>{Z(Y,{})}),Ls($(R,2),{chatMode:"remoteAgent",onSelect:()=>f("remoteAgent"),isBackgroundAgent:!0,description:"Run agents remotely."}),r(q,L)};k(G,q=>{V(m,"$enableRemoteAgents",n)&&q(z)}),r(U,x)},$$slots:{default:!0}})}),r(M,T)},$$slots:{default:!0}}),M=>g=M,()=>g)}),r(s,C),fe(),o()}var Gg=h('<div class="c-thread-bulk-delete-prompt__content svelte-9nu469">Large number of threads can slow down the extension.<br/> Consider deleting some threads. <div class="c-thread-bulk-delete-prompt__action svelte-9nu469"><!> <!></div></div>'),Ug=h('<div class="c-thread-bulk-delete-prompt svelte-9nu469"><!></div>'),Vg=h("<!> <!>",1),jg=h("<!> <!>",1),Kg=h("<!> <!> <!> <!>",1),Yg=h("<!> <!> <!> <!>",1),Xg=h('<div class="c-thread-menu svelte-p0wrmr"><!> <!> <!> <!> <!> <!></div>'),Jg=h("<!> <!>",1);function vl(s,e){me(e,!0);const n=()=>V(A,"$isThreadPinned",i),o=()=>V(f,"$conversation",i),a=()=>V(E,"$agentIdCopyTextMap",i),[i,l]=je(),c=kt(dn.key);let u=S(e,"type",3,"chat"),v=S(e,"afterDelete",19,()=>{}),m=S(e,"onTogglePinned",19,()=>{}),y=S(e,"onRename",19,()=>{});const f=Mc(e.thread.conversation?.id),g=d(()=>Nc(e.thread.conversation?.id)),A=qr(e.thread.id);let C=Oe(void 0),_=Oe(void 0),p=Oe("");const E=Yt(new Map),M=d(()=>t(p)?t(p):t(_)==="retrieving"?"Creating link":t(_)==="copied"?"Link copied":t(_)==="failure"?"Unable to create link":"Share link to session"),I=Ct();function T(){e.onOptionSelected?.(n()?"Unpin":"Pin"),m()?m()():u()==="remoteAgent"?c?.toggleAgentPinned(e.thread.id,n()||!1):I(hi(e.thread.id))}const O=Ot("enableDebugFeatures"),P=Ot("enableConversationDebugUtils");async function H(){if(e.onOptionSelected?.("Delete"),u()==="remoteAgent"){if(!await c?.deleteAgent(e.thread.id))return}else I(pi([e.thread.id],{}));v()?.()}function D(){e.onOptionSelected?.("Rename"),y()?.(e.thread.id),t(C)?.requestClose()}function U(){e.onOptionSelected?.("Copy ID"),navigator.clipboard.writeText(e.thread.id),E.update(W=>(W.set(e.thread.id,"Copied!"),W)),setTimeout(()=>{E.update(W=>(W.delete(e.thread.id),W))},1e3)}async function j(){if(e.onOptionSelected?.("Share link to session"),o()?.id&&t(_)===void 0){X(_,o()?.lastUrl?"copied":"retrieving",!0);try{I(zc(o().id)),X(_,"copied")}catch(W){console.error("Failed to get conversation URL: ",W),X(p,W instanceof Error?W.message:"Unknown error",!0),X(_,"failure")}finally{setTimeout(()=>{X(_,void 0)},1200)}}}var x=B(),N=w(x);Ae(N,()=>Je.Root,(W,F)=>{Pt(F(W,{onOpenChange:G=>{G&&e.onOptionsOpened?.()},nested:!1,children:(G,z)=>{var q=Jg(),L=w(q);Ae(L,()=>Je.Trigger,(Y,Z)=>{Z(Y,{children:(Q,K)=>{Nt(Q,{variant:"ghost-block",color:"neutral",size:.5,class:"c-agent-header__options-btn",$$events:{keydown:J=>{J.key!=="Enter"&&J.key!==" "||J.stopPropagation()}},children:(J,ue)=>{Te(J,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})});var R=$(L,2);Ae(R,()=>Je.Content,(Y,Z)=>{Z(Y,{size:1,side:"bottom",align:"end",children:(Q,K)=>{var J=Xg(),ue=b(J),ne=se=>{var te=Vg(),re=w(te),le=ce=>{var ge=B(),de=w(ge);Ae(de,()=>Je.Item,(we,Be)=>{Be(we,{onSelect:D,children:(De,Le)=>{var Me=ie("Rename");r(De,Me)},$$slots:{default:!0,iconLeft:(De,Le)=>{Te(De,{name:"square-pen",size:1,slot:"iconLeft"})}}})}),r(ce,ge)};k(re,ce=>{y()&&ce(le)});var ve=$(re,2),$e=ce=>{var ge=B(),de=w(ge);Ae(de,()=>Je.Item,(we,Be)=>{Be(we,{class:"c-thread-menu__share-link",onSelect:j,children:(De,Le)=>{var Me=ie();he(()=>He(Me,t(M))),r(De,Me)},$$slots:{default:!0,iconLeft:(De,Le)=>{var Me=B(),We=w(Me),ke=xe=>{es(xe,{size:1})},Re=xe=>{var ae=B(),Pe=w(ae),Ce=Fe=>{Te(Fe,{name:"check",size:1})},Se=Fe=>{var Ge=B(),ot=w(Ge),Ke=Ye=>{Te(Ye,{name:"x",size:1})},Qe=Ye=>{Te(Ye,{name:"share-2",size:1})};k(ot,Ye=>{t(_)==="failure"?Ye(Ke):Ye(Qe,!1)},!0),r(Fe,Ge)};k(Pe,Fe=>{t(_)==="copied"?Fe(Ce):Fe(Se,!1)},!0),r(xe,ae)};k(We,xe=>{t(_)==="retrieving"?xe(ke):xe(Re,!1)}),r(De,Me)}}})}),r(ce,ge)};k(ve,ce=>{V(t(g),"$isShareable",i)&&ce($e)}),r(se,te)};k(ue,se=>{u()!=="remoteAgent"&&se(ne)});var be=$(ue,2);Ae(be,()=>Je.Item,(se,te)=>{te(se,{onSelect:T,children:(re,le)=>{var ve=ie();he(()=>He(ve,n()?"Unpin":"Pin")),r(re,ve)},$$slots:{default:!0,iconLeft:(re,le)=>{Te(re,{name:"pin",size:1,slot:"iconLeft"})}}})});var ye=$(be,2),ee=se=>{var te=jg(),re=w(te);Ae(re,()=>Je.Item,(ve,$e)=>{$e(ve,{onSelect:U,children:(ce,ge)=>{var de=B(),we=w(de),Be=Le=>{var Me=ie();he(We=>He(Me,We),[()=>a().get(e.thread.id)]),r(Le,Me)},De=Le=>{var Me=ie("Copy ID");r(Le,Me)};k(we,Le=>{a().get(e.thread.id)?Le(Be):Le(De,!1)}),r(ce,de)},$$slots:{default:!0,iconLeft:(ce,ge)=>{Te(ce,{name:"copy",size:1,slot:"iconLeft"})}}})});var le=$(re,2);Ae(le,()=>Je.Item,(ve,$e)=>{$e(ve,{onSelect:D,children:(ce,ge)=>{var de=ie("Rename");r(ce,de)},$$slots:{default:!0,iconLeft:(ce,ge)=>{Te(ce,{name:"square-pen",size:1,slot:"iconLeft"})}}})}),r(se,te)};k(ye,se=>{u()==="remoteAgent"&&se(ee)});var ze=$(ye,2);Ae(ze,()=>Je.Item,(se,te)=>{te(se,{color:"error",onSelect:H,children:(re,le)=>{var ve=ie("Delete");r(re,ve)},$$slots:{default:!0,iconLeft:(re,le)=>{Te(re,{name:"trash",size:1,slot:"iconLeft"})}}})});var Ie=$(ze,2),Ee=se=>{var te=Kg(),re=w(te);Ae(re,()=>Je.Separator,(ce,ge)=>{ge(ce,{})});var le=$(re,2);Ae(le,()=>Je.Label,(ce,ge)=>{ge(ce,{children:(de,we)=>{var Be=ie("Debug");r(de,Be)},$$slots:{default:!0}})});var ve=$(le,2);Ae(ve,()=>Je.Item,(ce,ge)=>{ge(ce,{onSelect:async()=>{o()?.id&&(I(Dc(o()?.id,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`,openFile:!0})),t(C)?.requestClose())},children:(de,we)=>{var Be=ie("Export conversation");r(de,Be)},$$slots:{default:!0,iconLeft:(de,we)=>{Te(de,{name:"upload",size:1,slot:"iconLeft"})}}})});var $e=$(ve,2);Ae($e,()=>Je.Item,(ce,ge)=>{ge(ce,{onSelect:async()=>{I(Oc({generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0})),t(C)?.requestClose()},children:(de,we)=>{var Be=ie("Import conversation");r(de,Be)},$$slots:{default:!0,iconLeft:(de,we)=>{Te(de,{name:"download",size:1,slot:"iconLeft"})}}})}),r(se,te)};k(Ie,se=>{u()!=="remoteAgent"&&P&&se(Ee)});var _e=$(Ie,2),pe=se=>{var te=Yg(),re=w(te);Ae(re,()=>Je.Separator,(ce,ge)=>{ge(ce,{})});var le=$(re,2);Ae(le,()=>Je.Label,(ce,ge)=>{ge(ce,{children:(de,we)=>{var Be=ie("INTERNAL Debug Features");r(de,Be)},$$slots:{default:!0}})});var ve=$(le,2);Ae(ve,()=>Je.Item,(ce,ge)=>{ge(ce,{onSelect:()=>c.pauseRemoteAgentWorkspace(e.thread.id),children:(de,we)=>{var Be=ie("Pause");r(de,Be)},$$slots:{default:!0,iconLeft:(de,we)=>{Te(de,{name:"pause",size:1,slot:"iconLeft"})}}})});var $e=$(ve,2);Ae($e,()=>Je.Item,(ce,ge)=>{ge(ce,{onSelect:()=>c.resumeRemoteAgentWorkspace(e.thread.id),children:(de,we)=>{var Be=ie("Resume");r(de,Be)},$$slots:{default:!0,iconLeft:(de,we)=>{Te(de,{name:"play",size:1,slot:"iconLeft"})}}})}),r(se,te)};k(_e,se=>{u()==="remoteAgent"&&V(O,"$enableDebugFeatures",i)&&se(pe)}),r(Q,J)},$$slots:{default:!0}})}),r(G,q)},$$slots:{default:!0}}),G=>X(C,G,!0),()=>t(C))}),r(s,x),fe(),l()}var Qg=h('<div class="agent-chat-history__item svelte-ndjqhw">|</div>'),Zg=h('<div class="agent-chat-history svelte-ndjqhw"></div>');function gl(s,e){me(e,!0);var n=B(),o=w(n),a=i=>{var l=B(),c=w(l);Ts(c,()=>JSON.stringify(e.userMessages.slice(-9)),u=>{var v=Zg();Vt(v,23,()=>e.userMessages.slice(-9),(m,y)=>m+"-"+y,(m,y)=>{{let f=d(()=>function(A="",C){return A.length<=C?A:A.slice(0,C-3)+"..."}(t(y)||"",170)),g=d(()=>[Xt.Hover]);it(m,{delayDurationMs:0,get content(){return t(f)},side:"bottom",nested:!1,hasPointerEvents:!1,get triggerOn(){return t(g)},children:(A,C)=>{var _=Qg();r(A,_)},$$slots:{default:!0}})}}),r(u,v)}),r(i,l)};k(o,i=>{e.userMessages.length>0&&i(a)}),r(s,n),fe()}var eh=h('<div class="c-thread-title-editor svelte-4d5y91"><!></div>');function hl(s,e){me(e,!0);let n=S(e,"value",3,""),o=S(e,"size",3,1),a=S(e,"variant",3,"ghost"),i=S(e,"className",3,""),l=S(e,"onRename",3,()=>{}),c=S(e,"onCancel",3,()=>{}),u=Oe(void 0),v=Oe(!1),m=Oe(Wn(n()));function y(){l()(t(m))}rt(()=>{X(m,n())}),Jt(()=>{setTimeout(()=>t(u)?.focus(),0)});var f=eh();Ht("click",Cn,function(){t(u)&&!t(v)&&y(),X(v,!1)});var g=b(f);mi(g,{get size(){return o()},get variant(){return a()},outline:!1,get class(){return`c-thread-title-editor__input ${i()??""}`},get textInput(){return t(u)},set textInput(A){X(u,A,!0)},get value(){return t(m)},set value(A){X(m,A,!0)},$$events:{keydown:function(A){A.key==="Enter"?(A.preventDefault(),y()):A.key==="Escape"&&(A.preventDefault(),X(m,n()),c()()),A.stopPropagation()},click:A=>A.stopPropagation(),blur:()=>{t(v)||y()},selectionchange:()=>{X(v,!!document.getSelection()?.toString().length)},mouseup:()=>{X(v,!1)}}}),r(s,f),fe()}const lr="focusable-item";function Ma(s,e){return(s%e+e)%e}function Da(s){const e=document.activeElement?.closest(`.${lr}`);return s.findIndex(n=>n===e)}function Oa(s,e){let n=e;e===-1||e>=s.length?n=s.length-1:e<0&&(n=0),s[n]?.focus()}function th(s){const e=n=>{const o=document.activeElement;if(o&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA")||!o.closest(`.${lr}`)&&!s.contains(o))return;const a=function(i){return Array.from(i.querySelectorAll(`.${lr}`))}(s);if(a.length!==0)switch(n.key){case"ArrowUp":n.preventDefault(),function(i){const l=Ma(Da(i)-1,i.length);i[l]?.focus()}(a);break;case"ArrowDown":n.preventDefault(),function(i){const l=Ma(Da(i)+1,i.length);i[l]?.focus()}(a);break;case"Home":n.preventDefault(),Oa(a,0);break;case"End":n.preventDefault(),Oa(a,-1)}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}}function pl(s,e){let n=!1;const o=a=>{a&&!n&&kn().then(()=>{s.focus()}),n=a};return o(e),{update:o,destroy(){}}}function Wo(s=document.activeElement){if(!s)return!1;if(s.getAttribute("role")==="textbox")return!0;const e=s.tagName.toLowerCase();if(e==="textarea")return!0;if(e==="input"){const n=s.type.toLowerCase();if(["text","password","email","search","tel","url","number"].includes(n))return!0}return!(!s.hasAttribute("contenteditable")&&!s.closest("[contenteditable]"))}function Na(){const s=document.activeElement;if(!s)return!1;const e=s.tagName.toLowerCase();if(e==="select"||e==="button"||e==="input"||Wo(s)||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!=="-1")return!0;const n=s.getAttribute("role");return n==="textbox"||n==="combobox"||n==="listbox"||n==="button"||n==="menuitem"||n==="option"}var nh=h('<div><div></div> <div class="status-label svelte-1gr0zn2"> </div></div>');function sh(s,e){me(e,!0);const[n,o]=je();function a(C){switch(C){case"unseen":return"accent";case"awaitUserAction":return"iris";case"running":return"success";default:return"neutral"}}const i=xr(e.conversationId),l=Io(e.conversationId);let c=d(()=>{return C=V(i,"$agentExchangeStatus",n),_=V(l,"$lastExchange",n),C===Vn.running?"running":C===Vn.awaitingUserAction?"awaitUserAction":C===Vn.notRunning&&_?.seen_state===Or.unseen?"unseen":void 0;var C,_}),u=d(()=>a(t(c)));var v={getStatusBadgeColor:a},m=B(),y=w(m),f=C=>{var _=nh();ms(_,T=>({class:"status-indicator-container collapsed",role:"status","aria-label":`Agent status: ${t(c)??""}`,title:`Status: ${t(c)??""}`,...T}),[()=>Ao(t(u))],void 0,"svelte-1gr0zn2");var p=b(_);let E;var M=$(p,2),I=b(M);he(T=>{E=ft(p,1,"status-dot svelte-1gr0zn2",null,E,T),He(I,t(c))},[()=>({"pulse-opacity":t(c)==="running"})]),r(C,_)},g=C=>{var _=B(),p=w(_);st(p,()=>e.fallback??wt),r(C,_)};k(y,C=>{t(c)?C(f):C(g,!1)}),r(s,m);var A=fe(v);return o(),A}const rh="thread-list-item",oh={chat:"Chat",localAgent:"Agent",remoteAgent:"Remote Agent"};function ah(s,e){s.key!=="Enter"&&s.key!==" "||e()}var ih=h('<div class="agent-icon svelte-7gavtm"><!></div>'),lh=h("<div><!></div>"),ch=h('<div class="agent-title-content svelte-7gavtm"><!> <!></div>'),dh=h('<!> <div class="agent-actions svelte-7gavtm"><!></div>',1),uh=h('<div class="agent-content svelte-7gavtm"><div class="agent-details svelte-7gavtm"><div class="agent-details--left svelte-7gavtm"><!> <!> <div class="agent-title svelte-7gavtm"><!></div></div></div> <!></div>'),vh=h('<div role="button" tabindex="0"><!></div>');function gh(s,e){me(e,!0);const n=()=>V(y,"$threadTitle",a),o=()=>V(t(g),"$isThreadPinned",a),[a,i]=je();let l=S(e,"isSelected",3,!1),c=S(e,"showIfPinned",3,!1),u=S(e,"afterDelete",19,()=>{}),v=Oe(!1);const m=Ct(),y=e.thread.title,f=cr(e.thread.id),g=d(()=>qr(e.thread.id)),A=kt(Uo);async function C(F){if(F.trim()&&F!==n()){const G=n();m(fi(e.thread.id,F)),m(gt(Ze.SHARED.THREAD_RENAMED,{...A(e.thread),oldTitleLength:G.length,newTitleLength:F.length}))}_()}function _(){X(v,!1)}function p(){X(v,!0)}let E=d(()=>e.thread.isNew),M=d(()=>Sr[e.thread.type]),I=d(()=>e.thread.type);const T=d(()=>Js(e.thread.conversation?.id));function O(){e.onSelect(e.thread)}function P(){m(gt(Ze.SHARED.THREAD_OPTIONS_OPENED,A(e.thread)))}function H(F){m(gt(Ze.SHARED.THREAD_OPTION_SELECTED,{...A(e.thread),option:F}))}function D(){u()?.(e.thread)}function U(F){F?.stopPropagation(),e.onTogglePinned(e.thread,F)}function j(F){F&&(F.key!=="Enter"&&F.key!==" "||U(F))}var x=vh();let N;x.__click=O,x.__keydown=[ah,O],nt(x,"data-testid",rh);var W=b(x);Ts(W,()=>`${n()}--${o()}`,F=>{var G=uh(),z=b(G),q=b(z),L=b(q);sh(L,{get conversationId(){return e.thread.conversation.id},fallback:ne=>{var be=ih(),ye=b(be);Te(ye,{get name(){return t(M).icon},size:2}),r(ne,be)},$$slots:{fallback:!0}});var R=$(L,2),Y=ue=>{var ne=lh();let be;var ye=b(ne);{let ee=d(()=>o()?"Unpin thread":"Pin thread");it(ye,{nested:!1,hasPointerEvents:!1,get content(){return t(ee)},children:(ze,Ie)=>{{let Ee=d(()=>o()?"Unpin thread":"Pin thread");Nt(ze,{variant:"ghost-block",color:"accent",size:.5,class:"pin-icon__button",onclick:U,onkeydown:j,type:"button",get"aria-label"(){return t(Ee)},children:(_e,pe)=>{Te(_e,{name:"pin",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}he(ee=>be=ft(ne,1,"pin-icon svelte-7gavtm",null,be,ee),[()=>({"is-pinned":o()})]),r(ue,ne)};k(R,ue=>{!t(E)&&o()&&c()&&ue(Y)});var Z=$(R,2),Q=b(Z);{let ue=d(()=>function(ne="",be){return ne.length<=be?ne:ne.slice(0,be-3)+"..."}(n(),200));it(Q,{nested:!1,hasPointerEvents:!1,get content(){return t(ue)},delayDurationMs:1e3,children:(ne,be)=>{var ye=ch(),ee=b(ye),ze=pe=>{it(pe,{nested:!1,hasPointerEvents:!1,content:"Draft message",children:(se,te)=>{var re=B(),le=w(re);Ae(le,()=>xn.Root,(ve,$e)=>{$e(ve,{color:"neutral",size:0,variant:"soft",children:(ce,ge)=>{qe(ce,{size:0,children:(de,we)=>{var Be=ie("Draft");r(de,Be)},$$slots:{default:!0}})},$$slots:{default:!0}})}),r(se,re)},$$slots:{default:!0}})};k(ee,pe=>{t(E)&&V(f,"$draft",a)?.exchange?.request_message&&pe(ze)});var Ie=$(ee,2),Ee=pe=>{qe(pe,{size:1,truncate:!0,class:"draft-title",children:(se,te)=>{var re=ie();he(()=>He(re,n()||e.thread.conversation?.draftExchange?.request_message||`New ${oh[e.thread.type]}`)),r(se,re)},$$slots:{default:!0}})},_e=pe=>{var se=B(),te=w(se),re=ve=>{hl(ve,{get value(){return n()},onRename:C,onCancel:_})},le=ve=>{qe(ve,{size:1,truncate:!0,weight:"regular",children:($e,ce)=>{var ge=ie();he(()=>He(ge,n())),r($e,ge)},$$slots:{default:!0}})};k(te,ve=>{t(v)?ve(re):ve(le,!1)},!0),r(pe,se)};k(Ie,pe=>{t(E)?pe(Ee):pe(_e,!1)}),r(ne,ye)},$$slots:{default:!0}})}var K=$(z,2),J=ue=>{var ne=dh(),be=w(ne);gl(be,{get userMessages(){return V(t(T),"$userMessages",a)}});var ye=$(be,2);vl(b(ye),{get thread(){return e.thread},get type(){return t(I)},afterDelete:D,onTogglePinned:U,onRename:p,onOptionsOpened:P,onOptionSelected:H}),r(ue,ne)};k(K,ue=>{t(E)||ue(J)}),r(F,G)}),yn(x,(F,G)=>pl?.(F,G),()=>l()&&!Wo()),he(F=>N=ft(x,1,`agent-row agent-row--${e.thread.type??""} ${lr}`,"svelte-7gavtm",N,F),[()=>({"agent-row--active":l()})]),r(s,x),fe(),i()}Nn(["click","keydown"]);const hh=6048e5;function ml(s,e){if(!s?.expires_at)return!1;const n=new Date(s.expires_at).getTime(),o=Date.now(),a=n-o;return e&&o<new Date(s.updated_at).getTime()+24*e*60*60*1e3?!1:a<hh}var ph=h('<div class="remote-agent-icon svelte-84e7gj"><!></div>');function mh(s,e){me(e,!0);const[n,o]=je(),a=Lc();let i=d(()=>ml(e.remoteAgent.agent,V(a,"$remoteAgentsResumeHintAvailableTtlDays",n))),l=d(()=>e.remoteAgent.agent?.expires_at?Ui(new Date(e.remoteAgent.agent.expires_at),new Date):0),c=d(()=>t(l)<0?"This remote agent will be deleted soon due to inactivity.":`${Hr(t(l),"day")} remaining`);var u=ph(),v=b(u),m=f=>{it(f,{get content(){return t(c)},class:"remote-agent-icon__warning",children:(g,A)=>{Te(g,{name:"circle-alert",size:2})},$$slots:{default:!0}})},y=f=>{Te(f,{name:"cloud-upload",size:2})};k(v,f=>{t(i)?f(m):f(y,!1)}),r(s,u),fe(),o()}var fh=h("<!> <!>",1),_h=h("<div><!></div>");function yh(s,e){me(e,!0);const n=()=>V(v,"$remoteAgentsModel",o),[o,a]=je();let i=S(e,"agentId",19,()=>{}),l=S(e,"status",19,()=>{}),c=S(e,"workspaceStatus",19,()=>{}),u=S(e,"hasUpdates",3,!1);const v=kt("remoteAgentsModel");let m=d(()=>c()===Er.workspaceRunning?rg(l()):og(c())),y=d(()=>(l()===Zn.agentIdle||l()===Zn.agentFailed)&&u()),f=d(()=>i()??n().currentAgentId),g=d(()=>n().newAgentDraft),A=d(()=>t(f)?n().notificationSettings[t(f)]??!0:!!t(g)&&t(g).enableNotification),C=d(()=>t(A)?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(i()===n().currentAgentId?"You will not be notified while you're actively viewing this agent.":""));(function(_,p){me(p,!0);let E=S(p,"enabled",3,!1),M=S(p,"isUnread",3,!1),I=S(p,"unreadCount",3,1),T=S(p,"statusColor",3,"neutral"),O=S(p,"tooltipText",3,"");const P=Eo();function H(j){j.stopPropagation(),P("toggle")}var D=_h(),U=b(D);{let j=d(()=>[Xt.Hover]);it(U,{get content(){return O()},hasPointerEvents:!1,get triggerOn(){return t(j)},children:(x,N)=>{{let W=d(()=>M()?T():"neutral"),F=d(()=>M()?"soft":"ghost-block");Nt(x,{get color(){return t(W)},size:1,get variant(){return t(F)},onclick:H,onkeydown:G=>{G.key!=="Enter"&&G.key!==" "||G.stopPropagation()},radius:"full",children:(G,z)=>{var q=fh(),L=w(q),R=K=>{Te(K,{name:"bell",size:2})},Y=K=>{Te(K,{name:"bell-off",size:2})};k(L,K=>{E()?K(R):K(Y,!1)});var Z=$(L,2),Q=K=>{var J=ie();he(()=>He(J,I())),r(K,J)};k(Z,K=>{M()&&I()&&K(Q)}),r(G,q)},$$slots:{default:!0}})}},$$slots:{default:!0}})}he(()=>ft(D,1,"c-notify-button "+(E()?"c-notify-button--enabled":""))),r(_,D),fe()})(s,{get enabled(){return t(A)},get isUnread(){return t(y)},get statusColor(){return t(m)},get tooltipText(){return t(C)},$$events:{toggle:async function(){if(t(f))v.setNotificationEnabled(t(f),!t(A));else{const _=v.newAgentDraft;if(_){const p=t(A);v.setNewAgentDraft({..._,enableNotification:!p});try{const E=p?Mr.disableNotifications:Mr.enableNotifications;await v.reportRemoteAgentSetupWindowEvent(E)}catch(E){console.error("Failed to report notification toggle event:",E)}}}}}}),fe(),a()}var bh=h('<div class="repo-pill svelte-u5mc2n"><div class="repo-pill-icon svelte-u5mc2n"><!></div> <div class="repo-pill-text svelte-u5mc2n"> </div></div>');const $h="thread-list-item";function wh(s,e){s.key!=="Enter"&&s.key!==" "||e()}var kh=h('<div class="update-indicator svelte-17il0gn"></div>'),Ah=h("<div><!></div>"),Eh=h('<div class="setup-script-badge svelte-17il0gn"><!></div>'),Ch=h('<div class="agent-title-content svelte-17il0gn"><!> <!> <!></div>'),Th=h('<div class="agent-status svelte-17il0gn"><!></div> <!>',1),Sh=h('<div class="agent-actions svelte-17il0gn"><!></div>'),Ih=h('<div class="agent-content svelte-17il0gn"><div class="agent-details svelte-17il0gn"><div class="agent-details--left svelte-17il0gn"><div class="agent-icon svelte-17il0gn"><!> <!></div> <!> <!> <div class="agent-title svelte-17il0gn"><!></div></div> <!></div> <!> <!></div>'),Rh=h('<div role="button" tabindex="0"><!></div>');function za(s,e){me(e,!0);const n=()=>V(g,"$threadTitle",a),o=()=>V(t(C),"$isThreadPinned",a),[a,i]=je();let l=S(e,"isSelected",3,!1),c=S(e,"showIfPinned",3,!1),u=S(e,"containerWidth",3,0),v=S(e,"afterDelete",19,()=>{}),m=S(e,"currentRepoUrl",3,""),y=Oe(!1);const f=Ct(),g=e.thread.title,A=cr(e.thread.id),C=d(()=>qr(e.thread.id)),_=kt(Uo);async function p(F){if(F.trim()&&F!==n()){const G=n();await e.remoteAgentsModel.updateRemoteAgentTitle(e.thread.id,F),f(gt(Ze.SHARED.THREAD_RENAMED,{..._(e.thread),oldTitleLength:G.length,newTitleLength:F.length}))}E()}function E(){X(y,!1)}function M(){X(y,!0)}let I=d(()=>e.thread.isNew),T=d(()=>e.thread.type);const O=d(()=>Js(e.thread.conversation?.id));function P(){e.onSelect(e.thread)}function H(){f(gt(Ze.SHARED.THREAD_OPTIONS_OPENED,_(e.thread)))}function D(F){f(gt(Ze.SHARED.THREAD_OPTION_SELECTED,{..._(e.thread),option:F}))}function U(){v()?.(e.thread)}function j(F){e.onTogglePinned(e.thread,F)}var x=Rh();let N;x.__click=P,x.__keydown=[wh,P],nt(x,"data-testid",$h);var W=b(x);Ts(W,()=>`${n()}--${o()}`,F=>{var G=Ih(),z=b(G),q=b(z),L=b(q),R=b(L),Y=Ee=>{var _e=kh();r(Ee,_e)};k(R,Ee=>{e.thread.has_updates&&Ee(Y)}),mh($(R,2),{get remoteAgent(){return e.thread}});var Z=$(L,2),Q=Ee=>{var _e=Ah();let pe;var se=b(_e);{let te=d(()=>o()?"Unpin thread":"Pin thread");it(se,{nested:!1,hasPointerEvents:!1,get content(){return t(te)},children:(re,le)=>{{let ve=d(()=>o()?"Unpin thread":"Pin thread");Nt(re,{variant:"ghost-block",color:"accent",size:.5,class:"pin-icon__button",onclick:$e=>{$e.stopPropagation(),j($e)},onkeydown:$e=>{$e.key!=="Enter"&&$e.key!==" "||($e.stopPropagation(),j($e))},type:"button",get"aria-label"(){return t(ve)},children:($e,ce)=>{Te($e,{name:"pin",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}he(te=>pe=ft(_e,1,"pin-icon svelte-17il0gn",null,pe,te),[()=>({"is-pinned":o()})]),r(Ee,_e)};k(Z,Ee=>{!t(I)&&o()&&c()&&Ee(Q)});var K=$(Z,2),J=Ee=>{const _e=d(()=>Hv(e.thread.agent));(function(pe,se){me(se,!0);{let te=d(()=>`Repository: ${se.repoInfo.fullPath}`);it(pe,{nested:!1,hasPointerEvents:!1,get content(){return t(te)},children:(re,le)=>{var ve=bh(),$e=b(ve),ce=b($e);Te(ce,{name:"github",size:0});var ge=$($e,2),de=b(ge);he(()=>He(de,se.repoInfo.name)),r(re,ve)},$$slots:{default:!0}})}fe()})(Ee,{get repoInfo(){return t(_e)}})};k(K,Ee=>{Fv(e.thread.agent,m())&&Ee(J)});var ue=$(K,2),ne=b(ue);{let Ee=d(()=>function(_e="",pe){return _e.length<=pe?_e:_e.slice(0,pe-3)+"..."}(n(),200));it(ne,{nested:!1,hasPointerEvents:!1,get content(){return t(Ee)},delayDurationMs:1e3,children:(_e,pe)=>{var se=Ch(),te=b(se),re=de=>{it(de,{nested:!1,hasPointerEvents:!1,content:"Setup Script Agent",children:(we,Be)=>{var De=Eh(),Le=b(De);Te(Le,{name:"terminal"}),r(we,De)},$$slots:{default:!0}})};k(te,de=>{e.thread.is_setup_script_agent&&de(re)});var le=$(te,2),ve=de=>{it(de,{nested:!1,hasPointerEvents:!1,content:"Draft message",children:(we,Be)=>{var De=B(),Le=w(De);Ae(Le,()=>xn.Root,(Me,We)=>{We(Me,{color:"neutral",size:0,variant:"soft",children:(ke,Re)=>{qe(ke,{size:0,children:(xe,ae)=>{var Pe=ie("Draft");r(xe,Pe)},$$slots:{default:!0}})},$$slots:{default:!0}})}),r(we,De)},$$slots:{default:!0}})};k(le,de=>{t(I)&&V(A,"$draft",a)?.exchange?.request_message&&de(ve)});var $e=$(le,2),ce=de=>{qe(de,{size:1,truncate:!0,class:"setup-script-title",children:(we,Be)=>{var De=ie("Generate a setup script");r(we,De)},$$slots:{default:!0}})},ge=de=>{var we=B(),Be=w(we),De=Me=>{qe(Me,{size:1,truncate:!0,class:"draft-title",children:(We,ke)=>{var Re=ie();he(()=>He(Re,n()||e.thread.conversation?.draftExchange?.request_message||"New Remote Agent")),r(We,Re)},$$slots:{default:!0}})},Le=Me=>{var We=B(),ke=w(We),Re=ae=>{hl(ae,{get value(){return n()},onRename:p,onCancel:E})},xe=ae=>{{let Pe=d(()=>e.thread.has_updates?"medium":"regular");qe(ae,{size:1,truncate:!0,get weight(){return t(Pe)},children:(Ce,Se)=>{var Fe=ie();he(()=>He(Fe,n())),r(Ce,Fe)},$$slots:{default:!0}})}};k(ke,ae=>{t(y)?ae(Re):ae(xe,!1)},!0),r(Me,We)};k(Be,Me=>{t(I)?Me(De):Me(Le,!1)},!0),r(de,we)};k($e,de=>{e.thread.type==="remoteAgent"&&e.thread.is_setup_script_agent?de(ce):de(ge,!1)}),r(_e,se)},$$slots:{default:!0}})}var be=$(q,2),ye=Ee=>{var _e=Th(),pe=w(_e),se=b(pe);{let te=d(()=>u()>300);qv(se,{get workspaceStatus(){return e.thread.workspace_status},get status(){return e.thread.status},get isExpanded(){return t(te)},get hasUpdates(){return e.thread.has_updates}})}yh($(pe,2),{get agentId(){return e.thread.agent.remote_agent_id},get status(){return e.thread.status},get workspaceStatus(){return e.thread.workspace_status}}),r(Ee,_e)};k(be,Ee=>{e.thread.status&&Ee(ye)});var ee=$(z,2);gl(ee,{get userMessages(){return V(t(O),"$userMessages",a)}});var ze=$(ee,2),Ie=Ee=>{var _e=Sh();vl(b(_e),{get thread(){return e.thread},get type(){return t(T)},afterDelete:U,onTogglePinned:j,onRename:M,onOptionsOpened:H,onOptionSelected:D}),r(Ee,_e)};k(ze,Ee=>{To(e.thread.id)||Ee(Ie)}),r(F,G)}),yn(x,(F,G)=>pl?.(F,G),()=>l()&&!Wo()),he(F=>N=ft(x,1,`agent-row agent-row--${e.thread.type??""} ${lr}`,"svelte-17il0gn",N,F),[()=>({"agent-row--active":l(),"agent-row--setup-script":e.thread.is_setup_script_agent})]),r(s,x),fe(),i()}Nn(["click","keydown"]);var xh=h('<div class="c-threads-list__group"><div class="c-threads-list__header svelte-1636rk3"><!> <div class="c-threads-list__actions svelte-1636rk3"><div class="c-threads-list__home-button svelte-1636rk3"><!></div></div></div> <div class="c-threads-list__items svelte-1636rk3"></div></div>'),Mh=h("<!> <!>",1),Dh=h('<div class="c-threads-list__group"><div class="c-threads-list__header svelte-1636rk3"><!> <div class="c-threads-list__options svelte-1636rk3"><!></div></div> <div class="c-threads-list__items svelte-1636rk3"></div></div>'),Oh=h('<div class="c-threads-list svelte-1636rk3"><!> <!></div>'),Nh=h('<div hidden="" class="portal svelte-m2b124"><!></div>');function Es(s,e){me(e,!0);let n=S(e,"target",3,"body");var o=Nh(),a=b(o);st(a,()=>e.children??wt),yn(o,(i,l)=>function(c,u="body"){let v;async function m(y){if(typeof(u=y)=="string"){if(v=document.querySelector(u),v===null&&(await kn(),v=document.querySelector(u)),v===null)throw new Error(`No element found matching css selector: "${u}"`)}else{if(!(u instanceof HTMLElement))throw new TypeError(`Unknown portal target type: ${u===null?"null":typeof u}. Allowed types: string (CSS selector) or HTMLElement.`);v=u}v.appendChild(c),c.hidden=!1}return m(u),{update:m,destroy:function(){c.parentNode&&c.parentNode.removeChild(c)}}}(i,l),n),r(s,o),fe()}var zh=h('<div class="c-threads-search__icon-button"><!></div>'),Lh=h('<div class="search-field-container__icon svelte-1icxmtj" slot="iconLeft"><!></div>'),Ph=h('<div class="c-threads-search"><div class="c-threads-search__field-container svelte-1icxmtj"><!></div></div>'),Bh=h("<!> <!>",1),Fh=h('<div class="skeleton-row svelte-4a6h7v"><div class="skeleton-icon svelte-4a6h7v"></div> <div class="skeleton-text svelte-4a6h7v"></div></div>'),qh=h('<div class="loading-state svelte-4a6h7v"></div>'),Hh=h('<div class="l-header-container svelte-12rln4c"><!></div>');function fl(s,e){var n=Hh(),o=b(n);st(o,()=>e.children),r(s,n)}class Wh{_activeTabValue;_nullable;_size;_variant;_color;_loop;_isResizing;_scrollable;_hideLabelOnNarrow;_tabElements=[];activeTab;nullable;size;variant;color;loop;isResizing;scrollable;hideLabelOnNarrow;constructor(e){this._activeTabValue=Yt(e?.activeTab??void 0),this._nullable=Yt(e?.nullable??!1),this._size=Yt(e?.size??2),this._variant=Yt(e?.variant??"default"),this._color=Yt(e?.color??"accent"),this._loop=Yt(e?.loop??!0),this._isResizing=Yt(!1),this._scrollable=Yt(e?.scrollable??!0),this._hideLabelOnNarrow=Yt(e?.hideLabelOnNarrow??!1),this.activeTab=It([this._activeTabValue,this._nullable],([n,o])=>o||n!==void 0?n:this._tabElements.filter(l=>!l.hasAttribute("disabled")&&l.getAttribute("aria-disabled")!=="true")[0]?.getAttribute("data-value")||void 0),this.nullable=un(this._nullable),this.size=un(this._size),this.variant=un(this._variant),this.color=un(this._color),this.loop=un(this._loop),this.isResizing=un(this._isResizing),this.scrollable=un(this._scrollable),this.hideLabelOnNarrow=un(this._hideLabelOnNarrow)}_getWritableStores(){return{activeTabValue:this._activeTabValue,nullable:this._nullable,size:this._size,variant:this._variant,color:this._color,loop:this._loop,isResizing:this._isResizing,scrollable:this._scrollable,hideLabelOnNarrow:this._hideLabelOnNarrow}}_updateTabElements(e){this._tabElements=e,this._activeTabValue.update(n=>n)}}class Gh{constructor(e){this._model=e,this._stores=this._model._getWritableStores(),this._activeTabUnsubscribe=this._model.activeTab.subscribe(()=>{this.updateSlidingBackground()})}_stores;_tabListElement;_slidingBackgroundElement;_resizeObserver;_mutationObserver;_resizeTimeout;_scrollRafId;_activeTabUnsubscribe;_tabElements=[];setActiveTab(e){if(!Rt(this._stores.nullable)&&e===void 0){const n=this._tabElements.filter(a=>!a.hasAttribute("disabled")&&a.getAttribute("aria-disabled")!=="true"),o=n[0]?.getAttribute("data-value");return o?void this._stores.activeTabValue.set(o):void 0}this._stores.activeTabValue.set(e)}setNullable(e){this._stores.nullable.set(e)}setSize(e){this._stores.size.set(e)}setVariant(e){this._stores.variant.set(e)}setColor(e){this._stores.color.set(e)}setLoop(e){this._stores.loop.set(e)}setScrollable(e){this._stores.scrollable.set(e)}setHideLabelOnNarrow(e){this._stores.hideLabelOnNarrow.set(e)}registerTabList(e){return this._tabListElement&&this._tabListElement!==e&&this._cleanupObservers(),this._tabListElement=e,this._setupObservers(),()=>{this._tabListElement===e&&(this._tabListElement=void 0,this._cleanupObservers())}}registerSlidingBackground(e){return this._slidingBackgroundElement=e,this.updateSlidingBackground(),()=>{this._slidingBackgroundElement===e&&(this._slidingBackgroundElement=void 0)}}withTabList(){return e=>{const n=this.registerTabList(e);return this.updateTabElements(),{destroy:n}}}withSlidingBackground(){return e=>({destroy:this.registerSlidingBackground(e)})}updateTabElements(){this._tabListElement&&(this._tabElements=Array.from(this._tabListElement.querySelectorAll('[role="tab"]')),this._model._updateTabElements(this._tabElements))}getEnabledTabElements(){return this._tabElements.filter(e=>!e.hasAttribute("disabled")&&e.getAttribute("aria-disabled")!=="true")}findNextEnabledTabIndex(e,n,o){const a=this.getEnabledTabElements();if(a.length===0)return-1;const i=this._tabElements[e],l=a.indexOf(i);if(l===-1)return this._tabElements.indexOf(a[0]);let c=l+n;return o?c>=a.length?c=0:c<0&&(c=a.length-1):c=Math.max(0,Math.min(a.length-1,c)),this._tabElements.indexOf(a[c])}handleKeyboardNavigation(e){if(!this._tabElements.length)return!1;const n=this._tabElements.findIndex(c=>c===e.target);if(n===-1)return!1;const o=this.getEnabledTabElements();if(o.length===0)return!1;let a=n,i=!1;const l=Rt(this._stores.loop);switch(e.key){case"ArrowLeft":e.preventDefault(),a=this.findNextEnabledTabIndex(n,-1,l),i=!0;break;case"ArrowRight":e.preventDefault(),a=this.findNextEnabledTabIndex(n,1,l),i=!0;break;case"Home":e.preventDefault(),a=this._tabElements.indexOf(o[0]),i=!0;break;case"End":e.preventDefault(),a=this._tabElements.indexOf(o[o.length-1]),i=!0;break;case"Escape":e.preventDefault(),Rt(this._stores.nullable)&&this.setActiveTab(void 0),i=!0;break}if(i&&a!==n){this._tabElements[a]?.focus();const c=this._tabElements[a]?.getAttribute("data-value");c&&this.setActiveTab(c)}return i}updateSlidingBackground(){const e=Rt(this._model.activeTab),n=this._tabListElement?.querySelector(`.c-tab-button-wrapper > button[data-value="${e}"]`);if(!this._tabListElement||!this._slidingBackgroundElement)return;if(!n)return this._slidingBackgroundElement.style.setProperty("--slider-opacity","0"),void this._slidingBackgroundElement.style.setProperty("--slider-visibility","hidden");const o=n.getBoundingClientRect(),a=this._tabListElement.getBoundingClientRect(),i=this._tabListElement.scrollLeft||0,l=o.left-a.left+i,c=o.width,u=o.height;this._slidingBackgroundElement.style.setProperty("--slider-opacity","1"),this._slidingBackgroundElement.style.setProperty("--slider-visibility","visible"),this._slidingBackgroundElement.style.setProperty("--slider-width",`${c}px`),this._slidingBackgroundElement.style.setProperty("--slider-height",`${u}px`),this._slidingBackgroundElement.style.setProperty("--slider-transform",`translateX(${l}px)`)}scrollActiveTabIntoView(){if(!this._tabListElement)return;const e=Rt(this._model.activeTab);if(!e)return;const n=this._tabListElement.querySelector(`[data-value="${e}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}_setupObservers(){this._tabListElement&&(this._cleanupObservers(),this._tabListElement.addEventListener("scroll",this._handleScroll,{passive:!0}),this._resizeObserver=new ResizeObserver(()=>{this._stores.isResizing.set(!0),this.updateSlidingBackground(),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(()=>{this._stores.isResizing.set(!1)},100)}),this._tabListElement&&this._resizeObserver.observe(this._tabListElement),this._mutationObserver=new MutationObserver(()=>{this.updateTabElements(),this.updateSlidingBackground()}),this._tabListElement&&this._mutationObserver.observe(this._tabListElement,{childList:!0,subtree:!0}))}_handleScroll=()=>{this._scrollRafId!==void 0&&cancelAnimationFrame(this._scrollRafId),this._scrollRafId=requestAnimationFrame(()=>{this.updateSlidingBackground(),this._scrollRafId=void 0})};_cleanupObservers(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._resizeObserver=void 0,this._mutationObserver=void 0,this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=void 0),this._scrollRafId!==void 0&&(cancelAnimationFrame(this._scrollRafId),this._scrollRafId=void 0),this._tabListElement&&this._tabListElement.removeEventListener("scroll",this._handleScroll),this._stores.isResizing.set(!1)}destroy(){this._cleanupObservers(),this._activeTabUnsubscribe?.(),this._tabListElement=void 0,this._slidingBackgroundElement=void 0,this._activeTabUnsubscribe=void 0}}const _l=Symbol("tab-group");function Go(){return kt(_l)}var Uh=h('<div role="tablist"><!></div>');function yl(s,e){me(e,!0);const n=()=>V(p,"$activeTabStore",o),[o,a]=je();let i=S(e,"value",19,()=>{}),l=S(e,"nullable",3,!1),c=S(e,"size",3,2),u=S(e,"variant",3,"default"),v=S(e,"color",3,"accent"),m=S(e,"loop",3,!0),y=S(e,"scrollable",3,!0),f=S(e,"hideLabelOnNarrow",3,!1),g=S(e,"class",3,"");const A=function(H){const D=new Wh(H);return{model:D,controller:new Gh(D)}}({activeTab:i(),nullable:l(),size:c(),variant:u(),color:v(),loop:m(),scrollable:y(),hideLabelOnNarrow:f()}),{model:C,controller:_}=A,{activeTab:p,size:E,variant:M,color:I}=C,T=Eo();Rn(_l,A),fs(()=>{_.destroy()}),rt(()=>{_.setActiveTab(i())}),rt(()=>{_.setNullable(l())}),rt(()=>{_.setSize(c())}),rt(()=>{_.setVariant(u())}),rt(()=>{_.setColor(v())}),rt(()=>{_.setLoop(m())}),rt(()=>{_.setScrollable(y())}),rt(()=>{_.setHideLabelOnNarrow(f())}),rt(()=>{n()!==void 0&&(T("change",{value:n()}),e.onchange?.({value:n()}))});var O=Uh(),P=b(O);st(P,()=>e.children??wt),he(()=>ft(O,1,Dn(["ds-tabs",`ds-tabs--size-${V(E,"$sizeStore",o)}`,`ds-tabs--variant-${V(M,"$variantStore",o)}`,`ds-tabs--color-${V(I,"$colorStore",o)}`,g()]),"svelte-dgd3cy")),r(s,O),fe(),a()}function Vh(s,e){var n=B(),o=w(n);st(o,()=>e.children??wt),r(s,n)}function jh(s,e){e.handleKeyboardNavigation(s)}var Kh=h("<!> <!>",1),Yh=h('<div class="ds-tab-list-dropdown"><!></div>'),Xh=h('<div class="background-slider svelte-1rv1smz" aria-hidden="true"></div>'),Jh=h('<div role="tablist" aria-label="Tab navigation" tabindex="-1"><!> <!></div>'),Qh=h("<div><!> <!></div>");function bl(s,e){me(e,!0);const n=()=>V(C,"$activeTabStore",l),o=()=>V(I,"$scrollableStore",l),a=()=>V(E,"$colorStore",l),i=()=>V(_,"$sizeStore",l),[l,c]=je(),u=S(e,"class",3,""),v=S(e,"showSlidingBackground",3,!1),m=S(e,"outline",3,!1),y=S(e,"expandToFit",3,!1),f=Go();if(!f)throw new Error("TabListAugment must be used within a TabsAugment component");const{model:g,controller:A}=f,{activeTab:C,size:_,variant:p,color:E,isResizing:M,scrollable:I}=g,T=A.withTabList(),O=A.withSlidingBackground();rt(()=>{n()&&o()&&A.scrollActiveTabIntoView()});const P=d(()=>o()?Gi:Vh);let H=Oe(void 0),D=Oe(Wn([]));rt(()=>{if(t(H)){const q=Array.from(t(H).querySelectorAll('[role="tab"]'));X(D,q.map(L=>{const R=L.getAttribute("data-value")||"";return{value:R,label:L.textContent?.trim()||R,disabled:L.getAttribute("aria-disabled")==="true"||L.hasAttribute("disabled")}}),!0)}});const U=d(()=>t(D).find(q=>q.value===n())?.label||"Select tab");let j=Oe(0);const x=d(()=>e.dropdownBreakpoint!==void 0&&t(j)>0&&t(j)<=e.dropdownBreakpoint);var N=Qh();let W;var F=b(N),G=q=>{var L=Yh(),R=b(L);Ae(R,()=>Je.Root,(Y,Z)=>{Z(Y,{children:(Q,K)=>{var J=Kh(),ue=w(J);Ae(ue,()=>Je.Trigger,(be,ye)=>{ye(be,{children:(ee,ze)=>{xt(ee,{variant:"soft",get color(){return a()},get size(){return i()},class:"ds-tab-list-dropdown__trigger",children:(Ie,Ee)=>{qe(Ie,{size:2,truncate:!0,children:(_e,pe)=>{var se=ie();he(()=>He(se,t(U))),r(_e,se)},$$slots:{default:!0}})},$$slots:{default:!0,iconRight:(Ie,Ee)=>{Te(Ie,{name:"chevron-down",size:2,slot:"iconRight"})}}})},$$slots:{default:!0}})});var ne=$(ue,2);Ae(ne,()=>Je.Content,(be,ye)=>{ye(be,{side:"bottom",align:"start",children:(ee,ze)=>{var Ie=B(),Ee=w(Ie);Vt(Ee,17,()=>t(D),$n,(_e,pe)=>{var se=B(),te=w(se);{let re=d(()=>t(pe).value===n());Ae(te,()=>Je.Item,(le,ve)=>{ve(le,{get disabled(){return t(pe).disabled},get highlight(){return t(re)},onSelect:()=>{return $e=t(pe).value,void A.setActiveTab($e);var $e},children:($e,ce)=>{qe($e,{size:2,children:(ge,de)=>{var we=ie();he(()=>He(we,t(pe).label)),r(ge,we)},$$slots:{default:!0}})},$$slots:{default:!0}})})}r(_e,se)}),r(ee,Ie)},$$slots:{default:!0}})}),r(Q,J)},$$slots:{default:!0}})}),r(q,L)};k(F,q=>{e.dropdownBreakpoint!==void 0&&q(G)});var z=$(F,2);Ae(z,()=>t(P),(q,L)=>{L(q,{stretch:!0,children:(R,Y)=>{var Z=Jh();let Q;Z.__keydown=[jh,A];var K=b(Z);st(K,()=>e.children??wt);var J=$(K,2),ue=ne=>{var be=Xh();yn(be,ye=>O?.(ye)),r(ne,be)};k(J,ne=>{v()&&ne(ue)}),Pt(Z,ne=>X(H,ne),()=>t(H)),yn(Z,ne=>T?.(ne)),he(ne=>{Q=ft(Z,1,Dn(["ds-tab-list",`ds-tab-list--variant-${V(p,"$variantStore",l)}`,`ds-tab-list--color-${a()}`,`ds-tabs--size-${i()}`,u()]),"svelte-1rv1smz",Q,ne),nt(Z,"data-ds-color",a()),nt(Z,"data-active-tab",n())},[()=>({"ds-tab-list--with-sliding-background":v(),"ds-tab-list--outline":m(),"ds-tab-list--resizing":V(M,"$isResizingStore",l),"ds-tab-list--expand-to-fit":y()})]),r(R,Z)},$$slots:{default:!0}})}),he(q=>W=ft(N,1,"ds-tab-list-container svelte-1rv1smz",null,W,q),[()=>({"ds-tab-list-container--outline":m(),"ds-tab-list-container--collapsible":e.dropdownBreakpoint!==void 0,"ds-tab-list-container--collapsed":t(x)})]),yo(N,"clientWidth",q=>X(j,q)),r(s,N),fe(),c()}Nn(["keydown"]);var Zh=h('<div class="c-tab-button__content svelte-13dwl2i"><!></div>'),ep=h('<div class="c-tab-button-wrapper svelte-13dwl2i"><!></div>'),tp=h('<div class="ds-tab__left-icon svelte-1ngox2z"><!></div>'),np=h("<div><!></div>"),sp=h("<div><!></div>"),rp=h("<div><!> <!> <!></div>"),op=h("<div><!> <!></div>");function Qs(s,e){me(e,!0);const[n,o]=je();let a=S(e,"grow",3,!0),i=S(e,"disabled",3,!1),l=S(e,"class",3,"");const c=Go(),{size:u,variant:v,color:m,activeTab:y,hideLabelOnNarrow:f}=c?.model||{};let g=d(()=>u?V(u,"$sizeStore",n):2),A=d(()=>v?V(v,"$variantStore",n):"default"),C=d(()=>m?V(m,"$colorStore",n):"accent"),_=d(()=>!!y&&V(y,"$activeTabStore",n)===e.value),p=d(()=>!!f&&V(f,"$hideLabelOnNarrowStore",n));const E=Eo();function M(D){!i()&&c&&c.controller.setActiveTab(e.value),E("click",D)}let I=d(()=>["ds-tab",l()].filter(Boolean).join(" "));var T=op();let O,P;var H=b(T);{let D=d(()=>t(g)===0?.5:t(g)),U=d(()=>t(_)?"ds-tab__separator--active":"");Wr(H,{orientation:"vertical",get size(){return t(D)},get class(){return`ds-tab__separator ${t(U)??""}`}})}(function(D,U){me(U,!0);let j=S(U,"size",3,2),x=S(U,"variant",3,"default"),N=S(U,"color",3,"accent"),W=S(U,"active",3,!1),F=S(U,"disabled",3,!1),G=S(U,"class",3,""),z=hs(U,["$$slots","$$events","$$legacy","size","variant","color","active","disabled","class","children"]),q=d(()=>(x(),W()?"soft":"ghost-block")),L=d(N),R=d(()=>["c-tab-button",`c-tab-button--variant-${x()}`,W()&&"c-tab-button--active",F()&&"c-tab-button--disabled",G()].filter(Boolean).join(" "));var Y=ep(),Z=b(Y);{let Q=d(()=>x()==="pill"?"full":"medium"),K=d(()=>W()?0:-1);cv(Z,Fn({get size(){return j()},get variant(){return t(q)},get color(){return t(L)},get disabled(){return F()},highContrast:!1,loading:!1,alignment:"center",get radius(){return t(Q)},get class(){return t(R)},role:"tab",get"aria-selected"(){return W()},get tabindex(){return t(K)}},()=>z,{$$events:{click(J){Jn.call(this,U,J)},keydown(J){Jn.call(this,U,J)},keyup(J){Jn.call(this,U,J)},mousedown(J){Jn.call(this,U,J)},mouseover(J){Jn.call(this,U,J)},focus(J){Jn.call(this,U,J)},mouseleave(J){Jn.call(this,U,J)},blur(J){Jn.call(this,U,J)},contextmenu(J){Jn.call(this,U,J)}},children:(J,ue)=>{var ne=Zh(),be=b(ne);st(be,()=>U.children??wt),r(J,ne)},$$slots:{default:!0}}))}r(D,Y),fe()})($(H,2),{get size(){return t(g)},get variant(){return t(A)},get color(){return t(C)},get active(){return t(_)},get disabled(){return i()},get class(){return t(I)},get"aria-controls"(){return`panel-${e.value??""}`},get id(){return`tab-${e.value??""}`},get"data-value"(){return e.value},$$events:{click:M,keydown:function(D){D.key!=="Enter"&&D.key!==" "||i()||(D.preventDefault(),M(D)),E("keydown",D)}},children:(D,U)=>{var j=rp(),x=b(j),N=q=>{var L=tp(),R=b(L);st(R,()=>e.leftIcon??wt),r(q,L)};k(x,q=>{e.leftIcon&&q(N)});var W=$(x,2),F=q=>{var L=np();let R;var Y=b(L);st(Y,()=>e.children??wt),he(Z=>R=ft(L,1,"ds-tab__label svelte-1ngox2z",null,R,Z),[()=>({"ds-tab__label--hide-on-narrow":t(p)})]),r(q,L)};k(W,q=>{e.children&&q(F)});var G=$(W,2),z=q=>{var L=sp();let R;var Y=b(L);st(Y,()=>e.rightIcon??wt),he(Z=>R=ft(L,1,"ds-tab__right-icon svelte-1ngox2z",null,R,Z),[()=>({"ds-tab__right-icon--hide-on-narrow":t(p)})]),r(q,L)};k(G,q=>{e.rightIcon&&q(z)}),he(()=>ft(j,1,`ds-tab__content ds-tab--size-${t(g)??""}`,"svelte-1ngox2z")),r(D,j)},$$slots:{default:!0}}),he((D,U)=>{O=ft(T,1,"ds-tab svelte-1ngox2z",null,O,D),P=jn(T,"",P,U)},[()=>({"ds-tab--active":t(_)}),()=>({"--tab-button-flex":a()?"1":"0"})]),r(s,T),fe(),o()}var ap=h('<div class="c-panel-card__header hidden-when-empty"><!></div>'),ip=h('<div class="c-panel-card__body hidden-when-empty svelte-b410ro"><!></div>'),lp=h('<div class="c-panel-card__footer hidden-when-empty"><!></div>'),cp=h('<div class="c-panel-card svelte-b410ro"><!> <!> <!></div>');function Hn(s,e){const n=S(e,"minWidth",3,"250px"),o=S(e,"maxWidth",3,"auto");var a=cp();let i;var l=b(a),c=f=>{var g=ap(),A=b(g);st(A,()=>e.header),r(f,g)};k(l,f=>{e.header&&f(c)});var u=$(l,2),v=f=>{var g=ip(),A=b(g);st(A,()=>e.children),r(f,g)};k(u,f=>{e.children&&f(v)});var m=$(u,2),y=f=>{var g=lp(),A=b(g);st(A,()=>e.footer),r(f,g)};k(m,f=>{e.footer&&f(y)}),he(f=>i=jn(a,"",i,f),[()=>({"--panel-card-min-width":n(),"--panel-card-max-width":o()})]),tn(5,a,()=>ps,()=>({duration:150,y:-10})),r(s,a)}var dp=h('<div class="c-thread-panel-empty svelte-1vgfmx"><div class="c-thread-panel-empty__card svelte-1vgfmx"><!></div> <div class="c-thread-panel-empty__footer svelte-1vgfmx"><!></div></div>');function jr(s,e){var n=dp(),o=b(n),a=b(o);st(a,()=>e.children??wt);var i=$(o,2),l=b(i);st(l,()=>e.footer??wt),r(s,n)}var up=h('<div class="c-notifications-badge svelte-1gyhbvm"><!></div>');const vp=1e3,La=30,Uo="threadAnalyticsMetadata";function gp(s){if(To(s.id)||s.type!=="remoteAgent")return!1;const e=new Date(s.updated_at),n=new Date().getTime()-e.getTime();return Math.floor(n/1e3/60/60)<168}var hp=h('<div class="c-threads-panel__tooltip svelte-11ypmbd">Go back <!></div>'),pp=h('<div id="threads-search-button-container"></div>'),mp=h('<div class="reload-button"><!></div>'),fp=h('<div class="remote-tab__content svelte-11ypmbd"><!> Remote <!></div>'),_p=h("<!> <!>",1),yp=h('<div class="c-threads-panel__filters svelte-11ypmbd"><div class="c-threads-panel__filters-tabs svelte-11ypmbd"><!></div> <div id="threads-search-button-container"></div></div>'),bp=h('<div class="c-threads-panel__header svelte-11ypmbd"><!> <!> <!> <div class="c-threads-panel__title"><!></div> <div class="c-threads-panel__header-right svelte-11ypmbd"><!> <!> <!></div></div> <div class="c-threads-panel__filters-panel svelte-11ypmbd"><!> <!></div>',1),$p=h('<div class="c-threads-panel svelte-11ypmbd"><!> <div class="c-threads-panel__list svelte-11ypmbd"><!> <!> <!></div></div>');function wp(s,e){me(e,!0);const n=()=>V(g,"$remoteAgentsModel",m),o=()=>V(x,"$sortConversationsBy",m),a=()=>V(t(G),"$localAgentConversations",m),i=()=>V(t(F),"$chatConversations",m),l=()=>V(t(q),"$allPins",m),c=()=>V(t(W),"$newLocalConversation",m),u=()=>V(Z,"$agentExecutionMode",m),v=()=>V(Me,"$bulkDeletePromptDismissed",m),[m,y]=je(),f=qc,g=kt(dn.key),A=kt(Qi),C=kt(Lr.key),_=kt(gs.key),p=Ct();let E=S(e,"onClose",3,()=>{});const M=Ot("enableBulkDeleteThreads"),I=Ot("enableBackgroundAgents"),{store:T}=ys(),O=C.currentRepositoryUrl;function P(oe){const Ne=T.getState(),Ve=t(de).find(({threads:at})=>at.indexOf(oe)>=0),Xe=oe.type==="remoteAgent"?"Recent remote agents":Ve?.groupTitle,et=Js.select(Ne,oe.conversation?.id);return{threadType:oe.type,userMessages:et.length,section:Xe}}Rn(Uo,P),Jt(async()=>{try{C.getRemoteUrl()}catch(oe){console.error("Failed to get current repository URL:",oe)}});let H=d(()=>n().currentAgentId),D=d(()=>n().agentOverviews||[]),U=d(()=>n()&&V(I,"$enableBackgroundAgents",m));const j="desc",x=Yt("lastMessageTimestamp");let N=d(()=>o()||"lastMessageTimestamp"),W=d(jc),F=d(()=>Vc(o(),j)),G=d(()=>Uc(o(),j));const z=d(()=>V(A,"$sharedWebviewStore",m).state?.pinnedAgents);rt(()=>{t(z)&&p(Bc(t(z)))});const q=d(()=>Wc(a().map(({id:oe})=>oe).concat(i().map(({id:oe})=>oe)).concat(t(D).map(({remote_agent_id:oe})=>oe))));let L=d(()=>n().agentThreadsError),R=d(()=>n().isLoading),Y=d(()=>n().hasFetchedOnce);const Z=Co();function Q(oe){if(!oe)return new Date(0);const Ne=T.getState();return Gc.select(Ne,oe.id,t(N))}const K=ln();let J=d(()=>n().isActive?t(H)??f:V(K,"$currentConversationId",m));const ue=cr(K);let ne=d(()=>{if(n().isActive){if(n().isCreatingAgent)return;const oe=V(ue,"$draftExchange",m)?.exchange?.request_message;return{id:f,isNew:!0,type:Xs("remoteAgent"),title:oe,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),conversation:void 0,sortTimestamp:new Date}}if(c())return{id:c().id,isNew:!0,type:c().extraData?.isAgentConversation?"localAgent":"chat",title:Xs(""),updated_at:c().lastInteractedAtIso,started_at:c().createdAtIso,conversation:c(),sortTimestamp:Q(c()),userMessages:[]}}),be=d(()=>i().map(oe=>({id:oe.id,isNew:!1,title:ho(oe.id),type:"chat",updated_at:oe.lastInteractedAtIso,started_at:oe.createdAtIso,conversation:oe,sortTimestamp:Q(oe),userMessages:Js(oe.id)}))),ye=d(()=>a().map(oe=>({id:oe.id,isNew:!1,title:ho(oe.id),type:"localAgent",updated_at:oe.lastInteractedAtIso,started_at:oe.createdAtIso,conversation:oe,sortTimestamp:Q(oe),userMessages:Js(oe.id)}))),ee=d(()=>t(D).map(oe=>({id:oe.remote_agent_id,isNew:!1,title:Xs(Hc(oe)),type:"remoteAgent",updated_at:oe.updated_at,started_at:oe.started_at,status:oe.status,workspace_status:oe.workspace_status,is_setup_script_agent:oe.is_setup_script_agent,workspace_setup:oe.workspace_setup||{},agent:oe,sortTimestamp:new Date(oe.updated_at||oe.started_at),has_updates:oe.has_updates&&oe.remote_agent_id!==t(J)}))),ze=d(()=>t(ne)&&t(J)===t(ne).id);const Ie=d(()=>[t(ze)&&t(ne)?.type!=="remoteAgent"&&t(ne),...t(be),...t(ye)].filter(Boolean)),Ee=d(()=>[t(ze)&&t(ne)?.type==="remoteAgent"&&t(ne),...t(ee)].filter(Boolean));let _e=Oe(""),pe=Oe("local");Jt(()=>{const oe=(Ne=t(J),t(Ee).find(Ve=>Ve.id===Ne)?"remote":"local");var Ne;oe!==t(pe)&&X(pe,oe,!0)});let se=d(()=>t(pe)==="local"?t(Ie):t(Ee));const te=d(()=>t(_e).toLowerCase().split(/\s+/).filter(oe=>oe.length>0));let re=d(()=>t(te).length>0?t(se).filter(oe=>function(Ne,Ve,Xe,et){if(Ve.length===0)return!0;const at=Ra.get(Ne)||(Dg(Ne)?[Rt(Ne.title),Mg(Ne),xg(Ne,Xe,et)]:[Rt(Ne.title),Rt(Ne.userMessages).join(" ")]).filter(Boolean).join(" ").toLowerCase();return Ra.set(Ne,at),Ve.every($t=>at.includes($t))}(oe,t(te),n().currentAgentId,n().currentConversation)):t(se));function le(oe){if(!oe)return!1;if(oe.type==="remoteAgent"&&oe.has_updates&&g.optimisticallyClearAgentUpdates(oe.id),g.setIsActive(oe.type==="remoteAgent"),oe.type==="remoteAgent"){const Ne=_.switchToThread(oe.type,oe.id,u());return Ne&&E()(),Ne}return p(Rr(oe.id,{noopIfSameConversation:!0})),E()(),!0}let ve=d(()=>t(L)?.errorMessage),$e=d(()=>t(R)&&!t(Y)),ce=d(()=>!!t(ve)&&t(Y)),ge=d(()=>t(Y)&&t(re).length===0),de=d(()=>Ia(t(re),l())),we=()=>t(re).filter(gp).length,Be=d(()=>"Search "+(t(pe)==="local"?"Agent/Chat Threads":"Remote Threads"));async function De(oe){const Ne=[],Ve=[];for(const Xe of oe)Xe.type==="remoteAgent"?Ve.push(Xe.id):Ne.push(Xe.id);if(p(pi(Ne,{})),Ve.length>0&&g)for(const Xe of Ve)try{await g.deleteAgent(Xe,!0)}catch(et){console.error(`Failed to delete remote agent ${Xe}:`,et)}}let Le=Oe(0);const Me=Fc(),We=d(function(){return Ia(t(se),l()).find(oe=>oe.groupTitle===wn.Older)?.threads||[]}),ke=d(()=>t(We).length),Re=d(()=>t(Ie).length+t(Ee).length);let xe=d(()=>t(Re)>vp),ae=d(()=>V(M,"$enableBulkDeleteThreads",m)&&t(xe)&&!v());rt(()=>{t(ae)&&p(gt(Ze.WEBVIEW.BULK_DELETE_BANNER_SHOWN,{oldThreadsCount:t(ke),totalThreadsCount:t(Re)}))}),rt(()=>{t(Re)>0&&!t(xe)&&v()&&p(Jr(void 0))});const Pe=async()=>{if(p(gt(Ze.WEBVIEW.BULK_DELETE_BANNER_CLICKED,{oldThreadsCount:t(ke),totalThreadsCount:t(Re)})),t(ke)>0){const oe=t(ke),Ne=t(Re);await De(t(We)),p(gt(Ze.WEBVIEW.BULK_DELETE_CONFIRMED,{deletedThreadsCount:oe,totalThreadsCount:Ne})),p(Jr(void 0))}},Ce=()=>{p(gt(Ze.WEBVIEW.BULK_DELETE_BANNER_DISMISSED,{oldThreadsCount:t(ke),totalThreadsCount:t(Re),dismissalDurationDays:La})),p(Jr({timestamp:new Date().toISOString(),dismissedFor:`${La} days`}))};function Se(oe){oe.value!==t(pe)&&(oe.value!=="local"&&oe.value!=="remote"||(p(gt(Ze.WEBVIEW.THREADS_TAB_CHANGED,{newTab:oe.value,previousTab:t(pe)})),X(pe,oe.value,!0)))}function Fe(oe){p(gt(oe?Ze.SHARED.THREAD_SEARCH_OPENED:Ze.SHARED.THREAD_SEARCH_CLOSED,{}))}var Ge=$p(),ot=b(Ge);fl(ot,{children:(oe,Ne)=>{var Ve=bp(),Xe=w(Ve);{const Lt=St=>{Nt(St,{variant:"ghost-block",color:"neutral",size:.5,$$events:{click(...yt){E()?.apply(this,yt)}},children:(yt,Bt)=>{Te(yt,{name:"arrow-left",size:2})},$$slots:{default:!0}})};var et=b(Xe);on(et,{name:"toggleThreadsPanel",get handler(){return E()}});var at=$(et,2);on(at,{name:"closeThreadsPanel",get handler(){return E()}});var $t=$(at,2);it($t,{side:"bottom",nested:!1,content:yt=>{var Bt=hp(),At=$(b(Bt));fn(At,{commandName:"toggleThreadsPanel",keysOnly:!0}),r(yt,Bt)},children:(yt,Bt)=>{Lt(yt)},$$slots:{content:!0,default:!0}});var Wt=$($t,2),Mt=b(Wt);qe(Mt,{size:1,weight:"bold",children:(St,yt)=>{var Bt=ie("Threads");r(St,Bt)},$$slots:{default:!0}});var Dt=$(Wt,2),Gt=b(Dt),dt=St=>{var yt=pp();r(St,yt)};k(Gt,St=>{t(U)||St(dt)});var tt=$(Gt,2),pt=St=>{var yt=mp(),Bt=b(yt);it(Bt,{get content(){return`Failed to reload remote agents. Click to retry. ${t(ve)??""}`},nested:!1,hasPointerEvents:!1,children:(At,Ft)=>{Nt(At,{variant:"ghost-block",color:"neutral",size:.5,$$events:{click:mt=>{mt.stopPropagation(),n().refreshAgentThreads()}},children:(mt,qt)=>{Te(mt,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}}),r(St,yt)};k(tt,St=>{t(ce)&&St(pt)}),Wg($(tt,2),{get onNewThreadCreated(){return E()},showLabel:!1})}var vt=$(Xe,2),zt=b(vt),Ut=Lt=>{var St=yp(),yt=b(St);yl(b(yt),{size:1,color:"neutral",scrollable:!1,get value(){return t(pe)},onchange:Se,children:(Bt,At)=>{bl(Bt,{expandToFit:!1,showSlidingBackground:!0,children:(Ft,mt)=>{var qt=_p(),Et=w(qt);Qs(Et,{value:"local",children:(ut,ht)=>{var _t=ie("Local");r(ut,_t)},$$slots:{default:!0}}),Qs($(Et,2),{value:"remote",class:"remote-tab",children:(ut,ht)=>{var _t=fp(),rn=b(_t);Te(rn,{name:"cloud-upload"}),function(bn,Qt){me(Qt,!0);const cn=()=>V(vn,"$remoteAgentsModel",Zt),[Zt,gn]=je(),vn=kt(dn.key);let An=d(()=>cn().isActive?cn().currentAgentId:null),hn=d(()=>(cn().agentOverviews||[]).filter(ns=>!!ns.has_updates&&ns.remote_agent_id!==t(An)&&ns.status===Zn.agentIdle).length);var Mn=B(),Xn=w(Mn),mr=ns=>{var fr=up(),gc=b(fr);Ae(gc,()=>xn.Root,(hc,pc)=>{pc(hc,{size:0,color:"accent",variant:"solid",children:(mc,Z$)=>{$o(mc,{get value(){return t(hn)},willChange:!0})},$$slots:{default:!0}})}),tn(3,fr,()=>As,()=>({duration:150,start:.8})),r(ns,fr)};k(Xn,ns=>{t(hn)>0&&ns(mr)}),r(bn,Mn),fe(),gn()}($(rn,2),{}),r(ut,_t)},$$slots:{default:!0}}),r(Ft,qt)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(Lt,St)};k(zt,Lt=>{t(U)&&Lt(Ut)}),function(Lt,St){me(St,!0);let yt=S(St,"searchQuery",15,""),Bt=S(St,"placeholder",3,"Search threads"),At=S(St,"isSearchActive",31,()=>!!yt());function Ft(){St.trackSearchToggle?.(!At()),yt(""),At(!At())}function mt(){yt(""),At(!1)}let qt=Oe(void 0);function Et(Qt){Qt.stopPropagation(),Qt.key==="Escape"&&mt()}function ut(){yt().trim()||(mt(),St.trackSearchToggle?.(!1))}rt(()=>{At()&&t(qt)&&setTimeout(()=>{t(qt)?.focus()},200)});var ht=Bh(),_t=w(ht);Es(_t,{target:"#threads-search-button-container",children:(Qt,cn)=>{var Zt=B(),gn=w(Zt),vn=An=>{var hn=zh(),Mn=b(hn);it(Mn,{content:"Search threads",nested:!1,hasPointerEvents:!1,children:(Xn,mr)=>{Nt(Xn,{variant:"ghost-block",color:"neutral",size:.5,$$events:{click:Ft},children:(ns,fr)=>{Te(ns,{name:"search"})},$$slots:{default:!0}})},$$slots:{default:!0}}),tn(3,hn,()=>ps,()=>({y:6,duration:150})),r(An,hn)};k(gn,An=>{At()||An(vn)}),r(Qt,Zt)},$$slots:{default:!0}});var rn=$(_t,2),bn=Qt=>{var cn=Ph(),Zt=b(cn),gn=b(Zt);mi(gn,{get placeholder(){return Bt()},size:1,variant:"surface",class:"search-input",get value(){return yt()},set value(vn){yt(vn)},get textInput(){return t(qt)},set textInput(vn){X(qt,vn,!0)},$$events:{keydown:Et,blur:ut},$$slots:{iconLeft:(vn,An)=>{var hn=Lh(),Mn=b(hn);Te(Mn,{name:"search",size:1}),r(vn,hn)}}}),tn(3,Zt,()=>Bo,()=>({duration:150,axis:"y"})),r(Qt,cn)};k(rn,Qt=>{At()&&Qt(bn)}),r(Lt,ht),fe()}($(zt,2),{get placeholder(){return t(Be)},trackSearchToggle:Fe,get searchQuery(){return t(_e)},set searchQuery(Lt){X(_e,Lt,!0)}}),r(oe,Ve)}});var Ke=$(ot,2),Qe=b(Ke),Ye=oe=>{(function(Ne,Ve){var Xe=Ug(),et=b(Xe);ks(et,{variant:"soft",color:"neutral",size:1,padding:"var(--ds-spacing-3)",icon:$t=>{Te($t,{name:"info"})},children:($t,Wt)=>{var Mt=Gg(),Dt=$(b(Mt),3),Gt=b(Dt);xt(Gt,{variant:"soft",color:"neutral",size:1,$$events:{click(...tt){Ve.bulkDeleteCallback?.apply(this,tt)}},children:(tt,pt)=>{var vt=ie("Delete Old Threads");r(tt,vt)},$$slots:{default:!0}});var dt=$(Gt,2);xt(dt,{variant:"ghost",color:"neutral",size:1,$$events:{click(...tt){Ve.dismissBulkDeletePrompt?.apply(this,tt)}},children:(tt,pt)=>{var vt=ie("Dismiss");r(tt,vt)},$$slots:{default:!0}}),r($t,Mt)},$$slots:{icon:!0,default:!0}}),r(Ne,Xe)})(oe,{bulkDeleteCallback:Pe,dismissBulkDeletePrompt:Ce})};k(Qe,oe=>{t(ae)&&oe(Ye)});var bt=$(Qe,2);(function(oe,Ne){me(Ne,!0);let Ve=S(Ne,"recentRemoteAgents",19,()=>[]),Xe=S(Ne,"displayedGroups",19,()=>[]),et=S(Ne,"selectedThreadId",3,null),at=S(Ne,"currentRepoUrl",3,"");function $t(){Ne.remoteAgentsModel.showRemoteAgentHomePanel()}let Wt=d(()=>Ve().length),Mt=Oe(0);var Dt=Oh(),Gt=b(Dt),dt=pt=>{var vt=xh(),zt=b(vt),Ut=b(zt);qe(Ut,{size:1,weight:"light",color:"secondary",children:(At,Ft)=>{var mt=ie();he(qt=>He(mt,`Recent remote ${qt??""}`),[()=>Pc(t(Wt),"agent")]),r(At,mt)},$$slots:{default:!0}});var Lt=$(Ut,2),St=b(Lt),yt=b(St);it(yt,{content:"Expand remote agents dashboard",nested:!1,hasPointerEvents:!1,children:(At,Ft)=>{Nt(At,{variant:"ghost-block",color:"neutral",size:.5,$$events:{click:$t},children:(mt,qt)=>{Te(mt,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}});var Bt=$(zt,2);Vt(Bt,21,Ve,At=>At.id,(At,Ft)=>{{let mt=d(()=>et()===t(Ft).id);za(At,{get remoteAgentsModel(){return Ne.remoteAgentsModel},get thread(){return t(Ft)},get containerWidth(){return t(Mt)},get currentRepoUrl(){return at()},get isSelected(){return t(mt)},get afterDelete(){return Ne.onThreadDelete},get onSelect(){return Ne.onThreadSelect},get onTogglePinned(){return Ne.onTogglePinned}})}}),r(pt,vt)};k(Gt,pt=>{t(Wt)>0&&pt(dt)});var tt=$(Gt,2);Vt(tt,17,Xe,pt=>`${pt.groupTitle}`,(pt,vt)=>{var zt=Dh(),Ut=b(zt),Lt=b(Ut);qe(Lt,{size:1,weight:"light",color:"secondary",children:(At,Ft)=>{var mt=ie();he(()=>He(mt,t(vt).groupTitle)),r(At,mt)},$$slots:{default:!0}});var St=$(Lt,2),yt=b(St);Ae(yt,()=>Je.Root,(At,Ft)=>{Ft(At,{children:(mt,qt)=>{var Et=Mh(),ut=w(Et);Ae(ut,()=>Je.Trigger,(_t,rn)=>{rn(_t,{children:(bn,Qt)=>{Nt(bn,{variant:"ghost-block",color:"neutral",size:.5,title:"Group options",children:(cn,Zt)=>{Te(cn,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var ht=$(ut,2);Ae(ht,()=>Je.Content,(_t,rn)=>{rn(_t,{size:1,side:"bottom",align:"end",children:(bn,Qt)=>{var cn=B(),Zt=w(cn);Ae(Zt,()=>Je.Item,(gn,vn)=>{vn(gn,{color:"error",onSelect:()=>Ne.onDeleteAllThreadsInGroup(t(vt).threads),children:(An,hn)=>{var Mn=ie();he(Xn=>He(Mn,`Delete ${Xn??""}`),[()=>Hr(t(vt).threads.length,"thread")]),r(An,Mn)},$$slots:{default:!0,iconLeft:(An,hn)=>{Te(An,{name:"trash",slot:"iconLeft"})}}})}),r(bn,cn)},$$slots:{default:!0}})}),r(mt,Et)},$$slots:{default:!0}})});var Bt=$(Ut,2);Vt(Bt,21,()=>t(vt).threads,At=>At.id,(At,Ft)=>{var mt=B(),qt=w(mt),Et=ht=>{{let _t=d(()=>et()===t(Ft).id);za(ht,{get remoteAgentsModel(){return Ne.remoteAgentsModel},get thread(){return t(Ft)},get containerWidth(){return t(Mt)},get currentRepoUrl(){return at()},get isSelected(){return t(_t)},get afterDelete(){return Ne.onThreadDelete},get onSelect(){return Ne.onThreadSelect},get onTogglePinned(){return Ne.onTogglePinned}})}},ut=ht=>{{let _t=d(()=>et()===t(Ft).id);gh(ht,{get thread(){return t(Ft)},showIfPinned:!0,get isSelected(){return t(_t)},get afterDelete(){return Ne.onThreadDelete},get onSelect(){return Ne.onThreadSelect},get onTogglePinned(){return Ne.onTogglePinned}})}};k(qt,ht=>{(function(_t){return _t.type==="remoteAgent"})(t(Ft))?ht(Et):ht(ut,!1)}),r(At,mt)}),r(pt,zt)}),yo(Dt,"clientWidth",pt=>X(Mt,pt)),r(oe,Dt),fe()})(bt,{get displayedGroups(){return t(de)},get selectedThreadId(){return t(J)},get remoteAgentsModel(){return g},get currentRepoUrl(){return V(O,"$currentRepoUrl",m)},onThreadDelete:function(oe){if(oe.type==="remoteAgent"&&g.reportRemoteAgentThreadListEvent(yr.deleteAgent,we(),oe.id),p(gt(Ze.SHARED.THREAD_DELETED,P(oe))),t(J)!==oe.id)return;const Ne=t(de).find(({threads:at})=>at.indexOf(oe)>=0),Ve=Ne?.threads||[],Xe=Ve.indexOf(oe),et=Xe>=0?Ve[Xe+1]||Ve[Xe-1]:void 0;et&&le(et)},onThreadSelect:function(oe){le(oe),oe.type==="remoteAgent"&&g.reportRemoteAgentThreadListEvent(yr.selectAgent,t(ee).length,oe.id),p(gt(Ze.SHARED.THREAD_SELECTED,P(oe)))},onTogglePinned:async function(oe,Ne){if(Ne&&Ne.stopPropagation(),oe.isNew)return;const Ve=T.getState(),Xe=oe.type==="remoteAgent"?l()[oe.id]||!1:qr.select(Ve,oe.id);if(oe.type==="remoteAgent"){const et=await g.toggleAgentPinned(oe.id,Xe);A.update(at=>{if(at)return{...at,pinnedAgents:et}}),g.reportRemoteAgentThreadListEvent(Xe?yr.unpinAgent:yr.pinAgent,we(),oe.id)}else["chat","localAgent"].includes(oe.type)&&p(hi(oe.id))},onDeleteAllThreadsInGroup:De});var Ue=$(bt,2),lt=oe=>{(function(Ne,Ve){me(Ve,!0);let Xe=S(Ve,"rowCount",3,3),et=d(()=>Array(Xe()).fill(null));var at=qh();Vt(at,21,()=>t(et),$n,($t,Wt)=>{var Mt=Fh();r($t,Mt)}),r(Ne,at),fe()})(oe,{rowCount:3})},ct=oe=>{var Ne=B(),Ve=w(Ne),Xe=et=>{jr(et,{children:(at,$t)=>{var Wt=B(),Mt=w(Wt),Dt=dt=>{(function(tt){Hn(tt,{header:vt=>{qe(vt,{size:4,children:(zt,Ut)=>{var Lt=ie("No Results Found");r(zt,Lt)},$$slots:{default:!0}})},children:(vt,zt)=>{qe(vt,{size:1,variant:"surface",children:(Ut,Lt)=>{var St=ie("Try updating your search or filter.");r(Ut,St)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(dt)},Gt=dt=>{var tt=B(),pt=w(tt),vt=Ut=>{(function(Lt){Hn(Lt,{header:yt=>{qe(yt,{color:"primary",size:4,children:(Bt,At)=>{var Ft=ie("Work with Remote Agents");r(Bt,Ft)},$$slots:{default:!0}})},children:(yt,Bt)=>{qe(yt,{color:"secondary",size:1,variant:"surface",children:(At,Ft)=>{var mt=ie(`Spin off a chunk of work to let your agent work in its own environment. When your agent is
    finished, you can review changes and create a PR.`);r(At,mt)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(Ut)},zt=Ut=>{(function(Lt){Hn(Lt,{header:yt=>{qe(yt,{size:4,children:(Bt,At)=>{var Ft=ie("Work with Local Agents");r(Bt,Ft)},$$slots:{default:!0}})},children:(yt,Bt)=>{qe(yt,{size:1,variant:"surface",children:(At,Ft)=>{var mt=ie("Create a new thread to get started");r(At,mt)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(Ut)};k(pt,Ut=>{t(pe)==="remote"?Ut(vt):Ut(zt,!1)},!0),r(dt,tt)};k(Mt,dt=>{t(_e).trim()!==""?dt(Dt):dt(Gt,!1)}),r(at,Wt)}})};k(Ve,et=>{t(ge)&&et(Xe)},!0),r(oe,Ne)};k(Ue,oe=>{t($e)?oe(lt):oe(ct,!1)}),wc(()=>yo(Ge,"clientWidth",oe=>X(Le,oe))),yn(Ge,oe=>th?.(oe)),r(s,Ge),fe(),y()}const ro=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function oo(s,e,n,o){s.addEventListener?s.addEventListener(e,n,o):s.attachEvent&&s.attachEvent("on".concat(e),n)}function js(s,e,n,o){s.removeEventListener?s.removeEventListener(e,n,o):s.detachEvent&&s.detachEvent("on".concat(e),n)}function $l(s,e){const n=e.slice(0,e.length-1);for(let o=0;o<n.length;o++)n[o]=s[n[o].toLowerCase()];return n}function wl(s){typeof s!="string"&&(s="");const e=(s=s.replace(/\s/g,"")).split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}const Zs={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":ro?173:189,"=":ro?61:187,";":ro?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},Kn={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,meta:91,command:91},Ys={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},mn={16:!1,18:!1,17:!1,91:!1},sn={};for(let s=1;s<20;s++)Zs["f".concat(s)]=111+s;let en=[],er=null,kl="all";const cs=new Map,Vs=s=>Zs[s.toLowerCase()]||Kn[s.toLowerCase()]||s.toUpperCase().charCodeAt(0);function Pa(s){kl=s||"all"}function tr(){return kl||"all"}function Al(s){if(s===void 0)Object.keys(sn).forEach(a=>{Array.isArray(sn[a])&&sn[a].forEach(i=>$r(i)),delete sn[a]}),Vo(null);else if(Array.isArray(s))s.forEach(a=>{a.key&&$r(a)});else if(typeof s=="object")s.key&&$r(s);else if(typeof s=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];let[a,i]=n;typeof a=="function"&&(i=a,a=""),$r({key:s,scope:a,method:i,splitKey:"+"})}}const $r=s=>{let{key:e,scope:n,method:o,splitKey:a="+"}=s;wl(e).forEach(i=>{const l=i.split(a),c=l.length,u=l[c-1],v=u==="*"?"*":Vs(u);if(!sn[v])return;n||(n=tr());const m=c>1?$l(Kn,l):[],y=[];sn[v]=sn[v].filter(f=>{const g=(!o||f.method===o)&&f.scope===n&&function(A,C){const _=A.length>=C.length?A:C,p=A.length>=C.length?C:A;let E=!0;for(let M=0;M<_.length;M++)p.indexOf(_[M])===-1&&(E=!1);return E}(f.mods,m);return g&&y.push(f.element),!g}),y.forEach(f=>Vo(f))})};function Ba(s,e,n,o){if(e.element!==o)return;let a;if(e.scope===n||e.scope==="all"){a=e.mods.length>0;for(const i in mn)Object.prototype.hasOwnProperty.call(mn,i)&&(!mn[i]&&e.mods.indexOf(+i)>-1||mn[i]&&e.mods.indexOf(+i)===-1)&&(a=!1);(e.mods.length!==0||mn[16]||mn[18]||mn[17]||mn[91])&&!a&&e.shortcut!=="*"||(e.keys=[],e.keys=e.keys.concat(en),e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0)))}}function Fa(s,e){const n=sn["*"];let o=s.keyCode||s.which||s.charCode;if(s.key&&s.key.toLowerCase()==="capslock"||!Bn.filter.call(this,s))return;if(o!==93&&o!==224||(o=91),en.indexOf(o)===-1&&o!==229&&en.push(o),["metaKey","ctrlKey","altKey","shiftKey"].forEach(c=>{const u=Ys[c];s[c]&&en.indexOf(u)===-1?en.push(u):!s[c]&&en.indexOf(u)>-1?en.splice(en.indexOf(u),1):c==="metaKey"&&s[c]&&(en=en.filter(v=>v in Ys||v===o))}),o in mn){mn[o]=!0;for(const c in Kn)if(Object.prototype.hasOwnProperty.call(Kn,c)){const u=Ys[Kn[c]];Bn[c]=s[u]}if(!n)return}for(const c in mn)Object.prototype.hasOwnProperty.call(mn,c)&&(mn[c]=s[Ys[c]]);s.getModifierState&&(!s.altKey||s.ctrlKey)&&s.getModifierState("AltGraph")&&(en.indexOf(17)===-1&&en.push(17),en.indexOf(18)===-1&&en.push(18),mn[17]=!0,mn[18]=!0);const a=tr();if(n)for(let c=0;c<n.length;c++)n[c].scope===a&&(s.type==="keydown"&&n[c].keydown||s.type==="keyup"&&n[c].keyup)&&Ba(s,n[c],a,e);if(!(o in sn))return;const i=sn[o],l=i.length;for(let c=0;c<l;c++)if((s.type==="keydown"&&i[c].keydown||s.type==="keyup"&&i[c].keyup)&&i[c].key){const u=i[c],{splitKey:v}=u,m=u.key.split(v),y=[];for(let f=0;f<m.length;f++)y.push(Vs(m[f]));y.sort().join("")===en.sort().join("")&&Ba(s,u,a,e)}}function Bn(s,e,n){en=[];const o=wl(s);let a=[],i="all",l=document,c=0,u=!1,v=!0,m="+",y=!1,f=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(l=e.element),e.keyup&&(u=e.keyup),e.keydown!==void 0&&(v=e.keydown),e.capture!==void 0&&(y=e.capture),typeof e.splitKey=="string"&&(m=e.splitKey),e.single===!0&&(f=!0)),typeof e=="string"&&(i=e),f&&Al(s,i);c<o.length;c++)a=[],(s=o[c].split(m)).length>1&&(a=$l(Kn,s)),(s=(s=s[s.length-1])==="*"?"*":Vs(s))in sn||(sn[s]=[]),sn[s].push({keyup:u,keydown:v,scope:i,mods:a,shortcut:o[c],method:n,key:o[c],splitKey:m,element:l});if(l!==void 0&&window){if(!cs.has(l)){const g=function(){return Fa(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,l)},A=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Fa(C,l),function(_){let p=_.keyCode||_.which||_.charCode;_.key&&_.key.toLowerCase()==="capslock"&&(p=Vs(_.key));const E=en.indexOf(p);if(E>=0&&en.splice(E,1),_.key&&_.key.toLowerCase()==="meta"&&en.splice(0,en.length),p!==93&&p!==224||(p=91),p in mn){mn[p]=!1;for(const M in Kn)Kn[M]===p&&(Bn[M]=!1)}}(C)};cs.set(l,{keydownListener:g,keyupListenr:A,capture:y}),oo(l,"keydown",g,y),oo(l,"keyup",A,y)}if(!er){const g=()=>{en=[]};er={listener:g,capture:y},oo(window,"focus",g,y)}}}function Vo(s){const e=Object.values(sn).flat();if(e.findIndex(n=>{let{element:o}=n;return o===s})<0){const{keydownListener:n,keyupListenr:o,capture:a}=cs.get(s)||{};n&&o&&(js(s,"keyup",o,a),js(s,"keydown",n,a),cs.delete(s))}if((e.length<=0||cs.size<=0)&&(Object.keys(cs).forEach(n=>{const{keydownListener:o,keyupListenr:a,capture:i}=cs.get(n)||{};o&&a&&(js(n,"keyup",a,i),js(n,"keydown",o,i),cs.delete(n))}),cs.clear(),Object.keys(sn).forEach(n=>delete sn[n]),er)){const{listener:n,capture:o}=er;js(window,"focus",n,o),er=null}}const ao={getPressedKeyString:function(){return en.map(s=>{return e=s,Object.keys(Zs).find(n=>Zs[n]===e)||(n=>Object.keys(Kn).find(o=>Kn[o]===n))(s)||String.fromCharCode(s);var e})},setScope:Pa,getScope:tr,deleteScope:function(s,e){let n,o;s||(s=tr());for(const a in sn)if(Object.prototype.hasOwnProperty.call(sn,a))for(n=sn[a],o=0;o<n.length;)n[o].scope===s?n.splice(o,1).forEach(i=>{let{element:l}=i;return Vo(l)}):o++;tr()===s&&Pa(e||"all")},getPressedKeyCodes:function(){return en.slice(0)},getAllKeyCodes:function(){const s=[];return Object.keys(sn).forEach(e=>{sn[e].forEach(n=>{let{key:o,scope:a,mods:i,shortcut:l}=n;s.push({scope:a,shortcut:l,mods:i,keys:o.split("+").map(c=>Vs(c))})})}),s},isPressed:function(s){return typeof s=="string"&&(s=Vs(s)),en.indexOf(s)!==-1},filter:function(s){const e=s.target||s.srcElement,{tagName:n}=e;let o=!0;const a=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(a||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(o=!1),o},trigger:function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(sn).forEach(n=>{sn[n].filter(o=>o.scope===e&&o.shortcut===s).forEach(o=>{o&&o.method&&o.method()})})},unbind:Al,keyMap:Zs,modifier:Kn,modifierMap:Ys};for(const s in ao)Object.prototype.hasOwnProperty.call(ao,s)&&(Bn[s]=ao[s]);if(typeof window<"u"){const s=window.hotkeys;Bn.noConflict=e=>(e&&window.hotkeys===Bn&&(window.hotkeys=s),Bn),window.hotkeys=Bn}function kp(s,e,n){Bn(s,{keydown:!0,element:document.body},(o,a)=>e(o,a,n()))}function Ap(s){const{commandName:e}=s;if(e)return n=>{if(n.defaultPrevented)return;const o=e.split(/,\s*/g);console.error("TRIGGER",o),o.map(a=>uv(a)).find(a=>!!a)&&(n.preventDefault(),n.stopPropagation())}}function qa(s,e){const n=dv(s);for(const o of n){const a=Ap(o);a&&kp(o.key,a,e)}}Bn.filter=()=>!0;const Ep=(s,{config:e,context:n})=>(qa(e,n),{update({config:o,context:a}){Bn.deleteScope("all"),qa(o,a)},destroy(){Bn.deleteScope("all")}}),Cp={doHideStatusBars:!0,doHideSlashActions:!0,doHideAtMentions:!0,doHideNewThreadButton:!0,doHideMultimodalActions:!0,doHideContextBar:!0,doShowTurnSelector:!0},Tp="selectedTurnIndex";function Ww(s){const e={...Cp};return s?.isRemoteAgentSshWindow&&(e.doHideAtMentions=!1),e}var Sp=h('<div class="c-toggle-mode-button__text svelte-587d52"> </div>'),Ip=h('<div class="c-toggle-mode-button__icon" slot="iconLeft"><!></div>');function Rp(s,e){me(e,!0);const[n,o]=je(),a=S(e,"variant",3,"ghost"),i=S(e,"color",3,"neutral"),l=S(e,"disabled",3,!1),c=S(e,"hideText",3,!1),u=_i(),v=d(()=>Ho(V(u,"$currentChatMode",n)));xt(s,{size:.5,get variant(){return a()},get color(){return i()},get disabled(){return l()},children:(m,y)=>{var f=B(),g=w(f),A=C=>{var _=Sp(),p=b(_);he(()=>He(p,t(v).primaryText)),r(C,_)};k(g,C=>{c()||C(A)}),r(m,f)},$$slots:{default:!0,iconLeft:(m,y)=>{var f=Ip(),g=b(f);Te(g,{get name(){return t(v).icon},size:1}),r(m,f)},iconRight:(m,y)=>{Kc(m,{slot:"iconRight"})}}}),fe(),o()}const xp="new-thread-button";var Mp=h('<div class="c-mode-display-dropdown"><!> <!> <!></div>'),Dp=h("<!> <!>",1),Op=h("<!> <!>",1),Np=h('<div class="c-select-mode-dropdown__tooltip svelte-dwgejw"> <!></div>'),zp=h('<div class="c-select-mode-dropdown svelte-dwgejw"><!> <!></div>');function Lp(s,e){me(e,!0);const n=()=>V(y,"$currentChatMode",i),o=()=>V(m,"$enableAgentMode",i),a=()=>V(v,"$enableBackgroundAgents",i),[i,l]=je(),c=kt(dn.key),u=kt(gs.key),v=Ot("enableBackgroundAgents"),m=Ot("enableAgentMode"),y=_i(),f=Ct();let g=d(()=>n()==="remoteAgent"?"New Remote Agent":n()==="localAgent"?"New Agent":"New Chat");async function A(){C(),f(gt(Ze.WEBVIEW.THREAD_CREATION_ATTEMPTED,{source:"button"}))}async function C(){await c.reportRemoteAgentNewThreadButtonEvent(gi.click,ul(n())),f(So(n()))}let _=d(()=>c?.hasEverUsedRemoteAgent),p=Oe(void 0);function E(j){j?u.reportModeSelectorOpen():u.reportModeSelectorClose()}function M(){u.reportModeSelectorEvent(zs.select,Ns.chat),f(na("chat")),t(p)?.requestClose()}async function I(){await u.reportModeSelectorEvent(zs.select,Ns.agent),f(na("localAgent")),t(p)?.requestClose()}function T(){u.reportModeSelectorEvent(zs.select,Ns.remoteAgent),u.handleSetToThreadType("remoteAgent"),V(t(_),"$hasEverUsedRemoteAgent",i)===!1&&c?.setHasEverUsedRemoteAgent(!0),t(p)?.requestClose()}const O="neutral";var P=zp(),H=b(P),D=j=>{var x=Op(),N=w(x);on(N,{name:"newConversation",handler:C});var W=$(N,2);Ae(W,()=>Je.Root,(F,G)=>{Pt(G(F,{onOpenChange:E,nested:!1,children:(z,q)=>{var L=Dp(),R=w(L);Ae(R,()=>Je.Trigger,(Z,Q)=>{Q(Z,{$$events:{click:K=>{K.stopPropagation()}},children:(K,J)=>{Rp(K,{hideText:!0,variant:"ghost",color:O})},$$slots:{default:!0}})});var Y=$(R,2);Ae(Y,()=>Je.Content,(Z,Q)=>{Q(Z,{size:1,side:"bottom",align:"start",children:(K,J)=>{var ue=Mp(),ne=b(ue),be=Ie=>{{let Ee=d(()=>n()==="localAgent");Ls(Ie,{onSelect:I,chatMode:"localAgent",get selected(){return t(Ee)}})}};k(ne,Ie=>{o()&&Ie(be)});var ye=$(ne,2);{let Ie=d(()=>n()==="chat");Ls(ye,{onSelect:M,chatMode:"chat",get selected(){return t(Ie)}})}var ee=$(ye,2),ze=Ie=>{{let Ee=d(()=>n()==="remoteAgent");Ls(Ie,{onSelect:T,chatMode:"remoteAgent",get selected(){return t(Ee)}})}};k(ee,Ie=>{a()&&Ie(ze)}),r(K,ue)},$$slots:{default:!0}})}),r(z,L)},$$slots:{default:!0}}),z=>X(p,z,!0),()=>t(p))}),r(j,x)};k(H,j=>{(o()||a())&&j(D)});var U=$(H,2);it(U,{side:"top",nested:!1,content:x=>{var N=Np(),W=b(N),F=$(W);fn(F,{commandName:"newConversation",keysOnly:!0}),he(()=>He(W,`${t(g)??""} `)),r(x,N)},children:(x,N)=>{Nt(x,{size:.5,variant:"ghost-block",color:O,class:"c-select-mode-dropdown__new-thread-button","data-testid":xp,$$events:{click:A},children:(W,F)=>{Te(W,{name:"plus"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),r(s,P),fe(),l()}var Pp=h('<div class="c-notification-content svelte-16xyaeg"><!></div>'),Bp=h('<div class="c-notification-badge svelte-16xyaeg"></div>'),Fp=h("<div><!> <!></div>");function qp(s,e){me(e,!0);const n=()=>V(i,"$remoteAgentsModel",o),[o,a]=je(),i=kt(dn.key);let l=d(()=>n().isActive?n().currentAgentId:null),c=d(()=>(n().agentOverviews||[]).filter(_=>!!_.has_updates&&_.remote_agent_id!==t(l)&&_.status===Zn.agentIdle).length);const u=Yc();let v=d(()=>V(u,"$hasUnseenThreads",o)||t(c)>0);var m=Fp();let y;var f=b(m),g=_=>{var p=Pp(),E=b(p);st(E,()=>e.children),r(_,p)};k(f,_=>{e.children&&_(g)});var A=$(f,2),C=_=>{var p=Bp();tn(3,p,()=>As,()=>({duration:200,start:0})),r(_,p)};k(A,_=>{t(v)&&_(C)}),he(_=>y=ft(m,1,"c-notification-wrapper svelte-16xyaeg",null,y,_),[()=>({"has-notification":t(v)})]),r(s,m),fe(),a()}function Ha(s,e,n,o,a,i){e()&&s.key==="Enter"?n()&&o()&&(s.ctrlKey||s.metaKey||s.altKey||s.shiftKey)||(s.preventDefault(),a()):s.key==="Escape"&&(s.preventDefault(),i())}function Hp(s,e,n,o){(e()||o()&&s.detail===2)&&n()}var Wp=h('<textarea style="field-sizing: content;" class="c-inline-edit-text-augment__input-field svelte-1grfd3z" rows="1"></textarea>'),Gp=h('<input style="field-sizing: content;" class="c-inline-edit-text-augment__input-field svelte-1grfd3z" type="text"/>'),Up=h('<div class="c-inline-edit-text-augment__input svelte-1grfd3z"><!> <!></div>'),Vp=(s,e)=>{s.key==="Enter"&&e()},jp=h('<div role="button"><!></div>'),Kp=h("<div><!> <!></div>");function Yp(s,e){me(e,!0);let n=S(e,"isEditable",3,!0),o=S(e,"isEditing",15,!1);it(s,{content:"Rename",nested:!1,hasPointerEvents:!1,children:(a,i)=>{(function(l,c){me(c,!0);let u=S(c,"value",15,""),v=S(c,"placeholder",3,""),m=S(c,"disabled",3,!1),y=S(c,"size",3,2),f=S(c,"class",3,""),g=S(c,"isEditing",15,!1),A=S(c,"isEditable",3,!0),C=S(c,"multiline",3,!0),_=S(c,"showCommitButton",3,!0),p=S(c,"commitOnBlur",3,!0),E=S(c,"commitOnEnter",3,!0),M=S(c,"allowCtrlEnterForNewline",3,!0),I=S(c,"doubleClickToEdit",3,!0),T=S(c,"singleClickToEdit",3,!1),O=S(c,"onCancelEdit",3,K=>{}),P=S(c,"onStartEdit",3,()=>{}),H=S(c,"onChange",3,(K,J)=>{}),D=S(c,"commitButtonVariant",3,"classic"),U=S(c,"commitButtonColor",3,"accent"),j=Oe(void 0),x=Oe(void 0),N=Oe(Wn(u()));function W(){X(N,u(),!0),g(!1),O()(u())}function F(){A()&&!m()&&(g()||(P()(),g(!0)),setTimeout(()=>{t(j)?.focus()},0))}function G(){const K=t(N).trim(),J=u();K!==J&&(u(K),H()(K,J)),setTimeout(()=>{t(j)?.blur()},0),g(!1)}function z(){p()&&g()&&G()}rt(()=>{g()||X(N,u(),!0)}),rt(()=>{g()&&F()}),Jt(()=>{const K=J=>{g()&&(c.outsideNode||t(x))?.contains(J.target)===!1&&(p()?G():W())};return document.addEventListener("click",K),()=>{document.removeEventListener("click",K)}});var q=Kp();let L;var R=b(q),Y=K=>{var J=Up(),ue=b(J);qe(ue,{get size(){return y()},get weight(){return c.weight},get color(){return c.color},children:(ye,ee)=>{var ze=B(),Ie=w(ze),Ee=pe=>{var se=Wp();se.__keydown=[Ha,E,C,M,G,W],Pt(se,te=>X(j,te),()=>t(j)),he(()=>{nt(se,"placeholder",v()),se.disabled=m()}),Ht("blur",se,z),bo(se,()=>t(N),te=>X(N,te)),r(pe,se)},_e=pe=>{var se=Gp();se.__keydown=[Ha,E,C,M,G,W],Pt(se,te=>X(j,te),()=>t(j)),he(()=>{nt(se,"placeholder",v()),se.disabled=m()}),Ht("blur",se,z),bo(se,()=>t(N),te=>X(N,te)),r(pe,se)};k(Ie,pe=>{C()?pe(Ee):pe(_e,!1)}),r(ye,ze)},$$slots:{default:!0}});var ne=$(ue,2),be=ye=>{Nt(ye,{size:1,get variant(){return D()},get color(){return U()},get disabled(){return m()},$$events:{click:G},children:(ee,ze)=>{Te(ee,{name:"check"})},$$slots:{default:!0}})};k(ne,ye=>{_()&&ye(be)}),tn(3,J,()=>zr,()=>({axis:"y",duration:150,scale:.9})),r(K,J)};k(R,K=>{A()&&!m()&&g()&&K(Y)});var Z=$(R,2),Q=K=>{var J=jp();let ue;J.__click=[Hp,T,F,I],J.__keydown=[Vp,F];var ne=b(J),be=ee=>{var ze=B(),Ie=w(ze);st(Ie,()=>c.children),r(ee,ze)},ye=ee=>{qe(ee,{get size(){return y()},get weight(){return c.weight},get color(){return c.color},get value(){return u()},get placeholder(){return v()},children:(ze,Ie)=>{var Ee=ie();he(()=>He(Ee,u()||v())),r(ze,Ee)},$$slots:{default:!0}})};k(ne,ee=>{c.children?ee(be):ee(ye,!1)}),he(ee=>{ue=ft(J,1,"c-inline-edit-text-augment__text svelte-1grfd3z",null,ue,ee),nt(J,"tabindex",A()&&!m()?0:void 0),nt(J,"aria-label",u()||v())},[()=>({"c-inline-edit-text-augment__text--editable":A()&&!m()})]),tn(3,J,()=>zr,()=>({axis:"y",duration:150,scale:.9})),r(K,J)};k(Z,K=>{g()||K(Q)}),Pt(q,K=>X(x,K),()=>t(x)),he(K=>L=ft(q,1,`c-inline-edit-text-augment ${f()??""}`,"svelte-1grfd3z",L,K),[()=>({"c-inline-edit-text-augment--is-editing":g(),"c-inline-edit-text-augment--disabled":m(),"c-inline-edit-text-augment--is-editable":A()})]),r(l,q),fe()})(a,{size:1,weight:"bold",get value(){return e.title},color:"primary",get isEditable(){return n()},showCommitButton:!1,singleClickToEdit:!0,get onChange(){return e.onRename},get isEditing(){return o()},set isEditing(l){o(l)}})},$$slots:{default:!0}}),fe()}function Xp(s,e){me(e,!0);const n=()=>V(c,"$conversationId",o),[o,a]=je();let i=S(e,"isEditing",15,!1);const l=Ct(),c=ln(),u=ho(c);Yp(s,{onRename:function(v){n()&&l(fi(n(),v))},get title(){return V(u,"$title",o)},get isEditing(){return i()},set isEditing(v){i(v)}}),fe(),a()}function Jp(s,e){me(e,!0);const[n,o]=je();let a=S(e,"isEditing",15,!1);const i=kt(dn.key),l=ln();var c=B(),u=w(c),v=y=>{var f=B(),g=w(f);Gs(g,()=>Hs(()=>import("./RemoteAgentThreadTitle-D_CLsbo8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]),import.meta.url),null,(A,C)=>{var _=d(()=>{var{default:I}=t(C);return{RemoteAgentThreadTitle:I}}),p=d(()=>t(_).RemoteAgentThreadTitle),E=B(),M=w(E);Ae(M,()=>t(p),(I,T)=>{T(I,{get isEditing(){return a()},set isEditing(O){a(O)}})}),r(A,E)}),r(y,f)},m=y=>{var f=B(),g=w(f),A=C=>{Xp(C,{get isEditing(){return a()},set isEditing(_){a(_)}})};k(g,C=>{V(l,"$conversationId",n)&&C(A)},!0),r(y,f)};k(u,y=>{V(i,"$remoteAgentsModel",n)?.isActive?y(v):y(m,!1)}),r(s,c),fe(),o()}Nn(["keydown","click"]);var Qp=h('<div class="c-chat-header__tooltip svelte-1aejsn9">Toggle threads menu <!></div>'),Zp=h('<div class="c-chat-header__left svelte-1aejsn9"><!></div>'),em=h('<div class="c-chat-header__right-actions svelte-1aejsn9"><!></div>'),tm=h('<div class="c-chat-header svelte-1aejsn9"><!> <div class="c-chat-header__title svelte-1aejsn9"><!></div> <!></div>');const Un={header:"chat-layout-header-area",floating:"chat-layout-floating-area",message:"chat-layout-message-area",inputHint:"chat-layout-input-hint-area",notifications:"chat-layout-notifications-area",divider:"chat-layout-divider-area",input:"chat-layout-input-area"};var nm=h('<div class="l-chat svelte-13iycb0" data-testid="main-chat"><div class="l-chat__header-area svelte-13iycb0"><!></div> <div class="l-chat__status-area svelte-13iycb0"><!></div> <div class="l-chat__msg-area svelte-13iycb0"><!></div> <div class="l-chat__input-hint hidden-when-empty svelte-13iycb0"><!></div> <div class="l-chat__notifications-area svelte-13iycb0"><div class="l-chat__notifications-area-container hidden-when-empty svelte-13iycb0"><!></div></div> <div class="l-chat__divider-area hidden-when-empty svelte-13iycb0"><!></div> <div class="l-chat__input-area hidden-when-empty svelte-13iycb0"><!></div></div>');const El="thread-header-portal";var sm=h('<div class="l-thread-header__portal-container hidden-when-empty"></div>'),rm=h('<div role="tabpanel"><!></div>');function wr(s,e){me(e,!0);const[n,o]=je();let a=S(e,"class",3,""),i=S(e,"forceMount",3,!1);const l=Go();if(!l)throw new Error("TabPanelAugment must be used within a TabsAugment component");const{activeTab:c}=l.model;let u=d(()=>V(c,"$activeTab",n)===e.value),v=d(()=>i()||t(u)),m=Oe(!1),y=Oe(!1),f=!1;function g(){X(m,!1),X(y,!1)}rt(()=>{t(u)!==f&&(t(u)?(X(m,!0),X(y,!1)):(X(m,!1),X(y,!0)),f=t(u))});var A=B(),C=w(A),_=p=>{var E=rm();let M;var I=b(E);st(I,()=>e.children??wt),he(T=>{M=ft(E,1,Dn(["ds-tab-panel",a()]),"svelte-g8i1xj",M,T),nt(E,"aria-labelledby",`tab-${e.value??""}`),nt(E,"aria-hidden",!t(u)),E.inert=!t(u),nt(E,"data-state",t(u)?"active":"inactive")},[()=>({"ds-tab-panel--active":t(u),"ds-tab-panel--entering":t(m),"ds-tab-panel--leaving":t(y),"ds-tab-panel--hidden":!t(u)})]),Ht("animationend",E,g),r(p,E)};k(C,p=>{t(v)&&p(_)}),r(s,A),fe(),o()}var om=h("Discard All <!>",1),am=h("<!> Keep All",1),im=h('<div class="c-bottom-controls svelte-2q851l"><!> <!></div>'),lm=h('<div class="edit-item__controls-container svelte-10i0l58"><!> <!> <!></div>'),cm=h('<button><div class="edit-item__info-container"><!></div> <!> <!></button>');function Cl(s,e){me(e,!0);let n=S(e,"isFocused",3,!1),o=S(e,"onClickReview",3,Ks);var a=cm();let i;a.__click=function(...f){o()?.apply(this,f)};var l=b(a),c=b(l);it(c,{delayDurationMs:1e3,get content(){return e.qualifiedPathName.relPath},children:(f,g)=>{Cr(f,{class:"edit-item__filespan",size:1,get filepath(){return e.qualifiedPathName.relPath}})},$$slots:{default:!0}});var u=$(l,2),v=f=>{var g=lm(),A=b(g),C=I=>{var T=B(),O=w(T);st(O,()=>e.actions),r(I,T)};k(A,I=>{e.actions&&I(C)});var _=$(A,2),p=I=>{it(I,{content:"Open File",children:(T,O)=>{Nt(T,{size:.5,variant:"ghost-block",color:"neutral",$$events:{click:P=>{P.stopPropagation(),e.onClickFile()}},children:(P,H)=>{Te(P,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(_,I=>{e.onClickFile&&I(p)});var E=$(_,2),M=I=>{it(I,{content:"Undo Changes",children:(T,O)=>{Nt(T,{size:.5,variant:"ghost-block",color:"neutral",$$events:{click:P=>{P.stopPropagation(),e.onClickRevert()}},children:(P,H)=>{Te(P,{name:"undo-2"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(E,I=>{e.onClickRevert&&I(M)}),r(f,g)};k(u,f=>{(e.onClickFile||e.onClickRevert||e.actions)&&f(v)});var m=$(u,2),y=f=>{it(f,{content:"View Diff",children:(g,A)=>{Oo(g,{size:0,get totalAddedLines(){return e.lineChanges.totalAddedLines},get totalRemovedLines(){return e.lineChanges.totalRemovedLines}})},$$slots:{default:!0}})};k(m,f=>{e.lineChanges&&f(y)}),he(f=>i=ft(a,1,"edit-item__container svelte-10i0l58",null,i,f),[()=>({"edit-item__container--focused":n()})]),tn(3,a,()=>Bo,()=>({duration:150,axis:"y"})),r(s,a),fe()}function dm(s,e){me(e,!1);const n=ur.tryGetFromContext();_n(),jr(s,{footer:a=>{xt(a,{size:1,variant:"soft",$$events:{click:()=>{n?.setActiveTab(pn.messageHistory)}},children:(i,l)=>{var c=ie("Return to Thread");r(i,c)},$$slots:{default:!0,iconLeft:(i,l)=>{Te(i,{name:"arrow-left",slot:"iconLeft"})}}})},children:(a,i)=>{Hn(a,{header:c=>{qe(c,{size:4,children:(u,v)=>{var m=ie("No Code Edits");r(u,m)},$$slots:{default:!0}})},children:(c,u)=>{qe(c,{size:1,variant:"surface",children:(v,m)=>{var y=ie("Edits will appear here once your agent makes changes to files.");r(v,y)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})}}),fe()}Nn(["click"]);var um=h('<div class="c-agent-edit-list-tab__header svelte-d13gz5"><!></div> <div class="c-edits-list svelte-d13gz5"><div class="c-edits-section svelte-d13gz5"></div></div>',1),vm=h('<div class="c-agent-edit-list-tab svelte-d13gz5"><!></div>');function gm(s,e){me(e,!0);const n=()=>V(v,"$baselineTimestamp",o),[o,a]=je(),i=Ct(),l=qn(),c=ts(l),u=Zc(l),v=ed(l),m=Yn();let y=d(()=>V(u,"$targetCheckpointSummary",o)?.filter(_=>_.changesSummary&&(_.changesSummary.totalAddedLines>0||_.changesSummary.totalRemovedLines>0)));function f(_){i(td(V(l,"$conversationId",o),_,n()))}var g=B(),A=w(g),C=_=>{var p=vm(),E=b(p),M=T=>{var O=um(),P=w(O);(function(U,j){me(j,!0);const x=()=>V(G,"$currentConversationId",W),N=()=>V(t(q),"$targetCheckpointHasChanges",W),[W,F]=je(),G=ln(),z=Ct(),q=d(()=>Xc(x()));var L=im(),R=b(L);{let Z=d(()=>!N());xt(R,{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,get disabled(){return t(Z)},$$events:{click:async function(){z(Jc(x()))}},children:(Q,K)=>{{let J=d(()=>[Xt.Hover]),ue=d(()=>N()?"Discard all changes":"No changes to undo");it(Q,{get triggerOn(){return t(J)},get content(){return t(ue)},children:(ne,be)=>{var ye=om(),ee=$(w(ye));Te(ee,{name:"trash-2"}),r(ne,ye)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var Y=$(R,2);{let Z=d(()=>!N());xt(Y,{class:"c-bottom-controls__accept-btn",variant:"soft",color:"accent",size:1,get disabled(){return t(Z)},$$events:{click:async function(){z(Qc(x()))}},children:(Q,K)=>{{let J=d(()=>[Xt.Hover]),ue=d(()=>N()?"Keep all changes and clear checkpoints":"No changes to keep");it(Q,{get triggerOn(){return t(J)},get content(){return t(ue)},children:(ne,be)=>{var ye=am(),ee=w(ye);Te(ee,{name:"check-check"}),r(ne,ye)},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(U,L),fe(),F()})(b(P),{});var H=$(P,2),D=b(H);Vt(D,21,()=>t(y),U=>U.qualifiedPathName.relPath,(U,j)=>{Cl(U,{get qualifiedPathName(){return t(j).qualifiedPathName},get lineChanges(){return t(j).changesSummary},onClickFile:()=>{return x=t(j).qualifiedPathName,void i($s({repoRoot:x.rootPath,pathName:x.relPath,allowOutOfWorkspace:!0}));var x},onClickReview:()=>{return x=t(j).qualifiedPathName,void m.showAgentReview(x,n(),void 0,!1,!0);var x},onClickRevert:()=>f(t(j).qualifiedPathName)})}),r(T,O)},I=T=>{dm(T,{})};k(E,T=>{t(y).length>0?T(M):T(I,!1)}),r(_,p)};k(A,_=>{V(c,"$isAgentic",o)&&_(C)}),r(s,g),fe(),a()}const hm=Jv({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"}),pm=typeof window<"u"?window:void 0;new class{#t;#e;constructor(s={}){const{window:e=pm,document:n=e?.document}=s;e!==void 0&&(this.#t=n,this.#e=ii(o=>{const a=qs(e,"focusin",o),i=qs(e,"focusout",o);return()=>{a(),i()}}))}get current(){return this.#e?.(),this.#t?function(s){let e=s.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}(this.#t):null}};let Tl=class{#t;#e;constructor(s){this.#t=s,this.#e=Symbol(s)}get key(){return this.#e}exists(){return li(this.#e)}get(){const s=kt(this.#e);if(s===void 0)throw new Error(`Context "${this.#t}" not found`);return s}getOr(s){const e=kt(this.#e);return e===void 0?s:e}set(s){return Rn(this.#e,s)}};function Sl(s,e,n,o={}){const{lazy:a=!1}=o;let i=!a,l=Array.isArray(s)?[]:void 0;(function(c,u){switch(c){case"post":rt(u);break;case"pre":kc(u)}})(e,()=>{const c=Array.isArray(s)?s.map(v=>v()):s();if(!i)return i=!0,void(l=c);const u=nn(()=>n(c,l));return l=c,u})}function Pr(s,e,n){Sl(s,"post",e,n)}Pr.pre=function(s,e,n){Sl(s,"pre",e,n)};const mm=sl({component:"checkbox",parts:["root","group","group-label","input"]}),fm=new Tl("Checkbox.Group"),Il=new Tl("Checkbox.Root");class jo{static create(e,n=null){return Il.set(new jo(e,n))}opts;group;#t=d(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return t(this.#t)}set trueName(e){X(this.#t,e)}#e=d(()=>!(!this.group||!this.group.opts.required.current)||this.opts.required.current);get trueRequired(){return t(this.#e)}set trueRequired(e){X(this.#e,e)}#n=d(()=>!(!this.group||!this.group.opts.disabled.current)||this.opts.disabled.current);get trueDisabled(){return t(this.#n)}set trueDisabled(e){X(this.#n,e)}#r=d(()=>!(!this.group||!this.group.opts.readonly.current)||this.opts.readonly.current);get trueReadonly(){return t(this.#r)}set trueReadonly(e){X(this.#r,e)}attachment;constructor(e,n){this.opts=e,this.group=n,this.attachment=nl(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),Pr.pre([()=>Ag(this.group?.opts.value.current),()=>this.opts.value.current],([o,a])=>{o&&a&&(this.opts.checked.current=o.includes(a))}),Pr.pre(()=>this.opts.checked.current,o=>{this.group&&(o?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key==="Enter"&&e.preventDefault(),e.key===" "&&(e.preventDefault(),this.#s()))}#s(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){this.trueDisabled||this.trueReadonly||(this.opts.type.current!=="submit"?(e.preventDefault(),this.#s()):this.#s())}#o=d(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return t(this.#o)}set snippetProps(e){X(this.#o,e)}#a=d(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":Qv(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":ka(this.trueRequired),"aria-readonly":ka(this.trueReadonly),"data-disabled":wa(this.trueDisabled),"data-readonly":wa(this.trueReadonly),"data-state":_m(this.opts.checked.current,this.opts.indeterminate.current),[mm.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return t(this.#a)}set props(e){X(this.#a,e)}}class Ko{static create(){return new Ko(Il.get())}root;#t=d(()=>this.root.group?!(this.root.opts.value.current===void 0||!this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return t(this.#t)}set trueChecked(e){X(this.#t,e)}#e=d(()=>!!this.root.trueName);get shouldRender(){return t(this.#e)}set shouldRender(e){X(this.#e,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){this.root.opts.ref.current instanceof HTMLElement&&this.root.opts.ref.current.focus()}#n=d(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly,onfocus:this.onfocus}));get props(){return t(this.#n)}set props(e){X(this.#n,e)}}function _m(s,e){return e?"indeterminate":s?"checked":"unchecked"}var ym=h("<input/>"),bm=h("<input/>");function $m(s,e){me(e,!1);const n=Ko.create();_n();var o=B(),a=w(o),i=l=>{(function(c,u){me(u,!0);let v=S(u,"value",15),m=hs(u,["$$slots","$$events","$$legacy","value"]);const y=d(()=>Po(m,{"aria-hidden":"true",tabindex:-1,style:hm}));var f=B(),g=w(f),A=_=>{var p=ym();ms(p,()=>({...t(y),value:v()}),void 0,void 0,void 0,!0),r(_,p)},C=_=>{var p=bm();ms(p,()=>({...t(y)}),void 0,void 0,void 0,!0),bo(p,v),r(_,p)};k(g,_=>{t(y).type==="checkbox"?_(A):_(C,!1)}),r(c,f),fe()})(l,Fn(()=>n.props))};k(a,l=>{n.shouldRender&&l(i)}),r(s,o),fe()}var wm=h("<button><!></button>"),km=h("<!> <!>",1);function Am(s,e){const n=ci();me(e,!0);let o=S(e,"checked",15,!1),a=S(e,"ref",15,null),i=S(e,"disabled",3,!1),l=S(e,"required",3,!1),c=S(e,"name",19,()=>{}),u=S(e,"value",3,"on"),v=S(e,"id",19,()=>rl(n)),m=S(e,"indeterminate",15,!1),y=S(e,"type",3,"button"),f=hs(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const g=fm.getOr(null);g&&u()&&(g.opts.value.current.includes(u())?o(!0):o(!1)),Pr.pre(()=>u(),()=>{g&&u()&&(g.opts.value.current.includes(u())?o(!0):o(!1))});const A=jo.create({checked:En(()=>o(),I=>{o(I),e.onCheckedChange?.(I)}),disabled:En(()=>i()??!1),required:En(()=>l()),name:En(()=>c()),value:En(()=>u()),id:En(()=>v()),ref:En(()=>a(),I=>a(I)),indeterminate:En(()=>m(),I=>{m(I),e.onIndeterminateChange?.(I)}),type:En(()=>y()),readonly:En(()=>!!e.readonly)},g),C=d(()=>Po({...f},A.props));var _=km(),p=w(_),E=I=>{var T=B(),O=w(T);{let P=d(()=>({props:t(C),...A.snippetProps}));st(O,()=>e.child,()=>t(P))}r(I,T)},M=I=>{var T=wm();ms(T,()=>({...t(C)}));var O=b(T);st(O,()=>e.children??wt,()=>A.snippetProps),r(I,T)};k(p,I=>{e.child?I(E):I(M,!1)}),$m($(p,2),{}),r(s,_),fe()}const Em=sl({component:"progress",parts:["root"]});class Yo{static create(e){return new Yo(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=nl(this.opts.ref)}#t=d(()=>({role:"progressbar",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current===null?void 0:this.opts.value.current,"data-value":this.opts.value.current===null?void 0:this.opts.value.current,"data-state":Cm(this.opts.value.current,this.opts.max.current),"data-max":this.opts.max.current,"data-min":this.opts.min.current,"data-indeterminate":this.opts.value.current===null?"":void 0,[Em.root]:"",...this.attachment}));get props(){return t(this.#t)}set props(e){X(this.#t,e)}}function Cm(s,e){return s===null?"indeterminate":s===e?"loaded":"loading"}var Tm=h("<div><!></div>");function Sm(s,e){const n=ci();me(e,!0);let o=S(e,"value",3,0),a=S(e,"max",3,100),i=S(e,"min",3,0),l=S(e,"id",19,()=>rl(n)),c=S(e,"ref",15,null),u=hs(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const v=Yo.create({value:En(()=>o()),max:En(()=>a()),min:En(()=>i()),id:En(()=>l()),ref:En(()=>c(),C=>c(C))}),m=d(()=>Po(u,v.props));var y=B(),f=w(y),g=C=>{var _=B(),p=w(_);st(p,()=>e.child,()=>({props:t(m)})),r(C,_)},A=C=>{var _=Tm();ms(_,()=>({...t(m)}));var p=b(_);st(p,()=>e.children??wt),r(C,_)};k(f,C=>{e.child?C(g):C(A,!1)}),r(s,y),fe()}var Im=Cs('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.2892 4.96914C15.6744 5.221 15.7825 5.73746 15.5307 6.12266L9.86399 14.7894C9.73044 14.9936 9.51408 15.129 9.27203 15.1599C9.02996 15.1908 8.78652 15.114 8.60595 14.9499L4.93928 11.6166C4.59873 11.307 4.57364 10.7799 4.88323 10.4394C5.19281 10.0988 5.71985 10.0737 6.0604 10.3833L9.00389 13.0592L14.1357 5.21058C14.3876 4.82538 14.904 4.71728 15.2892 4.96914Z" fill="currentColor"></path></svg>'),Rm=Cs('<svg width="6" height="2" viewBox="0 0 6 2" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.666626 0.999992C0.666626 0.742261 0.875562 0.533325 1.13329 0.533325H4.86663C5.12436 0.533325 5.33329 0.742261 5.33329 0.999992C5.33329 1.25772 5.12436 1.46666 4.86663 1.46666H1.13329C0.875562 1.46666 0.666626 1.25772 0.666626 0.999992Z" fill="currentColor"></path></svg>'),xm=h('<div data-slot="checkbox-indicator" class="c-checkbox-augment__indicator svelte-1e15djx"><!></div>');function Wa(s,e){me(e,!0);let n=S(e,"ref",15,null),o=S(e,"checked",15,!1),a=S(e,"indeterminate",15,!1),i=S(e,"size",3,2),l=S(e,"variant",3,"primary"),c=S(e,"state",19,()=>{}),u=hs(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","size","variant","state","class"]);const v=d(()=>`c-checkbox-augment--size-${i()}`),m=d(()=>`c-checkbox-augment--variant-${l()}`),y=d(()=>c()==="hover"?"c-checkbox-augment--hover":c()==="active"?"c-checkbox-augment--active":"");var f=B(),g=w(f);{const A=(_,p)=>{var E=xm(),M=b(E),I=O=>{(function(P){var H=Im();r(P,H)})(O)},T=O=>{var P=B(),H=w(P),D=U=>{(function(j){var x=Rm();r(j,x)})(U)};k(H,U=>{p?.().indeterminate&&U(D)},!0),r(O,P)};k(M,O=>{p?.().checked?O(I):O(T,!1)}),r(_,E)};let C=d(()=>["c-checkbox-augment",t(v),t(m),t(y),e.class]);Ae(g,()=>Am,(_,p)=>{p(_,Fn({"data-slot":"checkbox",get class(){return t(C)}},()=>u,{get ref(){return n()},set ref(E){n(E)},get checked(){return o()},set checked(E){o(E)},get indeterminate(){return a()},set indeterminate(E){a(E)},children:A,$$slots:{default:!0}}))})}r(s,f),fe()}var Mm=h('<div class="c-task-filter-dropdown__filter-item svelte-126g2tg"><!> <!> <div class="c-task-filter-dropdown__filter-item-count svelte-126g2tg"> </div></div>'),Dm=h('<div class="c-task-filter-dropdown__filter-item svelte-126g2tg"><!> <!> <!> <div class="c-task-filter-dropdown__filter-item-count svelte-126g2tg"> </div></div>'),Om=h("<!> <!> <!>",1),Nm=h("<!> <!>",1);function zm(s,e){me(e,!0);const n=()=>V(g,"$taskCounts",o),[o,a]=je();let i=S(e,"initiallyOpen",3,!1);const l=vv(),c=ln(),u=d(()=>l.hasActiveFilters),v=d(()=>l.allSelected),m=d(()=>l.isIndeterminate),y=d(()=>l.activeFilters),f=d(()=>l.taskFilters),g=nd(c),A=d(()=>Object.values(n()).reduce((p,E)=>p+E,0));var C=B(),_=w(C);Ae(_,()=>Je.Root,(p,E)=>{E(p,{get defaultOpen(){return i()},children:(M,I)=>{var T=Nm(),O=w(T);Ae(O,()=>Je.Trigger,(H,D)=>{D(H,{children:(U,j)=>{xt(U,{size:.5,variant:"soft",color:"neutral",children:(x,N)=>{qe(x,{size:1,children:(W,F)=>{var G=B(),z=w(G),q=R=>{var Y=ie();he(()=>He(Y,`${t(y).size??""} Selected`)),r(R,Y)},L=R=>{var Y=ie("Filter Tasks");r(R,Y)};k(z,R=>{t(u)?R(q):R(L,!1)}),r(W,G)},$$slots:{default:!0}})},$$slots:{default:!0,iconLeft:(x,N)=>{Te(x,{name:"sliders-vertical",size:1,slot:"iconLeft"})},iconRight:(x,N)=>{var W=B(),F=w(W);Ae(F,()=>Je.Chevron,(G,z)=>{z(G,{slot:"iconRight"})}),r(x,W)}}})},$$slots:{default:!0}})});var P=$(O,2);Ae(P,()=>Je.Content,(H,D)=>{D(H,{side:"bottom",align:"start",size:1,children:(U,j)=>{var x=Om(),N=w(x);Ae(N,()=>Je.Item,(G,z)=>{z(G,{onSelect:()=>{l.toggleAll()},children:(q,L)=>{var R=Mm(),Y=b(R);Wa(Y,{get indeterminate(){return t(m)},get checked(){return t(v)},onclick:J=>J.preventDefault(),size:1,variant:"primary"});var Z=$(Y,2);qe(Z,{size:1,color:"neutral",children:(J,ue)=>{var ne=ie("All");r(J,ne)},$$slots:{default:!0}});var Q=$(Z,2),K=b(Q);he(()=>He(K,t(A))),r(q,R)},$$slots:{default:!0}})});var W=$(N,2);Ae(W,()=>Je.Separator,(G,z)=>{z(G,{})});var F=$(W,2);Vt(F,17,()=>t(f),G=>G.value,(G,z)=>{const q=d(()=>t(z).value),L=d(()=>t(y).has(t(q)));var R=B(),Y=w(R);Ae(Y,()=>Je.Item,(Z,Q)=>{Q(Z,{onSelect:()=>function(K){l.toggleFilter(K)}(t(q)),children:(K,J)=>{var ue=Dm(),ne=b(ue);Wa(ne,{get checked(){return t(L)},onclick:Ie=>Ie.preventDefault(),size:1,variant:"primary"});var be=$(ne,2);gv(be,{get taskState(){return t(q)},size:2});var ye=$(be,2);qe(ye,{size:1,color:"neutral",children:(Ie,Ee)=>{var _e=ie();he(()=>He(_e,t(z).label)),r(Ie,_e)},$$slots:{default:!0}});var ee=$(ye,2),ze=b(ee);he(()=>He(ze,n()[t(z).value]??0)),r(K,ue)},$$slots:{default:!0}})}),r(G,R)}),r(U,x)},$$slots:{default:!0}})}),r(M,T)},$$slots:{default:!0}})}),r(s,C),fe(),a()}var Lm=h("<!> <!> <!> <!> <!>",1),Pm=h("<!> <!>",1),Bm=h("<!> <!>",1),Fm=h('<div class="c-task-panel-header svelte-1bdxp6v"><!> <!> <!> <div class="c-task-panel-header__right svelte-1bdxp6v"><!></div></div>');function qm(s,e){me(e,!0);const n=()=>V(y,"$rootTask",a),o=()=>V(c,"$currentConversationId",a),[a,i]=je(),l=Ct(),c=qn(),u=No(),v=_a(),m=hv(),y=po(c),f=ur.tryGetFromContext(),g=d(()=>n()?.subTasksData&&n().subTasksData.length>0);function A(j){for(const x of j)if(x.state===Qr.COMPLETE||x.subTasksData&&A(x.subTasksData))return!0;return!1}function C(j){for(const x of j)if(x.state===Qr.NOT_STARTED||x.state===Qr.IN_PROGRESS||x.subTasksData&&C(x.subTasksData))return!0;return!1}const _=d(()=>!!n()?.subTasksData&&A(n().subTasksData)),p=d(()=>!!n()?.subTasksData&&C(n().subTasksData));async function E(){u?.resetFilters(),v?.reportAddTask();const j=n()?.subTasksData||[],x=j[j.length-1];if(x&&!x.name.trim()&&!x.description.trim())return m?.cancelDeletion(),void cd(x.uuid);l(yi(o(),"",""))}async function M(){v?.reportClearCompletedTasks(),l(dd(o()))}async function I(){f&&f.setActiveTab(pn.messageHistory),v?.reportRunAllTasks(),l(ud(o()))}var T=Fm(),O=b(T);zm(O,{});var P=$(O,2);{let j=d(()=>[Xt.Hover]);it(P,{content:"Add New",get triggerOn(){return t(j)},children:(x,N)=>{Nt(x,{size:.5,variant:"ghost-block",color:"neutral",onclick:E,children:(W,F)=>{Te(W,{name:"circle-fading-plus",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}var H=$(P,2),D=j=>{var x=Bm(),N=w(x);{let F=d(()=>t(_)?"Clear Completed":"No completed tasks"),G=d(()=>[Xt.Hover]);it(N,{get content(){return t(F)},get triggerOn(){return t(G)},children:(z,q)=>{{let L=d(()=>!t(_));Nt(z,{size:.5,variant:"ghost-block",color:"neutral",onclick:M,get disabled(){return t(L)},children:(R,Y)=>{Te(R,{name:"brush-cleaning",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}var W=$(N,2);{let F=d(()=>t(p)?"Run All":"No tasks to run"),G=d(()=>[Xt.Hover]);it(W,{get content(){return t(F)},get triggerOn(){return t(G)},children:(z,q)=>{{let L=d(()=>!t(p));Nt(z,{size:.5,variant:"ghost-block",color:"neutral",onclick:I,get disabled(){return t(L)},children:(R,Y)=>{Te(R,{name:"play",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(j,x)};k(H,j=>{t(g)&&j(D)});var U=$(H,2);(function(j,x){me(x,!0);const N=()=>V(R,"$rootTask",G),W=()=>V(Y,"$isImportingExporting",G),F=()=>V(L,"$currentConversationId",G),[G,z]=je();let q=S(x,"initiallyOpen",3,!1);const L=qn(),R=po(L),Y=sd(L),Z=Ct(),Q=_a(),{store:K}=ys();let J=Oe(void 0);const ue=()=>t(J)?.requestClose(),ne=d(()=>N()?.subTasksData&&N().subTasksData.length>0);async function be(){W()||(Q?.reportExportTaskList(),Z(rd(F())),ue?.())}async function ye(){W()||(Q?.reportImportTaskList(),Z(od(F())),ue?.())}async function ee(){if(Q?.reportContinueTasksInNewChat(),!N())return;const _e=qn.select(K.getState()),pe=Z(ad(_e)),se=await pe.promise;Z(id({},{rootTask:se})),ue?.()}async function ze(){Q?.reportClearAllTasks(),Z(ld(F())),ue?.()}var Ie=B(),Ee=w(Ie);Ae(Ee,()=>Je.Root,(_e,pe)=>{Pt(pe(_e,{get defaultOpen(){return q()},children:(se,te)=>{var re=Pm(),le=w(re);Ae(le,()=>Je.Trigger,($e,ce)=>{ce($e,{children:(ge,de)=>{Nt(ge,{size:.5,variant:"ghost-block",color:"neutral",get disabled(){return W()},children:(we,Be)=>{var De=B(),Le=w(De),Me=ke=>{es(ke,{size:1})},We=ke=>{Te(ke,{name:"ellipsis",size:2})};k(Le,ke=>{W()?ke(Me):ke(We,!1)}),r(we,De)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ve=$(le,2);Ae(ve,()=>Je.Content,($e,ce)=>{ce($e,{size:1,side:"bottom",align:"end",children:(ge,de)=>{var we=Lm(),Be=w(we);{let ke=d(()=>W()||!t(ne));Ae(Be,()=>Je.Item,(Re,xe)=>{xe(Re,{onSelect:be,get disabled(){return t(ke)},children:(ae,Pe)=>{var Ce=ie("Export to Markdown");r(ae,Ce)},$$slots:{default:!0,iconLeft:(ae,Pe)=>{Te(ae,{name:"share",size:1,slot:"iconLeft"})}}})})}var De=$(Be,2);Ae(De,()=>Je.Item,(ke,Re)=>{Re(ke,{onSelect:ye,get disabled(){return W()},children:(xe,ae)=>{var Pe=ie("Import from Markdown");r(xe,Pe)},$$slots:{default:!0,iconLeft:(xe,ae)=>{Te(xe,{name:"file-input",size:1,slot:"iconLeft"})}}})});var Le=$(De,2);{let ke=d(()=>!t(ne));Ae(Le,()=>Je.Item,(Re,xe)=>{xe(Re,{onSelect:ee,get disabled(){return t(ke)},children:(ae,Pe)=>{var Ce=ie("Continue in New Chat");r(ae,Ce)},$$slots:{default:!0,iconLeft:(ae,Pe)=>{Te(ae,{name:"wand-sparkles",size:1,slot:"iconLeft"})}}})})}var Me=$(Le,2);Ae(Me,()=>Je.Separator,(ke,Re)=>{Re(ke,{})});var We=$(Me,2);{let ke=d(()=>!t(ne));Ae(We,()=>Je.Item,(Re,xe)=>{xe(Re,{onSelect:ze,get disabled(){return t(ke)},children:(ae,Pe)=>{var Ce=ie("Clear Task List");r(ae,Ce)},$$slots:{default:!0,iconLeft:(ae,Pe)=>{Te(ae,{name:"trash-2",size:1,slot:"iconLeft"})}}})})}r(ge,we)},$$slots:{default:!0}})}),r(se,re)},$$slots:{default:!0}}),se=>X(J,se,!0),()=>t(J))}),r(j,Ie),fe(),z()})(b(U),{}),r(s,T),fe(),i()}function Hm(s,e){me(e,!1);const[n,o]=je(),a=Ct(),i=qn(),l=No();async function c(){l?.resetFilters(),a(yi(V(i,"$currentConversationId",n),"",""))}const u=ur.tryGetFromContext();_n(),jr(s,{footer:m=>{xt(m,{size:1,variant:"soft",$$events:{click:()=>{u?.setActiveTab(pn.messageHistory)}},children:(y,f)=>{var g=ie("Return to Thread");r(y,g)},$$slots:{default:!0,iconLeft:(y,f)=>{Te(y,{name:"arrow-left",slot:"iconLeft"})}}})},children:(m,y)=>{Hn(m,{header:A=>{qe(A,{color:"primary",size:4,children:(C,_)=>{var p=ie("Get Started with Tasks");r(C,p)},$$slots:{default:!0}})},footer:A=>{xt(A,{size:1,variant:"soft",$$events:{click:()=>c()},children:(C,_)=>{var p=ie("Add Task");r(C,p)},$$slots:{default:!0,iconLeft:(C,_)=>{Te(C,{name:"circle-fading-plus",slot:"iconLeft"})}}})},children:(A,C)=>{qe(A,{size:1,variant:"surface",children:(_,p)=>{var E=ie(`Ask your agent to make a plan which you can refine here in your agent task list. Or, make your
      own plan.`);r(_,E)},$$slots:{default:!0}})},$$slots:{header:!0,footer:!0,default:!0}})}}),fe(),o()}function Wm(s,e){me(e,!1);const n=No();_n(),jr(s,{children:(o,a)=>{Hn(o,{header:c=>{qe(c,{size:4,children:(u,v)=>{var m=ie("No Results Found");r(u,m)},$$slots:{default:!0}})},footer:c=>{xt(c,{size:1,variant:"soft",$$events:{click:()=>{n?.resetFilters()}},children:(u,v)=>{var m=ie("Reset Filters");r(u,m)},$$slots:{default:!0,iconLeft:(u,v)=>{Te(u,{name:"undo-2",slot:"iconLeft"})}}})},children:(c,u)=>{qe(c,{size:1,variant:"surface",children:(v,m)=>{var y=ie("Try updating your search or filter.");r(v,y)},$$slots:{default:!0}})},$$slots:{header:!0,footer:!0,default:!0}})}}),fe()}var Gm=h('<div class="c-task-panel__list svelte-z43r1o"><!></div>'),Um=h('<div class="c-task-panel__empty svelte-z43r1o"><!></div>'),Vm=h('<div class="c-task-panel svelte-z43r1o"><div class="c-task-panel__header svelte-z43r1o"><!></div> <!></div>');function jm(s,e){me(e,!0);const n=()=>V(m,"$rootTask",o),[o,a]=je(),i=Ct(),l=qn(),c=ts(l),{store:u}=ys(),v=new yv,m=po(l),y=d(()=>gd(n()?.uuid,v.activeFilters));pv(v);const f=new mv({store:u,version:fv.v2});_v(f),Jt(()=>{n()&&f.reportViewTaskList(),i(vd(V(l,"$currentConversationId",o)))});var g=B(),A=w(g),C=_=>{var p=Vm(),E=b(p);qm(b(E),{});var M=$(E,2),I=O=>{var P=Gm(),H=b(P);bv(H,{get taskUuid(){return n().uuid},isRootTask:!0,editable:!0}),tn(1,P,()=>ps,()=>({duration:150,y:10})),r(O,P)},T=O=>{var P=B(),H=w(P),D=j=>{Wm(j,{})},U=j=>{var x=Um();Hm(b(x),{}),r(j,x)};k(H,j=>{n()?.subTasks.length?j(D):j(U,!1)},!0),r(O,P)};k(M,O=>{V(t(y),"$visibleSubTasks",o).length>0&&n()?.subTasks?.length?O(I):O(T,!1)}),r(_,p)};k(A,_=>{V(c,"$isAgentic",o)&&n()&&_(C)}),r(s,g),fe(),a()}var Km=h('<div class="c-lazy-loading-error"><!></div>');function Ym(s,e){me(e,!0);const[n,o]=je();let a=hs(e,["$$slots","$$events","$$legacy","children"]);const i=$v(),l=i?.enabled??Yt(!1);var c=B(),u=w(c),v=y=>{var f=B(),g=w(f);Gs(g,()=>Hs(()=>import("./AugmentMessage-BDJkLW0G.js").then(A=>A.Q),__vite__mapDeps([35,1,2,36,5,6,37,4,7,10,9,11,38,18,19,39,40,27,28,41,42,43,12,13,14,15,16,17,20,21,22,23,24,44,3,8,25,26,29,30,45,46,47,48,49,50,51,33,34,52,53,54,55,56]),import.meta.url),A=>{},(A,C)=>{var _=d(()=>{var{default:I}=t(C);return{IntersectionDisplay:I}}),p=d(()=>t(_).IntersectionDisplay),E=B(),M=w(E);Ae(M,()=>t(p),(I,T)=>{T(I,Fn(()=>a,{children:(O,P)=>{var H=B(),D=w(H);st(D,()=>e.children??wt),r(O,H)},$$slots:{default:!0}}))}),r(A,E)},(A,C)=>{var _=Km(),p=b(_);qe(p,{size:1,color:"error",type:"monospace",children:(E,M)=>{var I=ie();he(()=>He(I,t(C)+"")),r(E,I)},$$slots:{default:!0}}),r(A,_)}),r(y,f)},m=y=>{var f=B(),g=w(f);st(g,()=>e.children??wt),r(y,f)};k(u,y=>{V(l,"$enabled",n)?y(v):y(m,!1)}),r(s,c),fe(),o()}const Rl=(s,e,n)=>(vr(e)&&zo(e)&&s.length>0||Lo(e)&&s.length>0?s[s.length-1].push({turn:e,idx:n}):s.push([{turn:e,idx:n}]),s),Xm=Vi(s=>s.reduce(Rl,[])),Jm=Vi(s=>{if(!Array.isArray(s))return console.warn("groupByToolUses received non-array input:",s),[];const e=structuredClone(s),n=[];let o=0;for(let a=0;a<e.length;a++){const i=e[a],l=o;if(ba(i)&&i){i.structured_output_nodes=i.structured_output_nodes?.map(c=>({...c,requestId:i.request_id}));for(let c=a+1;c<e.length;c++){const u=e[c],v=!u.response_text;if(!(u.response_text&&u.response_text.length<100)&&!v||!ba(u))break;{const m=u.structured_output_nodes?.map(y=>({...y,requestId:u.request_id}));i.structured_output_nodes?.push(...m??[]),o++,e.splice(c,1),c--}}}Rl(n,i,l),o++}return n}),Qm=(s,e,n,o,a)=>{const i={retryMessage:void 0,showGeneratingResponse:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1};return((l,c)=>c&&hd(c)&&c.status===Tn.cancelled?!0:l?.status===Tn.cancelled)(s,e)?i.showStopped=!0:o===Vn.running?s?.isRetriable&&s?.display_error_message?i.retryMessage=s.display_error_message:a&&n&&s?.status!=="sent"?i.showRunningSpacer=!0:i.showGeneratingResponse=!0:o===Vn.awaitingUserAction&&(i.showAwaitingUserInput=!0,i.showRunningSpacer=!0),i},Zm=(s,e,n=!1)=>{const o=e.getCurrentChatHistory(),a=o.findLast(vr),i=n?Jm(o):Xm(o),l=(u=>u.currentAgent?.workspace_status===Er.workspaceResuming||u.isCurrentAgentRunning?Vn.running:Vn.notRunning)(e),c=((u,v,m,y)=>{const f={retryMessage:void 0,showGeneratingResponse:!1,showResumingRemoteAgent:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1,remoteAgentErrorConfig:void 0,showPaused:!1};if(m===Vn.running?u?.isRetriable&&u?.display_error_message?f.retryMessage=u.display_error_message:y.currentAgent?.workspace_status===Er.workspaceResuming?f.showResumingRemoteAgent=!0:v.phase!==pd.running?f.showGeneratingResponse=!0:f.showRunningSpacer=!0:m===Vn.awaitingUserAction&&(f.showAwaitingUserInput=!0,f.showRunningSpacer=!0),y.currentAgent?.workspace_status===Er.workspacePaused&&(f.showPaused=!0),y.sendMessageError&&y.currentAgentId){const A=y.currentAgentId,C=y.sendMessageError;f.remoteAgentErrorConfig={error:C,onRetry:C.canRetry&&C.failedExchangeId?()=>y.retryFailedMessage(A,C.failedExchangeId):void 0,onDelete:C.type===Zi.agentFailed?()=>y.deleteAgent(A):void 0}}else if(y.agentChatHistoryError&&y.currentAgentId){const A=y.currentAgentId;f.remoteAgentErrorConfig={error:y.agentChatHistoryError,onRetry:()=>y.refreshAgentChatHistory(A)}}return f})(a,s,l,e);return{chatHistory:Array.isArray(o)?o:[],groupedChatHistory:i,lastGroupConfig:c}};var ef=(s,e)=>{s.preventDefault(),e.onResend()},tf=h('Connection lost. Please <button class="svelte-1ks0fxf">try again</button> to restart the conversation!',1),nf=(s,e)=>{s.preventDefault(),e.onResend()},sf=h('We encountered an issue sending your message. Please <button class="svelte-1ks0fxf">try again</button>',1),rf=h('<div class="c-msg-list__request-id svelte-1ks0fxf"><span> </span> <!></div>'),of=h('<div class="c-msg-list__turn-response-failure svelte-1ks0fxf"><!> <!></div>');Nn(["click"]);var af=h("<div><!></div>"),lf=h('<div class="c-expandable-box svelte-951e4z"><!> <!></div>');function cf(s,e){me(e,!0);let n,o=Oe(!1),a=Oe(!1),i=Oe(0);function l(){X(o,!t(o))}function c(){(function(){t(o)&&n&&n.firstElementChild instanceof HTMLElement&&n.lastElementChild instanceof HTMLElement&&n.firstElementChild.offsetTop>=n.lastElementChild.offsetTop&&X(o,!1)})(),function(){n&&X(i,n.clientHeight,!0)}()}Jt(()=>{c();const g=new ResizeObserver(c);return g.observe(n),()=>{g.disconnect()}});var u=lf();let v;var m=b(u);Gi(m,{get hasOverflow(){return t(a)},set hasOverflow(g){X(a,g,!0)},children:(g,A)=>{var C=af();let _;var p=b(C);st(p,()=>e.children??wt),Pt(C,E=>n=E,()=>n),he(E=>_=ft(C,1,"c-expandable-box__contents svelte-951e4z",null,_,E),[()=>({"is-expanded":t(o)})]),r(g,C)},$$slots:{default:!0}});var y=$(m,2),f=g=>{{let A=d(()=>t(o)?"Collapse context":"Expand context");Nt(g,{variant:"ghost-block",color:"neutral",size:.5,get title(){return t(A)},$$events:{click:l},children:(C,_)=>{Te(C,{name:"chevrons-up-down"})},$$slots:{default:!0}})}};k(y,g=>{(t(a)||t(o))&&g(f)}),he(g=>v=jn(u,"",v,g),[()=>({"--container-height":t(i)?t(i)+"px":"auto"})]),r(s,u),fe()}var df=h('<span class="c-pin-button"><!></span>'),uf=h('<button class="c-context-badge__button svelte-1c0qk5u" type="button"><div class="c-context-badge__content svelte-1c0qk5u"><!> <!></div></button>'),vf=h('<div class="c-context-badge__content svelte-1c0qk5u"><!> <!></div>'),gf=h('<div class="c-context-badge__left-icon svelte-1c0qk5u"><!></div>'),hf=h("<!><!>",1),pf=h('<div class="c-context-badge svelte-1c0qk5u"><!></div>');function nr(s,e){const n=vo(e);me(e,!1);let o=S(e,"color",8,"neutral"),a=S(e,"size",8,1),i=S(e,"removeBtn",24,()=>{}),l=S(e,"showWarning",24,()=>{}),c=S(e,"hideLeftIcon",8,!1),u=S(e,"variant",8,"soft"),v=S(e,"asButton",8,!0);const m=void 0,y=void 0,f=void 0,g=void 0,A=E=>{if(E.stopPropagation(),i()===void 0)throw new Error("No remove button provided");i().onRemove()};var C={leftIcon:m,rightButtons:y,chaser:f,leftButtons:g};_n();var _=pf(),p=b(_);return xn.Root(p,{get color(){return o()},get size(){return a()},get variant(){return u()},children:(E,M)=>{var I=B(),T=w(I),O=P=>{var H=B(),D=w(H),U=x=>{var N=uf(),W=b(N),F=b(W);Ln(F,e,"default",{},null);var G=$(F,2),z=q=>{Te(q,{name:"circle-alert"})};k(G,q=>{l()&&q(z)}),Ht("click",N,function(q){Jn.call(this,e,q)}),r(x,N)},j=x=>{var N=vf(),W=b(N);Ln(W,e,"default",{},null);var F=$(W,2),G=z=>{Te(z,{name:"circle-alert"})};k(F,z=>{l()&&z(G)}),r(x,N)};k(D,x=>{v()?x(U):x(j,!1)}),r(P,H)};k(T,P=>{In(l()),nn(()=>n.default||l())&&P(O)}),r(E,I)},$$slots:{default:!0,chaser:(E,M)=>{var I=B(),T=w(I);Ln(T,e,"chaser",{},null),r(E,I)},leftButtons:(E,M)=>{var I=B(),T=w(I);Ln(T,e,"leftButtons",{},O=>{var P=B(),H=w(P),D=U=>{var j=gf(),x=b(j);xn.IconButton(x,{disabled:!0,children:(N,W)=>{var F=B(),G=w(F);Ln(G,e,"leftIcon",{},z=>{Te(z,{name:"file"})}),r(N,F)},$$slots:{default:!0}}),r(U,j)};k(H,U=>{c()||U(D)}),r(O,P)}),r(E,I)},rightButtons:(E,M)=>{var I=hf(),T=w(I),O=D=>{var U=B(),j=w(U);Ln(j,e,"rightButtons",{},null),r(D,U)};k(T,D=>{nn(()=>n.rightButtons)&&D(O)});var P=$(T),H=D=>{xn.IconButton(D,{class:"c-context-badge__remove-btn",get title(){return In(i()),nn(()=>i().title)},get size(){return a()},variant:"ghost",color:"neutral",$$events:{click:A},children:(U,j)=>{Te(U,{name:"x"})},$$slots:{default:!0}})};k(P,D=>{i()&&D(H)}),r(E,I)}}}),r(s,_),Pn(e,"leftIcon",m),Pn(e,"rightButtons",y),Pn(e,"chaser",f),Pn(e,"leftButtons",g),fe(C)}var mf=h("<div><!> <!></div>"),ff=h("<!> <!>",1),_f=h("<!> <!>",1);function yf(s,e){me(e,!0);const[n,o]=je(),a=Ct(),i=Yn(),l=ln();function c(y){const f=V(l,"$currentConversationId",n);f&&a(bi(f,[y.id]))}const u={size:1,variant:"ghost-block",color:"neutral"};let v=d(()=>e.item.sourceFolderGroup.map(y=>({filePath:y.sourceFolder.folderRoot,name:tl(y.sourceFolder.folderRoot),onRemove:()=>c(y),onEditGuideline:()=>{return f=y.sourceFolder.folderRoot,void i.openGuidelines(f);var f}}))),m=d(()=>t(v).some(y=>y.onEditGuideline));nr(s,{leftIcon:g=>{var A=B(),C=w(A);Ae(C,()=>xn.Root,(_,p)=>{p(_,{color:"accent",size:0,children:(E,M)=>{var I=ie();he(()=>He(I,e.item.sourceFolderGroup.length)),r(E,I)},$$slots:{default:!0}})}),r(g,A)},rightButtons:g=>{var A=B(),C=w(A);Ae(C,()=>Je.Root,(_,p)=>{p(_,{nested:!1,offset:[0,5],children:(E,M)=>{var I=_f(),T=w(I);Ae(T,()=>Je.Trigger,(P,H)=>{H(P,{children:(D,U)=>{var j=B(),x=w(j);Ae(x,()=>xn.IconButton,(N,W)=>{W(N,{title:"Open menu",variant:"ghost",color:"neutral",size:1,children:(F,G)=>{Te(F,{name:"ellipsis"})},$$slots:{default:!0}})}),r(D,j)},$$slots:{default:!0}})});var O=$(T,2);Ae(O,()=>Je.Content,(P,H)=>{H(P,{size:1,children:(D,U)=>{var j=ff(),x=w(j);Ae(x,()=>Je.Label,(W,F)=>{F(W,{children:(G,z)=>{var q=ie("Repos");r(G,q)},$$slots:{default:!0}})});var N=$(x,2);Vt(N,17,()=>t(v),$n,(W,F,G,z)=>{var q=B(),L=w(q);{const R=Y=>{var Z=mf();let Q;var K=b(Z),J=ne=>{it(ne,{content:"Edit repo instructions",children:(be,ye)=>{Nt(be,Fn(()=>u,{$$events:{click(...ee){t(F).onEditGuideline?.apply(this,ee)}},children:(ee,ze)=>{Te(ee,{name:"cog"})},$$slots:{default:!0}}))},$$slots:{default:!0}})};k(K,ne=>{t(F).onEditGuideline&&ne(J)});var ue=$(K,2);it(ue,{content:"Remove repo from context",children:(ne,be)=>{Nt(ne,Fn(()=>u,{$$events:{click(...ye){t(F).onRemove?.apply(this,ye)}},children:(ye,ee)=>{Te(ye,{name:"x"})},$$slots:{default:!0}}))},$$slots:{default:!0}}),he(ne=>Q=ft(Z,1,"c-multi-repo-chip__dropdown-item__actions svelte-15zo2zj",null,Q,ne),[()=>({"c-multi-repo-chip__dropdown-item__guideline-space":t(m)&&!t(F).onEditGuideline})]),r(Y,Z)};Ae(L,()=>Je.Item,(Y,Z)=>{Z(Y,Fn(()=>t(F),{class:"c-multi-repo-chip__dropdown-item",highlight:!1,disabled:!0,iconRight:R,children:(Q,K)=>{var J=ie();he(()=>He(J,t(F).name)),r(Q,J)},$$slots:{iconRight:!0,default:!0}}))})}r(W,q)}),r(D,j)},$$slots:{default:!0}})}),r(E,I)},$$slots:{default:!0}})}),r(g,A)},children:(g,A)=>{var C=ie("Repos");r(g,C)},$$slots:{leftIcon:!0,rightButtons:!0,default:!0}}),fe(),o()}const io=new Map(hg.flatMap(([s,e])=>(e??[s]).map(n=>[n,s]))),bf=s=>{if(!s)return;const e=s.split("/").at(-1);if(!e)return;const n=e.toLocaleLowerCase(),o=n.split("."),a=io.get(n)??io.get(o.at(-1)??"")??io.get(o.slice(-2).join("."))??void 0;return a?{javascriptreact:"javascript",typescriptreact:"typescript",shellscript:"shell","cuda-cpp":"cpp",jsonc:"json",jsonl:"json",properties:"ini","objective-c":"objective-c","objective-cpp":"objective-cpp",restructuredtext:"restructuredtext"}[a]??a:void 0};var $f=h('<span class="c-selection-hover-contents__directory svelte-p1gwc6"> </span>'),wf=h('<div class="c-selection-hover-contents__path svelte-p1gwc6"><!> <!></div>'),kf=h('<div class="c-selection-hover-contents__monaco svelte-p1gwc6"><!></div>'),Af=h('<pre class="c-selection-preview__code svelte-p1gwc6"><code> </code></pre>'),Ef=h('<pre class="c-selection-preview__code svelte-p1gwc6"><code> </code></pre>'),Cf=h('<div class="c-selection-hover-contents svelte-p1gwc6"><!> <!></div>'),Tf=h('<div class="c-text-tooltip-content__shortcut svelte-1cimtn4"><!></div>'),Sf=h('<div class="c-text-tooltip-content svelte-1cimtn4"><!> <!> <!></div>');function pr(s,e){var n=Sf(),o=b(n);qe(o,{size:1,weight:"medium",block:!0,children:(c,u)=>{var v=ie();he(()=>He(v,e.heading)),r(c,v)},$$slots:{default:!0}});var a=$(o,2);qe(a,{size:0,block:!0,noHyphens:!0,muted:!0,children:(c,u)=>{var v=ie();he(()=>He(v,e.description)),r(c,v)},$$slots:{default:!0}});var i=$(a,2),l=c=>{var u=Tf(),v=b(u);fn(v,{get commandName(){return e.shortcutCommandName},keysOnly:!0}),r(c,u)};k(i,c=>{e.shortcutCommandName&&c(l)}),r(s,n)}var If=h('<span class="c-selection-chip__icon svelte-5u33zc"><!></span>'),Rf=h("<div><!></div>");function xf(s,e){var n=Rf(),o=b(n);{const a=l=>{var c=B(),u=w(c),v=y=>{(function(f,g){me(g,!0);let A=S(g,"pathName",19,()=>{});const C=Hs(()=>import("./index-DF_yYUtg.js").then(N=>N.d),__vite__mapDeps([18,1,2,19]),import.meta.url);let _=d(()=>bf(A()??"")),p=Oe(void 0),E=Oe(""),M=Oe(!1);const I=async(N,W)=>{X(M,!0),X(E,`
         --editor-width: ${N}px;
         --editor-height: min(${W}px, 30vh);
    `)};rt(()=>{t(p)?.onDidContentSizeChange(N=>I(N.contentWidth,N.contentHeight))}),rt(()=>{t(p)&&!t(M)&&I(t(p)?.getContentWidth(),t(p)?.getContentHeight())});const T=Ct(),O=()=>{A()&&T($s({repoRoot:"",pathName:A(),fullRange:g.range}))};let P=d(()=>({automaticLayout:!0,lineNumbers:g.range?N=>`${g.range.startLineNumber+N}`:"off",lineDecorationsWidth:0,wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,stickyScroll:{enabled:!1},renderWhitespace:"none",renderFinalNewline:"on"}));var H=Cf(),D=b(H),U=N=>{var W=wf(),F=b(W);xt(F,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:O},children:(q,L)=>{{let R=d(()=>tl(A()));$g(q,{value:[],get filepath(){return t(R)},onCodeAction:O})}},$$slots:{default:!0}});var G=$(F,2),z=q=>{var L=$f(),R=b(L);he(Y=>He(R,Y),[()=>$a(A())]),r(q,L)};k(G,q=>{$a(A())&&q(z)}),r(N,W)};k(D,N=>{A()&&N(U)});var j=$(D,2),x=N=>{var W=B(),F=w(W);Gs(F,()=>C,G=>{var z=Ef(),q=b(z),L=b(q);he(()=>He(L,g.originalCode??"")),r(G,z)},(G,z)=>{var q=kf(),L=b(q);{let R=d(()=>g.originalCode??"");Ae(L,()=>t(z).default,(Y,Z)=>{Z(Y,{get text(){return t(R)},get lang(){return t(_)},get pathName(){return A()},get options(){return t(P)},get editorInstance(){return t(p)},set editorInstance(Q){X(p,Q,!0)}})})}r(G,q)},G=>{var z=Af(),q=b(z),L=b(q);he(()=>He(L,g.originalCode??"")),r(G,z)}),r(N,W)};k(j,N=>{C&&N(x)}),he(()=>jn(H,t(E))),r(f,H),fe()})(y,{get originalCode(){return e.originalCode},get pathName(){return e.pathName},get range(){return e.range}})},m=y=>{pr(y,{heading:"No code selected",description:"Highlight code to add context"})};k(u,y=>{e.originalCode?y(v):y(m,!1)}),r(l,c)};let i=d(()=>e.originalCode?"selection-chip-code":void 0);it(o,{maxWidth:"100%",get theme(){return t(i)},get onOpenChange(){return e.trackContextHover},content:a,children:(l,c)=>{{let u=d(()=>e.originalCode?"info":"neutral"),v=d(()=>e.originalCode?"soft":"ghost");nr(l,{get color(){return t(u)},get variant(){return t(v)},hideLeftIcon:!0,asButton:!1,children:(m,y)=>{var f=If(),g=b(f);Ae(g,()=>xn.IconButton,(A,C)=>{C(A,{disabled:!0,children:(_,p)=>{Te(_,{name:"text-cursor"})},$$slots:{default:!0}})}),r(m,f)},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}})}r(s,n)}var Mf=h("<span> <!></span>"),Df=h("<!> <!>",1);function Of(s,e){me(e,!0);const n=()=>V(l,"$contextWorkspaceGuidelines",o),[o,a]=je(),i=Yn(),l=_d(),c=ln(),u=yd(c);let v=d(()=>n()?n()[0]:void 0),m=d(()=>t(v)?.lengthLimit),y=d(()=>e.item.userGuidelines.lengthLimit);const f=bd();let g=d(()=>V(u,"$activeRules",o).map(D=>D.rule)||[]),A=d(()=>Zv({rules:V(f,"$rules",o),workspaceGuidelinesContent:t(v)?.contents||"",contextRules:t(g),rulesAndGuidelinesLimit:t(m)})),C=d(()=>t(A).isOverLimit),_=d(()=>t(A).warningMessage);const p=Ot("enableRules");let E=d(()=>e.item.userGuidelines.overLimit),M=d(()=>t(E)||t(C)),I=d(()=>V(p,"$enableRules",o)?"Rules & Guidelines":"Guidelines");function T(D){e.trackContextButton?.("guidelines",D),i.openSettingsPage("guidelines")}var O=Df(),P=w(O);on(P,{name:"openRulesAndGuidelinesSettings",handler:()=>T("keybinding")});var H=$(P,2);it(H,{content:U=>{var j=Mf(),x=b(j),N=$(x);fn(N,{commandName:"openRulesAndGuidelinesSettings",keysOnly:!0}),he(W=>He(x,`${W??""} `),[()=>t(M)?t(C)?t(_):t(E)?`Guidelines exceeded length limit of ${t(y)} characters`:void 0:`${t(I)}`]),r(U,j)},children:(U,j)=>{{let x=d(()=>t(M)?"warning":"neutral"),N=d(()=>wg("Enter",()=>T("button")));Nt(U,{size:.5,variant:"ghost-block",get color(){return t(x)},onclick:()=>T("button"),get onkeyup(){return t(N)},children:(W,F)=>{var G=B(),z=w(G),q=R=>{Te(R,{name:"circle-alert"})},L=R=>{Te(R,{name:"album"})};k(z,R=>{t(M)?R(q):R(L,!1)}),r(W,G)},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}}),r(s,O),fe(),a()}var Nf=h("<!> <!>",1),zf=h("<div><!></div>");function Lf(s,e){me(e,!0);const n=()=>V(t(f),"$item",l),o=()=>V(y,"$currentConversationId",l),a=()=>V(t(E),"$isPinned",l),i=()=>V(t(M),"$showWarning",l),[l,c]=je();let u=Oe(!1);const v=new Uv({onHoverStart:()=>{X(u,!0)},onHoverEnd:()=>{X(u,!1)},hoverTriggerDuration:0}),m=Yn(),y=ln(),f=d(()=>$d(y,e.itemId)),g=Ct(),A=()=>{n()&&o()&&g(bi(o(),[e.itemId]))},C=(D,U)=>{g(gt(Ze.WEBVIEW.CONTEXT_BUTTON_CLICKED,{button:D,source:U}))},_=D=>{D&&g(gt(Ze.WEBVIEW.CONTEXT_CODE_SELECTION_HOVERED,{}))},p=$i("agentMemoriesFilePathName"),E=d(()=>Rd(o(),n()?.id)),M=d(()=>n()&&sa(n())?Md(n().sourceFolder.folderRoot):Xs(!1)),I=d(()=>n()&&((D,U,j)=>{const x={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0};if(kd(D))return{...x,onClick:()=>g($s(D.file)),removeTitle:"Remove file from context",filepath:D.file.pathName};if(Ad(D))return{...x,onClick:()=>g($s(D.recentFile)),removeTitle:"Remove file from context",filepath:D.recentFile.pathName};if(Ed(D))return{...x,onClick:()=>g($s(D.folder)),removeTitle:"Remove folder from context",filepath:D.folder.pathName,iconName:"folder-opened"};if(Cd(D))return{...x,removeTitle:"Remove external source from context",filepath:D.label,iconName:"book"};if(sa(D))return{...x,removeTitle:"Remove source folder from context",filepath:D.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1};if(ra(D))return{...x,iconName:"root-folder",pinnable:!1};if(Td(D)){const N=D.rule.path;return{...x,onClick:()=>g($s({repoRoot:"",pathName:N})),removeTitle:"Remove rule from context",filepath:N,iconName:"rule"}}return oa(D)?{...x,onClick:()=>{const N=U;j&&m.reportAgentSessionEvent({eventName:Sd.openedMemoriesFile,conversationId:j,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!N}}}),m.openSettingsPage("memories")},pinnable:!1}:x})(n(),V(p,"$agentMemoriesFilePathName",l),o())),T=d(()=>t(I)?.pinnable&&(t(u)||a()));var O=B(),P=w(O),H=D=>{var U=B(),j=w(U),x=W=>{xf(W,{get originalCode(){return n().selection.originalCode},get range(){return n().selection.fullRange},get pathName(){return n().selection.pathName},trackContextHover:_})},N=W=>{var F=B(),G=w(F),z=L=>{Of(L,{get item(){return n()},trackContextButton:C})},q=L=>{var R=B(),Y=w(R),Z=K=>{yf(K,{get item(){return n()}})},Q=K=>{var J=B(),ue=w(J),ne=ye=>{{let ee=d(()=>t(I).onClick||Ks);(function(ze,Ie){me(Ie,!0);let Ee=S(Ie,"onClick",3,()=>{});const _e=re=>{Ie.trackContextButton?.("memories",re),Ee()()};var pe=Nf(),se=w(pe);on(se,{name:"openAgentMemories",handler:()=>_e("keybinding")});var te=$(se,2);it(te,{content:le=>{pr(le,{heading:"Agent memories",description:"Add preferences about your workspace",shortcutCommandName:"openAgentMemories"})},children:(le,ve)=>{Nt(le,{size:.5,variant:"ghost-block",color:"neutral",onclick:()=>_e("button"),children:($e,ce)=>{Te($e,{name:"archive"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),r(ze,pe),fe()})(ye,{get onClick(){return t(ee)},trackContextButton:C})}},be=ye=>{var ee=zf(),ze=b(ee),Ie=_e=>{{let pe=d(()=>({title:t(I).removeTitle,onRemove:A}));nr(_e,{get removeBtn(){return t(pe)},get showWarning(){return i()},$$events:{click(...se){(t(I).onClick||Ks)?.apply(this,se)}},children:(se,te)=>{{const re=ve=>{so(ve,{get option(){return n()}})};let le=d(()=>[Xt.Hover]);it(se,{get triggerOn(){return t(le)},content:re,children:(ve,$e)=>{Cr(ve,{nopath:!0,get filepath(){return t(I).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0,leftButtons:(se,te)=>{{let re=d(()=>a()?"Unpin":"Pin to context");(function(le,ve){me(ve,!0);let $e=S(ve,"isPinned",3,!1),ce=S(ve,"title",19,()=>$e()?"Unpin":"Pin to context"),ge=Oe(!1);it(le,{get content(){return ce()},children:(de,we)=>{var Be=B(),De=w(Be);Ae(De,()=>xn.IconButton,(Le,Me)=>{Me(Le,{color:"neutral",$$events:{click:We=>{We.stopPropagation(),ve.onPin()},mouseover:()=>{X(ge,!0)},mouseleave:()=>{X(ge,!1)}},children:(We,ke)=>{var Re=df(),xe=b(Re);{let ae=d(()=>$e()&&t(ge)?"pin-off":"pin");Te(xe,{get name(){return t(ae)},size:0})}r(We,Re)},$$slots:{default:!0}})}),r(de,Be)},$$slots:{default:!0}}),fe()})(se,{onPin:()=>o()&&g(xd(o(),n().id)),get title(){return t(re)},get isPinned(){return a()},slot:"leftButtons"})}}}})}},Ee=_e=>{var pe=B(),se=w(pe),te=le=>{{let ve=d(()=>({title:t(I).removeTitle,onRemove:A}));nr(le,{get removeBtn(){return t(ve)},get showWarning(){return i()},$$events:{click(...$e){(t(I).onClick||Ks)?.apply(this,$e)}},children:($e,ce)=>{{const ge=we=>{so(we,{get option(){return n()}})};let de=d(()=>[Xt.Hover]);it($e,{get triggerOn(){return t(de)},content:ge,children:(we,Be)=>{Cr(we,{nopath:!0,get filepath(){return t(I).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0,leftIcon:($e,ce)=>{(function(ge,de){var we=B(),Be=w(we),De=Me=>{Te(Me,{name:"file"})},Le=Me=>{var We=B(),ke=w(We),Re=ae=>{Te(ae,{name:"folder-open"})},xe=ae=>{var Pe=B(),Ce=w(Pe),Se=Ge=>{Te(Ge,{name:"folder-cog"})},Fe=Ge=>{var ot=B(),Ke=w(ot),Qe=bt=>{Te(bt,{name:"book-open"})},Ye=bt=>{var Ue=B(),lt=w(Ue),ct=oe=>{Te(oe,{name:"ruler"})};k(lt,oe=>{de.icon==="rule"&&oe(ct)},!0),r(bt,Ue)};k(Ke,bt=>{de.icon==="book"?bt(Qe):bt(Ye,!1)},!0),r(Ge,ot)};k(Ce,Ge=>{de.icon==="root-folder"?Ge(Se):Ge(Fe,!1)},!0),r(ae,Pe)};k(ke,ae=>{de.icon==="folder-opened"?ae(Re):ae(xe,!1)},!0),r(Me,We)};k(Be,Me=>{de.icon==="file"?Me(De):Me(Le,!1)}),r(ge,we)})($e,{get icon(){return t(I).iconName}})}}})}},re=le=>{{let ve=d(()=>({title:t(I).removeTitle,onRemove:A}));nr(le,{get removeBtn(){return t(ve)},get showWarning(){return i()},$$events:{click(...$e){(t(I).onClick||Ks)?.apply(this,$e)}},children:($e,ce)=>{{const ge=we=>{so(we,{get option(){return n()}})};let de=d(()=>[Xt.Hover]);it($e,{get triggerOn(){return t(de)},content:ge,children:(we,Be)=>{Cr(we,{nopath:!0,get filepath(){return t(I).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})}};k(se,le=>{t(I).iconName?le(te):le(re,!1)},!0),r(_e,pe)};k(ze,_e=>{t(T)?_e(Ie):_e(Ee,!1)}),yn(ee,(_e,pe)=>Vv?.(_e,pe),()=>v),r(ye,ee)};k(ue,ye=>{oa(n())?ye(ne):ye(be,!1)},!0),r(K,J)};k(Y,K=>{ra(n())?K(Z):K(Q,!1)},!0),r(L,R)};k(G,L=>{Id(n())?L(z):L(q,!1)},!0),r(W,F)};k(j,W=>{wd(n())?W(x):W(N,!1)}),r(D,U)};k(P,D=>{n()&&t(I)&&D(H)}),r(s,O),fe(),c()}var Pf=h("<div><!></div>"),Bf=h("<!> <!>",1),Ff=h('<div class="c-action-bar-context svelte-tdiwo0"><!></div>');function xl(s,e){me(e,!0);const[n,o]=je(),a=ln(),i=Dd(a,{includeItems:[Od,Nd]}),l=d(()=>V(i,"$recentActiveItems",n).map(({id:u})=>u));var c=Ff();cf(b(c),{children:(u,v)=>{var m=Bf(),y=w(m);st(y,()=>e.prepend??wt);var f=$(y,2);Vt(f,16,()=>t(l),g=>g,(g,A)=>{var C=Pf();Lf(b(C),{get itemId(){return A}}),tn(1,C,()=>As,()=>({duration:100,start:.9,opacity:.3})),r(g,C)}),r(u,m)},$$slots:{default:!0}}),r(s,c),fe(),o()}var qf=h('<div class="c-input-action-bar svelte-77a9b0"><div class="c-input-action-bar__left-align svelte-77a9b0"><!></div> <div class="c-input-action-bar__right-align svelte-77a9b0"><!></div></div>'),Hf=h(" <!>",1),Wf=h('<div class="c-send-button svelte-1nzt1wu"><!></div>'),Gf=h('<span class="c-input-action-bar-command svelte-1wt8dwe"><!></span>');function wo(s,e){var n=Gf(),o=b(n);Ln(o,e,"default",{},null),r(s,n)}var Uf=h("<!> <!>",1),Vf=h('<div class="c-context-menu__items svelte-1pg7ih0"></div> <!> <!> <!>',1),jf=h("<!> <!>",1),Kf=h('<div class="c-add-file-button-tooltip svelte-nmvtej">Attach images (up to 10)<br/> Hold <!> to select multiple</div>'),Yf=h('<label class="c-input-action-bar__label svelte-nmvtej"><!></label> <input type="file" multiple hidden=""/>',1),Xf=h('<div class="c-cancel-button svelte-10vhx4q"><!></div>'),Jf=h('<div class="c-resend-button svelte-1duuxf"><!></div>');const Ml=Gn(s=>s.onboarding.workspaceName),Qf=Gn(s=>s.onboarding.userEmail),Dl=Gn(s=>s.onboarding.highlightedElementId),ko="prompt-enhancer-button";var Zf=h("<span>Prompt Enhancer <!></span>"),e0=h('<div class="c-rewrite-prompt-button svelte-71xd9m"><!> <!></div>');const On={Root:function(s,e){me(e,!1);const n=void 0,o=void 0;var a={leftAlign:n,rightAlign:o},i=qf(),l=b(i),c=b(l);Ln(c,e,"leftAlign",{},null);var u=$(l,2),v=b(u);return Ln(v,e,"rightAlign",{},null),r(s,i),Pn(e,"leftAlign",n),Pn(e,"rightAlign",o),fe(a)},SendButton:function(s,e){me(e,!0);const[n,o]=je();let a=S(e,"isDisabled",3,!1),i=S(e,"disabledReason",3,"");const l=qn(),c=ts(l),u=Ct(),v=d(()=>a()?i():V(c,"$isAgentic",n)?"Send to Agent":"Send Message");var m=Wf(),y=b(m);xt(y,{size:.5,variant:"solid",color:"accent",get disabled(){return a()},onclick:function(){return u(gt(Ze.WEBVIEW.SEND_ACTION_TRIGGERED,{source:"button"})),e.primaryAction()},children:(f,g)=>{{const A=_=>{var p=B(),E=w(p),M=T=>{var O=Hf(),P=w(O),H=$(P);st(H,()=>e.tooltipContent),he(()=>He(P,`${t(v)??""} `)),r(T,O)},I=T=>{var O=ie();he(()=>He(O,t(v))),r(T,O)};k(E,T=>{e.tooltipContent?T(M):T(I,!1)}),r(_,p)};let C=d(()=>[Xt.Hover]);it(f,{get triggerOn(){return t(C)},side:"top",delayDurationMs:500,content:A,children:(_,p)=>{Te(_,{name:"send-horizontal"})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}}),r(s,m),fe(),o()},ContextMenu:function(s,e){me(e,!0);const n=()=>V(p,"$userQuery",a),o=()=>V(E,"$displayItems",a),[a,i]=je(),l=S(e,"onCloseDropdown",3,()=>{}),c=S(e,"onInsertMentionable",19,()=>{});let u;const v=async()=>{C.closeDropdown()},m=async H=>{C.openDropdown(),await kn(),e.trackButtonClick?.(H),g()},y=async H=>{C.toggleDropdown()&&(await kn(),e.trackButtonClick?.(H),g())},f=async H=>{switch(H.key){case"ArrowLeft":H.preventDefault(),C.popBreadcrumb(),await kn(),u?.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:H.defaultPrevented||g()}},g=()=>{u?.focusIdx(-1)},{store:A}=ys(),C=new pg(A,H=>!!c()&&c()(H)),{active:_,userQuery:p,displayItems:E}=C,M=Ct();rt(()=>{M(zd(n()))});var I={closeDropdown:v,openDropdown:m,toggleDropdown:y},T=B(),O=w(T);Ae(O,()=>Je.Root,(H,D)=>{Pt(D(H,{get open(){return V(_,"$active",a)},onOpenChange:U=>{U||l()()},nested:!1,children:(U,j)=>{var x=jf(),N=w(x);Ae(N,()=>Je.Trigger,(F,G)=>{G(F,{children:(z,q)=>{wo(z,{children:(L,R)=>{{const Y=Q=>{var K=B(),J=w(K),ue=ne=>{var be=B(),ye=w(be);st(ye,()=>e.tooltipContent),r(ne,be)};k(J,ne=>{e.tooltipContent&&ne(ue)}),r(Q,K)};let Z=d(()=>[Xt.Hover]);it(L,{get triggerOn(){return t(Z)},side:"top",delayDurationMs:500,content:Y,children:(Q,K)=>{var J=Uf(),ue=w(J);on(ue,{name:"openContextMenu",handler:()=>m("keybinding")});var ne=$(ue,2);Nt(ne,{size:.5,variant:"ghost-block",color:"neutral",$$events:{click:()=>y("button")},children:(be,ye)=>{Te(be,{name:"at-sign"})},$$slots:{default:!0}}),r(Q,J)},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})},$$slots:{default:!0}})});var W=$(N,2);Ae(W,()=>Je.Content,(F,G)=>{G(F,{size:1,side:"top",align:"start",onClickOutside:v,onEscapeKeyDown:v,onRequestClose:v,onKeyDown:f,children:(z,q)=>{var L=Vf(),R=w(L);Vt(R,5,o,$n,(J,ue)=>{mg(J,{get item(){return t(ue)},onSelect:async()=>{C.selectMentionable(t(ue)),await kn(),u?.focusIdx(0)}})});var Y=$(R,2),Z=J=>{var ue=B(),ne=w(ue);Ae(ne,()=>Je.Label,(be,ye)=>{ye(be,{children:(ee,ze)=>{var Ie=ie("No results found");r(ee,Ie)},$$slots:{default:!0}})}),r(J,ue)};k(Y,J=>{n().length>0&&o().length===0&&J(Z)});var Q=$(Y,2);Ae(Q,()=>Je.Separator,(J,ue)=>{ue(J,{})});var K=$(Q,2);Ae(K,()=>Je.TextFieldItem,(J,ue)=>{ue(J,{placeholder:"Focus context",get value(){return Ec(),n()},set value(ne){Ac(p,ne)}})}),r(z,L)},$$slots:{default:!0}})}),r(U,x)},$$slots:{default:!0}}),U=>u=U,()=>u)}),r(s,T);var P=fe(I);return i(),P},AddFileButton:function(s,e){me(e,!1);let n=S(e,"accept",8,"*"),o=S(e,"disabled",8,!1),a=S(e,"onAddFiles",8,function(u){c.commandManager?.chain()?.insertFilesIntoEditor?.(u)}),i=S(e,"onClick",8,()=>{});const l=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=fg();_n(),wo(s,{children:(u,v)=>{{const m=f=>{var g=Kf(),A=$(b(g),3);fn(A,{keybinding:"command"}),r(f,g)};let y=Ir(()=>(In(Xt),nn(()=>[Xt.Hover])));it(u,{get triggerOn(){return t(y)},delayDurationMs:300,content:m,children:(f,g)=>{Nt(f,{size:1,variant:"ghost-block",color:"neutral",get disabled(){return o()},class:"c-input-action-bar__add-file-btn",children:(A,C)=>{var _=Yf(),p=w(_),E=b(p);Te(E,{name:"paperclip"});var M=$(p,2);he(()=>{nt(p,"for",l),nt(M,"id",l),nt(M,"accept",n())}),Ht("click",M,function(){this.value=null,i()()}),Ht("input",M,function(I){a()([...I.currentTarget?.files??[]])}),r(A,_)},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}}),fe()},ResendButton:function(s,e){const n=vo(e);me(e,!1);let o=S(e,"resendAction",8),a=S(e,"onAnalyticsTrack",8);const i=void 0;function l(){a()(),o()()}var c={tooltipContent:i};_n();var u=Jf(),v=b(u);return it(v,{content:y=>{var f=B(),g=w(f),A=_=>{var p=B(),E=w(p);Ln(E,e,"tooltipContent",{},null),r(_,p)},C=_=>{var p=ie("Resend");r(_,p)};k(g,_=>{nn(()=>n.tooltipContent)?_(A):_(C,!1)}),r(y,f)},children:(y,f)=>{xt(y,{size:1,variant:"soft",color:"neutral",$$events:{click:l,keyup:l},$$slots:{iconLeft:(g,A)=>{Te(g,{slot:"iconLeft",name:"rotate-cw"})}}})},$$slots:{content:!0,default:!0}}),r(s,u),Pn(e,"tooltipContent",i),fe(c)},CancelButton:function(s,e){const n=vo(e);me(e,!1);let o=S(e,"cancelAction",8),a=S(e,"onAnalyticsTrack",8);const i=void 0;function l(m){m.stopPropagation(),a()("button"),o()()}var c={tooltipContent:i};_n();var u=Xf(),v=b(u);return it(v,{content:y=>{var f=B(),g=w(f),A=_=>{var p=B(),E=w(p);Ln(E,e,"tooltipContent",{},null),r(_,p)},C=_=>{var p=ie("Cancel");r(_,p)};k(g,_=>{nn(()=>n.tooltipContent)?_(A):_(C,!1)}),r(y,f)},children:(y,f)=>{xt(y,{size:1,variant:"soft",color:"error",$$events:{click:l},children:(g,A)=>{Te(g,{name:"square"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),r(s,u),Pn(e,"tooltipContent",i),fe(c)},RewritePromptButton:function(s,e){me(e,!0);const n=()=>V(c,"$remoteAgentsModel",o),[o,a]=je();let i=S(e,"isDisabled",3,!1),l=S(e,"disabledReason",19,()=>{});const c=kt(dn.key),u=Ot("enablePromptEnhancer"),v=Ct();let m=d(()=>n()?.isActive&&!n()?.currentAgentId);const y=Dl();let f=d(()=>V(y,"$highlightedElementId",o)===ko),g=Oe(void 0);async function A(E){if(E&&v(gt(Ze.SHARED.PROMPT_ENHANCE_STARTED,{source:E})),t(m)&&c)try{await c.reportRemoteAgentSetupWindowEvent(Mr.clickRewritePrompt)}catch(M){console.error("Failed to report rewrite prompt button click event:",M)}e.onRewrite()}rt(()=>{!t(f)&&t(g)&&t(g).requestClose()});var C=B(),_=w(C),p=E=>{var M=e0(),I=b(M);on(I,{name:"enhancePrompt",handler:()=>A("keybinding")});var T=$(I,2);{const O=D=>{var U=B(),j=w(U),x=W=>{var F=Zf(),G=$(b(F));fn(G,{commandName:"enhancePrompt",keysOnly:!0}),r(W,F)},N=W=>{var F=B(),G=w(F),z=L=>{var R=ie();he(()=>He(R,l())),r(L,R)},q=L=>{pr(L,{heading:"Prompt Enhancer",description:"Rewrite prompt to provide more context and improve agent responses",shortcutCommandName:"enhancePrompt"})};k(G,L=>{i()&&l()?L(z):L(q,!1)},!0),r(W,F)};k(j,W=>{t(f)?W(x):W(N,!1)}),r(D,U)};let P=d(()=>[Xt.Hover]),H=d(()=>!!t(f)||void 0);Pt(it(T,{get triggerOn(){return t(P)},delayDurationMs:300,maxWidth:"200px",get open(){return t(H)},content:O,children:(D,U)=>{Nt(D,{id:ko,get disabled(){return i()},size:1,variant:"ghost-block",color:"neutral",onclick:()=>A("button"),children:(j,x)=>{var N=B(),W=w(N),F=z=>{es(z,{size:1,useCurrentColor:!0})},G=z=>{Te(z,{name:"sparkles"})};k(W,z=>{e.isEnhancing?z(F):z(G,!1)}),r(j,N)},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),D=>X(g,D,!0),()=>t(g))}r(E,M)};k(_,E=>{V(u,"$enablePromptEnhancer",o)&&E(p)}),r(s,C),fe(),a()}};function Xo(s,e){me(e,!0);let n=S(e,"maxImages",19,()=>{}),o=S(e,"saveImage",19,()=>{}),a=S(e,"saveAttachment",19,()=>{}),i=S(e,"deleteImage",19,()=>{}),l=S(e,"renderImage",19,()=>{}),c=S(e,"isEditable",3,()=>!0),u=S(e,"changeImageMode",19,()=>{}),v=S(e,"supportedFileTypes",19,()=>["image"]),m=S(e,"onValidationError",19,()=>{}),y=S(e,"onCompletedAttachment",19,()=>{});const f=new Ro({changeImageMode:u(),maxImages:n(),saveImage:o(),saveAttachment:a(),deleteImage:i(),renderImage:l(),isEditable:c(),onValidationError:m(),onCompletedAttachment:y(),maxImageSizeKb:Pd,maxTextSizeKb:Ld,supportedFileTypes:v()}),g=kt(hr.CONTEXT_KEY).pluginManager.registerPlugin(f);fs(g),fe()}const t0=Yt(!1),n0="application/x-augment/drag-origin/{}";function Ga(s){return n0.replace("{}",s.instanceId)}var s0=h("<!> <!> <!>",1),r0=h('<div role="button" tabindex="-1"><div class="c-rich-text-editor-dropzone__content svelte-kc9dup"><!></div></div>');function Ol(s,e){me(e,!0);const[n,o]=je();let a=S(e,"draggingStore",3,t0);const i=kt(hr.CONTEXT_KEY);let l=d(()=>V(a(),"$draggingStore",n));function c(_){e.onDrop?.(),a().set(!1);const p=_.dataTransfer;if(!p)return;const E=function(M){const I=M.getData("codefiles");if(!I)return[];try{const T=JSON.parse(I);if(Array.isArray(T)&&T.every(O=>typeof O=="string"))return T}catch{}return[]}(p);E.length>0?e.onCodeFilesDrop?.(E):p.files&&p.files.length!==0&&i?.commandManager.chain()?.command(({view:M,tr:I})=>{if(!M)return!0;const T=M.posAtCoords({left:_.clientX,top:_.clientY});if(T){const O=I.doc.resolve(T.pos);I.setSelection(Bd.create(I.doc,O.pos))}return!0}).insertFilesIntoEditor?.([...p.files])}const u=()=>a().set(!1);function v(_){_.stopPropagation(),_.preventDefault()}var m=r0();let y;Ht("dragstart",Cn,_=>function(p,E){E.rootNode&&p.composedPath().includes(E.rootNode)&&p.dataTransfer?.setData(Ga(E),E.instanceId)}(_,i)),Ht("dragenter",Cn,_=>{(function(p,E){return p.dataTransfer?.types.includes(Ga(E))??!1})(_,i)||function(p){if(!p)return!1;const E=p.types;return E.includes("Files")||E.includes("codefiles")}(_.dataTransfer)&&a().set(!0)}),Ht("dragleave",Cn,function(_){_.relatedTarget&&_.relatedTarget!==document.body||u()}),Ht("drop",Cn,u),Ht("blur",Cn,u);var f=b(m),g=b(f),A=_=>{var p=B(),E=w(p);st(E,()=>e.children),r(_,p)},C=_=>{var p=s0(),E=w(p);Te(E,{name:"file-plus",size:3});var M=$(E,2);qe(M,{class:"c-rich-text-editor-dropzone__text",size:2,children:(T,O)=>{var P=ie("Drop files to attach as context");r(T,P)},$$slots:{default:!0}});var I=$(M,2);qe(I,{class:"c-rich-text-editor-dropzone__text",size:1,children:(T,O)=>{var P=ie("images (png, jpg, jpeg) and text-based files");r(T,P)},$$slots:{default:!0}}),r(_,p)};k(g,_=>{e.children?_(A):_(C,!1)}),he(_=>y=ft(m,1,"c-rich-text-editor-dropzone svelte-kc9dup",null,y,_),[()=>({"is-active":t(l)})]),Ht("dragover",m,v),Ht("dragenter",m,v),Ht("drop",m,_=>{v(_),c(_)}),r(s,m),fe(),o()}var o0=h('<div class="c-model-picker__tooltip-content svelte-1xlmyl8"><div><!></div> <!> <a href="https://docs.augmentcode.com/models/available-models" class="c-model-picker__learn-more svelte-1xlmyl8" rel="noopener noreferrer">Learn more</a></div>'),a0=h('<div class="c-model-picker__tooltip-card svelte-1xlmyl8"><!></div>'),i0=h("<!> <!>",1);function Nl(s,e){return(s.priority??Number.MAX_SAFE_INTEGER)-(e.priority??Number.MAX_SAFE_INTEGER)}function Ua(s,e){return Nl(s,e)}const l0=20;var c0=h('<div class="c-model-picker__item-badges svelte-g8qo8f"><!> <!></div>'),d0=h("<div> </div>"),u0=h('<div class="c-model-picker__item-content svelte-g8qo8f"><div class="c-model-picker__item-name svelte-g8qo8f"><!> <!></div> <!></div>'),v0=h("<span>Model Picker <!></span>"),g0=h('<span class="c-model-picker__text-wrapper svelte-g8qo8f"><!> <span class="c-model-picker__disabled-indicator svelte-g8qo8f"></span></span>'),h0=h('<span class="c-model-picker__text-wrapper svelte-g8qo8f"><!></span>'),p0=h("<!> <!>",1),m0=h('<div class="c-model-picker__legacy-measure svelte-g8qo8f" aria-hidden="true" inert></div>'),f0=h("<!> <!>",1),_0=h("<!> <!>",1),y0=h('<span class="c-model-picker__more-selected svelte-g8qo8f"> </span>'),b0=h('<span class="c-model-picker__more-label svelte-g8qo8f">More <!></span>'),$0=h("<!> <!>",1),w0=h("<!> <!>",1),k0=h("<!> <!>",1),A0=h("<!> <!>",1),E0=h('<div class="c-model-picker__dropdown-root svelte-g8qo8f"><!> <div class="c-model-picker__scroll svelte-g8qo8f"><!></div></div>'),C0=h("<!> <!>",1),T0=h('<div class="c-model-picker svelte-g8qo8f"><!> <!></div>');function zl(s,e){me(e,!0);const n=()=>V(t(A),"$selectedModel",l),o=()=>V(_,"$availableModels",l),a=()=>V(C,"$defaultModel",l),i=()=>V(m,"$currentConversationId",l),[l,c]=je(),u=(F,G=wt,z)=>{let q=Ir(()=>ai(z?.(),()=>({}),!0));const L=d(()=>t(q)?.inert??!1),R=d(()=>!t(L)&&n()?.id===G().id);var Y=B(),Z=w(Y);{let Q=d(()=>!!t(L)||G().disabled),K=d(()=>t(L)?-1:void 0);Ae(Z,()=>Je.Item,(J,ue)=>{ue(J,{get highlight(){return t(R)},get disabled(){return t(Q)},get tabindex(){return t(K)},onSelect:()=>{t(L)||function(ne){ne.disabled||(i()&&(n()?.id??null)!==ne.id&&e.onModelChange?.(ne.id),f?.requestClose())}(G())},children:(ne,be)=>{var ye=u0(),ee=b(ye),ze=b(ee);qe(ze,{size:1,children:(se,te)=>{var re=ie();he(()=>He(re,G().displayName)),r(se,re)},$$slots:{default:!0}});var Ie=$(ze,2),Ee=se=>{var te=c0(),re=b(te),le=ce=>{(function(ge,de){me(de,!1);let we=S(de,"name",8),Be=S(de,"description",8);_n();{let De=Ir(()=>(In(Xt),nn(()=>[Xt.Hover])));no.Root(ge,{get triggerOn(){return t(De)},nested:!1,children:(Le,Me)=>{var We=i0(),ke=w(We);no.Trigger(ke,{children:(xe,ae)=>{Cc(xe,{class:"c-icon c-icon-size--size-1 c-model-picker__coin-icon"})},$$slots:{default:!0}});var Re=$(ke,2);no.Content(Re,{side:"right",align:"center",children:(xe,ae)=>{var Pe=a0(),Ce=b(Pe);el(Ce,{size:2,insetContent:!0,variant:"surface",children:(Se,Fe)=>{var Ge=o0(),ot=b(Ge),Ke=b(ot);qe(Ke,{size:1,children:(Ue,lt)=>{var ct=ie();he(()=>He(ct,we())),r(Ue,ct)},$$slots:{default:!0}});var Qe=$(ot,2),Ye=Ue=>{qe(Ue,{size:1,color:"secondary",children:(lt,ct)=>{var oe=ie();he(()=>He(oe,Be())),r(lt,oe)},$$slots:{default:!0}})};k(Qe,Ue=>{Be()&&Ue(Ye)});var bt=$(Qe,2);Ht("click",bt,Ue=>{Ue.preventDefault(),an.postMessage({type:jt.augmentLink,data:"https://docs.augmentcode.com/models/available-models"})}),r(Se,Ge)},$$slots:{default:!0}}),r(xe,Pe)},$$slots:{default:!0}}),r(Le,We)},$$slots:{default:!0}})}fe()})(ce,{get name(){return G().tooltipName},get description(){return G().tooltipDescription}})};k(re,ce=>{G().tooltipName&&ce(le)});var ve=$(re,2),$e=ce=>{var ge=B(),de=w(ge);Ae(de,()=>xn.Root,(we,Be)=>{Be(we,{color:"neutral",size:0,variant:"soft",children:(De,Le)=>{var Me=ie("New");r(De,Me)},$$slots:{default:!0}})}),r(ce,ge)};k(ve,ce=>{G().isNew&&ce($e)}),r(se,te)};k(Ie,se=>{(G().tooltipName||G().isNew)&&se(Ee)});var _e=$(ee,2),pe=se=>{qe(se,{size:0,color:"secondary",children:(te,re)=>{var le=d0(),ve=b(le);he(()=>He(ve,G().description)),r(te,le)},$$slots:{default:!0}})};k(_e,se=>{G().description&&se(pe)}),he(()=>nt(ye,"data-highlighted",t(R))),r(ne,ye)},$$slots:{default:!0}})})}r(F,Y)},v=F=>{qe(F,{size:1,truncate:!0,children:(G,z)=>{var q=ie();he(()=>He(q,(n()?.id!==null?n()?.displayName:null)||a()?.displayName||"")),r(G,q)},$$slots:{default:!0}})},m=ln(),y=Ct();let f,g;const A=d(()=>Hd(e.selectedModelId)),C=Fd(),_=qd();async function p(F){F&&(n()&&y(gt(Ze.SHARED.MODEL_PICKER_OPENED,{currentModelId:n().id||"",currentModelName:n().displayName||""})),await kn(),U(),function(){if(!g)return;const G=g.querySelector('[data-highlighted="true"]');G&&Wd(g,G,{smooth:!1,topBuffer:-(g.clientHeight-G.offsetHeight)/2})}(),g?.focus()),e.onOpenChange?.(F)}rt(()=>{(n()?.id===null||!n())&&!e.selectedModelId&&o().length>0&&a()&&i()&&e.onModelChange?.(a().id)});let E=d(()=>function(F){const G=new Map,z=[];for(const R of F){const Y=R.modelGroup;if(Y&&Y.length>0){const Z=G.get(Y)??[];Z.push(R),G.set(Y,Z)}else z.push(R)}const q=[],L=[];for(const[R,Y]of G.entries()){const Z=Y.sort(Ua),Q=Y.find(ue=>ue.modelGroupPriority!==void 0),K=Q?.modelGroupPriority,J={name:R,priority:K,models:Z};L.push(J)}if(L.sort(Nl),q.push(...L),z.length>0){const R=z.sort(Ua);q.push({name:null,models:R})}return q}(o())),M=d(()=>function(F){const G=[],z=[];for(const q of F){const L=q.models.filter(Y=>!Y.isLegacyModel),R=q.models.filter(Y=>Y.isLegacyModel);L.length>0&&G.push({...q,models:L}),R.length>0&&z.push({...q,models:R})}return{primaryGroups:G,legacyGroups:z}}(t(E))),I=d(()=>t(M).primaryGroups),T=d(()=>t(M).legacyGroups),O=d(()=>n()?.isLegacyModel?n():void 0),P=Oe(Wn(typeof window<"u"?window.innerWidth:void 0)),H=Oe(!1),D=Oe(void 0);function U(){X(H,function({scrollContainer:F,legacyMeasureContainer:G,viewportWidth:z,extraSpacePx:q=l0}){if(!F||typeof window>"u")return!1;const L=F?.closest(".c-model-picker__dropdown-root");if(!L)return!1;const R=L.getBoundingClientRect(),Y=R.width;if(z==null||Number.isNaN(z))return!0;const Z=G?.getBoundingClientRect().width??0,Q=(Z>0?Z:Y)+q,K=z-R.right,J=R.left;return!(K>=Q||J>=Q)}({scrollContainer:g,legacyMeasureContainer:t(D),viewportWidth:t(P)}),!0)}rt(()=>{if(g&&e.open&&t(T)&&t(P)){const F=requestAnimationFrame(()=>{U()});return()=>{cancelAnimationFrame(F)}}});let j=d(()=>t(H)?[...t(I),...t(T)]:t(I));var x=T0();Ht("resize",Cn,()=>{X(P,window.innerWidth,!0)});var N=b(x);on(N,{name:"openModelPicker",handler:function(){e.open?f?.requestClose():f?.requestOpen()}});var W=$(N,2);it(W,{side:"top",nested:!1,content:G=>{var z=v0(),q=$(b(z));fn(q,{commandName:"openModelPicker",keysOnly:!0}),r(G,z)},children:(G,z)=>{var q=B(),L=w(q);Ae(L,()=>Je.Root,(R,Y)=>{Pt(Y(R,{nested:!1,get open(){return e.open},get defaultOpen(){return e.defaultOpen},onOpenChange:p,children:(Z,Q)=>{var K=C0(),J=w(K);Ae(J,()=>Je.Trigger,(ne,be)=>{be(ne,{children:(ye,ee)=>{wo(ye,{children:(ze,Ie)=>{xt(ze,{size:1,variant:"ghost-block",color:"neutral",class:"c-model-picker__button",children:(Ee,_e)=>{var pe=B(),se=w(pe),te=le=>{{let ve=d(()=>[Xt.Hover]);it(le,{get content(){return n().disabled_reason},get triggerOn(){return t(ve)},side:"right",nested:!0,children:($e,ce)=>{var ge=g0(),de=b(ge);v(de),r($e,ge)},$$slots:{default:!0}})}},re=le=>{var ve=h0(),$e=b(ve);v($e),r(le,ve)};k(se,le=>{n()?.disabled?le(te):le(re,!1)}),r(Ee,pe)},$$slots:{default:!0,iconLeft:(Ee,_e)=>{Te(Ee,{slot:"iconLeft",name:"settings-2"})}}})},$$slots:{default:!0}})},$$slots:{default:!0}})});var ue=$(J,2);Ae(ue,()=>Je.Content,(ne,be)=>{be(ne,{size:1,side:"top",align:"start",children:(ye,ee)=>{var ze=E0(),Ie=b(ze),Ee=re=>{var le=m0();Vt(le,21,()=>t(T),$n,(ve,$e,ce)=>{var ge=p0(),de=w(ge);Vt(de,17,()=>t($e).models,$n,(De,Le)=>{u(De,()=>t(Le),()=>({inert:!0}))});var we=$(de,2),Be=De=>{var Le=B(),Me=w(Le);Ae(Me,()=>Je.Separator,(We,ke)=>{ke(We,{})}),r(De,Le)};k(we,De=>{ce<t(T).length-1&&De(Be)}),r(ve,ge)}),Pt(le,ve=>X(D,ve),()=>t(D)),r(re,le)};k(Ie,re=>{t(T).length>0&&re(Ee)});var _e=$(Ie,2),pe=b(_e),se=re=>{var le=B(),ve=w(le);Vt(ve,17,()=>t(j),$n,($e,ce,ge)=>{var de=f0(),we=w(de);Vt(we,17,()=>t(ce).models,$n,(Le,Me)=>{var We=B(),ke=w(We),Re=ae=>{{let Pe=d(()=>[Xt.Hover]);it(ae,{get content(){return t(Me).disabled_reason},get triggerOn(){return t(Pe)},side:"top",nested:!0,children:(Ce,Se)=>{u(Ce,()=>t(Me))},$$slots:{default:!0}})}},xe=ae=>{u(ae,()=>t(Me))};k(ke,ae=>{t(Me).disabled&&t(Me).disabled_reason?ae(Re):ae(xe,!1)}),r(Le,We)});var Be=$(we,2),De=Le=>{var Me=B(),We=w(Me);Ae(We,()=>Je.Separator,(ke,Re)=>{Re(ke,{})}),r(Le,Me)};k(Be,Le=>{ge<t(j).length-1&&Le(De)}),r($e,de)}),r(re,le)},te=re=>{var le=A0(),ve=w(le);Vt(ve,17,()=>t(I),$n,(ge,de,we)=>{var Be=_0(),De=w(Be);Vt(De,17,()=>t(de).models,$n,(We,ke)=>{var Re=B(),xe=w(Re),ae=Ce=>{{let Se=d(()=>[Xt.Hover]);it(Ce,{get content(){return t(ke).disabled_reason},get triggerOn(){return t(Se)},side:"top",nested:!0,children:(Fe,Ge)=>{u(Fe,()=>t(ke))},$$slots:{default:!0}})}},Pe=Ce=>{u(Ce,()=>t(ke))};k(xe,Ce=>{t(ke).disabled&&t(ke).disabled_reason?Ce(ae):Ce(Pe,!1)}),r(We,Re)});var Le=$(De,2),Me=We=>{var ke=B(),Re=w(ke);Ae(Re,()=>Je.Separator,(xe,ae)=>{ae(xe,{})}),r(We,ke)};k(Le,We=>{we<t(I).length-1&&We(Me)}),r(ge,Be)});var $e=$(ve,2),ce=ge=>{var de=k0(),we=w(de),Be=Le=>{var Me=B(),We=w(Me);Ae(We,()=>Je.Separator,(ke,Re)=>{Re(ke,{})}),r(Le,Me)};k(we,Le=>{t(I).length>0&&Le(Be)});var De=$(we,2);Ae(De,()=>Je.Sub,(Le,Me)=>{Me(Le,{children:(We,ke)=>{var Re=w0(),xe=w(Re);Ae(xe,()=>Je.SubTrigger,(Pe,Ce)=>{Ce(Pe,{children:(Se,Fe)=>{var Ge=b0(),ot=$(b(Ge)),Ke=Qe=>{var Ye=y0(),bt=b(Ye);he(()=>He(bt,t(O).displayName)),r(Qe,Ye)};k(ot,Qe=>{t(O)&&Qe(Ke)}),r(Se,Ge)},$$slots:{default:!0}})});var ae=$(xe,2);Ae(ae,()=>Je.SubContent,(Pe,Ce)=>{Ce(Pe,{class:"c-model-picker__legacy-submenu",children:(Se,Fe)=>{var Ge=B(),ot=w(Ge);Vt(ot,17,()=>t(T),$n,(Ke,Qe,Ye)=>{var bt=$0(),Ue=w(bt);Vt(Ue,17,()=>t(Qe).models,$n,(oe,Ne)=>{var Ve=B(),Xe=w(Ve),et=$t=>{{let Wt=d(()=>[Xt.Hover]);it($t,{get content(){return t(Ne).disabled_reason},get triggerOn(){return t(Wt)},side:"top",nested:!0,children:(Mt,Dt)=>{u(Mt,()=>t(Ne))},$$slots:{default:!0}})}},at=$t=>{u($t,()=>t(Ne))};k(Xe,$t=>{t(Ne).disabled&&t(Ne).disabled_reason?$t(et):$t(at,!1)}),r(oe,Ve)});var lt=$(Ue,2),ct=oe=>{var Ne=B(),Ve=w(Ne);Ae(Ve,()=>Je.Separator,(Xe,et)=>{et(Xe,{})}),r(oe,Ne)};k(lt,oe=>{Ye<t(T).length-1&&oe(ct)}),r(Ke,bt)}),r(Se,Ge)},$$slots:{default:!0}})}),r(We,Re)},$$slots:{default:!0}})}),r(ge,de)};k($e,ge=>{t(T).length>0&&ge(ce)}),r(re,le)};k(pe,re=>{t(H)?re(se):re(te,!1)}),Pt(_e,re=>g=re,()=>g),r(ye,ze)},$$slots:{default:!0}})}),r(Z,K)},$$slots:{default:!0}}),Z=>f=Z,()=>f)}),r(G,q)},$$slots:{content:!0,default:!0}}),r(s,x),fe(),c()}const S0="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",Gw="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",I0=(s,e,n,o,a,i,l)=>()=>{if(l)return!1;const c=n?.request_message??"",u=n?.rich_text_json_repr,v=()=>{n||s(Gd({draftStatus:us.ready,exchange:{request_message:c,rich_text_json_repr:u,status:Tn.draft}}))};if(!o.currentAgentId){if(o.isCreatingAgent)return!1;o.setIsCreatingAgent(!0),s(ia());const y=async()=>{try{await o.reportRemoteAgentSetupWindowEvent(Mr.clickCreateAgent)}catch(g){console.error("Failed to report click create agent event:",g)}},f=async()=>{try{y();const g=await o.createRemoteAgentFromDraft(c,e??void 0);g?o.setCurrentAgent(g):v()}catch(g){console.error("Failed to create remote agent: ",g),v()}finally{o.setIsCreatingAgent(!1)}};return a?(a?.isGithubAuthenticated().then(g=>{if(!g)return o.setIsCreatingAgent(!1),void v();f()}).catch(g=>{console.error("Failed to check GitHub authentication status:",g),o.setIsCreatingAgent(!1),v()}),!0):(f(),!0)}const m=n;return m&&o&&(s(ia()),o.sendMessage(m.request_message,e??void 0).then(y=>{y||v()}).catch(()=>{v()})),setTimeout(()=>i?.blur(),50),!0};function Ll(s,e){const n=(s?.request_message?.trim().length||0)>Ws,{hasFileWarning:o,fileWarningMessage:a}=(()=>{if(e){const i=s?.rich_text_json_repr;if(!i)return{hasFileWarning:!1,fileWarningMessage:""};const{hasWarning:l,warningMessage:c}=wi(i);return{hasFileWarning:l,fileWarningMessage:c}}return{hasFileWarning:!1,fileWarningMessage:""}})();return n?{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Ws} character limit`,action:()=>!1,cancelAction:()=>!1}:o?{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:a,action:()=>!1,cancelAction:()=>!1}:void 0}function Uw(s,e,n,o,a,i,l){return Ll(n,o)||function(c,u,v,m,y,f){let g=!1;m.agentOverviews&&(g=!!m.maxRemoteAgents&&m.agentOverviews.length>=m.maxRemoteAgents);let A=!1;const C=m.isCreatingAgent||m.currentAgent?.status===Zn.agentStarting,_=m?.currentAgent?.status===Zn.agentFailed;if(m.currentAgentId)A=!v?.request_message||C||_;else{const M=m.newAgentDraft;A=!v?.request_message||m.isCreatingAgent||g||!M?.commitRef?.github_commit_ref?.repository_url||!M.selectedBranch?.name}const p=m.isCurrentAgentRunning&&!C;let E;return A&&(v?.request_message?m.isCreatingAgent?E="Creating agent...":C?E="Agent is starting...":_?E="Agent has failed and cannot accept messages":g&&(E=S0.replace("%MAX_AGENTS%",m.maxRemoteAgents.toString())):E="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:p,isDisabled:A,disabledReason:E,action:I0(c,u,v,m,y,f,A),cancelAction:()=>(m.interruptAgent(),!0)}}(s,e,n,a,i,l)}function Pl(s,e,n){if(n)return{isDisabled:!0,isHidden:!1,disabledReason:void 0};if(!s?.isActive)return{isDisabled:!1,isHidden:!1,disabledReason:void 0};const o=s.newAgentDraft?.commitRef?.github_commit_ref?.repository_url;if(!o)return{isDisabled:!1,isHidden:!1,disabledReason:void 0};const a=e||"";return a&&o!==a?{isDisabled:!0,isHidden:!1,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,isHidden:!1,disabledReason:void 0}}var R0=h('<div class="c-toggle-mode-button-tooltip svelte-v9wytb">Toggle agent mode <!> <div class="c-toggle-mode-button-tooltip__content svelte-v9wytb"> </div></div>'),x0=h("<!> <!>",1);function Bl(s,e){me(e,!1);const n=()=>V(p,"$isAgentic",l),o=()=>V(g,"$remoteAgentsModel",l),a=()=>V(C,"$enableAgentAutoModeReadable",l),i=()=>V(E,"$executionMode",l),[l,c]=je(),u=zn(),v=zn(),m=zn();let y=S(e,"disabled",8,!1);const f=Ct(),g=kt(dn.key),A=kt(gs.key),C=Ot("enableAgentAutoMode"),_=ln(),p=ts(_),E=Co();async function M(P){t(v)?f(gt(Ze.SHARED.AGENT_MODE_DEACTIVATED,{source:P})):f(gt(Ze.SHARED.AGENT_MODE_ACTIVATED,{source:P})),await A.toggleChatAgentAutoMode("button")}Jt(()=>{A.reportModeSelectorInit()}),bs(()=>(n(),o(),a()),()=>{X(u,n()&&!o().isActive&&a())}),bs(()=>(i(),ds),()=>{X(v,i()===ds.auto)}),bs(()=>t(v),()=>{X(m,t(v)?`Auto ON
  Run most commands automatically`:`Auto OFF
  Require approval for most commands`)}),go(),_n();var I=B(),T=w(I),O=P=>{{const H=U=>{var j=R0(),x=$(b(j));fn(x,{commandName:"toggleAgentMode",keysOnly:!0});var N=$(x,2),W=b(N);he(()=>He(W,t(m))),r(U,j)};let D=Ir(()=>(In(Xt),nn(()=>[Xt.Hover])));it(P,{class:"c-toggle-mode-button",get triggerOn(){return t(D)},delayDurationMs:300,maxWidth:"auto",content:H,children:(U,j)=>{var x=x0(),N=w(x);on(N,{name:"toggleAgentMode",handler:()=>M("keybinding")});var W=$(N,2);eg(W,{get checked(){return t(v)},get disabled(){return y()},size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode",onchange:()=>M("button")}),r(U,x)},$$slots:{content:!0,default:!0}})}};k(T,P=>{t(u)&&P(O)}),r(s,I),fe(),c()}function Fl(s,e){me(e,!0);let n=S(e,"isAskMode",3,!1),o=S(e,"onAskModeChange",19,()=>{}),a=S(e,"onAskModeToggleComplete",19,()=>{}),i=S(e,"onAskModeDeleted",19,()=>{});const l=new ki(i());Jt(()=>{o()&&l.setOnAskModeChange(o()),l.setAskMode(n(),a())}),rt(()=>{l.setAskMode(n(),a())});const c=kt(hr.CONTEXT_KEY).pluginManager.registerPlugin(l);return fs(()=>{l.setAskMode(!1,a()),c()}),fe({getAskModePrompt:()=>l.askModePrompt,getIsAskMode:()=>l.isAskMode})}var M0=h('<span data-draft-editor-focus=""></span>');function ql(s,e){me(e,!0);let n=Oe(void 0);rt(()=>{if(e.draft?.draftStatus!==us.enhancing){if(t(n)===us.enhancing&&e.draft?.draftStatus===us.ready)if(X(n,e.draft.draftStatus,!0),e.draft.exchange?.display_error_message){const a=e.draft.exchange?.display_error_message;a&&e.editorContainer&&function(i){const{message:l,referenceElement:c,placement:u="top",autoDismissMs:v=3e3,theme:m="error",className:y=""}=i,f=document.createElement("div");f.className=y,f.textContent=l,document.body.appendChild(f);const g=typeof c=="string"?document.querySelector(c):c;if(!g)return void console.warn("ErrorTooltip: No reference element provided");const A=jv(f,{content:f,trigger:"manual",placement:u,theme:m,duration:[300,2e3],getReferenceClientRect:()=>g.getBoundingClientRect(),onHidden:()=>{f.remove()}});A.show(),setTimeout(()=>{A.hide()},v)}({message:a,referenceElement:e.editorContainer,placement:"top",className:"enhance-prompt-error-tooltip"})}else{e.forceEditorFocus?.();try{const a=e.editorContainer?.querySelector(".ProseMirror");if(a){const i=a.querySelector("p");if(i){const l=document.createRange(),c=window.getSelection();l.setStart(i,0),l.collapse(!0),c&&(c.removeAllRanges(),c.addRange(l))}}}catch{}}}else X(n,e.draft?.draftStatus,!0)});var o=M0();r(s,o),fe()}var D0=s=>s.stopPropagation(),O0=h("<!> <!> <!>",1),N0=h('<span class="character-counter"> </span>'),z0=h("<!> <!> <!>",1),L0=h("<!> <div><!></div>",1),P0=h("<span><!></span>"),B0=h("<!> <!> <!> <!>",1),F0=h('<!> <!> <!> <div class="c-chat-input__context-bar svelte-vzdet8"><!></div>',1),q0=h('<div class="c-chat-input__collapse-button svelte-vzdet8"><!></div>'),H0=h("<!> <!> <!> <!> <!>  <!>",1),W0=h('<div role="button" tabindex="-1"><!></div>');function G0(s,e){me(e,!0);const n=()=>V(W,"$draft",c),o=()=>V(q,"$conversationType",c),a=()=>V(J,"$selectedModel",c),i=()=>V(D,"$currentConversationId",c),l=()=>V(N,"$enableChatMultimodal",c),[c,u]=je(),v=Ct(),m=kt(gs.key),y=kt(dn.key),f=kt(Lr.key);let g=S(e,"collapsedMaxHeight",3,120),A=S(e,"requestId",19,()=>crypto.randomUUID()),C=S(e,"placeholder",3,"Edit your message..."),_=S(e,"collapsed",3,!1),p=S(e,"onCancelEdit",3,()=>{}),E=S(e,"userExpanded",15),M=S(e,"showExpandButton",3,!1),I=S(e,"isEditing",15,!1),T=Oe(void 0),O=Oe(Wn([])),P=Oe(!1);const H=Yn(),D=qn(),U=ts(D),j=Ot("enableModelRegistry"),x=Ot("enableEditableHistory"),N=Ot("enableChatMultimodal"),W=Ud(A()),F=d(()=>n()?.exchange),G=xo(D),z=Ai(),q=m.chatModeType,L=d(()=>t(F)?.rich_text_json_repr??e.content);function R(){X(P,!t(P))}function Y(){I()&&setTimeout(()=>{t(ve)?.requestFocus()},100)}async function Z(){await kn(),t(P)||v(gt(Ze.SHARED.ASK_MODE_DEACTIVATED,{source:"backspace"}))}rt(()=>{if(o()==="localAgent"&&t(L)){const ae=ki.detectAskModeInContent(t(L));ae!==t(P)&&X(P,ae,!0)}});const Q=d(()=>t(F)?.request_message.trim()?.length??0),K=d(()=>V(x,"$enableEditableHistory",c)&&!V(z,"$isRemoteAgent",c)),J=Ei(D),ue=d(()=>a()?.disabled??!1),ne=d(()=>a()?.disabled_reason??""),be=d(()=>I()&&t(K)&&!t(ue)&&t(F)!==void 0&&t(F).request_message.trim()!==""&&t(F).request_message!==e.content&&t(F).rich_text_json_repr!==e.content&&!Ro.hasLoadingImages(t(F).rich_text_json_repr)),ye=f?.currentRepositoryUrl,ee=d(()=>Pl(V(y,"$remoteAgentModel",c),V(ye,"$currentRepoUrl",c),!t(be)));function ze(){v(jd(i(),A()))}async function Ie(){t(K)&&(E(!0),_()&&e.setIsCollapsed(!1),t(T)&&v(la(A(),{draftStatus:us.ready,exchange:t(T)})),I(!0),v(gt(Ze.SHARED.MESSAGE_EDIT_STARTED,{})),await kn(),ce())}function Ee(){if(!t(be)||!t(F))return!1;X(T,void 0),v(gt(Ze.SHARED.MESSAGE_EDIT_SUBMITTED,{}));const ae={richTextJsonRepr:t(F).rich_text_json_repr||[],rawText:t(F).request_message};return e.onSubmitEdit(ae,t(O)),!0}function _e(){v(gt(Ze.SHARED.MESSAGE_EDIT_CANCELLED,{})),I(!1),E(!1)}function pe(){return _e(),X(T,t(F)?{...t(F)}:void 0,!0),v(ca(A())),!0}function se(){return _e(),X(T,void 0),v(ca(A())),p()(),X(P,!1),!0}function te(ae){const Pe={...t(F),request_message:ae.rawText,rich_text_json_repr:Array.isArray(ae.richTextJsonRepr)?ae.richTextJsonRepr[0]:ae.richTextJsonRepr};I()&&!bg(Pe,t(F))&&v(la(A(),{draftStatus:us.ready,exchange:Pe}))}function re(ae){X(O,ae.current,!0)}let le=Oe(void 0),ve=Oe(void 0);const $e=()=>t(ve)?.requestFocus(),ce=()=>t(ve)?.forceFocus();let ge=Oe(void 0);function de(ae,Pe){for(const Ce of ae)v(gt(Ze.SHARED.FILE_ATTACHMENT_SUCCEEDED,{bytes:Ce.size,type:Ce.type?Ce.type:"unknown"}));for(const Ce of Pe)v(gt(Ze.SHARED.FILE_ATTACHMENT_FAILED,{bytes:Ce.files[0].size,type:Ce.files[0].type?Ce.files[0].type:"unknown"}));v(gt(Ze.SHARED.FILE_ATTACHMENT_BUNDLE_COMPLETED,{successes:ae.length,failures:Pe.length}))}function we(){v(gt(Ze.SHARED.FILE_ATTACHMENT_STARTED,{source:"drop"}))}async function Be(ae){if(!i())return;const{files:Pe,folders:Ce}=await H.resolveFilePaths(ae);Pe.length>0&&v(Ti(i(),Pe)),Ce.length>0&&v(Si(i(),Ce))}function De(){v(gt(Ze.SHARED.FILE_ATTACHMENT_STARTED,{source:"button"}))}function Le(ae){v(gt(Ze.WEBVIEW.CONTEXT_MENU_BUTTON_CLICKED,{source:ae}))}var Me={requestStartEdit:()=>{Ie()},getEditorContainer:function(){return t(ge)},handleDrop:we},We=W0();let ke;Ht("mousedown",Cn,function(...ae){(I()?pe:void 0)?.apply(this,ae)}),We.__mousedown=[D0];var Re=b(We);{const ae=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{Ol(Ke,{onDrop:we,onCodeFilesDrop:Be})};k(Ge,Ke=>{l()&&I()&&Ke(ot)}),r(Se,Fe)},Pe=Se=>{var Fe=B(),Ge=w(Fe),ot=Qe=>{var Ye=F0(),bt=w(Ye);on(bt,{name:"cancelMessageEdit",handler:se});var Ue=$(bt,2);il(Ue,{shortcuts:{Enter:(oe,Ne,Ve)=>(ls("enter"),!0),Escape:(oe,Ne,Ve)=>(ls("escape"),!0)}});var lt=$(Ue,2);Ae(lt,()=>On.Root,(oe,Ne)=>{Ne(oe,{$$slots:{leftAlign:(Ve,Xe)=>{var et=z0(),at=w(et),$t=dt=>{var tt=O0(),pt=w(tt);Bl(pt,{});var vt=$(pt,2);it(vt,{maxWidth:"200px",content:Lt=>{pr(Lt,{heading:"Ask a question",description:"Get answers without modifying code",shortcutCommandName:"toggleAskMode"})},children:(Lt,St)=>{{let yt=d(()=>t(P)?"soft":"ghost-block"),Bt=d(()=>t(P)?"accent":"neutral");Nt(Lt,{class:"c-chat-input__ask-mode-btn",size:1,get variant(){return t(yt)},get color(){return t(Bt)},onclick:R,children:(At,Ft)=>{Te(At,{name:"message-square-text"})},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}});var zt=$(vt,2);Wr(zt,{orientation:"vertical",class:"c-chat-input__ask-separator"}),r(dt,tt)};k(at,dt=>{o()==="localAgent"&&dt($t)});var Wt=$(at,2),Mt=dt=>{var tt=N0(),pt=b(tt);he(()=>He(pt,`${t(Q)??""}/${Ws}`)),r(dt,tt)};k(Wt,dt=>{t(Q)>Ws&&dt(Mt)});var Dt=$(Wt,2),Gt=dt=>{zl(dt,{get selectedModelId(){return V(G,"$selectedModelId",c)},onModelChange:tt=>{i()&&v(Ci(i(),tt))}})};k(Dt,dt=>{V(U,"$isAgentic",c)&&V(j,"$enableModelRegistry",c)&&dt(Gt)}),r(Ve,et)},rightAlign:(Ve,Xe)=>{var et=B0(),at=w(et),$t=dt=>{var tt=B(),pt=w(tt);Ae(pt,()=>On.AddFileButton,(vt,zt)=>{zt(vt,{accept:".png,.jpg,.jpeg",onClick:De})}),r(dt,tt)};k(at,dt=>{l()&&dt($t)});var Wt=$(at,2),Mt=dt=>{var tt=L0(),pt=w(tt);ql(pt,{get draft(){return n()},forceEditorFocus:ce,get editorContainer(){return t(ge)}});var vt=$(pt,2),zt=b(vt);{let Ut=d(()=>n()?.draftStatus===us.enhancing);Ae(zt,()=>On.RewritePromptButton,(Lt,St)=>{St(Lt,{onRewrite:ze,get isDisabled(){return t(ee).isDisabled},get disabledReason(){return t(ee).disabledReason},get isEnhancing(){return t(Ut)}})})}tn(3,vt,()=>zr,()=>({axis:"x",duration:200,scale:.4})),r(dt,tt)};k(Wt,dt=>{t(ee).isHidden||dt(Mt)});var Dt=$(Wt,2);on(Dt,{name:"submitMessageEdit",handler:Ee});var Gt=$(Dt,2);{const dt=vt=>{var zt=P0(),Ut=b(zt);fn(Ut,{commandName:"submitMessageEdit",keysOnly:!0}),r(vt,zt)};let tt=d(()=>!t(be)),pt=d(()=>t(ue)?t(ne):"");Ae(Gt,()=>On.SendButton,(vt,zt)=>{zt(vt,{get isDisabled(){return t(tt)},get disabledReason(){return t(pt)},primaryAction:Ee,tooltipContent:dt,$$slots:{tooltipContent:!0}})})}r(Ve,et)}}})});var ct=$(lt,2);{const oe=Ne=>{var Ve=B(),Xe=w(Ve);{let et=d(()=>t(le)?.insertMentionNode);Ae(Xe,()=>On.ContextMenu,(at,$t)=>{$t(at,{onCloseDropdown:$e,get onInsertMentionable(){return t(et)},trackButtonClick:Le})})}r(Ne,Ve)};xl(b(ct),{prepend:oe,$$slots:{prepend:!0}})}r(Qe,Ye)},Ke=Qe=>{var Ye=B(),bt=w(Ye),Ue=lt=>{var ct=q0(),oe=b(ct);{let Ne=d(()=>t(P)?"accent":"neutral");xt(oe,{variant:"soft",get color(){return t(Ne)},size:.5,onclick:()=>{E(!E()),e.setIsCollapsed(!_())},children:(Ve,Xe)=>{var et=B(),at=w(et),$t=Mt=>{Te(Mt,{slot:"iconLeft",name:"chevron-down"})},Wt=Mt=>{Te(Mt,{slot:"iconLeft",name:"chevron-up"})};k(at,Mt=>{_()?Mt($t):Mt(Wt,!1)}),r(Ve,et)},$$slots:{default:!0}})}r(lt,ct)};k(bt,lt=>{M()&&lt(Ue)},!0),r(Qe,Ye)};k(Ge,Qe=>{I()?Qe(ot):Qe(Ke,!1)}),r(Se,Fe)};let Ce=d(()=>!I()||I()&&t(P)?"accent":"default");Ae(Re,()=>_s.Root,(Se,Fe)=>{Pt(Fe(Se,{get editable(){return I()},get variant(){return t(Ce)},onclick:Ge=>Ge.stopPropagation(),ondblclick:Ie,overlay:ae,footer:Pe,children:(Ge,ot)=>{var Ke=H0(),Qe=w(Ke),Ye=Ne=>{Xo(0,{changeImageMode:Ve=>{A()&&Ve&&v(Vd(i(),A(),{rich_text_json_repr:Ve}))},get saveImage(){return H.saveImage},get saveAttachment(){return H.saveAttachment},get deleteImage(){return H.deleteImage},get renderImage(){return H.loadImage},isEditable:()=>I(),supportedFileTypes:["image","text"],onCompletedAttachment:de})};k(Qe,Ne=>{l()&&Ne(Ye)});var bt=$(Qe,2);Pt(Fo(bt,{requestEditorFocus:$e,onMentionItemsUpdated:re}),Ne=>X(le,Ne,!0),()=>t(le));var Ue=$(bt,2);Fl(0,{get isAskMode(){return t(P)},onAskModeChange:Ne=>{console.error("ASK MODE",Ne),X(P,Ne,!0)},onAskModeToggleComplete:Y,onAskModeDeleted:Z});var lt=$(Ue,2);qo(lt,{get placeholder(){return C()}});var ct=$(lt,2);Ae(ct,()=>_s.Content,(Ne,Ve)=>{Ve(Ne,{get content(){return t(L)},onContentChanged:te})});var oe=$(ct,2);st(oe,()=>e.children??wt),r(Ge,Ke)},$$slots:{overlay:!0,footer:!0,default:!0}}),Ge=>X(ve,Ge,!0),()=>t(ve))})}Pt(We,ae=>X(ge,ae),()=>t(ge)),he(ae=>{nt(We,"data-user-message-request-id",A()),nt(We,"data-request-id",A()),ke=ft(We,1,"c-chat-input c-chat-edit-message svelte-vzdet8",null,ke,ae),jn(We,`--chat-input-collapsed-height: ${g()??""}px;`)},[()=>({"is-collapsed":_(),"is-editing":I()})]),r(s,We);var xe=fe(Me);return u(),xe}Nn(["mousedown"]);class Os{constructor(e){this._options=e;const n=Os._getNextPluginId(),o=this._setResizeObserver,a=this._clearResizeObserver,i=this._checkHeight;this._tipTapExtension=Ii.create({name:n,onCreate:function(){this.editor.view?.dom&&(o(this.editor),this.editor.on("destroy",a))},onUpdate:function(){const l=this.editor.view?.dom;l&&i(l)},onDestroy:()=>{this._resizeObserver?.disconnect(),this._resizeObserver=void 0}})}static _sequenceId=0;static RESIZE_OBSERVER_PLUGIN_KEY_BASE="augment-resize-observer-plugin-{}";static _getSequenceId=()=>Os._sequenceId++;static _getNextPluginId=()=>{const e=Os._getSequenceId().toString();return Os.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",e)};_tipTapExtension;_resizeObserver;_checkHeight=e=>{const n=e.getBoundingClientRect().height;this._options.onResize?.(n)};_setResizeObserver=e=>{const n=e.view?.dom;n&&(this._resizeObserver=new ResizeObserver(o=>{for(const a of o)this._checkHeight(a.target)}),this._resizeObserver.observe(n),this._checkHeight(n))};_clearResizeObserver=()=>{this._resizeObserver?.disconnect(),this._resizeObserver=void 0};updateOptions=e=>{this._options={...this._options,...e}};get tipTapExtension(){return this._tipTapExtension}}var U0=h('<div class="c-user-msg__actions svelte-1ncstye"><!></div>');function V0(s,e){me(e,!0);const[n,o]=je();let a=S(e,"requestId",19,()=>{}),i=S(e,"richTextJsonRepr",19,()=>{}),l=S(e,"timestamp",19,()=>{}),c=S(e,"onStartEdit",3,()=>{}),u=S(e,"onAcceptEdit",3,()=>{}),v=S(e,"onCancelEdit",3,()=>{});const m=Ct(),y=kt(dn.key),f=Ot("enableChatMultimodal"),g=Ot("fullFeatured"),A=Ot("enableEditableHistory"),C=Kd(),_=xo(e.conversationId),p=120;let E=Oe(!1),M=Oe(!1);async function I(q){await kn(),X(E,q&&t(W)&&!t(M),!0)}let T=Oe(!1);const O=q=>{t(G)&&a()&&(I(!1),t(D)?.requestStartEdit(),c()(),q?.stopPropagation())},P=()=>{v()()};async function H(q,L){if(!a())return;m(Ar(e.conversationId)),m(Yd(e.conversationId,a(),!0));const R=V(f,"$enableChatMultimodal",n)&&q.richTextJsonRepr?Xd(q.richTextJsonRepr,V(C,"$customPersonalityPrompts",n),!1):void 0;m(Jd(e.conversationId,{request_message:q.rawText,rich_text_json_repr:q.richTextJsonRepr,status:Tn.draft,mentioned_items:L,structured_request_nodes:R,model_id:V(_,"$modelId",n)??void 0})),u()()}let D=Oe(void 0),U=Oe(!1),j=d(()=>!!y?.isActive);const x=Io(e.conversationId);let N=d(()=>a()===void 0||a()===V(x,"$lastExchange",n)?.request_id),W=d(()=>!t(N)&&!t(T)),F=Oe(0);const G=d(()=>a()!==void 0&&V(g,"$fullFeatured",n)&&V(A,"$enableEditableHistory",n)&&!t(j)),z=d(()=>[{label:"Edit message",action:O,id:"edit-message",disabled:!1,lucideIconName:"pencil"}]);rt(()=>{t(F)&&t(W)&&t(D)?.getEditorContainer()&&t(F)&&t(W)&&(t(E)&&t(F)<p?I(!1):I(t(F)>p),X(U,t(F)>p))}),Gr(s,{get requestId(){return a()},get timestamp(){return l()},get isEditing(){return t(T)},set isEditing(R){X(T,R,!0)},content:R=>{{let Y=d(()=>i()??e.msg);Pt(G0(R,{get collapsed(){return t(E)},get showExpandButton(){return t(U)},get content(){return t(Y)},collapsedMaxHeight:p,get requestId(){return a()},onSubmitEdit:H,onCancelEdit:P,setIsCollapsed:I,get isEditing(){return t(T)},set isEditing(Z){X(T,Z,!0)},get userExpanded(){return t(M)},set userExpanded(Z){X(M,Z,!0)},children:(Z,Q)=>{(function(K,J){me(J,!0);let ue=S(J,"height",15,0);const ne=ze=>{ue(ze)},be=kt(hr.CONTEXT_KEY),ye=new Os({onResize:ne}),ee=be.pluginManager.registerPlugin(ye);fs(ee),rt(()=>{ye.updateOptions({onResize:ne})}),fe()})(0,{get height(){return t(F)},set height(K){X(F,K,!0)}})},$$slots:{default:!0}}),Z=>X(D,Z,!0),()=>t(D))}},userActions:R=>{var Y=U0(),Z=b(Y),Q=K=>{wv(K,{get items(){return t(z)}})};k(Z,K=>{t(G)&&!t(T)&&K(Q)}),r(R,Y)},$$slots:{content:!0,userActions:!0}}),fe(),o()}var j0=h('<div class="c-msg-list__turn"><!> <!> <!></div>');function K0(s,e){me(e,!0);const[n,o]=je();let a=S(e,"turnIndex",3,0);const i=Ct(),l=()=>{i(Zd(e.conversationId,e.turn)),i(gt(Ze.WEBVIEW.MESSAGE_SEND_RETRY_CLICKED,{source:"button",errorMessagePreview:e.turn.display_error_message?.substring(0,100),requestId:e.turn.request_id}))};let c=d(()=>e.turn.request_id),u=d(()=>zo(e.turn));const v=Qd(e.conversationId,e.turn.request_id);var m=j0(),y=b(m),f=_=>{{let p=d(()=>e.turn.request_message??"");V0(_,{get conversationId(){return e.conversationId},get msg(){return t(p)},get richTextJsonRepr(){return e.turn.rich_text_json_repr},get requestId(){return t(c)},get timestamp(){return e.turn.timestamp}})}};k(y,_=>{t(u)||Yi(e.turn)||_(f)});var g=$(y,2);{let _=d(()=>e.turn.response_text??"");ji(g,{get turn(){return e.turn},get turnIndex(){return a()},get requestId(){return t(c)},get showFooter(){return V(v,"$showFooter",n)},get markdown(){return t(_)}})}var A=$(g,2),C=_=>{(function(p,E){let M;me(E,!0);let I=Oe("Copy request ID"),T=Oe(void 0);function O(W){W||(clearTimeout(M),M=void 0,X(I,"Copy request ID"))}async function P(){E.requestId&&(await navigator.clipboard.writeText(E.requestId),X(I,"Copied!"),clearTimeout(M),M=setTimeout(()=>t(T)?.requestClose(),1500))}var H=of(),D=b(H),U=W=>{var F=ie();he(()=>He(F,E.displayErrorMessage)),r(W,F)},j=W=>{var F=B(),G=w(F),z=L=>{var R=tf();$(w(R)).__click=[ef,E],r(L,R)},q=L=>{var R=sf();$(w(R)).__click=[nf,E],r(L,R)};k(G,L=>{E.responseText&&E.responseText.length>0?L(z):L(q,!1)},!0),r(W,F)};k(D,W=>{E.displayErrorMessage?W(U):W(j,!1)});var x=$(D,2),N=W=>{var F=rf(),G=b(F),z=b(G),q=$(G,2);{let L=d(()=>[Xt.Hover]);Pt(it(q,{onOpenChange:O,get content(){return t(I)},get triggerOn(){return t(L)},children:(R,Y)=>{Nt(R,{variant:"ghost",color:"neutral",size:1,onclick:P,children:(Z,Q)=>{Te(Z,{name:"copy"})},$$slots:{default:!0}})},$$slots:{default:!0}}),R=>X(T,R,!0),()=>t(T))}he(()=>He(z,`Request ID: ${E.requestId??""}`)),r(W,F)};k(x,W=>{E.requestId&&W(N)}),r(p,H),fe()})(_,{get displayErrorMessage(){return e.turn.display_error_message},get responseText(){return e.turn.response_text},get requestId(){return t(c)},onResend:l})};k(A,_=>{e.turn.status===Tn.failed&&_(C)}),r(s,m),fe(),o()}var Y0=h("<span> </span>"),X0=h('<div class="c-gen-response svelte-17m6ry2"><span class="c-gen-response__text svelte-17m6ry2"><!> <!></span> <!></div>');function Jo(s,e){me(e,!0);const n=()=>V(c,"$lastExchange",o),[o,a]=je();let i=S(e,"timeToTimerMs",3,5e3),l=Oe(0);const c=Ri(e.conversationId);let u,v,m=d(()=>n()?.timestamp?new Date(n().timestamp).getTime():Date.now()),y=Oe(!1);function f(){X(l,Math.floor((Date.now()-t(m))/1e3),!0)}function g(){X(y,!0),f(),v=setInterval(f,1e3)}let A=d(()=>function(T){return T>=60?`${Math.floor(T/60)}:${String(T%60).padStart(2,"0")}`:`0:${String(T).padStart(2,"0")}`}(t(l)));Jt(function(){return Date.now()-t(m)>i()?g():u=setTimeout(g,i()),()=>{X(y,!1),clearTimeout(u),clearInterval(v)}});var C=X0(),_=b(C),p=b(_);es(p,{size:1});var E=$(p,2);qe(E,{size:1,weight:"light",color:"secondary",children:(T,O)=>{var P=ie("Generating response...");r(T,P)},$$slots:{default:!0}});var M=$(_,2),I=T=>{var O=B(),P=w(O);Ae(P,()=>xn.Root,(H,D)=>{D(H,{color:"neutral",size:1,children:(U,j)=>{qe(U,{type:"monospace",size:1,weight:"light",color:"secondary",children:(x,N)=>{var W=Y0();let F;var G=b(W);he(z=>{F=ft(W,1,"c-gen-response__timer svelte-17m6ry2",null,F,z),He(G,t(A))},[()=>({is_minutes:t(l)>=60})]),r(x,W)},$$slots:{default:!0}})},$$slots:{default:!0}})}),r(T,O)};k(M,T=>{t(y)&&T(I)}),r(s,C),fe(),a()}class as{constructor(e){this.text=e}type="plainText"}class kr{constructor(e){this.text=e}type="specialBlock"}function Va(s){return s.map(e=>e.text).join("")}var J0=h('Please <button class="svelte-9nhc5x">try again</button>.',1),Q0=h("Connection lost.<!>",1),Z0=h('Please <button class="svelte-9nhc5x">try again</button>',1),e_=h("We encountered an issue sending your message.<!>.",1),t_=h('<div class="c-msg-failure svelte-9nhc5x"><!></div>'),n_=h("<!> <!>",1);function Kr(s,e){me(e,!0);let n=S(e,"turn",15),o=S(e,"preamble",3,""),a=S(e,"resendTurn",19,()=>{}),i=S(e,"markdownBlocks",19,()=>[]),l=S(e,"showLoadingIndicator",3,!0),c={code:dg,codespan:cg,link:kv};rt(()=>{n(n().response_text=n().response_text??"",!0)});let u=d(()=>n().response_text?[new as(n().response_text)]:i()),v=d(()=>n().response_text??"");Jt(()=>{if(n().seen_state===Or.seen)return void n(n().response_text=Va(t(u)),!0);let m=Date.now();const y=function*(A){for(const C of A)if(C.type==="specialBlock")yield C.text;else for(const _ of C.text)yield _}(t(u));let f=y.next();const g=()=>{let A=Date.now();const C=Math.round((A-m)/8);let _="";for(let p=0;p<C&&!f.done;p++)_+=f.value,f=y.next();n(n().response_text+=_,!0),m=A,f.done||requestAnimationFrame(g)};g()}),Gr(s,{isAugment:!0,content:y=>{var f=B(),g=w(f),A=_=>{var p=B(),E=w(p),M=I=>{Jo(I,{})};k(E,I=>{l()&&I(M)}),r(_,p)},C=_=>{var p=B(),E=w(p),M=T=>{var O=t_(),P=b(O),H=U=>{var j=ie();he(()=>He(j,n().display_error_message)),r(U,j)},D=U=>{var j=B(),x=w(j),N=F=>{var G=Q0(),z=$(w(G)),q=L=>{var R=J0(),Y=$(w(R)),Z=d(()=>mo(a()));Y.__click=function(...Q){t(Z)?.apply(this,Q)},r(L,R)};k(z,L=>{a()&&L(q)}),r(F,G)},W=F=>{var G=e_(),z=$(w(G)),q=L=>{var R=Z0(),Y=$(w(R)),Z=d(()=>mo(a()));Y.__click=function(...Q){t(Z)?.apply(this,Q)},r(L,R)};k(z,L=>{a()&&L(q)}),r(F,G)};k(x,F=>{n().response_text&&n().response_text.length>0?F(N):F(W,!1)},!0),r(U,j)};k(P,U=>{n().display_error_message?U(H):U(D,!1)}),r(T,O)},I=T=>{var O=n_(),P=w(O);{let U=d(()=>o()+t(v));lg(P,{get renderers(){return c},get markdown(){return t(U)}})}var H=$(P,2),D=U=>{var j=B(),x=w(j);st(x,()=>e.children??wt),r(U,j)};k(H,U=>{n().status&&n().status!==Tn.success||t(v)!==Va(t(u))||U(D)}),r(T,O)};k(E,T=>{n().status===Tn.failed?T(M):T(I,!1)},!0),r(_,p)};k(g,_=>{(!n().status||n().status===Tn.sent)&&t(v).length<=0?_(A):_(C,!1)}),r(y,f)},$$slots:{content:!0}}),fe()}Nn(["click"]);var s_=h("<!> <!>",1),r_=h("<!> <!>",1);function Hl(s,e){me(e,!0);const[n,o]=je(),a=Ot("suggestedEditsAvailable"),i={seen_state:e.turn.seen_state,status:Tn.success};let l={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]};const c=[[new kr("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new as(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new kr("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new as(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new kr("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new as(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];V(a,"$suggestedEditsAvailable",n)&&c.push([new kr("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new as(": Take your completions beyond the cursor and across your workspace.")]);let u=[new as(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...c.flatMap((g,A)=>[new as(`${A+1}. `),...g,new as(`

`)]),new as("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")],v=Oe(void 0);function m(){t(v)?.requestFocus()}var y=r_(),f=w(y);Gr(f,{content:A=>{var C=B(),_=w(C);Ae(_,()=>_s.Root,(p,E)=>{Pt(E(p,{children:(M,I)=>{var T=s_(),O=w(T);Ae(O,()=>_s.Content,(H,D)=>{D(H,{get content(){return l}})});var P=$(O,2);Fo(P,{requestEditorFocus:m}),r(M,T)},$$slots:{default:!0}}),M=>X(v,M,!0),()=>t(v))}),r(A,C)},$$slots:{content:!0}}),Kr($(f,2),{get turn(){return i},get markdownBlocks(){return u}}),r(s,y),fe(),o()}function o_(s,e){me(e,!0);const n=()=>V(i,"$syncProgress",o),[o,a]=je(),i=Mo(),l=d(()=>n()?.syncedCount??0),c=d(()=>{return g=n()?.syncDuration,g?Math.floor(g/1e3):0;var g});Jt(()=>{e.onLoadingComplete?.()});let u=d(()=>[{singularLabel:br.FILE_INDEXED.SINGULAR,pluralLabel:br.FILE_INDEXED.PLURAL,value:t(l),icon:"file",skipAnimation:!1},{singularLabel:br.SECOND.SINGULAR,pluralLabel:br.SECOND.PLURAL,value:t(c),icon:"clock-8",skipAnimation:!1}]);const v=d(()=>t(l)>0);var m=B(),y=w(m),f=g=>{Av(g,{get entries(){return t(u)}})};k(y,g=>{t(v)&&g(f)}),r(s,m),fe(),a()}const ja="accordion";var a_=h('<div class="c-accordion svelte-ho7d7j"><!></div>');function i_(s,e,n){e.toggle(n.value)}var l_=h('<div class="c-accordion-item__custom-icon svelte-1h3oskk"><!></div>'),c_=h('<div class="c-accordion-item__content svelte-1h3oskk"><!></div>'),d_=h('<div><button class="c-accordion-item__header svelte-1h3oskk"><div class="c-accordion-item__icon-container svelte-1h3oskk"><!> <div class="c-accordion-item__chevron-icon svelte-1h3oskk"><!></div></div> <div class="c-accordion-item__title svelte-1h3oskk"><!></div></button> <!></div>');Nn(["click"]);const Ka={Root:function(s,e){me(e,!0);let n=S(e,"openValue",15);(function(i){Rn(ja,i)})({toggle:function(i){n()===i?n(void 0):n(i)},isOpen:function(i){return n()===i}});var o=a_(),a=b(o);st(a,()=>e.children??wt),r(s,o),fe()},Item:function(s,e){me(e,!0);const n=function(){const p=kt(ja);if(!p)throw new Error("AccordionAugment.Item must be used within AccordionAugment.Root");return p}(),o=d(()=>n.isOpen(e.value));var a=d_();let i;var l=b(a);l.__click=[i_,n,e];var c=b(l),u=b(c),v=p=>{var E=l_(),M=b(E);Te(M,{get name(){return e.icon}}),r(p,E)};k(u,p=>{e.icon&&p(v)});var m=$(u,2),y=b(m);{let p=d(()=>!t(o));ug(y,{get collapsed(){return t(p)}})}var f=$(c,2),g=b(f),A=p=>{var E=B(),M=w(E);st(M,()=>e.header),r(p,E)};k(g,p=>{e.header&&p(A)});var C=$(l,2),_=p=>{var E=c_(),M=b(E),I=T=>{var O=B(),P=w(O);st(P,()=>e.content),r(T,O)};k(M,T=>{e.content&&T(I)}),he(()=>nt(E,"id",`accordion-content-${e.value}`)),tn(3,E,()=>Bo,()=>({duration:200})),r(p,E)};k(C,p=>{t(o)&&p(_)}),he(p=>{i=ft(a,1,"c-accordion-item svelte-1h3oskk",null,i,p),nt(l,"aria-expanded",t(o)),nt(l,"aria-controls",`accordion-content-${e.value}`)},[()=>({"is-open":t(o)})]),r(s,a),fe()}};var u_=h('<div class="c-feature-highlight-augment svelte-vn4vcx"><div class="c-feature-highlight-augment__header svelte-vn4vcx"><div class="c-feature-highlight-augment__header-title svelte-vn4vcx"><!> <!></div> <div class="c-feature-highlight-augment__description svelte-vn4vcx"><!></div></div> <div class="c-feature-highlight-augment__accordion svelte-vn4vcx"><!></div></div>');function v_(s,e){me(e,!0);let n=S(e,"openItemId",15),o=S(e,"buttonIdMap",19,()=>({}));const a=Ct();let i=Oe(void 0);rt(()=>{n()&&n()!==t(i)&&e.items.find(C=>C.value===n()),X(i,n(),!0)}),rt(()=>{let C,_,p=null,E=null;const M=n()?o()[n()]:void 0;function I(){p&&(p.classList.remove("feature-highlight-target"),p.blur(),p.removeEventListener("click",T),E&&p.removeEventListener("keydown",E),p=null),_!==void 0&&(clearTimeout(_),_=void 0),E=null,a(da(void 0))}function T(O){p&&(O.target===p||p.contains(O.target))&&I()}return n()&&M&&(C=window.setTimeout(()=>{p=document.getElementById(M),p&&(E=O=>{const P=O;P.key!=="Enter"&&P.key!==" "||T(O)},p.classList.add("feature-highlight-target"),a(da(M)),p.focus(),p.addEventListener("click",T),p.addEventListener("keydown",E),_=window.setTimeout(()=>{I()},6e3))},300)),()=>{C!==void 0&&clearTimeout(C),p&&(p.removeEventListener("click",T),E&&p.removeEventListener("keydown",E)),I()}});var l=u_(),c=b(l),u=b(c),v=b(u);Te(v,{name:"augment-logo"});var m=$(v,2);qe(m,{size:2,weight:"bold",children:(C,_)=>{var p=ie("Augment Features");r(C,p)},$$slots:{default:!0}});var y=$(u,2),f=b(y);qe(f,{size:1,children:(C,_)=>{var p=ie(`Get the most from your coding agent! Explore some productivity tools that are helping people
        code faster.`);r(C,p)},$$slots:{default:!0}});var g=$(c,2),A=b(g);Ae(A,()=>Ka.Root,(C,_)=>{_(C,{get openValue(){return n()},set openValue(p){n(p)},children:(p,E)=>{var M=B(),I=w(M);Vt(I,17,()=>e.items,T=>T.value,(T,O)=>{var P=B(),H=w(P);{const D=j=>{var x=ie();he(()=>He(x,t(O).title)),r(j,x)},U=j=>{var x=B(),N=w(x);st(N,()=>t(O).content),r(j,x)};Ae(H,()=>Ka.Item,(j,x)=>{x(j,{get value(){return t(O).value},get icon(){return t(O).icon},header:D,content:U,$$slots:{header:!0,content:!0}})})}r(T,P)}),r(p,M)},$$slots:{default:!0}})}),r(s,l),fe()}const g_={CONTROL:"control",OFF:"off",ENABLED:"enabled"},h_=s=>{qe(s,{size:1,children:(e,n)=>{var o=ie(`Rewrite prompt to provide more context and improve agent responses. Write a prompt to enable
    this feature.`);r(e,o)},$$slots:{default:!0}})},p_=s=>{qe(s,{size:1,children:(e,n)=>{var o=ie("Tasklist helps the agent create and refine a step-by-step plan for you to review.");r(e,o)},$$slots:{default:!0}})};var m_=h('<div style="display: flex; flex-direction: column; gap: var(--ds-spacing-3);"><!> <div><!></div></div>'),f_=h('<!> <!> <div class="c-onboarding-content svelte-1q13mbk"><!> <!></div>',1);function __(s,e){me(e,!0);const n=()=>V(c,"$isOnboardingFeatureHighlightEnabled",a),o=()=>V(A,"$currentConversationId",a),[a,i]=je(),l=Yn(),c=$i("isOnboardingFeatureHighlightEnabled");(function(M){const{CONTROL:I,ENABLED:T,OFF:O}=g_})(n());const u="prompt-enhancer",v="agent-task-list",m="import-rules",y={[u]:ko,[v]:rc};let f=Oe(!1);const g=kt(dn.key),A=ln(),C=ts(A),_=d(()=>{let M=ws.chat;return V(g,"$remoteAgentsModel",a)?.isActive?M=ws.remoteAgent:V(C,"$isAgentic",a)&&(M=ws.agent),M}),p=d(()=>t(f)&&e.turn.request_id&&[Tn.success,Tn.failed,Tn.cancelled].includes(e.turn.status)),E=[{value:u,title:"Prompt Enhancer",icon:"sparkles",content:h_,analyticsEvent:{eventName:Ze.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"prompt-enhancer"}}},{value:v,title:"Agent Tasklist",icon:"list-checks",content:p_,analyticsEvent:{eventName:Ze.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"agent-task-list"}}},{value:m,title:"Import Rules",icon:"download",content:M=>{var I=m_(),T=b(I);qe(T,{size:1,children:(H,D)=>{var U=ie(`Augment will automatically import rules if they exist in your workspace. You can also import
      rules in settings.`);r(H,U)},$$slots:{default:!0}});var O=$(T,2),P=b(O);xt(P,{onclick:()=>{l.openSettingsPage("guidelines")},variant:"soft",children:(H,D)=>{var U=ie("Add Rules");r(H,U)},$$slots:{default:!0}}),r(M,I)},analyticsEvent:{eventName:Ze.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"import-rules"}}}];Kr(s,{get turn(){return e.turn},showLoadingIndicator:!1,get preamble(){return eu},resendTurn:()=>e.onResend(e.turn),children:(M,I)=>{var T=f_(),O=w(T),P=W=>{Ev(W,{get conversationId(){return o()},get turn(){return e.turn}})};k(O,W=>{o()&&W(P)});var H=$(O,2);o_(H,{onLoadingComplete:()=>X(f,!0)});var D=$(H,2),U=b(D),j=W=>{Cv(W,{get requestId(){return e.turn.request_id},getResponseText:()=>e.turn.response_text,get chatMode(){return t(_)}})};k(U,W=>{t(p)&&W(j)});var x=$(U,2),N=W=>{v_(W,{get items(){return E},get buttonIdMap(){return y}})};k(x,W=>{t(f)&&n()==="enabled"&&W(N)}),r(M,T)},$$slots:{default:!0}}),fe(),i()}function Wl(s){if(!s)return"";if(s===Number.MAX_SAFE_INTEGER)return"Now";const e=new Date(s),n=new Date,o=e.getHours(),a=`${o%12||12}:${e.getMinutes().toString().padStart(2,"0")}${o>=12?"PM":"AM"}`,i=Math.floor((n.getTime()-e.getTime())/864e5);return i===0?a:i===1?`Yesterday at ${a}`:`${i} days ago at ${a}`}var y_=h("<div><!> <!></div>");function Gl(s,e){me(e,!0);const n=()=>V(y,"$lastCheckpoint",l),o=()=>V(v,"$conversationId",l),a=()=>V(m,"$targetCheckpointUuid",l),i=()=>V(t(C),"$revertTargetCheckpointIndex",l),[l,c]=je(),u=Ct(),v=qn(),m=xi(v),y=Mi(v),f=d(()=>e.turn.toTimestamp),g=d(()=>e.turn.uuid===n().uuid),A=d(()=>Dr(o(),e.turn.uuid)),C=d(()=>Dr(o(),e.turn.revertTarget?.uuid)),_=d(()=>e.turn.uuid===a()&&a()!==n()?.uuid),p=d(()=>e.turn.uuid===a()||m===void 0&&e.turn.uuid===n()?.uuid);async function E(){u(Di(o(),e.turn.uuid))}let M=d(()=>Nr(e.turn)),I=d(()=>Nr(e.turn)?function(H){return H.revertTarget?.uuid?i()===void 0?void 0:`Reverted to Checkpoint ${i()+1}`:H.revertTarget?.filePath?`Undid changes to ${H.revertTarget.filePath.relPath}`:void 0}(e.turn):void 0);var T=B(),O=w(T),P=H=>{var D=y_();let U;var j=b(D);el(j,{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$events:{click:()=>{return N=e.turn.uuid,void u(tu(o(),N));var N}},children:(N,W)=>{dl(N,{size:1,shrink:!0,align:"left",leftIcon:q=>{Te(q,{name:"milestone"})},text:q=>{var L=ie();he(()=>He(L,`Checkpoint ${(V(t(A),"$checkpointIndex",l)||-1)+1}`)),r(q,L)},grayText:q=>{var L=B(),R=w(L),Y=Q=>{var K=ie();he(()=>He(K,t(I))),r(Q,K)},Z=Q=>{var K=B(),J=w(K),ue=ne=>{var be=ie();he(ye=>He(be,ye),[()=>Wl(t(f))]),r(ne,be)};k(J,ne=>{t(p)&&ne(ue)},!0),r(Q,K)};k(R,Q=>{t(I)?Q(Y):Q(Z,!1)}),r(q,L)},$$slots:{leftIcon:!0,text:!0,grayText:!0}})},$$slots:{default:!0}});var x=$(j,2);{let N=d(()=>t(p)?"soft":"ghost-block"),W=d(()=>t(p)||t(g));Nt(x,{get variant(){return t(N)},color:"neutral",size:1,get disabled(){return t(W)},class:"c-revert-button","data-testid":"revert-button",$$events:{click:E},children:(F,G)=>{{let z=d(()=>[Xt.Hover]),q=d(()=>t(p)||t(g)?"Cannot revert to current version":"Revert to this version");it(F,{get triggerOn(){return t(z)},get content(){return t(q)},children:(L,R)=>{Te(L,{name:"undo-2"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}he(N=>{U=ft(D,1,"c-checkpoint-container svelte-1d92nhn",null,U,N),nt(D,"data-checkpoint-number",e.turn.uuid)},[()=>({"c-checkpoint-container--target-checkpoint":t(p),"c-checkpoint-container--dimmed-marker":t(_)})]),r(H,D)};k(O,H=>{t(g)&&!t(M)||H(P)}),r(s,T),fe(),c()}var b_=h('<span class="c-checkpoint-files-count"> </span>'),$_=h(" <!>",1),w_=h('<div class="c-checkpoint-summary"><!></div>'),k_=h('<div class="c-checkpoint-header svelte-1u1yjkn"><div class="c-checkpoint-tag"><!> <!></div> <!> <!></div>');function A_(s,e){me(e,!0);const[n,o]=je();let a=S(e,"filesCount",3,0),i=S(e,"timestamp",3,""),l=S(e,"diffSummary",19,()=>({totalAddedLines:0,totalRemovedLines:0})),c=S(e,"hasChanges",3,!1),u=S(e,"isTarget",3,!1);const v=vg(),m=v.collapsed,y=v.expandable;function f(T){T.stopPropagation(),T.preventDefault(),e.onRevertClick()}var g=k_(),A=b(g),C=b(A);Tv(C,{get expandable(){return V(y,"$expandable",n)},get collapsed(){return V(m,"$collapsed",n)},children:(T,O)=>{Te(T,{name:"milestone"})},$$slots:{default:!0}});var _=$(C,2);dl(_,{size:1,shrink:!0,align:"left",text:P=>{var H=$_(),D=w(H),U=$(D),j=x=>{var N=b_(),W=b(N);he(F=>He(W,`(${F??""})`),[()=>Hr(a(),"file")]),r(x,N)};k(U,x=>{a()>0&&x(j)}),he(()=>He(D,`Checkpoint ${e.displayCheckpointIdx??""} `)),r(P,H)},grayText:P=>{var H=B(),D=w(H),U=x=>{var N=ie();he(()=>He(N,e.revertMessage)),r(x,N)},j=x=>{var N=B(),W=w(N),F=G=>{var z=ie();he(()=>He(z,i())),r(G,z)};k(W,G=>{i()&&G(F)},!0),r(x,N)};k(D,x=>{e.revertMessage?x(U):x(j,!1)}),r(P,H)},$$slots:{text:!0,grayText:!0}});var p=$(A,2),E=T=>{var O=w_(),P=b(O);Oo(P,{size:0,get totalAddedLines(){return l().totalAddedLines},get totalRemovedLines(){return l().totalRemovedLines}}),r(T,O)};k(p,T=>{c()&&T(E)});var M=$(p,2),I=T=>{{let O=d(()=>[Xt.Hover]);it(T,{get triggerOn(){return t(O)},content:"Revert to this Checkpoint",children:(P,H)=>{xt(P,{variant:"ghost-block",color:"neutral",size:.5,class:"c-revert-button","data-testid":"revert-button","data-collapsible-button":"false",$$events:{click:f},iconLeft:U=>{Te(U,{name:"undo-2"})},children:(U,j)=>{var x=ie("Revert");r(U,x)},$$slots:{iconLeft:!0,default:!0}})},$$slots:{default:!0}})}};k(M,T=>{u()||T(I)}),r(s,g),fe(),o()}var E_=h('<div class="c-edits-list svelte-1f7mk8i"></div>'),C_=h('<div class="c-edits-list c-edits-list--empty svelte-1f7mk8i"><!></div>'),T_=h("<div><!></div>");function Ul(s,e){me(e,!0);const n=()=>V(f,"$lastCheckpoint",i),o=()=>V(m,"$conversationId",i),a=()=>V(y,"$targetCheckpointUuid",i),[i,l]=je();let c=S(e,"collapsed",3,!0);const u=Yn(),v=Ct(),m=qn(),y=xi(m),f=Mi(m),g=d(()=>e.turn.toTimestamp),A=d(()=>e.turn.fromTimestamp),C=d(()=>e.turn.uuid===n().uuid),_=d(()=>Dr(o(),e.turn.uuid)),p=d(()=>su(o(),e.turn.uuid)),E=d(()=>Dr(o(),e.turn.revertTarget?.uuid)),M=d(()=>V(t(p),"$checkpointSummary",i).filter(L=>L.changesSummary&&(L.changesSummary.totalAddedLines>0||L.changesSummary.totalRemovedLines>0))),I=d(()=>e.turn.uuid===a()&&a()!==n()?.uuid),T=d(()=>e.turn.uuid===a()||y===void 0&&e.turn.uuid===n()?.uuid);let O=Oe(Wn(c()));function P(L){return L.revertTarget?.uuid?t(E)===void 0?void 0:`Reverted to Checkpoint ${V(t(E),"$revertTargetCheckpointIndex",i)+1}`:L.revertTarget?.filePath?`Undid changes to ${L.revertTarget.filePath.relPath}`:void 0}function H(){v(Di(o(),e.turn.uuid))}let D=d(()=>(V(t(_),"$checkpointIndex",i)||-1)+1),U=d(()=>Nr(e.turn)),j=d(()=>Nr(e.turn)?P(e.turn):void 0),x=d(()=>t(M).reduce((L,R)=>(L.totalAddedLines+=R.changesSummary?.totalAddedLines??0,L.totalRemovedLines+=R.changesSummary?.totalRemovedLines??0,L),{totalAddedLines:0,totalRemovedLines:0})),N=d(()=>t(M).length>0),W=Oe(!1),F=Oe(!1);rt(()=>{t(W)&&e.turn&&!t(F)&&(v(nu(o(),e.turn)),X(F,!0))});var G=B(),z=w(G),q=L=>{var R=T_();let Y;var Z=b(R);al(Z,{class:"c-checkpoint-collapsible",stickyHeader:!0,toggleHeader:!0,get collapsed(){return t(O)},set collapsed(K){X(O,K,!0)},header:K=>{{let J=d(()=>Wl(t(g)));A_(K,{get displayCheckpointIdx(){return t(D)},get filesCount(){return t(M).length},get timestamp(){return t(J)},get revertMessage(){return t(j)},get diffSummary(){return t(x)},get hasChanges(){return t(N)},get isTarget(){return t(T)},onRevertClick:H})}},children:(K,J)=>{var ue=B(),ne=w(ue),be=ee=>{var ze=E_();Vt(ze,21,()=>t(M),$n,(Ie,Ee)=>{Cl(Ie,{get qualifiedPathName(){return t(Ee).qualifiedPathName},get lineChanges(){return t(Ee).changesSummary},onClickFile:()=>{return _e=t(Ee).qualifiedPathName,void v($s({repoRoot:_e.rootPath,pathName:_e.relPath,allowOutOfWorkspace:!0}));var _e},onClickReview:()=>{return _e=t(Ee).qualifiedPathName,void u.showAgentReview(_e,t(A),t(g),!1);var _e}})}),r(ee,ze)},ye=ee=>{var ze=B(),Ie=w(ze),Ee=_e=>{var pe=C_(),se=b(pe);qe(se,{size:1,color:"neutral",children:(te,re)=>{var le=ie("No changes to show");r(te,le)},$$slots:{default:!0}}),r(_e,pe)};k(Ie,_e=>{t(O)||_e(Ee)},!0),r(ee,ze)};k(ne,ee=>{t(N)?ee(be):ee(ye,!1)}),r(K,ue)},$$slots:{header:!0,default:!0}}),yn(R,(Q,K)=>Sv?.(Q,K),()=>({onVisible:()=>X(W,!0),scrollTarget:document.body})),he(Q=>{Y=ft(R,1,"c-checkpoint-container svelte-1f7mk8i",null,Y,Q),nt(R,"data-checkpoint-number",e.turn.uuid)},[()=>({"c-checkpoint-container--target-checkpoint":t(T),"c-checkpoint-container--dimmed-marker":t(I)})]),r(L,R)};k(z,L=>{t(C)&&!t(U)||L(q)}),r(s,G),fe(),l()}var S_=h('<span class="c-gen-response svelte-cnl3c"><!> </span>');function Vl(s,e){me(e,!0);let n=Oe(".");Jt(()=>{const l=setInterval(()=>{X(n,t(n).length>=3?".":t(n)+".",!0)},500);return()=>clearInterval(l)});var o=S_(),a=b(o);Te(a,{name:"pause"});var i=$(a);he(()=>He(i,` Waiting for user input${t(n)??""}`)),r(s,o),fe()}var I_=h('<span class="c-retry-response svelte-uflx1w"><!> </span>');function jl(s,e){let n=S(e,"message",3,"Retrying...");var o=I_(),a=b(o);es(a,{size:1});var i=$(a);he(()=>He(i,` ${n()??""}`)),r(s,o)}var R_=h("<!> Stopped",1),x_=h('<span class="c-stopped svelte-9oscf2"><!></span>');function Kl(s){var e=x_(),n=b(e);qe(n,{size:1,children:(o,a)=>{var i=R_(),l=w(i);Te(l,{name:"square"}),r(o,i)},$$slots:{default:!0}}),r(s,e)}function Yl(s,e){let n=s.offsetHeight,o=e;const a=new ResizeObserver(i=>{const l=i[0].contentRect.height;i.length===1?l!==n&&(o.onHeightChange?.(l),n=l):console.warn("Unexpected number of resize entries: ",i)});return a.observe(s),o?.onHeightChange?.(n),{update(i){o=i},destroy:()=>a.disconnect()}}const M_=(s,e=40)=>Oi(s)<=e;function Xl(s,e={}){let n=e,o={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!1};const a=()=>{const{scrollTop:i,scrollHeight:l,offsetHeight:c}=s,u=Oi(s),v=i>o.scrollTop,m=l-o.scrollHeight,y=!(m<0&&o.scrollBottom<-m)&&i<o.scrollTop&&u>o.scrollBottom,f=l>c,g=M_(s)&&f&&v,A=y||!f;g&&!o.scrolledIntoBottom?n.onScrollIntoBottom?.(s):A&&!o.scrolledAwayFromBottom&&n.onScrollAwayFromBottom?.(s),o={scrollTop:i,scrollBottom:u,scrolledIntoBottom:g,scrolledAwayFromBottom:A,scrollHeight:l},n.onScroll?.(i,l,c)};return s.addEventListener("scroll",a),{update(i){n=i},destroy(){s.removeEventListener("scroll",a)}}}var D_=h('<div class="c-msg-list-bottom-button svelte-1d6jflg"><!></div>');function Jl(s,e){me(e,!0);let n=S(e,"messageListElement",3,null);var o=D_(),a=b(o);Nt(a,{variant:"ghost-block",size:.5,onclick:()=>{n()&&ar(n(),{smooth:!0})},children:(i,l)=>{Te(i,{name:"arrow-down"})},$$slots:{default:!0}}),r(s,o),fe()}var O_=h('<div class="c-conversation-navigation__tooltip svelte-11xtfjd">Up <!></div>'),N_=h("<!> <!>",1),z_=h('<div class="c-conversation-navigation__tooltip svelte-11xtfjd">Down <!></div>'),L_=h("<!> <!>",1),P_=h('<div class="c-conversation-navigation svelte-11xtfjd"><!> <!></div>');const B_="message-list-scrollable-container",Ql="last-message-pointer";var F_=h('<div class="c-msg-list__floating c-msg-list__navigation-controls svelte-bmgvca"><!></div>'),q_=h('<div class="c-msg-list__floating c-msg-list__scroll-to-bottom svelte-bmgvca"><!></div>'),H_=h('<div data-testid="chat-message-list"><!> <div><div class="c-msg-list__spacer svelte-bmgvca"></div> <div class="c-msg-list__content svelte-bmgvca"><!></div></div> <!></div>');function W_(s,e){me(e,!0);const n=()=>V(c,"$enableIntersectionObserverManager",a),o=()=>V(u,"$fullFeatured",a),[a,i]=je();let l=S(e,"doShowFloatingButtons",3,!1);const c=Ot("enableIntersectionObserverManager"),u=Ot("fullFeatured"),v=ln();let m=Oe(void 0),y=Oe(void 0),f=Oe(void 0),g=Oe(!1),A=Oe(!1),C=!1;function _(R){X(g,!1),C||(C=!0,ar(R,{smooth:!0,scrollDuration:100,onScrollFinish:()=>C=!1}))}function p(){X(g,!0)}let E,M=Oe(0),I=d(()=>t(M)),T=d(()=>t(g)),O=d(()=>`${t(I)}px 0px ${t(I)}px 0px`);rt(()=>{E=Ki({root:t(m),rootMargin:"300px 0px 300px 0px",threshold:0,enabled:n()})}),Ur();const P=Ct();function H(R,Y){P(gt(Ze.WEBVIEW.CONVERSATION_NAVIGATION,{direction:R,source:Y}))}rt(()=>{E?.setConfig({root:t(m),rootMargin:t(O),threshold:0,enabled:n()})}),Jt(()=>{if(!t(m)||!t(y)||!t(f))return;let R,Y=0;const Z=()=>{if(!t(y))return;const K=(J=t(y),R&&R.parentNode&&R.getAttribute("id")||(R=J.querySelector(`#${Ql}`)||void 0),R);var J;if(!K)return;const[ue]=t(y).getClientRects(),[ne]=K.getClientRects(),be=Math.abs(ne.top-ue.bottom),ye=ue.height<Y?Math.max(0,Y-ue.height):Math.max(0,Y-be);t(f).style.height=`${ye}px`},Q=new window.ResizeObserver(K=>{for(const J of K)J.target===t(m)&&(Y=J.contentRect.height);Z()});return Q.observe(t(m)),Q.observe(t(y)),()=>{Q.disconnect()}});var D=H_();let U;var j=b(D),x=R=>{var Y=F_();(function(Z,Q){me(Q,!0);const K=()=>V(be,"$currentConversationId",J),[J,ue]=je(),ne=S(Q,"trackNavigationInDirection",19,()=>{}),be=ln(),ye=Ct(),{store:ee}=ys();function ze(){const le=Zr();if(!le)return{};const ve=le?.scrollTop,$e=le?.getBoundingClientRect(),ce=ve,ge=ve+$e?.height,de=le.querySelectorAll("[data-user-message-request-id]"),we=de.values().toArray(),Be=we.reduce((Re,xe,ae)=>{const Pe=xe.getBoundingClientRect(),Ce=Re[ae-1],Se={id:xe.getAttribute("data-user-message-request-id")||void 0,area:{top:Pe.top+ve,bottom:1/0}};return Ce&&(Ce.area.bottom=Se.area.top),Re.push(Se),Re},[]),De=Be.filter(Re=>!(Re.area.bottom<ce)&&Re.area.top<ge),Le=we[0],Me=De[0];if(Le&&(!Me||Me.area.top>ce))return{prev:ru.select(ee.getState(),Q.conversationId,Le.getAttribute("data-user-message-request-id")||void 0),next:va.select(ee.getState(),Q.conversationId,Le.getAttribute("data-user-message-request-id")||void 0)};de.values().forEach(Re=>{Re.getBoundingClientRect().top});const We=De[0]?.id,ke=De[De.length-1];return{prev:We,next:va.select(ee.getState(),Q.conversationId,ke.id)}}function Ie(le){if(!K())return;const ve=ze(),{next:$e}=ve;if(ne()?.("down",le),$e)ye(ua(K(),$e));else{const ce=Zr();ce&&ar(ce,{smooth:!0})}}function Ee(le){if(!K())return;const{prev:ve}=ze();ne()?.("up",le),ve&&ye(ua(K(),ve))}let _e=Oe(!1),pe=Oe(!0);rt(()=>{const le=Zr();if(!le)return;const ve=di(()=>{const{height:$e}=le.getBoundingClientRect();if(Math.ceil($e)>=le.scrollHeight)return X(_e,!1),void X(pe,!1);Math.floor(le.scrollTop)===0?X(_e,!1):X(_e,!0),Math.abs(Math.floor(le.scrollTop))+100>=le.scrollHeight?X(pe,!1):X(pe,!0)},50);return ve(),le.addEventListener("scroll",ve),()=>{le.removeEventListener("scroll",ve)}});var se=B(),te=w(se),re=le=>{var ve=P_(),$e=b(ve);it($e,{side:"top",nested:!1,content:de=>{var we=O_(),Be=$(b(we));fn(Be,{commandName:"scrollConversationUp",keysOnly:!0}),r(de,we)},children:(de,we)=>{var Be=N_(),De=w(Be);on(De,{name:"scrollConversationUp",handler:()=>Ee("keybinding")});var Le=$(De,2);{let Me=d(()=>!t(pe));Nt(Le,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>Ee("button"),get disabled(){return t(Me)},children:(We,ke)=>{Te(We,{name:"arrow-up"})},$$slots:{default:!0}})}r(de,Be)},$$slots:{content:!0,default:!0}});var ce=$($e,2);it(ce,{side:"top",nested:!1,content:de=>{var we=z_(),Be=$(b(we));fn(Be,{commandName:"scrollConversationDown",keysOnly:!0}),r(de,we)},children:(de,we)=>{var Be=L_(),De=w(Be);on(De,{name:"scrollConversationDown",handler:()=>Ie("keybinding")});var Le=$(De,2);{let Me=d(()=>!t(_e));Nt(Le,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>Ie("button"),get disabled(){return t(Me)},children:(We,ke)=>{Te(We,{name:"arrow-down"})},$$slots:{default:!0}})}r(de,Be)},$$slots:{content:!0,default:!0}}),r(le,ve)};k(te,le=>{t(_e)&&t(pe)&&le(re)}),r(Z,se),fe(),ue()})(b(Y),{get conversationId(){return V(v,"$currentConversationId",a)},trackNavigationInDirection:H}),tn(3,Y,()=>As,()=>({duration:150,start:.9})),r(R,Y)};k(j,R=>{l()&&t(A)&&R(x)});var N=$(j,2);let W;nt(N,"id",B_);var F=b(N);Pt(F,R=>X(f,R),()=>t(f));var G=$(F,2),z=b(G);st(z,()=>e.children??wt,()=>({turnHeight:t(I)})),Pt(G,R=>X(y,R),()=>t(y)),Pt(N,R=>X(m,R),()=>t(m)),yn(N,(R,Y)=>Xl?.(R,Y),()=>({onScrollIntoBottom:_,onScrollAwayFromBottom:p,onScroll:e.onScroll})),yn(N,(R,Y)=>Yl?.(R,Y),()=>({onHeightChange:R=>X(M,R,!0)}));var q=$(N,2),L=R=>{var Y=q_();Jl(b(Y),{get messageListElement(){return t(m)}}),tn(3,Y,()=>As,()=>({duration:150,start:.9})),r(R,Y)};k(q,R=>{l()&&t(A)&&t(T)&&R(L)}),he((R,Y)=>{U=ft(D,1,"c-msg-list-container svelte-bmgvca",null,U,R),W=ft(N,1,"c-msg-list svelte-bmgvca",null,W,Y)},[()=>({"c-msg-list--minimal":!o()}),()=>({"c-msg-list--minimal":!o()})]),Ht("mouseenter",D,()=>X(A,!0)),Ht("mouseleave",D,()=>X(A,!1)),r(s,D),fe(),i()}var G_=h('<div class="c-msg-list__turn--hidden svelte-1dpaky9"></div>'),U_=h('<div class="c-msg-list__turn-seen svelte-1dpaky9"></div>'),V_=h('<div class="c-msg-list__turn"><!> <!></div>'),j_=h('<div class="c-agent-running-spacer svelte-1dpaky9"></div>'),K_=h('<div class="c-msg-list__container svelte-1dpaky9"><!> <!> <!></div>');function Zl(s,e){me(e,!0);const n=()=>V(C,"$lastExchange",i),o=()=>V(A,"$minItemsToRender",i),a=()=>V(v,"$currentConversationId",i),[i,l]=je(),c=Ct(),u=Ot("enableRichCheckpointInfo"),v=qn(),m=ts(v),y=xr(v),f=Ni(v),g=d(()=>zi(V(f,"$conversationHistoryCollection",i)).map(({item:H})=>H)),A=ou(v),C=Io(v),_=Ri(v),p=d(()=>cu(v,n()?.request_id)),E=d(()=>Qm(n(),t(g)[t(g).length-1],V(t(p),"$areToolsComplete",i),V(y,"$conversationExchangeStatus",i),V(m,"$isAgentic",i)));let M=Oe(Wn(o())),I=Oe(!1);const T=d(()=>t(g).length<=t(M)?t(g):t(g).slice(t(g).length-t(M)));rt(()=>{o()&&o()>t(M)&&X(M,o(),!0)}),rt(()=>{const H=t(g).length;t(M),H<t(M)&&X(M,Math.max(au,H),!0)});const O=(H,D,U)=>{t(I)||D-Math.abs(H)-U<1e3&&t(M)<t(g).length&&P()},P=()=>{if(t(I))return;X(I,!0);const H=Math.min(t(M)+15,t(g).length);X(M,H,!0),requestAnimationFrame(()=>{X(I,!1)})};Ur(),W_(s,{doShowFloatingButtons:!0,onScroll:O,children:D=>{var U=K_(),j=b(U);Vt(j,19,()=>t(T),(z,q)=>z.request_id??`no-request-id-${q}`,(z,q,L)=>{const R=d(()=>vr(t(q))&&t(q).hidden);var Y=V_(),Z=b(Y),Q=ne=>{var be=G_();r(ne,be)},K=ne=>{var be=B(),ye=w(be),ee=Ie=>{Kr(Ie,{get turn(){return t(q)}})},ze=Ie=>{var Ee=B(),_e=w(Ee),pe=te=>{Hl(te,{get turn(){return t(q)}})},se=te=>{var re=B(),le=w(re),ve=ce=>{__(ce,{get turn(){return t(q)},onResend:ge=>c(du(a(),ge))})},$e=ce=>{var ge=B(),de=w(ge),we=De=>{K0(De,{get conversationId(){return a()},get turn(){return t(q)},get turnIndex(){return t(L)}})},Be=De=>{var Le=B(),Me=w(Le),We=ke=>{var Re=B(),xe=w(Re),ae=Ce=>{Ul(Ce,{get turn(){return t(q)}})},Pe=Ce=>{Gl(Ce,{get turn(){return t(q)}})};k(xe,Ce=>{V(u,"$enableRichCheckpointInfo",i)?Ce(ae):Ce(Pe,!1)}),r(ke,Re)};k(Me,ke=>{Lo(t(q))&&t(q).status===Tn.success&&ke(We)},!0),r(De,Le)};k(de,De=>{Ji(t(q))?De(we):De(Be,!1)},!0),r(ce,ge)};k(le,ce=>{zv(t(q))?ce(ve):ce($e,!1)},!0),r(te,re)};k(_e,te=>{iu(t(q))?te(pe):te(se,!1)},!0),r(Ie,Ee)};k(ye,Ie=>{Xi(t(q))?Ie(ee):Ie(ze,!1)},!0),r(ne,be)};k(Z,ne=>{t(R)?ne(Q):ne(K,!1)});var J=$(Z,2),ue=ne=>{var be=U_();yn(be,(ye,ee)=>function(ze,Ie){let Ee=Ie;const _e=or(()=>{Ee.onSeen()},1e3,{leading:!0,trailing:!0}),pe=new IntersectionObserver(te=>{for(const re of te)if(re.target===ze&&re.isIntersecting){_e();break}},{threshold:.5}),se=()=>{pe.disconnect(),Ee.track&&pe.observe(ze)};return se(),{update(te){const re=Ee;Ee=te,Ee.track!==re.track&&se()},destroy:()=>{pe.disconnect(),Ee.onSeen()}}}(ye,ee),()=>({onSeen:()=>(ye=>{ye.seen_state!==Or.seen&&c(lu(a(),ye.request_id))})(t(q)),track:t(q).seen_state!==Or.seen})),r(ne,be)};k(J,ne=>{Nv(t(q))&&ne(ue)}),he(()=>{nt(Y,"id",V(_,"$lastUserExchange",i)?.request_id===t(q).request_id?Ql:void 0),nt(Y,"data-request-id",t(q).request_id)}),r(z,Y)});var x=$(j,2),N=z=>{jl(z,{get message(){return t(E).retryMessage}})},W=z=>{var q=B(),L=w(q),R=Z=>{Jo(Z,{get conversationId(){return a()}})},Y=Z=>{var Q=B(),K=w(Q),J=ne=>{Vl(ne,{})},ue=ne=>{var be=B(),ye=w(be),ee=ze=>{Kl(ze)};k(ye,ze=>{t(E).showStopped&&ze(ee)},!0),r(ne,be)};k(K,ne=>{t(E).showAwaitingUserInput?ne(J):ne(ue,!1)},!0),r(Z,Q)};k(L,Z=>{t(E).showGeneratingResponse?Z(R):Z(Y,!1)},!0),r(z,q)};k(x,z=>{t(E).retryMessage?z(N):z(W,!1)});var F=$(x,2),G=z=>{var q=j_();r(z,q)};k(F,z=>{t(E).showRunningSpacer&&z(G)}),r(D,U)},$$slots:{default:!0}}),fe(),l()}var Y_=h('<div class="c-new-agent-empty__header svelte-1qfz2l5"><div class="c-new-agent-empty__header-icon svelte-1qfz2l5"><!></div> <!></div>');function ec(s){Hn(s,{header:n=>{var o=Y_(),a=b(o),i=b(a);Te(i,{name:"wand-sparkles",size:2});var l=$(a,2);qe(l,{color:"primary",size:4,children:(c,u)=>{var v=ie("New Agent Thread");r(c,v)},$$slots:{default:!0}}),r(n,o)},children:(n,o)=>{qe(n,{size:1,variant:"surface",children:(a,i)=>{var l=ie("Work with your agent to use tools and make file edits.");r(a,l)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})}var X_=h("<div></div>"),J_=h("<div><!></div>");function tc(s,e){me(e,!0),S(e,"ref",11,null);let n=S(e,"max",3,100),o=S(e,"value",3,0),a=S(e,"color",3,"accent"),i=S(e,"size",3,2),l=S(e,"labelledby",19,tg),c=S(e,"indeterminate",3,!1),u=hs(e,["$$slots","$$events","$$legacy","ref","class","max","value","color","size","labelledby","indeterminate"]);const v=d(()=>c()?0:Math.min(100,Math.max(0,(o()??0)/n()*100)));var m=J_();ms(m,f=>({...f,class:["ds-progress",`ds-progress--size-${i()}`,e.class]}),[()=>Ao(a())],void 0,"svelte-8qaaw3");var y=b(m);Ae(y,()=>Sm,(f,g)=>{g(f,Fn({get"aria-labelledby"(){return l()},class:"ds-progress__root",get value(){return o()},get max(){return n()}},()=>u,{children:(A,C)=>{var _=X_();let p,E;he((M,I)=>{p=ft(_,1,"ds-progress__indicator svelte-8qaaw3",null,p,M),E=jn(_,"",E,I)},[()=>({"ds-progress__indicator--indeterminate":c()}),()=>({"--progress-percentage":`${t(v)??""}%`})]),r(A,_)},$$slots:{default:!0}}))}),r(s,m),fe()}var Q_=h('<div class="c-initial-indexing__icon svelte-1antxkq" slot="iconLeft"><!></div>'),Z_=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ey=h('<div class="c-initial-indexing__progress-files svelte-1antxkq"><!> <!></div>'),ty=h('<div class="c-initial-indexing__content svelte-1antxkq"><!> <div class="c-initial-indexing__progress svelte-1antxkq"><!> <!></div> <!></div>');function ny(s,e){me(e,!0);const n=()=>V(u,"$progress",a),o=()=>V(c,"$percentage",a),[a,i]=je(),l=new dr(an,new gr(an)),c=Li(),u=Mo(),v=Ml(),m=d(()=>V(v,"$workspaceNameStore",a)||"Your workspace");Jt(()=>{l.track(Ze.WEBVIEW.ONBOARDING_INITIAL_INDEXING_VIEW_DISPLAYED,{totalFiles:n()?.totalFiles})});let y=!1;rt(()=>{y||o()<100||n()?.status!==xs.done||(l.track(Ze.WEBVIEW.ONBOARDING_INDEXING_COMPLETED,{totalFiles:n()?.totalFiles,duration:n()?.syncDuration}),y=!0)}),Hn(s,{maxWidth:"250px",header:g=>{qe(g,{size:4,color:"primary",children:(A,C)=>{var _=ie("Indexing Codebase");r(A,_)},$$slots:{default:!0}})},children:(g,A)=>{var C=ty(),_=b(C);xt(_,{variant:"outline",color:"neutral",size:1,readonly:!0,children:(P,H)=>{var D=ie();he(()=>He(D,t(m))),r(P,D)},$$slots:{default:!0,iconLeft:(P,H)=>{var D=Q_(),U=b(D);Te(U,{name:"refresh-ccw"}),r(P,D)}}});var p=$(_,2),E=b(p);{let P=d(()=>n()?.indeterminate);tc(E,{get value(){return o()},get indeterminate(){return t(P)}})}var M=$(E,2),I=P=>{var H=Z_(),D=w(H);Us(D,()=>({"--text-color":"var(--ds-color-accent-a11)"})),qe(D.lastChild,{size:1,color:"accent",children:(U,j)=>{var x=ie();he(()=>He(x,`${o()??""}%`)),r(U,x)},$$slots:{default:!0}}),r(P,H)};k(M,P=>{n()?.indeterminate||P(I)});var T=$(p,2),O=P=>{var H=ey(),D=b(H);qe(D,{size:1,block:!0,children:(j,x)=>{var N=ie("Indexing files:");r(j,N)},$$slots:{default:!0}});var U=$(D,2);qe(U,{size:1,block:!0,children:(j,x)=>{var N=ie();he(()=>He(N,`${n()?.syncedCount??""} / ${n()?.totalFiles??""}`)),r(j,N)},$$slots:{default:!0}}),r(P,H)};k(T,P=>{n()&&!n()?.indeterminate&&P(O)}),r(g,C)},$$slots:{header:!0,default:!0}}),fe(),i()}const Ya={[to.SUCCESS]:"success",[to.FAILED]:"error",[to.SKIPPED]:"skipped"},Xa={[Ms.success]:"success",[Ms.failure]:"error",[Ms.running]:null,[Ms.unknown]:"unknown",[Ms.skipped]:"skipped"};var sy=h('<div class="c-command-output__collapsible-header__spacer svelte-114stxo"></div>'),ry=h('<div class="c-command-output__status-icon c-command-output__status-icon--loading svelte-114stxo"><!></div>'),oy=h("<div><!></div>"),ay=h("<!> <!>",1),iy=h('<div class="c-command-output__collapsible-header svelte-114stxo"><!> <!> <div class="c-command-output__status-indicator svelte-114stxo"><!> <!></div></div>'),ly=h('<div class="c-command-output__code-block svelte-114stxo"><!></div>'),cy=h('<div class="c-command-output__code-block c-command-output__code-block--output svelte-114stxo"><!></div>'),dy=h('<div class="c-command-output__command-details"><!> <!> <!></div>'),uy=h('<div class="c-command-output__container svelte-114stxo"><!></div>');function vy(s,e){s.key!=="Enter"&&s.key!==" "||(s.preventDefault(),e())}var gy=h('<div><div class="c-agent-setup-logs-summary svelte-1y2dl78" role="button" tabindex="0"><div class="c-agent-setup-logs-summary-content svelte-1y2dl78"><div class="c-agent-setup-logs-summary-left svelte-1y2dl78"><!> <!></div> <div class="c-agent-setup-logs-summary-icon svelte-1y2dl78"><!></div></div></div> <div><div class="c-agent-setup-logs svelte-1y2dl78"></div></div></div>'),hy=h('<div class="c-agent-no-setup-logs svelte-1y2dl78"><!> <!></div>');function py(s,e){me(e,!0);const n=()=>V(i,"$remoteAgentsModel",o),[o,a]=je(),i=kt(dn.key),l=Yn();let c=d(()=>n()?.currentAgent?.status||Zn.agentUnspecified),u=d(()=>[Zn.agentIdle,Zn.agentRunning,Zn.agentFailed].includes(t(c))),v=d(()=>n()?.agentSetupLogs),m=Oe(!1);function y(){X(m,!t(m))}function f(E){E.stopPropagation(),y()}function g(E){return E===Ms.running&&!t(u)}rt(()=>{X(m,!t(u))});var A=B(),C=w(A),_=E=>{var M=gy();let I;var T=b(M);T.__click=y,T.__keydown=[vy,y];var O=b(T),P=b(O),H=b(P);{let L=d(()=>t(m)?"c-agent-setup-logs-toggle-button--expanded":"");Nt(H,{variant:"ghost",color:"neutral",size:1,onclick:f,get class(){return`c-agent-setup-logs-toggle-button ${t(L)??""}`},children:(R,Y)=>{Te(R,{name:"chevron-down"})},$$slots:{default:!0}})}var D=$(H,2),U=L=>{qe(L,{size:1,class:"c-agent-setup-logs-summary-text",children:(R,Y)=>{var Z=ie("Environment created");r(R,Z)},$$slots:{default:!0}})},j=L=>{qe(L,{size:1,class:"c-agent-setup-logs-summary-text",children:(R,Y)=>{var Z=ie("Environment is being created...");r(R,Z)},$$slots:{default:!0}})};k(D,L=>{t(u)?L(U):L(j,!1)});var x=$(P,2),N=b(x),W=L=>{Te(L,{name:"check"})},F=L=>{es(L,{size:1})};k(N,L=>{t(u)?L(W):L(F,!1)});var G=$(T,2);let z;var q=b(G);Vt(q,21,()=>t(v).steps,$n,(L,R)=>{{let Y=d(()=>{return(J=t(R).status)in Ya?Ya[J]:J in Xa?Xa[J]:null;var J}),Z=d(()=>g(t(R).status)),Q=d(()=>!g(t(R).status)),K=d(()=>!!t(R).logs);(function(J,ue){me(ue,!0);let ne=S(ue,"title",3,""),be=S(ue,"command",3,""),ye=S(ue,"output",3,null),ee=S(ue,"status",3,null),ze=S(ue,"collapsed",3,!1),Ie=S(ue,"useMonaco",3,!1),Ee=S(ue,"monacoLang",3,"bash"),_e=S(ue,"viewButtonTooltip",3,"View full output in editor"),pe=S(ue,"showCollapseButton",3,!0),se=S(ue,"isLoading",3,!1);var te=uy(),re=b(te);al(re,{get collapsed(){return ze()},header:ve=>{var $e=iy(),ce=b($e),ge=ae=>{gg(ae,{})},de=ae=>{var Pe=sy();r(ae,Pe)};k(ce,ae=>{pe()&&ee()!=="skipped"?ae(ge):ae(de,!1)});var we=$(ce,2),Be=ae=>{qe(ae,{size:1,weight:"medium",children:(Pe,Ce)=>{var Se=ie();he(()=>He(Se,ne())),r(Pe,Se)},$$slots:{default:!0}})},De=ae=>{qe(ae,{size:1,type:"monospace",children:(Pe,Ce)=>{var Se=ie();he(()=>He(Se,be())),r(Pe,Se)},$$slots:{default:!0}})};k(we,ae=>{ne()?ae(Be):ae(De,!1)});var Le=$(we,2),Me=b(Le),We=ae=>{var Pe=ry(),Ce=b(Pe);es(Ce,{size:1}),r(ae,Pe)},ke=ae=>{var Pe=B(),Ce=w(Pe),Se=Fe=>{var Ge=ay(),ot=w(Ge),Ke=Ye=>{qe(Ye,{size:1,children:(bt,Ue)=>{var lt=ie("Skipped");r(bt,lt)},$$slots:{default:!0}})};k(ot,Ye=>{ee()==="skipped"&&Ye(Ke)});var Qe=$(ot,2);{let Ye=d(()=>function(Ue){switch(Ue){case"success":return"Success";case"error":return"Failed";case"skipped":return"Skipped";case"unknown":return"Unknown";case null:return"Running"}}(ee())),bt=d(()=>[Xt.Hover]);it(Qe,{get content(){return t(Ye)},get triggerOn(){return t(bt)},children:(Ue,lt)=>{var ct=oy();let oe;var Ne=b(ct);{let Ve=d(()=>{return(Xe=ee())==="success"||Xe==="skipped"?"check":"circle-x";var Xe});Te(Ne,{get name(){return t(Ve)},size:1})}he(Ve=>oe=ft(ct,1,"c-command-output__status-icon svelte-114stxo",null,oe,Ve),[()=>({"c-command-output__status-icon--success":ee()==="success","c-command-output__status-icon--error":ee()==="error","c-command-output__status-icon--warning":ee()==="skipped"})]),r(Ue,ct)},$$slots:{default:!0}})}r(Fe,Ge)};k(Ce,Fe=>{ee()!==null&&Fe(Se)},!0),r(ae,Pe)};k(Me,ae=>{se()?ae(We):ae(ke,!1)});var Re=$(Me,2),xe=ae=>{it(ae,{get content(){return _e()},align:"end",children:(Pe,Ce)=>{Nt(Pe,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:Se=>ue.onViewOutput(Se,ye())},children:(Se,Fe)=>{Te(Se,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(Re,ae=>{!ye()||ee()&&ee()==="skipped"||se()||ae(xe)}),r(ve,$e)},children:(ve,$e)=>{var ce=dy(),ge=b(ce),de=Le=>{var Me=ly(),We=b(Me);qe(We,{size:1,type:"monospace",children:(ke,Re)=>{var xe=ie();he(()=>He(xe,be())),r(ke,xe)},$$slots:{default:!0}}),r(Le,Me)};k(ge,Le=>{be()&&!ne()&&Le(de)});var we=$(ge,2),Be=Le=>{var Me=cy(),We=b(Me),ke=xe=>{var ae=B(),Pe=w(ae);Ae(Pe,()=>ui.Root,(Ce,Se)=>{Se(Ce,{children:(Fe,Ge)=>{xc(Fe,{get text(){return ye()},get lang(){return Ee()}})},$$slots:{default:!0}})}),r(xe,ae)},Re=xe=>{qe(xe,{size:1,type:"monospace",children:(ae,Pe)=>{var Ce=ie();he(()=>He(Ce,ye())),r(ae,Ce)},$$slots:{default:!0}})};k(We,xe=>{Ie()?xe(ke):xe(Re,!1)}),r(Le,Me)};k(we,Le=>{!ye()||ee()&&ee()==="skipped"||Le(Be)});var De=$(we,2);st(De,()=>ue.children??wt),r(ve,ce)},$$slots:{header:!0,default:!0}}),r(J,te),fe()})(L,{get title(){return t(R).step_description},get output(){return t(R).logs},get status(){return t(Y)},get isLoading(){return t(Z)},get collapsed(){return t(Q)},get showCollapseButton(){return t(K)},viewButtonTooltip:"View full output in editor",onViewOutput:(J,ue)=>{var ne;(ne=ue)&&l.openScratchFile(ne,"plaintext")}})}}),he((L,R)=>{I=ft(M,1,"c-agent-setup-logs-container svelte-1y2dl78",null,I,L),nt(T,"aria-expanded",t(m)),z=ft(G,1,"c-agent-setup-logs-wrapper svelte-1y2dl78",null,z,R)},[()=>({"c-agent-setup-logs-container--loading":!t(u)}),()=>({"is-hidden":!t(m)})]),r(E,M)},p=E=>{var M=hy(),I=b(M);qe(I,{size:1,color:"secondary",children:(O,P)=>{var H=ie("Waiting to start agent environment...");r(O,H)},$$slots:{default:!0}});var T=$(I,2);es(T,{size:1}),r(E,M)};k(C,E=>{t(v)&&t(v).steps&&t(v).steps.length>0?E(_):E(p,!1)}),r(s,A),fe(),a()}Nn(["click","keydown"]);var my=h("<div><!></div>"),fy=h('<div class="c-paused-remote-agent svelte-1ihhbdx"><span class="c-paused-remote-agent__text svelte-1ihhbdx">This agent is paused and will resume when you send a new message</span></div>'),_y=h('<div><div class="c-remote-agent-error__content svelte-1gf5kop"><span class="c-remote-agent-error__message svelte-1gf5kop"> <!></span> <div class="c-remote-agent-error__actions"><!> <!></div></div></div>');function Ja(s,e){me(e,!0);let n=S(e,"onRetry",19,()=>{}),o=S(e,"onDelete",19,()=>{}),a=d(()=>"type"in e.error),i=d(()=>t(a)&&e.error.type===Zi.agentFailed),l=d(()=>e.error.errorMessage),c=d(()=>t(a)?void 0:e.error.retryAt),u=d(()=>t(c)!==void 0),v=d(()=>t(i)&&o()),m=d(n),y=Oe(void 0);rt(()=>{if(t(c))return function(){if(t(c))return ag(t(c),H=>{X(y,H,!0)})}()});var f=_y();let g;var A=b(f),C=b(A),_=b(C),p=$(_),E=H=>{var D=ie();he(()=>He(D,`Retrying in ${t(y)??""}`)),r(H,D)};k(p,H=>{t(u)&&t(y)&&H(E)});var M=$(C,2),I=b(M),T=H=>{xt(H,{class:"c-remote-agent-error__button c-remote-agent-error__button--retry",variant:"soft",color:"neutral",size:1,$$events:{click:D=>{D.preventDefault(),n()?.()}},children:(D,U)=>{var j=ie();he(()=>He(j,"Retry"+(t(u)?" now":""))),r(D,j)},$$slots:{default:!0}})};k(I,H=>{t(m)&&H(T)});var O=$(I,2),P=H=>{xt(H,{class:"c-remote-agent-error__button c-remote-agent-error__button--delete",variant:"soft",color:"error",size:1,$$events:{click:D=>{D.preventDefault(),o()?.()}},children:(D,U)=>{var j=ie("Delete Agent");r(D,j)},$$slots:{default:!0}})};k(O,H=>{t(v)&&H(P)}),he(H=>{g=ft(f,1,"c-remote-agent-error svelte-1gf5kop",null,g,H),He(_,`${t(l)??""} `)},[()=>({"c-remote-agent-error--unrecoverable":t(i)})]),r(s,f),fe()}var yy=h("<span> </span>"),by=h('<div class="c-resuming-agent svelte-g8z95r"><span class="c-resuming-agent__text svelte-g8z95r"><!> <!></span> <!></div>');function $y(s,e){me(e,!0);let n,o,a=S(e,"timeToTimerMs",3,5e3),i=Oe(0),l=Date.now(),c=Oe(!1);function u(){X(i,Math.floor((Date.now()-l)/1e3),!0)}function v(){X(c,!0),u(),o=setInterval(u,1e3)}let m=d(()=>function(p){return p>=60?`${Math.floor(p/60)}:${String(p%60).padStart(2,"0")}`:`0:${String(p).padStart(2,"0")}`}(t(i)));Jt(function(){return n=setTimeout(v,a()),l=Date.now(),()=>{X(i,0),X(c,!1),clearTimeout(n),clearInterval(o)}});var y=by(),f=b(y),g=b(f);es(g,{size:1});var A=$(g,2);qe(A,{size:1,weight:"light",color:"secondary",children:(p,E)=>{var M=ie("Resuming remote agent...");r(p,M)},$$slots:{default:!0}});var C=$(f,2),_=p=>{var E=B(),M=w(E);Ae(M,()=>xn.Root,(I,T)=>{T(I,{color:"neutral",size:1,children:(O,P)=>{qe(O,{type:"monospace",size:1,weight:"light",color:"secondary",children:(H,D)=>{var U=yy();let j;var x=b(U);he(N=>{j=ft(U,1,"c-resuming-agent__timer svelte-g8z95r",null,j,N),He(x,t(m))},[()=>({is_minutes:t(i)>=60})]),r(H,U)},$$slots:{default:!0}})},$$slots:{default:!0}})}),r(p,E)};k(C,p=>{t(c)&&p(_)}),r(s,y),fe()}const wy="message-list-scrollable-container";var ky=h('<div class="c-msg-list__floating c-msg-list__navigation-controls svelte-bbhngn"><!></div>'),Ay=h('<div class="c-msg-list__floating c-msg-list__scroll-to-bottom svelte-bbhngn"><!></div>'),Ey=h('<div data-testid="chat-message-list"><!> <div><div class="c-msg-list__content svelte-bbhngn"><!></div></div> <!></div>');function Cy(s,e){me(e,!0);const n=()=>V(u,"$enableIntersectionObserverManager",a),o=()=>V(v,"$fullFeatured",a),[a,i]=je();let l=S(e,"msgListElement",15),c=S(e,"doShowFloatingButtons",3,!1);const u=Ot("enableIntersectionObserverManager"),v=Ot("fullFeatured"),m=ln(),y=d(()=>e.predefinedConvItems?Xs(e.predefinedConvItems):uu(m));let f=Oe(!1),g=Oe(!1),A=!1;function C(R){X(f,!1),A||(A=!0,ar(R,{smooth:!0,scrollDuration:100,onScrollFinish:()=>A=!1}))}function _(){X(f,!0)}let p=Oe(0),E=d(()=>t(p)),M=d(()=>t(f));const I=ya();let T=d(()=>`${t(E)}px 0px ${t(E)}px 0px`);const O=Ki({root:l(),rootMargin:"300px 0px 300px 0px",threshold:0,enabled:n()});Ur();const P=Ct();function H(R,Y){P(gt(Ze.WEBVIEW.CONVERSATION_NAVIGATION,{direction:R,source:Y}))}rt(()=>{O.setConfig({root:l(),rootMargin:t(T),threshold:0,enabled:n()})});var D=Ey();let U;var j=b(D),x=R=>{var Y=ky(),Z=b(Y);Ae(Z,()=>Iv.Controls,(Q,K)=>{K(Q,{trackNavigationInDirection:H})}),tn(3,Y,()=>As,()=>({duration:150,start:.9})),r(R,Y)};k(j,R=>{c()&&t(g)&&R(x)});var N=$(j,2);let W;nt(N,"id",wy);var F=b(N),G=b(F),z=R=>{var Y=B(),Z=w(Y);st(Z,()=>e.children,()=>({turnHeight:t(E)})),r(R,Y)};k(G,R=>{e.children&&R(z)}),Pt(N,R=>l(R),()=>l()),yn(N,(R,Y)=>Xl?.(R,Y),()=>({onScrollIntoBottom:C,onScrollAwayFromBottom:_,onScroll:e.onScroll})),yn(N,(R,Y)=>Yl?.(R,Y),()=>({onHeightChange:R=>X(p,R,!0)})),yn(N,(R,Y)=>function(Z,Q={items:[],conversationNavigationItems:ya()}){let K=Q,J=[],ue=null;const{conversationNavigationItems:ne}=Q;function be(pe){K=pe,ne.update(se=>({...se,all:pe.items??[]}))}function ye(){if((K.items?.length??0)<1)return;const pe=new Set(K.items),se=Z.querySelectorAll("[data-timestamp-id]");J=[];for(const te of se){const re=te.getAttribute("data-timestamp-id");if(re&&pe.has(re)){const le=te.offsetTop;J.push({id:re,element:te,offsetTop:le})}}J.sort((te,re)=>te.offsetTop-re.offsetTop),ee()}function ee(pe){if(J.length===0)return;const se=pe??Z.scrollTop;let te,re,le=1/0,ve=1/0;for(const ce of J){if(ce.offsetTop>se+80){const ge=ce.offsetTop-se;ge<le&&(le=ge,te={id:ce.id,offsetTop:ce.offsetTop})}if(ce.offsetTop<se-80){const ge=se-ce.offsetTop;ge<ve&&(ve=ge,re={id:ce.id,offsetTop:ce.offsetTop})}}const $e=!md(Z);ne.update(ce=>ce.next?.id===te?.id&&ce.next?.offsetTop===te?.offsetTop&&ce.prev?.id===re?.id&&ce.prev?.offsetTop===re?.offsetTop&&ce.canScrollToBottom===$e?ce:{...ce,next:te,prev:re,canScrollToBottom:$e})}const ze=or(pe=>{ee(pe.target.scrollTop)},100),Ie=or(ye,300),Ee=pe=>{fd(Z,pe,{smooth:!0})},_e=()=>{ar(Z,{smooth:!0})};return ye(),ne.update(pe=>({...pe,scrollTo:Ee,scrollToBottom:_e})),Z.addEventListener("scroll",ze,{passive:!0}),ue=new ResizeObserver(Ie),ue.observe(Z),be(Q),{update(pe){cl(K,pe)||(be(pe),ye())},destroy(){Z.removeEventListener("scroll",ze),ue?.disconnect(),J=[],ne.update(()=>({all:[]}))}}}(R,Y),()=>({items:V(t(y),"$conversationItems",a),conversationNavigationItems:I}));var q=$(N,2),L=R=>{var Y=Ay();Jl(b(Y),{get messageListElement(){return l()}}),tn(3,Y,()=>As,()=>({duration:150,start:.9})),r(R,Y)};k(q,R=>{c()&&t(g)&&t(M)&&R(L)}),he((R,Y)=>{U=ft(D,1,"c-msg-list-container svelte-bbhngn",null,U,R),W=ft(N,1,"c-msg-list svelte-bbhngn",null,W,Y)},[()=>({"c-msg-list--minimal":!o()}),()=>({"c-msg-list--minimal":!o()})]),Ht("mouseenter",D,()=>X(g,!0)),Ht("mouseleave",D,()=>X(g,!1)),r(s,D),fe(),i()}var Ty=s=>s.stopPropagation(),Sy=h("<!> <!> <!> <!>",1),Iy=h('<div role="button" tabindex="-1"><!></div>');function Ry(s,e){me(e,!0);const[n,o]=je();let a=S(e,"collapsedMaxHeight",3,120),i=S(e,"placeholder",3,"Edit your message..."),l=S(e,"collapsed",3,!1);const c=Yn(),u=Ot("enableChatMultimodal"),v=d(()=>e.content);let m=Oe(void 0),y=Oe(void 0);var f={getEditorContainer:function(){return t(y)}},g=Iy();let A;g.__mousedown=[Ty];var C=b(g);Ae(C,()=>_s.Root,(p,E)=>{Pt(E(p,{editable:!1,variant:"accent",onclick:M=>M.stopPropagation(),children:(M,I)=>{var T=Sy(),O=w(T),P=j=>{Xo(0,{get saveImage(){return c.saveImage},get saveAttachment(){return c.saveAttachment},get deleteImage(){return c.deleteImage},get renderImage(){return c.loadImage},isEditable:()=>!1,supportedFileTypes:["image","text"]})};k(O,j=>{V(u,"$enableChatMultimodal",n)&&j(P)});var H=$(O,2);qo(H,{get placeholder(){return i()}});var D=$(H,2);Ae(D,()=>_s.Content,(j,x)=>{x(j,{get content(){return t(v)},onContentChanged:()=>{}})});var U=$(D,2);st(U,()=>e.children??wt),r(M,T)},$$slots:{default:!0}}),M=>X(m,M,!0),()=>t(m))}),Pt(g,p=>X(y,p),()=>t(y)),he(p=>{A=ft(g,1,"c-chat-input c-chat-edit-message svelte-1di2pdq",null,A,p),jn(g,`--chat-input-collapsed-height: ${a()??""}px;`)},[()=>({"is-collapsed":l()})]),r(s,g);var _=fe(f);return o(),_}Nn(["mousedown"]);var xy=h('<div class="c-msg-list__turn svelte-1u7p02e"><!> <!></div>');function My(s,e){me(e,!0);const n=()=>V(c,"$remoteAgentsModel",o),[o,a]=je();let i=S(e,"isLastTurn",3,!1),l=S(e,"turnIndex",3,0);const c=kt(dn.key);let u=d(()=>e.turn.request_id),v=d(()=>n()?.isActive&&n()?.currentAgent?.is_setup_script_agent===!0),m=d(()=>l()===0),y=d(()=>t(v)&&t(m)),f=d(()=>zo(e.turn));var g=xy(),A=b(g),C=p=>{{let E=d(()=>e.turn.request_message??"");(function(M,I){let T=S(I,"richTextJsonRepr",19,()=>{}),O=S(I,"timestamp",19,()=>{});Gr(M,{get timestamp(){return O()},content:H=>{{let D=d(()=>T()??I.msg);Ry(H,{collapsed:!1,get content(){return t(D)},collapsedMaxHeight:120})}},$$slots:{content:!0}})})(p,{get msg(){return t(E)},get richTextJsonRepr(){return e.turn.rich_text_json_repr},get timestamp(){return e.turn.timestamp}})}};k(A,p=>{t(f)||Yi(e.turn)||t(y)||p(C)});var _=$(A,2);{let p=d(()=>e.turn.response_text??"");ji(_,{get turn(){return e.turn},get turnIndex(){return l()},get requestId(){return t(u)},get isLastTurn(){return i()},get group(){return e.group},get markdown(){return t(p)}})}r(s,g),fe(),a()}var Dy=h('<div class="c-msg-list__turn--hidden"></div>'),Oy=h('<div class="c-agent-running-spacer svelte-1w2lqp6"></div>'),Ny=h("<!> <!>",1),zy=h("<!> <!>",1),Ly=h("<!> <!> <!>",1);function Py(s,e){me(e,!0);const n=()=>V(c,"$remoteAgentsModel",o),[o,a]=je(),i=Ot("enableGroupedTools"),l=Ot("enableRichCheckpointInfo"),c=kt(dn.key),u=d(()=>n().getLastToolUseState());let v=d(()=>Zm(t(u),n(),V(i,"$enableGroupedTools",o))),m=d(()=>t(v).chatHistory),y=d(()=>t(v).groupedChatHistory),f=d(()=>t(v).lastGroupConfig),g=d(()=>t(f).remoteAgentErrorConfig),A=d(()=>function(_){return _.map(p=>p[0]?.turn.timestamp).filter(Boolean)??[]}(t(y)));const C=()=>26;Ur(),Cy(s,{get predefinedConvItems(){return t(A)},children:(p,E)=>{var M=Ly(),I=w(M);py(I,{});var T=$(I,2);Vt(T,17,()=>t(y),$n,(H,D,U)=>{const j=d(()=>U+1===t(y).length);{let x=d(()=>t(D)[0]?.turn?.request_id),N=d(()=>t(j)?E?.().turnHeight:0);(function(W,F){let G=S(F,"dataRequestId",19,()=>{}),z=S(F,"class",3,"");var q=my(),L=b(q);st(L,()=>F.children??wt),he(()=>{ft(q,1,`c-msg-list__item ${z()}`,"svelte-1na30ls"),jn(q,`--msg-list-item-min-height: ${F.minHeight}px`),nt(q,"data-request-id",G())}),r(W,q)})(H,{class:"c-msg-list__item--grouped",get dataRequestId(){return t(x)},get minHeight(){return t(N)},children:(W,F)=>{var G=zy(),z=w(G);Vt(z,19,()=>t(D),({turn:R,idx:Y})=>R.request_id??`no-request-id-${Y}`,(R,Y,Z)=>{let Q=()=>t(Y).turn;const K=d(()=>t(j)&&t(Z)+1===t(D).length),J=d(()=>vr(Q())&&Q().hidden);var ue=B(),ne=w(ue),be=ee=>{var ze=Dy();r(ee,ze)},ye=ee=>{var ze=B(),Ie=w(ze),Ee=pe=>{Kr(pe,{get turn(){return Q()}})},_e=pe=>{var se=B(),te=w(se),re=ve=>{Hl(ve,{get turn(){return Q()}})},le=ve=>{var $e=B(),ce=w($e),ge=we=>{My(we,{get group(){return t(D)},get turn(){return Q()},get turnIndex(){return t(Y).idx},get isLastTurn(){return t(K)}})},de=we=>{var Be=B(),De=w(Be),Le=Me=>{{let We=d(()=>`checkpoint-${Q().request_id}`);Ym(Me,{get intersectionId(){return t(We)},estimatedHeight:C,children:(ke,Re)=>{var xe=B(),ae=w(xe),Pe=Se=>{Ul(Se,{get turn(){return Q()}})},Ce=Se=>{Gl(Se,{get turn(){return Q()}})};k(ae,Se=>{V(l,"$enableRichCheckpointInfo",o)?Se(Pe):Se(Ce,!1)}),r(ke,xe)},$$slots:{default:!0}})}};k(De,Me=>{Lo(Q())&&Q().status===Tn.success&&Me(Le)},!0),r(we,Be)};k(ce,we=>{Ji(Q())?we(ge):we(de,!1)},!0),r(ve,$e)};k(te,ve=>{Lv(Q())?ve(re):ve(le,!1)},!0),r(pe,se)};k(Ie,pe=>{Xi(Q())?pe(Ee):pe(_e,!1)},!0),r(ee,ze)};k(ne,ee=>{t(J)?ee(be):ee(ye,!1)}),r(R,ue)});var q=$(z,2),L=R=>{var Y=Ny(),Z=w(Y),Q=ne=>{Ja(ne,{get error(){return t(g).error},get onRetry(){return t(g).onRetry},get onDelete(){return t(g).onDelete}})},K=ne=>{var be=B(),ye=w(be),ee=Ie=>{jl(Ie,{get message(){return t(f).retryMessage}})},ze=Ie=>{var Ee=B(),_e=w(Ee),pe=te=>{$y(te,{})},se=te=>{var re=B(),le=w(re),ve=ce=>{(function(ge){var de=fy();r(ge,de)})(ce)},$e=ce=>{var ge=B(),de=w(ge),we=De=>{Jo(De,{})},Be=De=>{var Le=B(),Me=w(Le),We=Re=>{Vl(Re,{})},ke=Re=>{var xe=B(),ae=w(xe),Pe=Ce=>{Kl(Ce)};k(ae,Ce=>{t(f).showStopped&&Ce(Pe)},!0),r(Re,xe)};k(Me,Re=>{t(f).showAwaitingUserInput?Re(We):Re(ke,!1)},!0),r(De,Le)};k(de,De=>{t(f).showGeneratingResponse?De(we):De(Be,!1)},!0),r(ce,ge)};k(le,ce=>{t(f).showPaused?ce(ve):ce($e,!1)},!0),r(te,re)};k(_e,te=>{t(f).showResumingRemoteAgent?te(pe):te(se,!1)},!0),r(Ie,Ee)};k(ye,Ie=>{t(f).retryMessage?Ie(ee):Ie(ze,!1)},!0),r(ne,be)};k(Z,ne=>{t(g)?ne(Q):ne(K,!1)});var J=$(Z,2),ue=ne=>{var be=Oy();r(ne,be)};k(J,ne=>{t(f).showRunningSpacer&&ne(ue)}),r(R,Y)};k(q,R=>{t(j)&&R(L)}),r(W,G)},$$slots:{default:!0}})}});var O=$(T,2),P=H=>{Ja(H,{get error(){return t(g).error},get onRetry(){return t(g).onRetry},get onDelete(){return t(g).onDelete}})};k(O,H=>{!t(m).length&&t(g)&&H(P)}),r(p,M)},$$slots:{default:!0}}),fe(),a()}var By=h('<div class="c-chat-resize-pill svelte-jhr7e3"><div data-ds-color="neutral" class="c-chat-input-dialog-hr-handle svelte-jhr7e3" role="separator"><div class="c-chat-input-dialog-hr svelte-jhr7e3"></div></div></div>');function nc(s,e){me(e,!0);const n=S(e,"inputArea",15),o=S(e,"onDragEnd",3,()=>{});let a;var i=By();Ht("mousemove",ea,l=>{if(!n()||!a)return;const c=l.clientY-a.startY;n(n().style.height=`${Math.max(80,a.initialHeight-c)}px`,!0)}),Ht("mouseup",ea,()=>{n()&&a&&(o()(),a=void 0,n()?.classList.remove("is-dragging"))}),b(i).__mousedown=l=>{n()&&(a={startY:l.clientY,initialHeight:n().offsetHeight},n().classList.add("is-dragging"))},r(s,i),fe()}Nn(["mousedown"]);var Fy=h("<span><!></span>");function qy(s,e){var n=B(),o=w(n);{const a=i=>{var l=Fy(),c=b(l);fn(c,{commandName:"sendChatAction",keysOnly:!0}),r(i,l)};Ae(o,()=>On.SendButton,(i,l)=>{l(i,{get isDisabled(){return e.isDisabled},get disabledReason(){return e.disabledReason},get primaryAction(){return e.sendAction},tooltipContent:a,$$slots:{tooltipContent:!0}})})}r(s,n)}const sr=s=>s.type.name==="hardBreak"?`
`:"";class Hy{constructor(e,n,o){this.onBeforeCompletionAccepted=e,this.onCompletionAccepted=n,this.onCompletionRejected=o}_completionState=null;_pluginKey=new vu("inlineCompletion");_editor=null;createGhostDecoration(e,n){return gu.widget(e,()=>{const o=document.createElement("span");o.className="inline-completion-ghost",o.style.opacity="0.5",o.style.color="var(--ds-color-neutral-a11)",o.style.pointerEvents="none",o.style.userSelect="none",o.style.whiteSpace="pre-wrap";const a=n.split(`
`);return a.forEach((i,l)=>{o.appendChild(document.createTextNode(i)),l<a.length-1&&o.appendChild(document.createElement("br"))}),o},{side:1})}get tipTapExtension(){const e=this;return Ii.create({name:"inlineCompletion",onCreate(){e._editor=this.editor},addKeyboardShortcuts:()=>({Tab:()=>!!e._completionState&&(e.acceptCompletion(),!0),Escape:()=>!!e._completionState&&(e.clearCompletion(),!0)}),addProseMirrorPlugins:()=>[new hu({key:e._pluginKey,state:{init:()=>rs.empty,apply:(n,o,a,i)=>{if(!e._completionState)return rs.empty;const{from:l}=i.selection,c=e._completionState;if(!n.docChanged){const{from:f}=a.selection,{from:g}=i.selection;if(f!==g)return e.clearCompletion(),rs.empty;const A=e.createGhostDecoration(l,c.currentText);return rs.create(i.doc,[A])}const u=c.triggerPos-c.prefixWhenTriggered.length,v=i.doc.textBetween(Math.max(0,u),Math.min(l,i.doc.content.size),`
`,sr);if(!v.startsWith(c.prefixWhenTriggered))return e.clearCompletion(),rs.empty;const m=v.slice(c.prefixWhenTriggered.length);if(m){if(!c.originalText.startsWith(m))return e.clearCompletion(),rs.empty;const f=c.originalText.slice(m.length);if(f){e._completionState={...c,currentText:f};const g=e.createGhostDecoration(l,f);return rs.create(i.doc,[g])}return e.onCompletionAccepted?.(),e._completionState=null,rs.empty}const y=e.createGhostDecoration(l,c.currentText);return rs.create(i.doc,[y])}},props:{decorations(n){return this.getState(n)},handleClick:()=>(e.clearCompletion(),!1),handleKeyDown:(n,o)=>(e._completionState&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(o.key)&&e.clearCompletion(),!1)}})]})}showCompletion(e,n){if(this._editor){const o=this._editor.state.selection.from,a=n||this._editor.state.doc.textBetween(0,o,`
`,sr);this._completionState={originalText:e,currentText:e,triggerPos:o,prefixWhenTriggered:a},this._editor.view.dispatch(this._editor.state.tr)}}_getAtMentionWordPrefix(){if(!this._editor)return"";const{state:e}=this._editor,{from:n}=e.selection;let o=n-1,a="";for(;o>=0&&n-o<=100;){const i=e.doc.textBetween(o,o+1);if(i==="@"){a=e.doc.textBetween(o+1,n);break}if(i===" "||i===`
`)break;o--}return a}acceptCompletion(){if(this._completionState&&this._editor){const e=this._completionState.currentText,n=this._getAtMentionWordPrefix();if(!this.onBeforeCompletionAccepted?.(e,n)){const a=_g(e);a&&this._editor.commands.insertContent(a,{parseOptions:{preserveWhitespace:!0}})}this.onCompletionAccepted?.(),this.clearCompletion(!1)}}clearCompletion(e=!0){const n=this._completionState!==null;this._completionState=null,this._editor&&this._editor.view.dispatch(this._editor.state.tr),n&&e&&this.onCompletionRejected?.()}isActivelyMatching(){return!!(this._completionState&&this._completionState.currentText.length<this._completionState.originalText.length)}hasActiveCompletion(){return this._completionState!==null}}const Wy={Root:function(s,e){me(e,!1);let n=S(e,"onBeforeCompletionAccepted",24,()=>{}),o=S(e,"onCompletionAccepted",24,()=>{}),a=S(e,"onCompletionRejected",24,()=>{});const i=new Hy(n(),o(),a()),l=(f,g)=>i.showCompletion(f,g),c=()=>i.clearCompletion(),u=()=>i.isActivelyMatching(),v=()=>i.hasActiveCompletion(),m=kt(hr.CONTEXT_KEY).pluginManager.registerPlugin(i);fs(m);var y={showCompletion:l,clearCompletion:c,isActivelyMatching:u,hasActiveCompletion:v};return _n(),Pn(e,"showCompletion",l),Pn(e,"clearCompletion",c),Pn(e,"isActivelyMatching",u),Pn(e,"hasActiveCompletion",v),fe(y)}};class Gy{constructor(e,n){this._reduxStore=e,this._extensionClient=n}currentCompletionRequestId=null;currentCompletionEmitTime=null;async getCompletion(e,n=""){if(e.length<3&&!e.startsWith("@"))return null;try{pu();const o=this.getRecentMessages(),a=await this._extensionClient.getChatInputCompletion(e,n,o);if(!a||!a.completion)return null;const i=function(l,c,u){if(c.split(/\s+/).pop()?.startsWith("@")){const A=l.split(/\s+/)[0];if(!A)return"";const C=A.replace(/[*_[\]#(){}`]/g,""),_=C.search(/[:,;!?#]/);return _!==-1?C.slice(0,_):C.endsWith(".")?C.slice(0,-1):C}const v=l.indexOf(`
---`);let m=l;if(v!==-1&&(m=l.slice(0,v)),m.trimStart().startsWith("---")||m.trim().length===0)return"";const y=m.split(`
`),f=[];let g=0;for(const A of y){const C=A.match(/^[ \t]*/)?.[0]||"",_=A.match(/[ \t]*$/)?.[0]||"",p=A.trim();if(p.length===0){g<u&&f.push(A);continue}const E=p.split(/[ \t]+/).filter(T=>T.length>0);if(g===0&&E[0].match(/[.,;:!?]$/))return C+E[0];const M=Math.min(E.length,u-g),I=C+E.slice(0,M).join(" ")+(M===E.length?_:"");if(f.push(I),g+=M,g>=u)break}return f.join(`
`)}(a.completion,e,3);return i&&(this.currentCompletionRequestId=a.requestId,this.currentCompletionEmitTime=Date.now()),i}catch(o){return console.error("Failed to get chat input completion:",o),null}}getRecentMessages(){try{const e=this._reduxStore.getState(),n=ln.select(e);if(!n)return[];const o=Ni.select(e,n),a=zi(o).map(({item:i})=>i);return a.length===0?[]:a.filter(i=>vr(i)).flatMap(i=>{const l=i.request_message?"USER_INPUT:"+i.request_message+`
`:"",c=i.response_text?"AGENT_RESPONSE:"+(i.response_text??"")+`
`:"";return l&&c||l||c?[l,c]:[]}).filter(i=>i&&i.trim().length>0).slice(-100)}catch(e){return console.error("Failed to get recent prompts:",e),[]}}handleInlineCompletionAccepted(e,n,o){if(!o)return!1;const a=o?.getDisplayItems();if(!a)return!1;const i=n+e,l=u=>u.label===i||u.name===i?u:u.group?u.group.items.find(l):void 0;let c;return a.some(u=>(c=l(u),c!==void 0)),!!c&&(o?.insertMentionNode(c),!0)}reportCompletionAccepted(){this.currentCompletionRequestId&&this.currentCompletionEmitTime&&this._extensionClient.reportChatInputCompletionResolution(this.currentCompletionRequestId,this.currentCompletionEmitTime,Date.now(),!0),this.clearCurrentCompletion()}reportCompletionRejected(){this.currentCompletionRequestId&&this.currentCompletionEmitTime&&this._extensionClient.reportChatInputCompletionResolution(this.currentCompletionRequestId,this.currentCompletionEmitTime,Date.now(),!1),this.clearCurrentCompletion()}clearCurrentCompletion(){this.currentCompletionRequestId=null,this.currentCompletionEmitTime=null}}var Uy=h("<span>Add context <!></span>"),Vy=h('<div class="c-chat-input__context-bar svelte-v2ozfj"><!></div>'),jy=h("<!> <!> <!>",1),Ky=h('<span class="character-counter svelte-v2ozfj"> </span>'),Yy=h("<!> <!> <!> <!> <!>",1),Xy=h("<!> <div><!></div>",1),Jy=h("<span>Cancel <!></span>"),Qy=h("<span>Stop Agent <!></span>"),Zy=h("<span>Resend <!></span>"),e1=h("<!> <!>",1),t1=h("<!> <!> <!> <!>",1),n1=h("<div><!></div>"),s1=h("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),r1=h('<div class="c-chat-input svelte-v2ozfj" data-testid="design-system-chat-input"><!></div>');function sc(s,e){me(e,!0);const n=()=>V(O,"$draft",v),o=()=>V(M,"$currentConversationId",v),a=()=>V(E,"$enableChatInputInlineCompletion",v),i=()=>V(Z,"$conversationType",v),l=()=>V(I,"$isAgentic",v),c=()=>V(p,"$enableChatMultimodal",v),u=()=>V(xe,"$showResend",v),[v,m]=je(),y=Ct(),f=Yn(),g=ys(),A=kt(gs.key),C=Ot("enableModelRegistry"),_=Ot("enableAgentMode"),p=Ot("enableChatMultimodal"),E=Ot("enableChatInputInlineCompletion"),M=ln(),I=ts(M),T=xr(M),O=cr(M),P=d(()=>n()?.exchange),H=xo(M),D=Ue=>{f.showNotification({message:Ue,type:"error"})};let U=S(e,"editable",3,!0),j=S(e,"placeholder",3,"Ask or instruct Augment"),x=S(e,"hasSendButton",3,!0),N=S(e,"richTextEditorRoot",15),W=Oe(void 0);const F=d(()=>new Gy(g.store,f));let G=Oe(void 0);const z=di(async()=>{const Ue=N()?.getEditor?.();if(!Ue)return;const lt=Ca(Ue.state,`
`,sr),ct=yg(Ue.state,`
`,sr),oe=lt.prefix,Ne=ct.suffix;if(!oe||oe.length<3)return;const Ve=await t(F).getCompletion(oe,Ne),Xe=Ca(Ue.state,`
`,sr);lt.prefix===Xe.prefix&&Ve&&t(G)?.showCompletion(Ve,oe)},200),q={type:"doc",content:[{type:"paragraph"}]};function L(Ue){o()&&(y(yu(o(),{draftStatus:us.ready,exchange:{...t(P)||{},request_message:Ue.rawText,rich_text_json_repr:Ue.richTextJsonRepr||q,status:Tn.draft}})),a()&&t(G))&&(t(G)?.hasActiveCompletion?.()||(z.cancel(),z()))}function R(Ue){o()&&y(bu(o(),Ue.current))}let Y;const Z=A.chatModeType;let Q=Oe(!1);function K(Ue){X(Q,Ue,!0)}function J(Ue){t(Q)?y(gt(Ze.SHARED.ASK_MODE_DEACTIVATED,{source:Ue??"unknown"})):y(gt(Ze.SHARED.ASK_MODE_ACTIVATED,{source:Ue??"unknown"})),K(!t(Q))}async function ue(){await kn(),await kn(),t(Q)||y(gt(Ze.SHARED.ASK_MODE_DEACTIVATED,{source:"backspace"}))}const ne=mu(M);rt(()=>{V(ne,"$isNew",v)&&Y!==i()&&Y&&kn().then(()=>We()),Y=i()});const be=xr(M),ye=Ei(M),ee=d(()=>function(Ue,lt,ct,oe,Ne,Ve,Xe){if(!lt)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const et=ct?.request_message?.trim().length||0;return Ll(ct,Ve)||((()=>{if(Ve){const $t=ct?.rich_text_json_repr;return!!$t&&Ro.hasLoadingImages($t)}return!1})()?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(Ue(Ar(lt)),!0)}:Xe?.disabled?{stateName:"modelDisabled",showCancelButton:!1,isDisabled:!0,disabledReason:Xe.disabled_reason||"Selected model is disabled",action:()=>!1,cancelAction:()=>!1}:oe?{stateName:"agentMode",showCancelButton:!1,isDisabled:et===0,action:()=>(Ue(aa(lt)),!0),cancelAction:()=>(Ue(Ar(lt)),!0)}:{stateName:"chatMode",showCancelButton:Ne,isDisabled:Ne||et===0,action:()=>(Ue(aa(lt)),!0),cancelAction:()=>(Ue(Ar(lt)),!0)})}(y,o(),t(P),l(),V(be,"$exchangeStatus",v)===Vn.running,c(),V(ye,"$selectedModel",v))),ze=d(()=>t(ee).showCancelButton),Ie=d(()=>t(P)?.request_message?.length||0),Ee=d(()=>t(ee).isDisabled),_e=d(()=>t(ee).disabledReason),pe=d(l),se=d(()=>t(pe)&&V(C,"$enableModelRegistry",v)),te=d(()=>i()==="localAgent"),re=d(()=>i()==="chat"),le=d(()=>V(_,"$enableAgentMode",v)),ve=d(()=>{return Ue=t(ee).action,()=>{const lt=Ue();return lt&&i()==="localAgent"&&t(Q)&&(y(gt(Ze.SHARED.ASK_MODE_SUBMITTED,{})),kn().then(()=>{K(!0)})),lt&&y(ku()),lt};var Ue}),$e=d(()=>t(ee).cancelAction),ce=d(()=>`${l()}-local-${j()}`),ge=()=>{N()?.isFocused===void 0||Rt(N().isFocused())||Na()||N().requestFocus()},de=async()=>!t(Ee)&&(y(gt(Ze.WEBVIEW.SEND_ACTION_TRIGGERED,{source:"keybinding"})),t(ve)()),we=Ue=>{y(gt(Ze.WEBVIEW.CANCEL_ACTION_TRIGGERED,{source:Ue}))},Be=Ue=>{y(gt(Ze.WEBVIEW.RESEND_ACTION_TRIGGERED,{source:Ue}))},De=async()=>t(ze)||t(Re)?(we("keybinding"),t($e)()):ke();let Le=Oe(void 0);const Me=()=>N()?.requestFocus(),We=()=>N()?.forceFocus?.(),ke=()=>(N()?.blur(),!0),Re=d(()=>l()&&V(T,"$agentExchangeStatus",v)!==Vn.notRunning),xe=fu(M);let ae=d(()=>u()?"Resend to continue":j());const Pe=d(()=>Pl(void 0,void 0,t(Ee)));function Ce(){setTimeout(()=>{N()?.requestFocus()},100)}function Se(){o()&&y(wu(o()))}function Fe(Ue,lt){for(const ct of Ue)y(gt(Ze.SHARED.FILE_ATTACHMENT_SUCCEEDED,{bytes:ct.size,type:ct.type?ct.type:"unknown"}));for(const ct of lt)y(gt(Ze.SHARED.FILE_ATTACHMENT_FAILED,{bytes:ct.files[0].size,type:ct.files[0].type?ct.files[0].type:"unknown"}));y(gt(Ze.SHARED.FILE_ATTACHMENT_BUNDLE_COMPLETED,{successes:Ue.length,failures:lt.length}))}function Ge(){y(gt(Ze.SHARED.FILE_ATTACHMENT_STARTED,{source:"drop"}))}async function ot(Ue){if(!o())return;const{files:lt,folders:ct}=await f.resolveFilePaths(Ue);lt.length>0&&y(Ti(o(),lt)),ct.length>0&&y(Si(o(),ct))}function Ke(){y(gt(Ze.SHARED.FILE_ATTACHMENT_STARTED,{source:"button"}))}function Qe(Ue){y(gt(Ze.WEBVIEW.CONTEXT_MENU_BUTTON_CLICKED,{source:Ue}))}var Ye=r1();Ht("focus",Cn,()=>{Na()||Me()}),Ht("blur",Cn,()=>y(fo())),Ht("beforeunload",Cn,()=>y(fo()));var bt=b(Ye);Do(bt,{scope:"chat-input",children:(Ue,lt)=>{var ct=B(),oe=w(ct);Ts(oe,()=>t(ce),Ne=>{var Ve=B(),Xe=w(Ve);{const et=Mt=>{var Dt=B(),Gt=w(Dt),dt=tt=>{var pt=Vy();{const vt=zt=>{var Ut=B(),Lt=w(Ut),St=yt=>{var Bt=B(),At=w(Bt);{const Ft=qt=>{var Et=Uy(),ut=$(b(Et));fn(ut,{commandName:"openContextMenu",keysOnly:!0}),r(qt,Et)};let mt=d(()=>t(Le)?.insertMentionNode);Ae(At,()=>On.ContextMenu,(qt,Et)=>{Et(qt,{onCloseDropdown:Me,get onInsertMentionable(){return t(mt)},trackButtonClick:Qe,tooltipContent:Ft,$$slots:{tooltipContent:!0}})})}r(yt,Bt)};k(Lt,yt=>{yt(St)}),r(zt,Ut)};xl(b(pt),{prepend:vt,$$slots:{prepend:!0}})}r(tt,pt)};k(Gt,tt=>{tt(dt)}),r(Mt,Dt)},at=Mt=>{var Dt=B(),Gt=w(Dt),dt=tt=>{Ol(tt,{onDrop:Ge,onCodeFilesDrop:ot})};k(Gt,tt=>{c()&&tt(dt)}),r(Mt,Dt)},$t=Mt=>{var Dt=n1(),Gt=b(Dt);{const dt=pt=>{var vt=Yy(),zt=w(vt),Ut=Et=>{Bl(Et,{})};k(zt,Et=>{t(le)&&Et(Ut)});var Lt=$(zt,2),St=Et=>{var ut=jy(),ht=w(ut);on(ht,{name:"toggleAskMode",handler:()=>J("keybinding")});var _t=$(ht,2);it(_t,{maxWidth:"200px",content:Qt=>{pr(Qt,{heading:"Ask a question",description:"Get answers without modifying code",shortcutCommandName:"toggleAskMode"})},children:(Qt,cn)=>{{let Zt=d(()=>t(Q)?"soft":"ghost-block"),gn=d(()=>t(Q)?"accent":"neutral");Nt(Qt,{size:1,get variant(){return t(Zt)},get color(){return t(gn)},class:"c-chat-input__ask-mode-btn",$$events:{click:()=>J("button")},children:(vn,An)=>{Te(vn,{name:"message-square-text"})},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}});var rn=$(_t,2);Wr(rn,{orientation:"vertical",class:"c-chat-input__ask-separator"}),r(Et,ut)};k(Lt,Et=>{t(te)&&Et(St)});var yt=$(Lt,2),Bt=Et=>{qe(Et,{class:"c-chat-indicator",color:"neutral",size:1,children:(ut,ht)=>{var _t=ie("Chat Thread");r(ut,_t)},$$slots:{default:!0}})};k(yt,Et=>{t(re)&&Et(Bt)});var At=$(yt,2),Ft=Et=>{var ut=Ky(),ht=b(ut);he(()=>He(ht,`${t(Ie)??""}/${Ws}`)),r(Et,ut)};k(At,Et=>{t(Ie)>Ws&&Et(Ft)});var mt=$(At,2),qt=Et=>{zl(Et,{get selectedModelId(){return V(H,"$selectedModelId",v)},onModelChange:ut=>{o()&&y(Ci(o(),ut))}})};k(mt,Et=>{t(se)&&Et(qt)}),r(pt,vt)},tt=pt=>{var vt=t1(),zt=w(vt),Ut=mt=>{var qt=B(),Et=w(qt);{let ut=d($u);Ae(Et,()=>On.AddFileButton,(ht,_t)=>{_t(ht,{get accept(){return t(ut)},onClick:Ke})})}r(mt,qt)};k(zt,mt=>{c()&&mt(Ut)});var Lt=$(zt,2),St=mt=>{var qt=Xy(),Et=w(qt);ql(Et,{get draft(){return n()},forceEditorFocus:We,get editorContainer(){return t(W)}});var ut=$(Et,2),ht=b(ut);{let _t=d(()=>n()?.draftStatus===us.enhancing);Ae(ht,()=>On.RewritePromptButton,(rn,bn)=>{bn(rn,{onRewrite:Se,get isDisabled(){return t(Pe).isDisabled},get disabledReason(){return t(Pe).disabledReason},get isEnhancing(){return t(_t)}})})}tn(3,ut,()=>zr,()=>({axis:"x",duration:200,scale:.4})),r(mt,qt)};k(Lt,mt=>{t(ze)||t(Re)||u()||t(Pe).isHidden||mt(St)});var yt=$(Lt,2);{let mt=d(()=>!t(ze)&&!t(Re));on(yt,{get isDisabled(){return t(mt)},name:"cancelGeneration",debounce:!0,handler:De})}var Bt=$(yt,2),At=mt=>{var qt=B(),Et=w(qt);{const ut=ht=>{var _t=Jy(),rn=$(b(_t));fn(rn,{commandName:"cancelGeneration",keysOnly:!0}),r(ht,_t)};Ae(Et,()=>On.CancelButton,(ht,_t)=>{_t(ht,{get cancelAction(){return t($e)},onAnalyticsTrack:we,tooltipContent:ut,$$slots:{tooltipContent:!0}})})}r(mt,qt)},Ft=mt=>{var qt=B(),Et=w(qt),ut=_t=>{var rn=B(),bn=w(rn);{const Qt=cn=>{var Zt=Qy(),gn=$(b(Zt));fn(gn,{commandName:"cancelGeneration",keysOnly:!0}),r(cn,Zt)};Ae(bn,()=>On.CancelButton,(cn,Zt)=>{Zt(cn,{get cancelAction(){return t($e)},onAnalyticsTrack:we,tooltipContent:Qt,$$slots:{tooltipContent:!0}})})}r(_t,rn)},ht=_t=>{var rn=B(),bn=w(rn),Qt=Zt=>{var gn=e1(),vn=w(gn);on(vn,{name:"resendMessage",handler:()=>{o()&&(y(ga(o())),Be("keybinding"))}});var An=$(vn,2);{const hn=Mn=>{var Xn=Zy(),mr=$(b(Xn));fn(mr,{commandName:"resendMessage",keysOnly:!0}),r(Mn,Xn)};Ae(An,()=>On.ResendButton,(Mn,Xn)=>{Xn(Mn,{resendAction:()=>{o()&&y(ga(o()))},onAnalyticsTrack:()=>Be("button"),tooltipContent:hn,$$slots:{tooltipContent:!0}})})}r(Zt,gn)},cn=Zt=>{var gn=B(),vn=w(gn),An=hn=>{qy(hn,{get isDisabled(){return t(Ee)},get disabledReason(){return t(_e)},get sendAction(){return t(ve)}})};k(vn,hn=>{x()&&hn(An)},!0),r(Zt,gn)};k(bn,Zt=>{u()?Zt(Qt):Zt(cn,!1)},!0),r(_t,rn)};k(Et,_t=>{t(Re)?_t(ut):_t(ht,!1)},!0),r(mt,qt)};k(Bt,mt=>{t(ze)?mt(At):mt(Ft,!1)}),r(pt,vt)};Ae(Gt,()=>On.Root,(pt,vt)=>{vt(pt,{leftAlign:dt,rightAlign:tt,$$slots:{leftAlign:!0,rightAlign:!0}})})}r(Mt,Dt)};let Wt=d(()=>t(Q)?"accent":"default");Ae(Xe,()=>_s.Root,(Mt,Dt)=>{Pt(Dt(Mt,{get editable(){return U()},get variant(){return t(Wt)},header:et,overlay:at,footer:$t,children:(Gt,dt)=>{var tt=s1(),pt=w(tt);on(pt,{name:"focusChatInput",handler:ge});var vt=$(pt,2);on(vt,{name:"sendChatAction",debounce:!0,handler:de});var zt=$(vt,2);il(zt,{shortcuts:{Enter:(ut,ht,_t)=>(ls("enter"),!0),"Meta-Enter":(ut,ht,_t)=>(ls("command+enter"),!0),"Control-Enter":(ut,ht,_t)=>(ls("ctrl+enter"),!0),Escape:(ut,ht,_t)=>(console.error("SHOLD TRIGGER","ESCAPE"),ls("escape"),!0),"Alt-Enter":(ut,ht,_t)=>(ls("option+enter"),!0),"Meta-Shift-Backspace":(ut,ht,_t)=>(ls("command+shift+backspace"),!0),"Meta-Shift-Enter":(ut,ht,_t)=>(ls("command+shift+enter"),!0)}});var Ut=$(zt,2),Lt=ut=>{Pt(Fo(ut,{requestEditorFocus:Me,onMentionItemsUpdated:R}),ht=>X(Le,ht,!0),()=>t(Le))};k(Ut,ut=>{ut(Lt)});var St=$(Ut,2),yt=ut=>{Fl(0,{get isAskMode(){return t(Q)},onAskModeChange:K,onAskModeToggleComplete:Ce,onAskModeDeleted:ue})};k(St,ut=>{t(te)&&ut(yt)});var Bt=$(St,2),At=ut=>{var ht=B(),_t=w(ht);Ae(_t,()=>Wy.Root,(rn,bn)=>{Pt(bn(rn,{onBeforeCompletionAccepted:(Qt,cn)=>t(F).handleInlineCompletionAccepted(Qt,cn,t(Le)),onCompletionAccepted:()=>t(F).reportCompletionAccepted(),onCompletionRejected:()=>t(F).reportCompletionRejected()}),Qt=>X(G,Qt,!0),()=>t(G))}),r(ut,ht)};k(Bt,ut=>{a()&&ut(At)});var Ft=$(Bt,2);qo(Ft,{get placeholder(){return t(ae)}});var mt=$(Ft,2);{let ut=d(()=>t(P)?.rich_text_json_repr||q);Ae(mt,()=>_s.Content,(ht,_t)=>{_t(ht,{get content(){return t(ut)},onContentChanged:L})})}var qt=$(mt,2),Et=ut=>{Xo(0,{saveImage:(...ht)=>f.saveImage(...ht),saveAttachment:(...ht)=>f.saveAttachment(...ht),deleteImage:(...ht)=>f.deleteImage(...ht),renderImage:(...ht)=>f.loadImage(...ht),get maxImages(){return _u},supportedFileTypes:["image","text"],onValidationError:D,onCompletedAttachment:Fe})};k(qt,ut=>{c()&&ut(Et)}),r(Gt,tt)},$$slots:{header:!0,overlay:!0,footer:!0,default:!0}}),Gt=>N(Gt),()=>N())})}r(Ne,Ve)}),r(Ue,ct)},$$slots:{default:!0}}),Pt(Ye,Ue=>X(W,Ue),()=>t(W)),r(s,Ye),fe(),m()}var o1=h('<div class="c-message-history-tab__empty svelte-hepwid"><!></div>'),a1=h('<div class="c-message-history-tab__message-list svelte-hepwid"><!></div>'),i1=h('<div class="l-input-area-design-system svelte-hepwid"><!></div>'),l1=h("<!> <!>",1),c1=h('<div class="c-message-history-tab svelte-hepwid"><!></div> <!>',1);function d1(s,e){me(e,!0);const n=()=>V(v,"$isRemoteAgent",a),o=()=>V(l,"$remoteAgentsModel",a),[a,i]=je(),l=kt(dn.key),c=ln(),u=Au(),v=Ai();let m=d(()=>n()&&o()?.getCurrentChatHistory()?.length),y=d(()=>n()&&o().agentSetupLogs?.steps.length!==0);const f=Pi(c);let g=d(()=>n()?!t(m)&&!t(y):V(f,"$isHistoryEmpty",a)),A=d(()=>`${V(c,"$currentConversationId",a)}-${n()?V(u,"$remoteAgentId",a):""}`);const C=Eu();let _=Oe(void 0);var p=c1(),E=w(p),M=b(E),I=H=>{var D=o1(),U=b(D),j=N=>{ny(N,{})},x=N=>{ec(N)};k(U,N=>{V(C,"$isInitialIndexingInProgress",a)?N(j):N(x,!1)}),r(H,D)},T=H=>{var D=B(),U=w(D);Ts(U,()=>t(A),j=>{var x=a1(),N=b(x),W=G=>{Py(G,{})},F=G=>{Zl(G,{})};k(N,G=>{n()?G(W):G(F,!1)}),r(j,x)}),r(H,D)};k(M,H=>{t(g)?H(I):H(T,!1)});var O=$(E,2),P=H=>{var D=l1(),U=w(D);Es(U,{get target(){return`#${Un.divider}`},children:(j,x)=>{nc(j,{get inputArea(){return t(_)},set inputArea(N){X(_,N,!0)}})},$$slots:{default:!0}}),Es($(U,2),{get target(){return`#${Un.input}`},children:(j,x)=>{var N=i1();sc(b(N),{placeholder:"Instruct your Augment agent"}),Pt(N,W=>X(_,W),()=>t(_)),r(j,N)},$$slots:{default:!0}}),r(H,D)};k(O,H=>{e.isActive&&H(P)}),r(s,p),fe(),i()}var u1=h('<div class="ds-tab-panels svelte-1d4kh3p"><!></div>');const rc="tab-tasks";var v1=h("<!> <span>/</span> <!>",1),g1=h('<div class="c-chat-thread-body__badge svelte-1q5wcvj"><!></div>'),h1=h("<!> <!> <!> <!>",1),p1=h('<div class="c-chat-thread-body__tab-list"><!></div>'),m1=h("<!> <!> <!> <!>",1),f1=h("<!> <!>",1),_1=h('<div class="c-chat-thread-body svelte-1q5wcvj"><!></div>');function y1(s,e){me(e,!0);const n=()=>V(y,"$taskProgress",l),o=()=>V(g,"$activeTab",l),a=()=>V(A,"$availableTabs",l),i=()=>V(m,"$diffSummary",l),[l,c]=je(),u=Yn(),v=qn(),m=Cu(v),y=Tu(v),f=ur.getFromContext(),{activeTab:g,availableTabs:A,shouldShowTabs:C}=f,_=d(()=>n()?n().total:0),p=d(()=>o()===pn.messageHistory);function E(H){const D=H.value;D!==o()&&u.track(Ze.WEBVIEW.TAB_CHANGED,{newTab:D,previousTab:o()??"unknown"}),f.setActiveTab(D)}const M=Dl();let I=d(()=>V(M,"$highlightedElementId",l)===rc);fs(()=>f.destroy());var T=B(),O=w(T),P=H=>{var D=_1();yl(b(D),{get value(){return o()},size:1,color:"neutral",scrollable:!0,hideLabelOnNarrow:!0,onchange:E,children:(U,j)=>{var x=f1(),N=w(x);Es(N,{get target(){return`#${El}`},children:(W,F)=>{var G=p1(),z=b(G);Ts(z,a,q=>{bl(q,{showSlidingBackground:!0,expandToFit:!0,children:(L,R)=>{var Y=h1(),Z=w(Y),Q=ee=>{Qs(ee,{get value(){return pn.messageHistory},leftIcon:Ie=>{Te(Ie,{name:"wand-sparkles"})},children:(Ie,Ee)=>{var _e=ie("Thread");r(Ie,_e)},$$slots:{leftIcon:!0,default:!0}})};k(Z,ee=>{a().includes(pn.messageHistory)&&ee(Q)});var K=$(Z,2),J=ee=>{Qs(ee,{get value(){return pn.tasks},leftIcon:Ee=>{Te(Ee,{name:"list-checks"})},rightIcon:Ee=>{var _e=B(),pe=w(_e),se=te=>{var re=B(),le=w(re);Ae(le,()=>xn.Root,(ve,$e)=>{$e(ve,{color:"neutral",variant:"soft",size:0,children:(ce,ge)=>{var de=g1();(function(we,Be){me(Be,!1);const De=new Set;let Le=!1;Xv({register:ke=>{De.add(ke),$c(async()=>{Le||(Le=!0,De.forEach(async Re=>{{const xe=Rt(Re);if(!xe||!xe.created)return;xe.willUpdate()}await kn(),Rt(Re)?.didUpdate()}),await kn(),Le=!1)}),fs(()=>{De.delete(ke)})}}),_n();var Me=B(),We=w(Me);Ln(We,Be,"default",{},null),r(we,Me),fe()})(b(de),{children:(we,Be)=>{var De=v1(),Le=w(De);$o(Le,{get value(){return n().completed},willChange:!0});var Me=$(Le,4);$o(Me,{get value(){return n().total},willChange:!0}),r(we,De)},$$slots:{default:!0}}),r(ce,de)},$$slots:{default:!0}})}),r(te,re)};k(pe,te=>{t(_)>0&&te(se)}),r(Ee,_e)},children:(Ee,_e)=>{it(Ee,{content:"Agent Tasklist",triggerOn:[],delayDurationMs:300,maxWidth:"200px",get open(){return t(I)},children:(pe,se)=>{var te=ie("Tasks");r(pe,te)},$$slots:{default:!0}})},$$slots:{leftIcon:!0,rightIcon:!0,default:!0}})};k(K,ee=>{a().includes(pn.tasks)&&ee(J)});var ue=$(K,2),ne=ee=>{Qs(ee,{get value(){return pn.agentEdits},leftIcon:Ee=>{Te(Ee,{name:"file-diff"})},rightIcon:Ee=>{var _e=B(),pe=w(_e),se=te=>{Oo(te,{size:0,get totalAddedLines(){return i().totalAddedLines},get totalRemovedLines(){return i().totalRemovedLines}})};k(pe,te=>{(i().totalAddedLines>0||i().totalRemovedLines>0)&&te(se)}),r(Ee,_e)},children:(Ee,_e)=>{var pe=ie("Edits");r(Ee,pe)},$$slots:{leftIcon:!0,rightIcon:!0,default:!0}})};k(ue,ee=>{a().includes(pn.agentEdits)&&ee(ne)});var be=$(ue,2),ye=ee=>{var ze=B(),Ie=w(ze);Gs(Ie,()=>Hs(()=>import("./GitAgentEditTab-CvjK6d4D.js"),__vite__mapDeps([71,1,2,15,5,6,4,7,16,59,37,10,9,11,38,18,19,39,40,60,14,20,21,61,35,36,27,28,41,42,43,12,13,17,22,23,24,44,3,8,25,26,29,30,45,46,47,48,49,50,51,33,34,52,53,54,55,56,64,65,66,67,68,69,70,31,32,57,58,62,63,72]),import.meta.url),null,(Ee,_e)=>{var pe=d(()=>{var{default:le}=t(_e);return{GitAgentEditTab:le}}),se=d(()=>t(pe).GitAgentEditTab),te=B(),re=w(te);Ae(re,()=>t(se),(le,ve)=>{ve(le,{})}),r(Ee,te)}),r(ee,ze)};k(be,ee=>{a().includes(pn.agentGitEdits)&&ee(ye)}),r(L,Y)},$$slots:{default:!0}})}),r(W,G)},$$slots:{default:!0}}),function(W,F){var G=u1(),z=b(G);st(z,()=>F.children??wt),r(W,G)}($(N,2),{children:(W,F)=>{var G=m1(),z=w(G);wr(z,{get value(){return pn.messageHistory},forceMount:!0,children:(R,Y)=>{d1(R,{get isActive(){return t(p)}})},$$slots:{default:!0}});var q=$(z,2);wr(q,{get value(){return pn.tasks},children:(R,Y)=>{jm(R,{})},$$slots:{default:!0}});var L=$(q,2);wr(L,{get value(){return pn.agentEdits},children:(R,Y)=>{gm(R,{})},$$slots:{default:!0}}),wr($(L,2),{get value(){return pn.agentGitEdits},children:(R,Y)=>{var Z=B(),Q=w(Z);Gs(Q,()=>Hs(()=>import("./GitAgentEditTabContent-BjyHRKcf.js"),__vite__mapDeps([73,1,2,55,4,5,6,7,15,16,27,28,65,66,10,9,11,12,13,14,17,18,19,20,21,22,23,24,37,38,39,40,35,36,41,42,43,44,3,8,25,26,29,30,45,46,47,48,49,50,51,33,34,52,53,54,56,64,67,31,32,57,58,59,60,61,62,63,68,69,70,74]),import.meta.url),null,(K,J)=>{var ue=d(()=>{var{default:ee}=t(J);return{GitAgentEditTab:ee}}),ne=d(()=>t(ue).GitAgentEditTab),be=B(),ye=w(be);Ae(ye,()=>t(ne),(ee,ze)=>{ze(ee,{})}),r(K,be)}),r(R,Z)},$$slots:{default:!0}}),r(W,G)}}),r(U,x)},$$slots:{default:!0}}),r(H,D)};k(O,H=>{V(C,"$shouldShowTabs",l)&&H(P)}),r(s,T),fe(),c()}var b1=h('<div class="memory-queue-instance__edit-indicator">Memory is being edited.</div>'),$1=h('<li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Scope:</span> <span class="memory-queue-instance__metadata-value"> </span></li>'),w1=h('<div class="memory-queue-instance__loading svelte-dg83pr" role="status" aria-live="polite"><!> <!></div>'),k1=h("<!> <!> <!>",1),A1=h('<div class="memory-queue-instance__content svelte-dg83pr"><h3 class="memory-queue-instance__label svelte-dg83pr"><!></h3> <!></div> <div class="memory-queue-instance__metadata svelte-dg83pr" aria-label="Memory metadata"><ul class="svelte-dg83pr"><!> <li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Created:</span> <span class="memory-queue-instance__metadata-value"> </span></li> <li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Source:</span> <span class="memory-queue-instance__metadata-value"> </span></li></ul></div> <footer class="memory-queue-instance__actions svelte-dg83pr" role="group" aria-label="Memory actions"><!></footer>',1),E1=h('<div role="article"><!> <!> <!> <!></div>'),C1=h('<form class="memory-editor svelte-17ndyoq"><div class="memory-editor__scope"><div class="memory-editor__memory"><h3 class="memory-editor__memory-label svelte-17ndyoq"><!></h3> <!></div> <footer class="memory-editor__actions svelte-17ndyoq" role="group" aria-label="Memory actions"><!> <!></footer></div></form>'),T1=h(`Use <kbd class="memory-queue__navigation-icon svelte-21at3u">TAB</kbd> to navigate through the list, and save,
      reject or edit memories as you see fit.`,1),S1=h('<div class="memory-queue__saved-callout__content svelte-21at3u"><div> </div></div>'),I1=h('<div class="memory-queue__empty svelte-21at3u" role="status"><p class="memory-queue__empty-message svelte-21at3u">No memories remaining.</p> <!></div>'),R1=h('<div class="memory-queue__item" role="listitem"><!></div>'),x1=h('<div class="memory-queue__list svelte-21at3u" role="list"></div>'),M1=h('<header class="c-memory-queue__header svelte-21at3u"><div class="c-memory-queue__title-container svelte-21at3u"><!> <!></div> <div class="memory-queue__instructions"><!></div> <div class="memory-queue__open-memories"><!> <!></div> <!></header> <section class="memory-queue svelte-21at3u" aria-label="Memory queue"><!></section>',1);function D1(s,e){me(e,!1);const n=zn(),o=zn(),a=zn();let i=S(e,"onSave",8),l=S(e,"onDiscard",8),c=S(e,"onMemoryUpdate",8),u=S(e,"onClose",8),v=S(e,"memories",8);async function m(z){await i()(z),requestAnimationFrame(()=>{f()})}async function y(z){await l()(z),requestAnimationFrame(()=>{f()})}function f(){const z=t(n).length;if(z===0)document.querySelector(".memory-queue__empty button")?.focus();else{const q=Math.min(_,z-1);document.querySelector(`.memory-queue__item:nth-child(${q+1}) .memory-queue-instance__actions button`)?.focus()}}let g=zn(null);function A(z){X(g,t(g)===z?null:z)}let C=zn(0),_=0;Jt(()=>{t(n).length>0&&requestAnimationFrame(()=>{document.querySelector(".memory-queue__item .memory-queue-instance__actions button")?.focus()})}),bs(()=>In(v()),()=>{X(n,v().filter(z=>z.state==="pending"||z.state===void 0))}),bs(()=>t(n),()=>{X(o,t(n).length?`${t(n).length} memories pending review`:"No memories to review")}),bs(()=>(In(v()),t(g)),()=>{X(a,v().find(z=>z.id===t(g)))}),go(),_n();var p=M1(),E=w(p),M=b(E),I=b(M);qe(I,{size:2,color:"primary",class:"c-memory-queue__title",children:(z,q)=>{var L=ie();he(()=>He(L,t(o))),r(z,L)},$$slots:{default:!0}});var T=$(I,2);Nt(T,{size:1,variant:"ghost-block",color:"neutral",title:"Close modal",$$events:{click(...z){u()?.apply(this,z)}},children:(z,q)=>{Te(z,{name:"x"})},$$slots:{default:!0}});var O=$(M,2),P=b(O);qe(P,{size:1,color:"secondary",children:(z,q)=>{var L=T1();r(z,L)},$$slots:{default:!0}});var H=$(O,2),D=b(H);qe(D,{size:1,color:"secondary",children:(z,q)=>{var L=ie("View your currently saved memories");r(z,L)},$$slots:{default:!0}});var U=$(D,2);xt(U,{size:1,variant:"ghost",color:"neutral",slot:"icon",$$events:{click:()=>{an.postMessage({type:jt.openMemoriesFile})}},$$slots:{iconRight:(z,q)=>{Te(z,{slot:"iconRight",name:"external-link"})}}});var j=$(H,2),x=z=>{ks(z,{variant:"soft",color:"info",size:1,class:"memory-queue__saved-callout",children:(q,L)=>{var R=S1(),Y=b(R),Z=b(Y);he(()=>He(Z,`${t(C)??""}
          ${t(C)===1?"memory":"memories"} saved.`)),r(q,R)},$$slots:{default:!0}})};k(j,z=>{t(C)>0&&z(x)});var N=$(E,2),W=b(N),F=z=>{(function(q,L){me(L,!1);let R=S(L,"memory",8),Y=S(L,"onSave",8),Z=S(L,"onCancel",8),Q=zn(R().memory),K=zn();const J=()=>{Y()(t(Q).trim())},ue=()=>{X(Q,R().memory),Z()()};Jt(()=>{t(K)&&t(K).focus()}),bs(()=>In(R()),()=>{R()&&X(Q,R().memory)}),go(),_n();var ne=C1(),be=b(ne),ye=b(be),ee=b(ye),ze=b(ee);qe(ze,{size:1,color:"secondary",children:(se,te)=>{var re=ie("Memory");r(se,re)},$$slots:{default:!0}});var Ie=$(ee,2);ig(Ie,{rows:3,placeholder:"Edit memory...",onkeydown:se=>{(se.ctrlKey||se.metaKey)&&se.key==="Enter"&&(se.preventDefault(),J()),se.key==="Escape"&&(se.preventDefault(),ue())},get textInput(){return t(K)},set textInput(se){X(K,se)},get value(){return t(Q)},set value(se){X(Q,se)},$$legacy:!0});var Ee=$(ye,2),_e=b(Ee);xt(_e,{size:1,variant:"solid",color:"accent",type:"submit",children:(se,te)=>{var re=ie("Save Memory");r(se,re)},$$slots:{default:!0,iconLeft:(se,te)=>{Te(se,{name:"check",slot:"iconLeft"})}}});var pe=$(_e,2);xt(pe,{size:1,variant:"ghost",color:"neutral",type:"button",$$events:{click:ue},children:(se,te)=>{var re=ie("Cancel");r(se,re)},$$slots:{default:!0}}),Ht("submit",ne,mo(J)),r(q,ne),fe()})(z,{get memory(){return t(a)},onSave:async q=>{await c()(t(a).id,q),X(g,null)},onCancel:()=>{A(t(a).id)}})},G=z=>{var q=B(),L=w(q),R=Z=>{var Q=I1(),K=$(b(Q),2);xt(K,{size:1,variant:"soft",color:"neutral",$$events:{click(...J){u()?.apply(this,J)}},children:(J,ue)=>{var ne=ie("Return to Agent");r(J,ne)},$$slots:{default:!0}}),r(Z,Q)},Y=Z=>{var Q=x1();Vt(Q,7,v,K=>K.id,(K,J,ue)=>{var ne=R1();(function(be,ye){me(ye,!1);let ee=S(ye,"memory",8),ze=S(ye,"onSave",24,()=>{}),Ie=S(ye,"onDiscard",24,()=>{}),Ee=S(ye,"element",28,()=>{}),_e=S(ye,"toggleEditMode",24,()=>{}),pe=S(ye,"numberOfSavedMemories",12,0),se=zn(ee().state||"pending"),te=zn(!1);function re(ke,Re){ke.key==="Enter"&&Re&&(ke.preventDefault(),Re())}async function le(){if(ze()){X(te,!0);try{await ze()(ee().id),pe(pe()+1),X(se,"accepted")}finally{X(te,!1)}}}async function ve(){if(Ie()){X(te,!0);try{await Ie()(ee().id),X(se,"rejected")}finally{X(te,!1)}}}_n();var $e=E1();let ce;var ge=b($e),de=ke=>{ks(ke,{variant:"soft",color:"success",size:1,role:"status","aria-live":"polite",icon:xe=>{Te(xe,{name:"check"})},children:(xe,ae)=>{var Pe=ie("Memory has been saved.");r(xe,Pe)},$$slots:{icon:!0,default:!0}})};k(ge,ke=>{t(se)==="accepted"&&ke(de)});var we=$(ge,2),Be=ke=>{ks(ke,{variant:"soft",color:"error",size:1,role:"status","aria-live":"polite",icon:xe=>{Te(xe,{name:"check"})},children:(xe,ae)=>{var Pe=ie("Memory has been rejected.");r(xe,Pe)},$$slots:{icon:!0,default:!0}})};k(we,ke=>{t(se)==="rejected"&&ke(Be)});var De=$(we,2),Le=ke=>{var Re=b1();r(ke,Re)};k(De,ke=>{t(se)==="editing"&&ke(Le)});var Me=$(De,2),We=ke=>{var Re=A1(),xe=w(Re),ae=b(xe),Pe=b(ae);qe(Pe,{size:1,color:"secondary",children:(Xe,et)=>{var at=ie("Memory");r(Xe,at)},$$slots:{default:!0}});var Ce=$(ae,2);qe(Ce,{color:"primary",size:1,children:(Xe,et)=>{var at=ie();he(()=>He(at,(In(ee()),nn(()=>ee().memory)))),r(Xe,at)},$$slots:{default:!0}});var Se=$(xe,2),Fe=b(Se),Ge=b(Fe),ot=Xe=>{var et=$1(),at=$(b(et),2),$t=b(at);he(()=>He($t,(In(ee()),nn(()=>ee().scope)))),r(Xe,et)};k(Ge,Xe=>{In(ee()),nn(()=>ee().scope)&&Xe(ot)});var Ke=$(Ge,2),Qe=$(b(Ke),2),Ye=b(Qe),bt=$(Ke,2),Ue=$(b(bt),2),lt=b(Ue),ct=$(Se,2),oe=b(ct),Ne=Xe=>{var et=w1(),at=b(et);es(at,{size:1});var $t=$(at,2);qe($t,{size:1,color:"secondary",children:(Wt,Mt)=>{var Dt=ie("Processing...");r(Wt,Dt)},$$slots:{default:!0}}),r(Xe,et)},Ve=Xe=>{var et=k1(),at=w(et),$t=dt=>{xt(dt,{size:1,color:"accent",variant:"soft","aria-label":"Save memory",$$events:{click:le,keydown:tt=>re(tt,le)},children:(tt,pt)=>{var vt=ie("Save");r(tt,vt)},$$slots:{default:!0,iconLeft:(tt,pt)=>{Te(tt,{name:"check",slot:"iconLeft"})}}})};k(at,dt=>{ze()&&dt($t)});var Wt=$(at,2),Mt=dt=>{xt(dt,{size:1,color:"error",variant:"soft","aria-label":"Discard memory",$$events:{click:ve,keydown:tt=>re(tt,ve)},children:(tt,pt)=>{var vt=ie("Discard");r(tt,vt)},$$slots:{default:!0,iconLeft:(tt,pt)=>{Te(tt,{name:"x",slot:"iconLeft"})}}})};k(Wt,dt=>{Ie()&&dt(Mt)});var Dt=$(Wt,2),Gt=dt=>{xt(dt,{size:1,color:"neutral",variant:"ghost","aria-label":"Edit memory",$$events:{click(...tt){_e()?.apply(this,tt)},keydown:tt=>re(tt,_e())},children:(tt,pt)=>{var vt=ie("Edit");r(tt,vt)},$$slots:{default:!0,iconLeft:(tt,pt)=>{Te(tt,{name:"pencil",slot:"iconLeft"})}}})};k(Dt,dt=>{_e()&&dt(Gt)}),r(Xe,et)};k(oe,Xe=>{t(te)?Xe(Ne):Xe(Ve,!1)}),he(Xe=>{He(Ye,Xe),He(lt,(In(ee()),nn(()=>ee().source)))},[()=>(In(ee()),nn(()=>new Date(ee().created).toLocaleDateString()))]),r(ke,Re)};k(Me,ke=>{t(se)==="pending"&&ke(We)}),Pt($e,ke=>Ee(ke),()=>Ee()),he(ke=>{nt($e,"aria-labelledby",`memory-${In(ee()),nn(()=>ee().id)??""}-title`),ce=ft($e,1,"svelte-dg83pr",null,ce,ke)},[()=>({"memory-queue-instance__callout":t(se)==="accepted"||t(se)==="rejected","memory-queue-instance__pending":t(se)==="pending","memory-queue-instance__editing":t(se)==="editing"})]),r(be,$e),fe()})(b(ne),{get memory(){return t(J)},onSave:m,onDiscard:y,toggleEditMode:()=>A(t(J).id),get numberOfSavedMemories(){return t(C)},set numberOfSavedMemories(be){X(C,be)},$$legacy:!0}),Ht("focusin",ne,()=>function(be){_=be}(t(ue))),r(K,ne)}),r(Z,Q)};k(L,Z=>{t(n),nn(()=>t(n).length===0)?Z(R):Z(Y,!1)},!0),r(z,q)};k(W,z=>{t(a)?z(F):z(G,!1)}),r(s,p),fe()}var O1=h('<div class="c-memory-dropdown__loading svelte-1dx08at">Loading memories...</div>'),N1=h('<div class="c-memory-dropdown__content svelte-1dx08at"><!></div>');function z1(s,e){me(e,!0);const n=()=>V(l,"$memories",o),[o,a]=je(),i=Ct(),l=Su(),c=Iu();async function u(_){i(eo(_,"accepted"))}async function v(_){i(eo(_,"rejected"))}async function m(_,p){i(eo(_,"pending",p))}let y=d(()=>n().map(_=>({id:_.id,state:_.state,memory:_.content,scope:void 0,source:"Agent",created:_.timestamp})));var f=N1(),g=b(f),A=_=>{var p=O1();r(_,p)},C=_=>{D1(_,{get memories(){return t(y)},onSave:u,onDiscard:v,onMemoryUpdate:m,get onClose(){return e.onClose}})};k(g,_=>{V(c,"$isLoading",o)&&n().length===0?_(A):_(C,!1)}),r(s,f),fe(),a()}const oc=Symbol("full-size-overlay");var L1=h('<div class="c-memory-modal__content svelte-1ji12qo"><!></div>');function P1(s,e){me(e,!1);const{close:n}=kt(oc);_n();var o=L1();z1(b(o),{get onClose(){return n}}),r(s,o),fe()}var B1=h('<div class="c-new-chat-empty__header svelte-b1qp3q"><div class="c-new-chat-empty__header-icon svelte-b1qp3q"><!></div> <!></div>'),F1=h('<div class="l-input-area-design-system svelte-dw2toi"><!></div>'),q1=h('<div class="l-center-contents-empty svelte-dw2toi" data-testid="l-lazy-message-list-center-contents"><!></div>'),H1=h("<!> <!> <!>",1);function W1(s,e){me(e,!0);const[n,o]=je(),a=ln(),i=ts(a);let l=Pi(a),c=d(()=>`${V(a,"$currentConversationId",n)}-conversation`),u=Oe(void 0);var v=H1(),m=w(v);Es(m,{get target(){return`#${Un.divider}`},children:(g,A)=>{nc(g,{get inputArea(){return t(u)},set inputArea(C){X(u,C,!0)}})},$$slots:{default:!0}});var y=$(m,2);Es(y,{get target(){return`#${Un.input}`},children:(g,A)=>{var C=F1();sc(b(C),{placeholder:"Ask a question through chat"}),Pt(C,_=>X(u,_),()=>t(u)),r(g,C)},$$slots:{default:!0}});var f=$(y,2);Ts(f,()=>t(c),g=>{var A=B(),C=w(A),_=E=>{var M=q1(),I=b(M),T=P=>{ec(P)},O=P=>{(function(H){Hn(H,{header:U=>{var j=B1(),x=b(j),N=b(x);Te(N,{name:"message-square",size:2});var W=$(x,2);qe(W,{color:"primary",size:4,children:(F,G)=>{var z=ie("New Chat Thread");r(F,z)},$$slots:{default:!0}}),r(U,j)},children:(U,j)=>{qe(U,{size:1,variant:"surface",children:(x,N)=>{var W=ie("Ask questions and plan with codebase awareness.");r(x,W)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(P)};k(I,P=>{V(i,"$isAgentic",n)?P(T):P(O,!1)}),r(E,M)},p=E=>{Zl(E,{})};k(C,E=>{V(l,"$isEmptyConversation",n)?E(_):E(p,!1)}),r(g,A)}),r(s,v),fe(),o()}var G1=h("<div><!></div>");function U1(s,e){me(e,!1);const[n,o]=je(),a=Ru();_n();var i=B(),l=w(i),c=u=>{var v=G1(),m=b(v);ks(m,{color:"error",variant:"surface",size:1,icon:f=>{Te(f,{name:"ban"})},children:(f,g)=>{var A=ie("Syncing disabled");r(f,A)},$$slots:{icon:!0,default:!0}}),tn(7,v,()=>ps,()=>({y:-5,duration:250,opacity:0})),r(u,v)};k(l,u=>{V(a,"$syncEnabledState",n)===xu.disabled&&u(c)}),r(s,i),fe(),o()}var V1=h('<div class="c-sync-progress-bar__duration svelte-5p1b4g"><!> </div>'),j1=h('<div class="c-sync-progress-bar__message svelte-5p1b4g"> <!></div>'),K1=h('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Y1=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),X1=h('<div class="c-sync-progress-bar svelte-5p1b4g"><div class="c-sync-status--spin-icon svelte-5p1b4g"><!></div> <!> <!> <!></div>'),J1=h("<div><!></div>");function Q1(s,e){me(e,!0);const n=()=>V(c,"$progress",a),o=()=>V(u,"$percentage",a),[a,i]=je();let l=S(e,"showDoneBanner",7,!1);const c=Mo(),u=Li(),v=d(()=>{return _=n()?.syncDuration,_?Math.floor(_/1e3):0;var _});let m=Oe(!1);const y=d(()=>n()?`Finished indexing ${n().syncedCount.toLocaleString()} Files!`:"Codebase Indexing Complete!");rt(()=>{if(t(m)&&n()?.status===xs.done){l(!0);const _=setTimeout(()=>{X(m,!1),l(!1)},5e3);return()=>{clearTimeout(_)}}n()&&n().status!==xs.done&&(n().status===xs.longRunning||n().hasNewlyTrackedFolders)&&X(m,!0)});const f=d(()=>t(m)&&!n()?.isInitialIndexing||l());var g=B(),A=w(g),C=_=>{var p=J1(),E=b(p),M=T=>{var O=K1(),P=b(O);{const H=D=>{Te(D,{name:"check"})};Us(P,()=>({"--callout-width":"100%"})),ks(P.lastChild,{color:"accent",variant:"surface",size:1,icon:H,children:(D,U)=>{var j=j1(),x=b(j),N=$(x),W=F=>{var G=V1(),z=b(G);Te(z,{name:"clock"});var q=$(z);he(()=>He(q,` ${t(v)??""}s`)),r(F,G)};k(N,F=>{t(v)&&F(W)}),he(()=>He(x,`${t(y)??""} `)),r(D,j)},$$slots:{icon:!0,default:!0}})}tn(3,O,()=>ps,()=>({y:-5,duration:250,opacity:0})),r(T,O)},I=T=>{var O=B(),P=w(O),H=D=>{var U=X1(),j=b(U),x=b(j);Te(x,{name:"refresh-ccw",size:2});var N=$(j,2);qe(N,{size:1,children:(z,q)=>{var L=ie("Indexing...");r(z,L)},$$slots:{default:!0}});var W=$(N,2);{let z=d(()=>n()?.indeterminate);tc(W,{get value(){return o()},get indeterminate(){return t(z)}})}var F=$(W,2),G=z=>{var q=Y1(),L=w(q);Us(L,()=>({"--text-color":"var(--ds-color-accent-a11)"})),qe(L.lastChild,{size:1,color:"accent",children:(R,Y)=>{var Z=ie();he(()=>He(Z,`${o()??""}%`)),r(R,Z)},$$slots:{default:!0}}),r(z,q)};k(F,z=>{n()?.indeterminate||z(G)}),tn(1,U,()=>ps,()=>({y:-5,duration:250,opacity:0})),r(D,U)};k(P,D=>{n()?.status!==xs.done&&D(H)},!0),r(T,O)};k(E,T=>{n()?.status===xs.done&&l()?T(M):T(I,!1)}),tn(3,p,()=>ps,()=>({y:-5,duration:250,opacity:0})),r(_,p)};k(A,_=>{t(f)&&_(C)}),r(s,g),fe(),i()}var Z1=h('<div class="l-status-bars svelte-1hktxgr"><!> <!></div>');const ac="vscode-version-warning-hide-for-session";class eb{constructor(e,n,o){this._reduxStore=e,this._config=n,this._remoteAgentsModel=o,this._showVSCodeVersionWarning=It([this._config.isVscodeVersionOutdated,this._vscodeVersionWarningDismissed],([a,i])=>a&&!i&&!function(){try{const l=sessionStorage.getItem(ac);return!!l&&JSON.parse(l).hideForSession===!0}catch(l){return console.error("Failed to read VSCode version warning preference from sessionStorage:",l),!1}}()),this._showConversationHistoryWarning=It([this._remoteAgentsModel,this._conversationHistoryBannerDismissedAt,this._config.conversationHistorySizeThresholdBytes],([a,i])=>!(!Tc()||function(){try{const l=sessionStorage.getItem("conversation-history-warning-hide-for-session");return!!l&&JSON.parse(l).hideForSession===!0}catch(l){return console.error("Failed to read conversation history warning preference from sessionStorage:",l),!1}}()||a.isActive||i>0&&Date.now()-i<36e5)),this._showRemoteAgentDeletionWarning=It([this._remoteAgentsModel,this._config.remoteAgentsResumeHintAvailableTtlDays],([a,i])=>{if(!a.isActive)return!1;const l=a.currentAgent;return!!l&&ml(l,i)})}_showVSCodeVersionWarning;_vscodeVersionWarningDismissed=Yt(!1);_showConversationHistoryWarning;_conversationHistoryBannerDismissedAt=Yt(0);_showRemoteAgentDeletionWarning;get showVSCodeVersionWarning(){return this._showVSCodeVersionWarning}get showConversationHistoryWarning(){return this._showConversationHistoryWarning}get showRemoteAgentDeletionWarning(){return this._showRemoteAgentDeletionWarning}dismissVSCodeVersionWarning(){this._vscodeVersionWarningDismissed.set(!0)}dismissConversationHistoryWarning(){this._conversationHistoryBannerDismissedAt.set(Date.now())}}const tb=Array(12).fill(0);var nb=h('<div class="sonner-loading-bar"></div>'),sb=h('<div><div class="sonner-spinner"></div></div>');function os(...s){return s.filter(Boolean).join(" ")}const rb=typeof document<"u",ob=typeof window<"u"?window:void 0;new class{#t;#e;constructor(s={}){const{window:e=ob,document:n=e?.document}=s;e!==void 0&&(this.#t=n,this.#e=ii(o=>{const a=qs(e,"focusin",o),i=qs(e,"focusout",o);return()=>{a(),i()}}))}get current(){return this.#e?.(),this.#t?function(s){let e=s.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}(this.#t):null}};const ab=new class{#t;#e;constructor(s){this.#t=s,this.#e=Symbol(s)}get key(){return this.#e}exists(){return li(this.#e)}get(){const s=kt(this.#e);if(s===void 0)throw new Error(`Context "${this.#t}" not found`);return s}getOr(s){const e=kt(this.#e);return e===void 0?s:e}set(s){return Rn(this.#e,s)}}("<Toaster/>");let Qa=0;const Kt=new class{#t=Oe(Wn([]));get toasts(){return t(this.#t)}set toasts(s){X(this.#t,s,!0)}#e=Oe(Wn([]));get heights(){return t(this.#e)}set heights(s){X(this.#e,s,!0)}#n=s=>{const e=this.toasts.findIndex(n=>n.id===s);return e===-1?null:e};addToast=s=>{rb&&this.toasts.unshift(s)};updateToast=({id:s,data:e,type:n,message:o})=>{const a=this.toasts.findIndex(l=>l.id===s),i=this.toasts[a];this.toasts[a]={...i,...e,id:s,title:o,type:n,updated:!0}};create=s=>{const{message:e,...n}=s,o=typeof s?.id=="number"||s.id&&s.id?.length>0?s.id:Qa++,a=s.dismissable===void 0||s.dismissable,i=s.type===void 0?"default":s.type;return nn(()=>{this.toasts.find(c=>c.id===o)?this.updateToast({id:o,data:s,type:i,message:e,dismissable:a}):this.addToast({...n,id:o,title:e,dismissable:a,type:i})}),o};dismiss=s=>(nn(()=>{if(s===void 0)return void(this.toasts=this.toasts.map(n=>({...n,dismiss:!0})));const e=this.toasts.findIndex(n=>n.id===s);this.toasts[e]&&(this.toasts[e]={...this.toasts[e],dismiss:!0})}),s);remove=s=>{if(s===void 0)return void(this.toasts=[]);const e=this.#n(s);return e!==null?(this.toasts.splice(e,1),s):void 0};message=(s,e)=>this.create({...e,type:"default",message:s});error=(s,e)=>this.create({...e,type:"error",message:s});success=(s,e)=>this.create({...e,type:"success",message:s});info=(s,e)=>this.create({...e,type:"info",message:s});warning=(s,e)=>this.create({...e,type:"warning",message:s});loading=(s,e)=>this.create({...e,type:"loading",message:s});promise=(s,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:s,type:"loading",message:typeof e.loading=="string"?e.loading:e.loading()}));const o=s instanceof Promise?s:s();let a=n!==void 0;return o.then(i=>{if(typeof i=="object"&&i&&"ok"in i&&typeof i.ok=="boolean"&&!i.ok){a=!1;const l=function(c){return c&&typeof c=="object"&&"status"in c?`HTTP error! Status: ${c.status}`:`Error! ${c}`}(i);this.create({id:n,type:"error",message:l})}else if(e.success!==void 0){a=!1;const l=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:l})}}).catch(i=>{if(e.error!==void 0){a=!1;const l=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:l})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),e.finally?.()}),n};custom=(s,e)=>{const n=e?.id||Qa++;return this.create({component:s,id:n,...e}),n};removeHeight=s=>{this.heights=this.heights.filter(e=>e.toastId!==s)};setHeight=s=>{const e=this.#n(s.toastId);e!==null?this.heights[e]=s:this.heights.push(s)};reset=()=>{this.toasts=[],this.heights=[]}};class ib{#t=d(()=>Kt.toasts.filter(e=>!e.dismiss));get toasts(){return t(this.#t)}}const lb=function(s,e){return Kt.create({message:s,...e})},Ds=Object.assign(lb,{success:Kt.success,info:Kt.info,warning:Kt.warning,error:Kt.error,custom:Kt.custom,message:Kt.message,promise:Kt.promise,dismiss:Kt.dismiss,loading:Kt.loading,getActiveToasts:()=>Kt.toasts.filter(s=>!s.dismiss)});function Br(s){return s.label!==void 0}const Za=4e3,cb=14,db=45,ub=200,vb=.05,gb={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""};function ei(s){return 1/(1.5+Math.abs(s)/20)}var hb=h("<div><!></div>"),pb=(s,e,n,o,a)=>{!t(e)&&t(n)&&(o(),a.toast.onDismiss?.(a.toast))},mb=h('<button data-close-button=""><!></button>'),fb=h('<div data-icon=""><!> <!></div>'),_b=h('<div data-description=""><!></div>'),yb=(s,e,n,o)=>{Br(e.toast.cancel)&&t(n)&&(e.toast.cancel?.onClick?.(s),o())},bb=h('<button data-button="" data-cancel=""> </button>'),$b=(s,e,n)=>{Br(e.toast.action)&&(e.toast.action?.onClick(s),s.defaultPrevented||n())},wb=h('<button data-button=""> </button>'),kb=h('<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>',1),Ab=h('<li data-sonner-toast=""><!> <!></li>');function Eb(s,e){me(e,!0);const n=te=>{var re=B(),le=w(re),ve=ce=>{var ge=hb(),de=b(ge);st(de,()=>e.loadingIcon),he(we=>{ft(ge,1,we),nt(ge,"data-visible",t(O)==="loading")},[()=>Dn(os(t(L)?.loader,e.toast?.classes?.loader,"sonner-loader"))]),r(ce,ge)},$e=ce=>{{let ge=d(()=>os(t(L)?.loader,e.toast.classes?.loader)),de=d(()=>t(O)==="loading");(function(we,Be){me(Be,!0);var De=sb(),Le=b(De);Vt(Le,23,()=>tb,(Me,We)=>`spinner-bar-${We}`,(Me,We)=>{var ke=nb();r(Me,ke)}),he(Me=>{ft(De,1,Me),nt(De,"data-visible",Be.visible)},[()=>Dn(["sonner-loading-wrapper",Be.class].filter(Boolean).join(" "))]),r(we,De),fe()})(ce,{get class(){return t(ge)},get visible(){return t(de)}})}};k(le,ce=>{e.loadingIcon?ce(ve):ce($e,!1)}),r(te,re)};let o=S(e,"cancelButtonStyle",3,""),a=S(e,"actionButtonStyle",3,""),i=S(e,"descriptionClass",3,""),l=S(e,"unstyled",3,!1),c=S(e,"defaultRichColors",3,!1);const u={...gb};let v=Oe(!1),m=Oe(!1),y=Oe(!1),f=Oe(!1),g=Oe(!1),A=Oe(0),C=Oe(0),_=e.toast.duration||e.duration||Za,p=Oe(void 0),E=Oe(null),M=Oe(null);const I=d(()=>e.index===0),T=d(()=>e.index+1<=e.visibleToasts),O=d(()=>e.toast.type),P=d(()=>e.toast.dismissable!==!1),H=d(()=>e.toast.class||""),D=d(()=>e.toast.descriptionClass||""),U=d(()=>Kt.heights.findIndex(te=>te.toastId===e.toast.id)||0),j=d(()=>e.toast.closeButton??e.closeButton),x=d(()=>e.toast.duration??e.duration??Za);let N=null;const W=d(()=>e.position.split("-")),F=d(()=>Kt.heights.reduce((te,re,le)=>le>=t(U)?te:te+re.height,0)),G=function(){let te=Oe(Wn(typeof document<"u"&&document.hidden));return rt(()=>qs(document,"visibilitychange",()=>{X(te,document.hidden,!0)})),{get current(){return t(te)}}}(),z=d(()=>e.toast.invert||e.invert),q=d(()=>t(O)==="loading"),L=d(()=>({...u,...e.classes})),R=d(()=>e.toast.title),Y=d(()=>e.toast.description);let Z=Oe(0),Q=Oe(0);const K=d(()=>Math.round(t(U)*cb+t(F)));function J(){X(m,!0),X(A,t(K),!0),Kt.removeHeight(e.toast.id),setTimeout(()=>{Kt.remove(e.toast.id)},ub)}let ue;rt(()=>{let te;t(R),t(Y),te=e.expanded||e.expandByDefault?1:1-e.index*vb;const re=nn(()=>t(p));if(re===void 0)return;re.style.setProperty("height","auto");const le=re.offsetHeight,ve=re.getBoundingClientRect().height,$e=Math.round(ve/te+Number.EPSILON&100)/100;let ce;re.style.removeProperty("height"),ce=Math.abs($e-le)<1?$e:le,X(C,ce,!0),nn(()=>{Kt.setHeight({toastId:e.toast.id,height:ce})})});const ne=d(()=>e.toast.promise&&t(O)==="loading"||e.toast.duration===Number.POSITIVE_INFINITY);function be(){X(Z,new Date().getTime(),!0),ue=setTimeout(()=>{e.toast.onAutoClose?.(e.toast),J()},_)}rt(()=>{e.toast.updated&&(clearTimeout(ue),_=t(x),be())}),rt(()=>(t(ne)||(e.expanded||e.interacting||G.current?function(){if(t(Q)<t(Z)){const te=new Date().getTime()-t(Z);_-=te}X(Q,new Date().getTime(),!0)}():be()),()=>clearTimeout(ue))),Jt(()=>{X(v,!0);const te=t(p)?.getBoundingClientRect().height;return X(C,te,!0),Kt.setHeight({toastId:e.toast.id,height:te}),()=>{Kt.removeHeight(e.toast.id)}}),rt(()=>{e.toast.delete&&nn(()=>{J(),e.toast.onDismiss?.(e.toast)})});const ye=d(()=>e.toast.icon?e.toast.icon:t(O)==="success"?e.successIcon:t(O)==="error"?e.errorIcon:t(O)==="warning"?e.warningIcon:t(O)==="info"?e.infoIcon:t(O)==="loading"?e.loadingIcon:null);var ee=Ab();let ze;nt(ee,"tabindex",0),ee.__pointermove=te=>{if(!N||!t(P)||(window.getSelection()?.toString().length??-1)>0)return;const re=te.clientY-N.y,le=te.clientX-N.x,ve=e.swipeDirections??function(ce){const[ge,de]=ce.split("-"),we=[];return ge&&we.push(ge),de&&we.push(de),we}(e.position);!t(E)&&(Math.abs(le)>1||Math.abs(re)>1)&&X(E,Math.abs(le)>Math.abs(re)?"x":"y",!0);let $e={x:0,y:0};if(t(E)==="y"){if(ve.includes("top")||ve.includes("bottom"))if(ve.includes("top")&&re<0||ve.includes("bottom")&&re>0)$e.y=re;else{const ce=re*ei(re);$e.y=Math.abs(ce)<Math.abs(re)?ce:re}}else if(t(E)==="x"&&(ve.includes("left")||ve.includes("right")))if(ve.includes("left")&&le<0||ve.includes("right")&&le>0)$e.x=le;else{const ce=le*ei(le);$e.x=Math.abs(ce)<Math.abs(le)?ce:le}(Math.abs($e.x)>0||Math.abs($e.y)>0)&&X(g,!0),t(p)?.style.setProperty("--swipe-amount-x",`${$e.x}px`),t(p)?.style.setProperty("--swipe-amount-y",`${$e.y}px`)},ee.__pointerup=()=>{if(t(f)||!t(P))return;N=null;const te=Number(t(p)?.style.getPropertyValue("--swipe-amount-x").replace("px","")||0),re=Number(t(p)?.style.getPropertyValue("--swipe-amount-y").replace("px","")||0),le=new Date().getTime()-0,ve=t(E)==="x"?te:re,$e=Math.abs(ve)/le;if(Math.abs(ve)>=db||$e>.11)return X(A,t(K),!0),e.toast.onDismiss?.(e.toast),t(E)==="x"?X(M,te>0?"right":"left",!0):X(M,re>0?"down":"up",!0),J(),void X(f,!0);t(p)?.style.setProperty("--swipe-amount-x","0px"),t(p)?.style.setProperty("--swipe-amount-y","0px"),X(g,!1),X(y,!1),X(E,null)},ee.__pointerdown=te=>{if(t(q))return;X(A,t(K),!0);const re=te.target;re.setPointerCapture(te.pointerId),re.tagName!=="BUTTON"&&(X(y,!0),N={x:te.clientX,y:te.clientY})};var Ie=b(ee),Ee=te=>{var re=mb();re.__click=[pb,q,P,J,e];var le=b(re);st(le,()=>e.closeIcon??wt),he(ve=>{nt(re,"aria-label",e.closeButtonAriaLabel),nt(re,"data-disabled",t(q)),ft(re,1,ve)},[()=>Dn(os(t(L)?.closeButton,e.toast?.classes?.closeButton))]),r(te,re)};k(Ie,te=>{t(j)&&!e.toast.component&&t(O)!=="loading"&&e.closeIcon!==null&&te(Ee)});var _e=$(Ie,2),pe=te=>{const re=d(()=>e.toast.component);var le=B(),ve=w(le);Ae(ve,()=>t(re),($e,ce)=>{ce($e,Fn(()=>e.toast.componentProps,{closeToast:J}))}),r(te,le)},se=te=>{var re=kb(),le=w(re),ve=ke=>{var Re=fb(),xe=b(Re),ae=Se=>{var Fe=B(),Ge=w(Fe),ot=Qe=>{var Ye=B(),bt=w(Ye);Ae(bt,()=>e.toast.icon,(Ue,lt)=>{lt(Ue,{})}),r(Qe,Ye)},Ke=Qe=>{n(Qe)};k(Ge,Qe=>{e.toast.icon?Qe(ot):Qe(Ke,!1)}),r(Se,Fe)};k(xe,Se=>{(e.toast.promise||t(O)==="loading")&&Se(ae)});var Pe=$(xe,2),Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Qe=>{var Ye=B(),bt=w(Ye);Ae(bt,()=>e.toast.icon,(Ue,lt)=>{lt(Ue,{})}),r(Qe,Ye)},Ke=Qe=>{var Ye=B(),bt=w(Ye),Ue=ct=>{var oe=B(),Ne=w(oe);st(Ne,()=>e.successIcon??wt),r(ct,oe)},lt=ct=>{var oe=B(),Ne=w(oe),Ve=et=>{var at=B(),$t=w(at);st($t,()=>e.errorIcon??wt),r(et,at)},Xe=et=>{var at=B(),$t=w(at),Wt=Dt=>{var Gt=B(),dt=w(Gt);st(dt,()=>e.warningIcon??wt),r(Dt,Gt)},Mt=Dt=>{var Gt=B(),dt=w(Gt),tt=pt=>{var vt=B(),zt=w(vt);st(zt,()=>e.infoIcon??wt),r(pt,vt)};k(dt,pt=>{t(O)==="info"&&pt(tt)},!0),r(Dt,Gt)};k($t,Dt=>{t(O)==="warning"?Dt(Wt):Dt(Mt,!1)},!0),r(et,at)};k(Ne,et=>{t(O)==="error"?et(Ve):et(Xe,!1)},!0),r(ct,oe)};k(bt,ct=>{t(O)==="success"?ct(Ue):ct(lt,!1)},!0),r(Qe,Ye)};k(Ge,Qe=>{e.toast.icon?Qe(ot):Qe(Ke,!1)}),r(Se,Fe)};k(Pe,Se=>{e.toast.type!=="loading"&&Se(Ce)}),he(Se=>ft(Re,1,Se),[()=>Dn(os(t(L)?.icon,e.toast?.classes?.icon))]),r(ke,Re)};k(le,ke=>{(t(O)||e.toast.icon||e.toast.promise)&&e.toast.icon!==null&&(t(ye)!==null||e.toast.icon)&&ke(ve)});var $e=$(le,2),ce=b($e),ge=b(ce),de=ke=>{var Re=B(),xe=w(Re),ae=Ce=>{const Se=d(()=>e.toast.title);var Fe=B(),Ge=w(Fe);Ae(Ge,()=>t(Se),(ot,Ke)=>{Ke(ot,Fn(()=>e.toast.componentProps))}),r(Ce,Fe)},Pe=Ce=>{var Se=ie();he(()=>He(Se,e.toast.title)),r(Ce,Se)};k(xe,Ce=>{typeof e.toast.title!="string"?Ce(ae):Ce(Pe,!1)}),r(ke,Re)};k(ge,ke=>{e.toast.title&&ke(de)});var we=$(ce,2),Be=ke=>{var Re=_b(),xe=b(Re),ae=Ce=>{const Se=d(()=>e.toast.description);var Fe=B(),Ge=w(Fe);Ae(Ge,()=>t(Se),(ot,Ke)=>{Ke(ot,Fn(()=>e.toast.componentProps))}),r(Ce,Fe)},Pe=Ce=>{var Se=ie();he(()=>He(Se,e.toast.description)),r(Ce,Se)};k(xe,Ce=>{typeof e.toast.description!="string"?Ce(ae):Ce(Pe,!1)}),he(Ce=>ft(Re,1,Ce),[()=>Dn(os(i(),t(D),t(L)?.description,e.toast.classes?.description))]),r(ke,Re)};k(we,ke=>{e.toast.description&&ke(Be)});var De=$($e,2),Le=ke=>{var Re=B(),xe=w(Re),ae=Ce=>{var Se=B(),Fe=w(Se);Ae(Fe,()=>e.toast.cancel,(Ge,ot)=>{ot(Ge,{})}),r(Ce,Se)},Pe=Ce=>{var Se=B(),Fe=w(Se),Ge=ot=>{var Ke=bb();Ke.__click=[yb,e,P,J];var Qe=b(Ke);he(Ye=>{jn(Ke,e.toast.cancelButtonStyle??o()),ft(Ke,1,Ye),He(Qe,e.toast.cancel.label)},[()=>Dn(os(t(L)?.cancelButton,e.toast?.classes?.cancelButton))]),r(ot,Ke)};k(Fe,ot=>{Br(e.toast.cancel)&&ot(Ge)},!0),r(Ce,Se)};k(xe,Ce=>{typeof e.toast.cancel=="function"?Ce(ae):Ce(Pe,!1)}),r(ke,Re)};k(De,ke=>{e.toast.cancel&&ke(Le)});var Me=$(De,2),We=ke=>{var Re=B(),xe=w(Re),ae=Ce=>{var Se=B(),Fe=w(Se);Ae(Fe,()=>e.toast.action,(Ge,ot)=>{ot(Ge,{})}),r(Ce,Se)},Pe=Ce=>{var Se=B(),Fe=w(Se),Ge=ot=>{var Ke=wb();Ke.__click=[$b,e,J];var Qe=b(Ke);he(Ye=>{jn(Ke,e.toast.actionButtonStyle??a()),ft(Ke,1,Ye),He(Qe,e.toast.action.label)},[()=>Dn(os(t(L)?.actionButton,e.toast?.classes?.actionButton))]),r(ot,Ke)};k(Fe,ot=>{Br(e.toast.action)&&ot(Ge)},!0),r(Ce,Se)};k(xe,Ce=>{typeof e.toast.action=="function"?Ce(ae):Ce(Pe,!1)}),r(ke,Re)};k(Me,ke=>{e.toast.action&&ke(We)}),he(ke=>ft(ce,1,ke),[()=>Dn(os(t(L)?.title,e.toast?.classes?.title))]),r(te,re)};k(_e,te=>{e.toast.component?te(pe):te(se,!1)}),Pt(ee,te=>X(p,te),()=>t(p)),he((te,re,le,ve)=>{ft(ee,1,te),nt(ee,"data-rich-colors",e.toast.richColors??c()),nt(ee,"data-styled",!(e.toast.component||e.toast.unstyled||l())),nt(ee,"data-mounted",t(v)),nt(ee,"data-promise",re),nt(ee,"data-swiped",t(g)),nt(ee,"data-removed",t(m)),nt(ee,"data-visible",t(T)),nt(ee,"data-y-position",t(W)[0]),nt(ee,"data-x-position",t(W)[1]),nt(ee,"data-index",e.index),nt(ee,"data-front",t(I)),nt(ee,"data-swiping",t(y)),nt(ee,"data-dismissable",t(P)),nt(ee,"data-type",t(O)),nt(ee,"data-invert",t(z)),nt(ee,"data-swipe-out",t(f)),nt(ee,"data-swipe-direction",t(M)),nt(ee,"data-expanded",le),ze=jn(ee,`${e.style} ${e.toast.style}`,ze,ve)},[()=>Dn(os(e.class,t(H),t(L)?.toast,e.toast?.classes?.toast,t(L)?.[t(O)],e.toast?.classes?.[t(O)])),()=>!!e.toast.promise,()=>!!(e.expanded||e.expandByDefault&&t(v)),()=>({"--index":e.index,"--toasts-before":e.index,"--z-index":Kt.toasts.length-e.index,"--offset":`${t(m)?t(A):t(K)}px`,"--initial-height":e.expandByDefault?"auto":`${t(C)}px`})]),Ht("dragend",ee,()=>{X(y,!1),X(E,null),N=null}),r(s,ee),fe()}Nn(["pointermove","pointerup","pointerdown","click"]);var Cb=Cs('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>'),Tb=Cs('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>'),Sb=Cs('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>'),Ib=Cs('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>'),Rb=Cs('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');const xb=3,ti="24px",ni="16px",Mb=4e3,Db=356,Ob=14,lo="dark",co="light";var Nb=h("<ol></ol>"),zb=h('<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-4kcbrn"><!></section>');function Lb(s,e){me(e,!0);let n=S(e,"invert",3,!1),o=S(e,"position",3,"bottom-right"),a=S(e,"hotkey",19,()=>["altKey","KeyT"]),i=S(e,"expand",3,!1),l=S(e,"closeButton",3,!1),c=S(e,"offset",3,ti),u=S(e,"mobileOffset",3,ni),v=S(e,"theme",3,"light"),m=S(e,"richColors",3,!1),y=S(e,"duration",3,Mb),f=S(e,"visibleToasts",3,xb),g=S(e,"toastOptions",19,()=>({})),A=S(e,"dir",7,"auto"),C=S(e,"gap",3,Ob),_=S(e,"containerAriaLabel",3,"Notifications"),p=S(e,"closeButtonAriaLabel",3,"Close toast"),E=hs(e,["$$slots","$$events","$$legacy","invert","position","hotkey","expand","closeButton","offset","mobileOffset","theme","richColors","duration","visibleToasts","toastOptions","dir","gap","loadingIcon","successIcon","errorIcon","warningIcon","closeIcon","infoIcon","containerAriaLabel","class","closeButtonAriaLabel","onblur","onfocus","onmouseenter","onmousemove","onmouseleave","ondragend","onpointerdown","onpointerup"]);function M(){if(A()!=="auto")return A();if(typeof window>"u"||typeof document>"u")return"ltr";const K=document.documentElement.getAttribute("dir");return K!=="auto"&&K?(nn(()=>A(K)),K):(nn(()=>A(window.getComputedStyle(document.documentElement).direction??"ltr")),A())}const I=d(()=>Array.from(new Set([o(),...Kt.toasts.filter(K=>K.position).map(K=>K.position)].filter(Boolean))));let T=Oe(!1),O=Oe(!1),P=Oe(Wn((H=v())!=="system"?H:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?lo:co));var H;let D=Oe(void 0),U=Oe(null),j=Oe(!1);const x=d(()=>a().join("+").replace(/Key/g,"").replace(/Digit/g,""));rt(()=>{Kt.toasts.length<=1&&X(T,!1)}),rt(()=>{const K=Kt.toasts.filter(J=>J.dismiss&&!J.delete);if(K.length>0){const J=Kt.toasts.map(ue=>K.find(ne=>ne.id===ue.id)?{...ue,delete:!0}:ue);Kt.toasts=J}}),rt(()=>()=>{t(D)&&t(U)&&(t(U).focus({preventScroll:!0}),X(U,null),X(j,!1))}),Jt(()=>(Kt.reset(),qs(document,"keydown",K=>{a().every(ue=>K[ue]||K.code===ue)&&(X(T,!0),t(D)?.focus()),K.code!=="Escape"||document.activeElement!==t(D)&&!t(D)?.contains(document.activeElement)||X(T,!1)}))),rt(()=>{if(v()!=="system"&&X(P,v()),typeof window<"u"){v()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X(P,lo):X(P,co));const K=window.matchMedia("(prefers-color-scheme: dark)"),J=({matches:ue})=>{X(P,ue?lo:co,!0)};"addEventListener"in K?K.addEventListener("change",J):K.addListener(J)}});const N=K=>{e.onblur?.(K),t(j)&&!K.currentTarget.contains(K.relatedTarget)&&(X(j,!1),t(U)&&(t(U).focus({preventScroll:!0}),X(U,null)))},W=K=>{e.onfocus?.(K),K.target instanceof HTMLElement&&K.target.dataset.dismissable==="false"||t(j)||(X(j,!0),X(U,K.relatedTarget,!0))},F=K=>{e.onpointerdown?.(K),K.target instanceof HTMLElement&&K.target.dataset.dismissable==="false"||X(O,!0)},G=K=>{e.onmouseenter?.(K),X(T,!0)},z=K=>{e.onmouseleave?.(K),t(O)||X(T,!1)},q=K=>{e.onmousemove?.(K),X(T,!0)},L=K=>{e.ondragend?.(K),X(T,!1)},R=K=>{e.onpointerup?.(K),X(O,!1)};ab.set(new ib);var Y=zb();nt(Y,"tabindex",-1);var Z=b(Y),Q=K=>{var J=B(),ue=w(J);Vt(ue,18,()=>t(I),ne=>ne,(ne,be,ye,ee)=>{const ze=d(()=>{const[_e,pe]=be.split("-");return{y:_e,x:pe}}),Ie=d(()=>function(_e,pe){const se={};return[_e,pe].forEach((te,re)=>{const le=re===1,ve=le?"--mobile-offset":"--offset",$e=le?ni:ti;function ce(ge){["top","right","bottom","left"].forEach(de=>{se[`${ve}-${de}`]=typeof ge=="number"?`${ge}px`:ge})}typeof te=="number"||typeof te=="string"?ce(te):typeof te=="object"?["top","right","bottom","left"].forEach(ge=>{const de=te[ge];se[`${ve}-${ge}`]=de===void 0?$e:typeof de=="number"?`${de}px`:de}):ce($e)}),se}(c(),u()));var Ee=Nb();ms(Ee,(_e,pe)=>({tabindex:-1,dir:_e,class:e.class,"data-sonner-toaster":!0,"data-sonner-theme":t(P),"data-y-position":t(ze).y,"data-x-position":t(ze).x,style:e.style,onblur:N,onfocus:W,onmouseenter:G,onmousemove:q,onmouseleave:z,ondragend:L,onpointerdown:F,onpointerup:R,...E,[Sc]:pe}),[M,()=>({"--front-toast-height":`${Kt.heights[0]?.height}px`,"--width":`${Db}px`,"--gap":`${C()}px`,"--offset-top":t(Ie)["--offset-top"],"--offset-right":t(Ie)["--offset-right"],"--offset-bottom":t(Ie)["--offset-bottom"],"--offset-left":t(Ie)["--offset-left"],"--mobile-offset-top":t(Ie)["--mobile-offset-top"],"--mobile-offset-right":t(Ie)["--mobile-offset-right"],"--mobile-offset-bottom":t(Ie)["--mobile-offset-bottom"],"--mobile-offset-left":t(Ie)["--mobile-offset-left"]})],void 0,"svelte-4kcbrn"),Vt(Ee,23,()=>Kt.toasts.filter(_e=>!_e.position&&t(ye)===0||_e.position===be),_e=>_e.id,(_e,pe,se,te)=>{{const re=Re=>{var xe=B(),ae=w(xe),Pe=Se=>{var Fe=B(),Ge=w(Fe);st(Ge,()=>e.successIcon??wt),r(Se,Fe)},Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{(function(Qe){var Ye=Cb();r(Qe,Ye)})(Ke)};k(Ge,Ke=>{e.successIcon!==null&&Ke(ot)},!0),r(Se,Fe)};k(ae,Se=>{e.successIcon?Se(Pe):Se(Ce,!1)}),r(Re,xe)},le=Re=>{var xe=B(),ae=w(xe),Pe=Se=>{var Fe=B(),Ge=w(Fe);st(Ge,()=>e.errorIcon??wt),r(Se,Fe)},Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{(function(Qe){var Ye=Tb();r(Qe,Ye)})(Ke)};k(Ge,Ke=>{e.errorIcon!==null&&Ke(ot)},!0),r(Se,Fe)};k(ae,Se=>{e.errorIcon?Se(Pe):Se(Ce,!1)}),r(Re,xe)},ve=Re=>{var xe=B(),ae=w(xe),Pe=Se=>{var Fe=B(),Ge=w(Fe);st(Ge,()=>e.warningIcon??wt),r(Se,Fe)},Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{(function(Qe){var Ye=Sb();r(Qe,Ye)})(Ke)};k(Ge,Ke=>{e.warningIcon!==null&&Ke(ot)},!0),r(Se,Fe)};k(ae,Se=>{e.warningIcon?Se(Pe):Se(Ce,!1)}),r(Re,xe)},$e=Re=>{var xe=B(),ae=w(xe),Pe=Se=>{var Fe=B(),Ge=w(Fe);st(Ge,()=>e.infoIcon??wt),r(Se,Fe)},Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{(function(Qe){var Ye=Ib();r(Qe,Ye)})(Ke)};k(Ge,Ke=>{e.infoIcon!==null&&Ke(ot)},!0),r(Se,Fe)};k(ae,Se=>{e.infoIcon?Se(Pe):Se(Ce,!1)}),r(Re,xe)},ce=Re=>{var xe=B(),ae=w(xe),Pe=Se=>{var Fe=B(),Ge=w(Fe);st(Ge,()=>e.closeIcon??wt),r(Se,Fe)},Ce=Se=>{var Fe=B(),Ge=w(Fe),ot=Ke=>{(function(Qe){var Ye=Rb();r(Qe,Ye)})(Ke)};k(Ge,Ke=>{e.closeIcon!==null&&Ke(ot)},!0),r(Se,Fe)};k(ae,Se=>{e.closeIcon?Se(Pe):Se(Ce,!1)}),r(Re,xe)};let ge=d(()=>g()?.duration??y()),de=d(()=>g()?.class??""),we=d(()=>g()?.descriptionClass||""),Be=d(()=>g()?.style??""),De=d(()=>g().classes||{}),Le=d(()=>g().unstyled??!1),Me=d(()=>g()?.cancelButtonStyle??""),We=d(()=>g()?.actionButtonStyle??""),ke=d(()=>g()?.closeButtonAriaLabel??p());Eb(_e,{get index(){return t(se)},get toast(){return t(pe)},get defaultRichColors(){return m()},get duration(){return t(ge)},get class(){return t(de)},get descriptionClass(){return t(we)},get invert(){return n()},get visibleToasts(){return f()},get closeButton(){return l()},get interacting(){return t(O)},get position(){return be},get style(){return t(Be)},get classes(){return t(De)},get unstyled(){return t(Le)},get cancelButtonStyle(){return t(Me)},get actionButtonStyle(){return t(We)},get closeButtonAriaLabel(){return t(ke)},get expandByDefault(){return i()},get expanded(){return t(T)},get loadingIcon(){return e.loadingIcon},successIcon:re,errorIcon:le,warningIcon:ve,infoIcon:$e,closeIcon:ce,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}}),Pt(Ee,_e=>X(D,_e),()=>t(D)),he(()=>Ee.dir=Ee.dir),r(ne,Ee)}),r(K,J)};k(Z,K=>{Kt.toasts.length>0&&K(Q)}),he(()=>nt(Y,"aria-label",`${_()??""} ${t(x)??""}`)),r(s,Y),fe()}var Pb=h('<div class="c-toast-content__actions svelte-wtxgly"></div>'),Bb=h('<div class="c-toast-content__icon svelte-wtxgly"><!></div>'),Fb=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),qb=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hb=h('<div class="c-toast-content__close svelte-wtxgly"><!></div>'),Wb=h('<div><div><div class="c-toast-content__main svelte-wtxgly"><!> <div class="c-toast-content__text svelte-wtxgly"><!> <!></div> <!> <!></div> <!></div></div>');function ic(s,e){me(e,!0);const n=x=>{var N=B(),W=w(N),F=G=>{var z=Pb();Vt(z,21,c,$n,(q,L)=>{xt(q,{size:1,variant:"soft",get color(){return t(m)},get onclick(){return t(L).onClick},children:(R,Y)=>{var Z=ie();he(()=>He(Z,t(L).label)),r(R,Z)},$$slots:{default:!0}})}),r(G,z)};k(W,G=>{c().length>0&&G(F)}),r(x,N)};let o=S(e,"surface",3,"web"),a=S(e,"textLayout",3,"stacked"),i=S(e,"actionPosition",3,"right"),l=S(e,"variant",3,"default"),c=S(e,"actions",19,()=>[]);function u(){e.closeToast?.()}const v={default:"neutral",warning:"neutral",success:"accent",error:"error"},m=d(()=>v[l()]);let y=d(()=>Ao(v[l()]));var f=Wb();ms(f,()=>({class:"c-toast-content__container",...t(y)}),void 0,void 0,"svelte-wtxgly");var g=b(f),A=b(g),C=b(A),_=x=>{var N=Bb(),W=b(N),F=z=>{Te(z,{get name(){return e.icon}})},G=z=>{var q=B(),L=w(q);st(L,()=>e.icon),r(z,q)};k(W,z=>{typeof e.icon=="string"?z(F):z(G,!1)}),r(x,N)};k(C,x=>{e.icon&&x(_)});var p=$(C,2),E=b(p),M=x=>{var N=Fb(),W=w(N);Us(W,()=>({"--text-color":"var(--ds-color-a11)"})),qe(W.lastChild,{size:1,get color(){return t(m)},block:!0,children:(F,G)=>{var z=B(),q=w(z),L=Y=>{var Z=ie();he(()=>He(Z,e.name)),r(Y,Z)},R=Y=>{var Z=B(),Q=w(Z);st(Q,()=>e.name),r(Y,Z)};k(q,Y=>{typeof e.name=="string"?Y(L):Y(R,!1)}),r(F,z)},$$slots:{default:!0}}),r(x,N)};k(E,x=>{e.name&&x(M)});var I=$(E,2),T=x=>{var N=qb(),W=w(N);Us(W,()=>({"--text-color":"var(--ds-color-a11)"})),qe(W.lastChild,{size:1,get color(){return t(m)},block:!0,children:(F,G)=>{var z=B(),q=w(z),L=Y=>{var Z=ie();he(()=>He(Z,e.description)),r(Y,Z)},R=Y=>{var Z=B(),Q=w(Z);st(Q,()=>e.description),r(Y,Z)};k(q,Y=>{typeof e.description=="string"?Y(L):Y(R,!1)}),r(F,z)},$$slots:{default:!0}}),r(x,N)};k(I,x=>{e.description&&x(T)});var O=$(p,2),P=x=>{n(x)};k(O,x=>{i()==="right"&&x(P)});var H=$(O,2),D=x=>{var N=Hb(),W=b(N);Nt(W,{size:1,variant:"ghost",get color(){return t(m)},onclick:u,children:(F,G)=>{Te(F,{name:"x"})},$$slots:{default:!0}}),r(x,N)};k(H,x=>{e.closeButton&&x(D)});var U=$(A,2),j=x=>{n(x)};k(U,x=>{i()==="bottom"&&x(j)}),he(()=>ft(g,1,Dn(["c-toast-content",`c-toast-content--variant-${l()}`,`c-toast-content--surface-${o()}`,`c-toast-content--layout-${a()}`,`c-toast-content--actions-${i()}`]),"svelte-wtxgly")),r(s,f),fe()}function Ps(s){const{position:e,dismissable:n,onDismiss:o,onAutoClose:a,...i}=s;return Ds.custom(ic,{componentProps:i,duration:1/0,position:e,dismissable:n??!0,onDismiss:o,onAutoClose:a})}function si(s){return Ps({...s,variant:"success"})}function ri(s){return Ps({...s,variant:"error"})}function oi(s){return Ps({...s,variant:s.variant??"default",closeButton:!1,dismissable:!1})}const Rs={show:Ps,success:si,error:ri,warning:function(s){return Ps({...s,variant:"warning"})},info:function(s){return Ps({...s,variant:"default"})},loading:oi,promise:function(s,e){const n=oi(e.loading);return s.then(o=>(Ds.dismiss(n),si(typeof e.success=="function"?e.success(o):e.success),o)).catch(o=>{Ds.dismiss(n);const a=o instanceof Error?o:new Error(String(o));throw ri(typeof e.error=="function"?e.error(a):e.error),o}),s},dismiss:function(s){Ds.dismiss(s)},dismissAll:function(){Ds.dismiss()},update:function(s,e){const{position:n,dismissable:o,onDismiss:a,onAutoClose:i,...l}=e;Ds.custom(ic,{id:s,componentProps:l,duration:e.duration??1/0,position:n,dismissable:o??!0,onDismiss:a,onAutoClose:i})}},vs={Root:function(s,e){const n=S(e,"offset",3,"0px"),o=S(e,"position",3,"bottom-left"),a=S(e,"gap",3,0);Lb(s,{class:"toaster-augment",get offset(){return n()},get mobileOffset(){return n()},get position(){return o()},get gap(){return a()}})},Toast:function(s,e){let n;me(e,!0);const o={get toastId(){return n},dismiss(){n!==void 0&&(Rs.dismiss(n),n=void 0)},update(a){n!==void 0&&Rs.dismiss(n),n=Rs.show(a)}};rt(()=>(e.ref?.(o),()=>{e.ref?.(null)})),rt(()=>{n!==void 0&&(Rs.dismiss(n),n=void 0),e.options&&(n=Rs.show(e.options))}),fs(()=>{n!==void 0&&(Rs.dismiss(n),n=void 0)}),fe()}};var Gb=h('<div class="c-remote-agent-deletion-warning svelte-1u316r5">This remote agent will be deleted <!> due to inactivity.</div>');function Ub(s,e){me(e,!0);const[n,o]=je(),a=g=>{var A=Gb(),C=$(b(A));it(C,{get content(){return t(u)},children:(_,p)=>{var E=ie();he(()=>He(E,t(v))),r(_,E)},$$slots:{default:!0}}),r(g,A)},i=kt(dn.key),l=d(()=>V(i,"$remoteAgentModel",n).currentAgent),c=d(()=>t(l)?Ui(new Date(t(l).expires_at),new Date):0),u=d(()=>t(l)?Rv(new Date(t(l).expires_at)):""),v=d(()=>t(c)===0?"today":t(c)<0?"soon":`in ${Hr(t(c),"day")}`),m=d(()=>({variant:"warning",description:a,icon:"circle-alert",closeButton:!0,duration:Number.POSITIVE_INFINITY,dismissable:!0}));var y=B(),f=w(y);Ae(f,()=>vs.Toast,(g,A)=>{A(g,{get options(){return t(m)}})}),r(s,y),fe(),o()}function Vb(s,e){me(e,!0);let n=S(e,"level",3,"info"),o=S(e,"actionItems",19,()=>[]);const a=Ct();function i(y){const f=e.notificationId;a(Mu(f)),a(ir({type:jt.dismissBannerNotification,data:{notificationId:f,actionItemTitle:y}}))}const l={info:"default",warning:"warning",error:"error"};let c=Oe(void 0),u=Oe(void 0);rt(()=>{t(c)!==void 0&&e.notificationId===t(c)||(X(c,e.notificationId,!0),X(u,{variant:l[n()],description:e.message,icon:"info",closeButton:!0,actionPosition:o().length>1?"bottom":"right",duration:Number.POSITIVE_INFINITY,actions:o().map(y=>({label:y.title,onClick:()=>function(f){f.url&&a(ir({type:jt.augmentLink,data:f.url})),i(f.title)}(y)})),onDismiss:()=>i()},!0))});var v=B(),m=w(v);Ae(m,()=>vs.Toast,(y,f)=>{f(y,{get options(){return t(u)}})}),r(s,v),fe()}const lc=Gn(s=>s.notifications);Bi(lc.select);const jb=Fi(lc.select);function Kb(s,e){const n=function(o){switch(o){case"chat":return Is.chat;case"localAgent":return Is.agent;case"remoteAgent":return Is.remoteAgent;default:return Is.allFeatures}}(e);if(s==null)return{shouldShow:!1,message:null,isError:!1,canDismiss:!0};if(s.featureGatingInfo){const o=function(v,m=Is.allFeatures){const y={feature_types:[m],state:ha.enabled,disabled_reason:0,end_date:void 0,display_info:void 0};if(!v?.feature_controls)return y;const f=v.feature_controls.find(A=>A.feature_types?.includes(m));if(f)return f;const g=v.feature_controls.find(A=>A.feature_types?.includes(Is.allFeatures));return g||y}(s.featureGatingInfo,n),a=o.state===ha.disabled,i=o.display_info?.banner,l=i?.message||null,c=i?.button?.title,u=i?.button?.url;return{shouldShow:!!l,message:l,isError:a,canDismiss:!a,buttonTitle:c,buttonUrl:u}}return{shouldShow:!1,message:null,isError:!1,canDismiss:!0,buttonTitle:void 0,buttonUrl:void 0}}function Yb(s,e){me(e,!0);const n=()=>V(l,"$clientAnnouncement",o),[o,a]=je(),i=Ct();let l=Du(),c=Ou(),u=d(()=>n()?.length&&!V(c,"$displayedAnnouncements",o).includes(n()));const v=d(()=>t(u)?{variant:"default",description:n(),icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,onDismiss:()=>{i(Nu(n())),e.onDismiss()}}:void 0);var m=B(),y=w(m);Ae(y,()=>vs.Toast,(f,g)=>{g(f,{get options(){return t(v)}})}),r(s,m),fe(),a()}var Qn=(s=>(s.disableCopilot="ShouldDisableCopilot",s.disableCodeium="ShouldDisableCodeium",s.workspacePopulated="WorkspacePopulated",s.workspaceNotPopulated="WorkspaceNotPopulated",s.workspaceNotSelected="WorkspaceNotSelected",s.signInRequired="UserShouldSignIn",s.allActionsComplete="AllActionsComplete",s.syncingPermissionNeeded="SyncingPermissionNeeded",s.workspaceTooLarge="workspaceTooLarge",s.uploadingHomeDir="uploadingHomeDir",s))(Qn||{});function cc(s,e){me(e,!0);const[n,o]=je(),a=zu("maxTrackableFileCount"),i=Ct();function l(m){i(ir({type:jt.mainPanelPerformAction,data:m}))}const c=d(()=>e.action===Qn.disableCopilot?{variant:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actionPosition:"bottom",actions:[{label:"Disable Github Copilot",onClick:()=>{l("disable-github-copilot")}}]}:e.action===Qn.disableCodeium?{variant:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actionPosition:"bottom",actions:[{label:"Disable Codeium",onClick:()=>{l("disable-codeium")}}]}:e.action===Qn.workspaceTooLarge?{variant:"warning",description:`The workspace you have opened exceeds Augment's ${V(a,"$maxTrackableFileCount",n)} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,icon:"info",closeButton:!1,dismissable:!1,duration:Number.POSITIVE_INFINITY}:e.action===Qn.uploadingHomeDir?{variant:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace.",icon:"info",closeButton:!1,dismissable:!1,duration:Number.POSITIVE_INFINITY}:void 0);var u=B(),v=w(u);Ae(v,()=>vs.Toast,(m,y)=>{y(m,{get options(){return t(c)}})}),r(s,u),fe(),o()}const Xb=Gn(s=>s.mainPanelActions.list),Jb=Gn(s=>{const{list:e,currentIndex:n}=s.mainPanelActions;return e[n]});var Qb=h("<!> <!> <!> <!> <!> <!>  <!>",1);function Zb(s,e){me(e,!0);const n=()=>V(I,"$subscriptionInfo",a),o=()=>V(p,"$currentAction",a),[a,i]=je(),l=jb(),c=kt(dn.key),u=kt(gs.key).chatModeType,v=Lu(),m=ln(),y=Ot("isVscodeVersionOutdated"),f=pa("remoteAgentsResumeHintAvailableTtlDays"),g=pa("conversationHistorySizeThresholdBytes"),A=new eb(ys().store,{isVscodeVersionOutdated:y,remoteAgentsResumeHintAvailableTtlDays:f,conversationHistorySizeThresholdBytes:g},c),{showVSCodeVersionWarning:C,showRemoteAgentDeletionWarning:_}=A,p=Jb();function E(){(function(){try{const Q={hideForSession:!0,timestamp:new Date().toISOString()};sessionStorage.setItem(ac,JSON.stringify(Q))}catch(Q){console.error("Failed to save VSCode version warning preference to sessionStorage:",Q)}})()}const M=Ct(),I=Pu(),T=Bu(),O=d(()=>Kb(n(),V(u,"$chatModeType",a))),P=ts(m),H=cr(m),D=d(()=>V(H,"$draftExchange",a)?.exchange?.rich_text_json_repr);var U=Qb(),j=w(U);(function(Q,K){me(K,!0);const J=d(()=>wi(K.richTextContent)),ue=d(()=>t(J).hasWarning),ne=d(()=>t(J).warningMessage),be=d(()=>t(ue)?{variant:"warning",description:t(ne),icon:"circle-alert",closeButton:!1,duration:Number.POSITIVE_INFINITY,dismissable:!1}:void 0);var ye=B(),ee=w(ye);Ae(ee,()=>vs.Toast,(ze,Ie)=>{Ie(ze,{get options(){return t(be)}})}),r(Q,ye),fe()})(j,{get richTextContent(){return t(D)}});var x=$(j,2),N=Q=>{Yb(Q,{onDismiss:()=>M(Fu())})};k(x,Q=>{V(P,"$isAgentic",a)&&Q(N)});var W=$(x,2),F=Q=>{cc(Q,{get action(){return o()}})};k(W,Q=>{o()&&Q(F)});var G=$(W,2),z=Q=>{{let K=d(()=>t(O).message??""),J=d(()=>n()?.usageBalanceDepleted||!1),ue=d(()=>n()?.type===Hu.inactive);(function(ne,be){me(be,!0);let ye=S(be,"isError",3,!1),ee=S(be,"buttonTitle",3,""),ze=S(be,"buttonUrl",3,""),Ie=S(be,"isInactive",3,!1),Ee=S(be,"usageBalanceDepleted",3,!1);const _e=Ct();function pe(){_e(ir({type:jt.augmentLink,data:ze()}))}const se=d(()=>({variant:ye()?"error":"warning",description:be.warningMessage,icon:"info",closeButton:!Ie()&&!Ee(),duration:Number.POSITIVE_INFINITY,actions:ze()?[{label:ee(),onClick:pe}]:[],onDismiss:be.onDismiss}));var te=B(),re=w(te);Ae(re,()=>vs.Toast,(le,ve)=>{ve(le,{get options(){return t(se)}})}),r(ne,te),fe()})(Q,{get warningMessage(){return t(K)},get isError(){return t(O).isError},get buttonTitle(){return t(O).buttonTitle},get buttonUrl(){return t(O).buttonUrl},get usageBalanceDepleted(){return t(J)},get isInactive(){return t(ue)},onDismiss:()=>M(qu())})}};k(G,Q=>{t(O).shouldShow&&!V(T,"$isInfoDismissed",a)&&Q(z)});var q=$(G,2);Vt(q,1,()=>V(l,"$notifications",a),Q=>Q.notificationId,(Q,K)=>{Vb(Q,{get notificationId(){return t(K).notificationId},get message(){return t(K).message},get level(){return t(K).level},get actionItems(){return t(K).actionItems}})});var L=$(q,2),R=Q=>{(function(K,J){me(J,!0);let ue=null;function ne(){ue?.dismiss(),J.onHideForSession()}const be=d(()=>({variant:"warning",description:`VS Code ${J.minVersion}+ required. Some features may not work.`,icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actions:[{label:"Hide for this session",onClick:ne}]}));var ye=B(),ee=w(ye);Ae(ee,()=>vs.Toast,(ze,Ie)=>{Ie(ze,{get options(){return t(be)},ref:Ee=>ue=Ee})}),r(K,ye),fe()})(Q,{onHideForSession:E,get minVersion(){return V(v,"$vsCodeMinVersion",a)}})};k(L,Q=>{V(C,"$showVSCodeVersionWarning",a)&&Q(R)});var Y=$(L,2),Z=Q=>{Ub(Q,{})};k(Y,Q=>{V(_,"$showRemoteAgentDeletionWarning",a)&&Q(Z)}),r(s,U),fe(),i()}class e${handleMessageFromExtension(e){return e.data?.type===jt.hostWindowFocusChange&&(Wu(e.data.data),!0)}}const t$=(s,e)=>{s.update(n=>n?.threadCount===e?n:{...n,threadCount:e})},n$=(s,e,n)=>{e&&s.update(o=>{if(!o)return n;const a=new Set(o.activeWebviews);e.isActive?a.add("chat"):a.delete("chat");const i={...o,activeWebviews:Array.from(a),agentOverviews:e.agentOverviews,selectedAgentId:e.currentAgentId,pinnedAgents:e.pinnedAgents};return cl(i,o)?o:i})},s$=(s,e,n,o,a)=>{if(JSON.stringify(s)!==JSON.stringify(e.state)&&e){const{selectedAgentId:i,pinnedAgents:l}=e.state||{};i!==n.currentAgentId&&(o.showAugmentPanel(),n.setIsActive(!0),a.setToRemoteAgent(i),n.setCurrentAgent(i)),l&&JSON.stringify(l)!==JSON.stringify(n.pinnedAgents)&&n.setPinnedAgents(l)}};function r$(s,e){me(e,!0);const[n,o]=je(),a=new ol(e.msgBroker,{},ng,sg);e.msgBroker.registerConsumer(a);const i=Gu();rt(()=>{t$(a,V(i,"$conversationCount",n))}),fe(),o()}const o$=Gn(s=>s.slashCommands.activeCommandId);var a$=h('<span data-slash-commands=""></span>');const dc=Gn(s=>s.modals.collection),Yr=Bi(dc.select);Fi(dc.select),Gn(s=>{if(s.modals.currentModal)return Yr.select(s,s.modals.currentModal)});const i$=Gn((s,e)=>!!Yr.select(s,e)?.show);Gn((s,e)=>!i$.select(s,e));const uc="augment-modals-container";var l$=h('<dialog class="c-augment-full-size-overlay svelte-47x3ue"><div class="c-augment-full-size-overlay__content svelte-47x3ue"><!></div></dialog>'),c$=h("<!> <!> <!>",1);function d$(s,e){me(e,!0);const n=S(e,"open",3,!1),o=S(e,"target",3,uc),a=S(e,"animationDirection",3,"down"),i=d(()=>{switch(a()){case"up":return{x:0,y:-5};case"down":default:return{x:0,y:5};case"left":return{x:-5,y:0};case"right":return{x:5,y:0}}});let l=Oe(void 0),c=Oe(Wn(n()));function u(){X(c,!0)}async function v(){X(c,!1),e.onClose?.()}function m(){X(c,!t(c))}rt(()=>{n()?(u(),t(l)?.show()):t(l)?.close()}),Jt(()=>{n()&&t(l)&&!t(l).open&&t(l).show()}),Rn(oc,{open:u,close:v,toggle:m});var y={showModal:u,closeModal:v,toggleModal:m},f=B(),g=w(f),A=C=>{Do(C,{scope:"full-size-overlay",children:(_,p)=>{var E=c$(),M=w(E);(function(T,O){me(O,!0),rt(()=>{const P=ju();return xv(Ku(P))}),fe()})(0,{});var I=$(M,2);on(I,{name:"closeFullSizeOverlay",handler:v}),Es($(I,2),{get target(){return`#${o()??""}`},children:(T,O)=>{var P=l$(),H=b(P),D=b(H);st(D,()=>e.children??wt),Pt(P,U=>X(l,U),()=>t(l)),yn(P,(U,j)=>Kv?.(U,j),()=>({enabled:t(c),restoreFocusOnClose:!1})),Ht("close",P,v),tn(3,H,()=>ps,()=>({duration:200,...t(i)})),tn(1,P,()=>Aa,()=>({duration:100})),tn(2,P,()=>Aa,()=>({duration:200})),r(T,P)},$$slots:{default:!0}}),r(_,E)},$$slots:{default:!0}})};return k(g,C=>{t(c)&&C(A)}),r(s,f),fe(y)}function uo(s,e){me(e,!0);const n=()=>V(c,"$modal",o),[o,a]=je(),i=S(e,"animationDirection",3,"down"),l=S(e,"fullsize",3,!0),c=Yr(e.modalId),u=Ct();var v=B(),m=w(v),y=g=>{{let A=d(()=>n()?.show);d$(g,{get open(){return t(A)},get animationDirection(){return i()},onClose:()=>u(ma(e.modalId)),children:(C,_)=>{var p=B(),E=w(p);st(E,()=>e.children??wt),r(C,p)},$$slots:{default:!0}})}},f=g=>{{let A=d(()=>n()?.show);Yv(g,{get show(){return t(A)},oncancel:()=>u(ma(e.modalId)),children:(C,_)=>{var p=B(),E=w(p);st(E,()=>e.children??wt),r(C,p)},$$slots:{default:!0}})}};k(m,g=>{l()?g(y):g(f,!1)}),r(s,v),fe(),a()}var u$=h('<span class="c-deep-link-warning-modal__prompt svelte-1ci9u5t"> </span>'),v$=h('<div class="c-deep-link-warning-modal svelte-1ci9u5t"><div class="c-deep-link-warning-modal__title svelte-1ci9u5t"><!> <!></div> <div class="c-deep-link-warning-modal__body svelte-1ci9u5t"><!> <!></div> <div class="c-deep-link-warning-modal__actions svelte-1ci9u5t"><!> <!></div></div>');function g$(s,e){me(e,!0);const[n,o]=je(),a=ln();let i=d(()=>e.deepLinkWarning&&e.deepLinkWarning?.prompt||""),l=d(()=>e.deepLinkWarning?.mode==="agent"?"Agent":"Chat");const c=Ct();function u(){c(_o(is.deepLinkWarning))}var v=v$(),m=b(v),y=b(m);qe(y,{size:3,weight:"bold",children:(M,I)=>{var T=ie("Open Prompt in Thread");r(M,T)},$$slots:{default:!0}});var f=$(y,2);Nt(f,{variant:"ghost-block",color:"neutral",size:1,$$events:{click:u},children:(M,I)=>{Te(M,{name:"x"})},$$slots:{default:!0}});var g=$(m,2),A=b(g);qe(A,{size:2,children:(M,I)=>{var T=ie();he(()=>He(T,`A new ${t(l)??""} thread will be created with the following prompt. After reviewing, choose confirm
      to proceed.`)),r(M,T)},$$slots:{default:!0}});var C=$(A,2);ks(C,{variant:"soft",color:"accent",size:1,children:(M,I)=>{var T=u$(),O=b(T);he(()=>He(O,t(i))),r(M,T)},$$slots:{default:!0}});var _=$(g,2),p=b(_);xt(p,{variant:"ghost-block",color:"neutral",size:2,$$events:{click:u},children:(M,I)=>{var T=ie("Cancel");r(M,T)},$$slots:{default:!0}});var E=$(p,2);xt(E,{variant:"soft",color:"neutral",size:2,$$events:{click:async function(){if(V(a,"$currentConversationId",n)){const M=e.deepLinkWarning?.mode==="agent"?"localAgent":"chat",I={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:t(i)}]}]};c(So(M,{request_message:t(i),rich_text_json_repr:I})),c(_o(is.deepLinkWarning))}}},children:(M,I)=>{var T=ie("Confirm");r(M,T)},$$slots:{default:!0}}),r(s,v),fe(),o()}var Tt=(s=>(s.idle="idle",s.initializing="initializing",s.refreshing="refreshing",s.staging="staging",s.unstaging="unstaging",s.committing="committing",s.checkingOut="checkingOut",s))(Tt||{});const h$="HEAD",rr={isNew:s=>{const[,e]=s;return e===0},isUntracked:s=>{const[,e,n,o]=s;return e===0&&n===2&&o===0},hasStaged:s=>{const[,e,,n]=s;return n!==e},hasUnstaged:s=>{const[,,e,n]=s;return!!rr.isUntracked(s)||e!==n},isDeleted:s=>{const[,,e]=s;return e===0},isDeletionStaged:s=>{const[,e,n,o]=s;return e===1&&n===0&&o!==1},isUnmodified:s=>{const[,e,n,o]=s;return e===1&&n===1&&o===1},isPartiallyStaged:s=>rr.hasStaged(s)&&rr.hasUnstaged(s),hasChangedSinceHead:s=>{const[,e,n,o]=s;return!(e===1&&n===1&&o===1)}};function p$(s){const e=function(l){const c=It(l,y=>y?.metadata?.headOid??""),u=It(l,y=>y?.metadata?.currentBranch??""),v=It(l,y=>y?.workdir??""),m=It(l,y=>y?.gitdir??"");return{headOid:c,currentBranch:u,workdir:v,gitdir:m,repositoryInfo:It([c,u,v,m],([y,f,g,A])=>({headOid:y,currentBranch:f,workdir:g,gitdir:A}))}}(s),n=function(l){return{files:It(l,u=>u?.files??[])}}(s),o=function(l){const c=It(l,m=>m?.isOperationInProgress??!1),u=It(l,m=>m?.currentOperation),v=It(l,m=>m?.lastError);return{isOperationInProgress:c,currentOperation:u,repositoryLastError:v}}(s),a=function(l){const c=It(l,v=>v?.lastUpdated??0),u=It(c,v=>v===0?0:Date.now()-v);return{lastUpdated:c,timeSinceUpdate:u,isStale:It(u,v=>v>3e5)}}(s);return{isInitialized:It(s,l=>l!==void 0),metadata:e,files:n,operationState:o,timing:a}}class Bs{static CTX_KEY=Symbol("git-agent-edit-context");static setInContext(e,n){Rn(Bs.CTX_KEY,{model:e,controller:n})}static getContext(){return kt(Bs.CTX_KEY)}static requireContext(){const e=Bs.getContext();if(!e)throw new Error("GitAgentEditModel context missing");return e}_repositoryState=Yt(void 0);_lastError=Yt(void 0);_currStatus=Yt(Tt.idle);_filesToUpdate=new Set;_gitCommitInputMessage=Yt("");_isGeneratingCommitMessage=Yt(!1);_commitMessageGenerationError=Yt(void 0);_canCancelCommitMessageGeneration=Yt(!1);repositoryState=un(this._repositoryState);lastError=un(this._lastError);currStatus=un(this._currStatus);flagsModel=function(e){return{canStageFiles:It(e,n=>{const o=n===Tt.idle,a=n===Tt.unstaging;return o||a}),canUnstageFiles:It(e,n=>{const o=n===Tt.idle,a=n===Tt.staging;return o||a}),canModifyIndividualFiles:It(e,n=>n===Tt.idle),canCommit:It(e,n=>n===Tt.idle),canRefresh:It(e,n=>n===Tt.idle),canRevertFiles:It(e,n=>n===Tt.idle)}}(this.currStatus);operationStatusModel=function(e){return{operationMetadata:It(e,n=>({status:n,startedAt:n!=="idle"?Date.now():void 0})),isIdle:It(e,n=>n==="idle"),isOperationInProgress:It(e,n=>n!=="idle")}}(this.currStatus);uiStateModel=function(e){const n=It(e,a=>{switch(a){case Tt.committing:return"Committing changes...";case Tt.staging:return"Staging files...";case Tt.unstaging:return"Unstaging files...";case Tt.refreshing:return"Refreshing repository...";case Tt.initializing:return"Initializing repository...";case Tt.checkingOut:return"Checking out files...";case Tt.idle:default:return"Enter commit message"}}),o=It(e,a=>{switch(a){case Tt.committing:return"Committing changes";case Tt.staging:return"Staging files";case Tt.unstaging:return"Unstaging files";case Tt.refreshing:return"Refreshing repository";case Tt.initializing:return"Initializing repository";case Tt.checkingOut:return"Checking out files";case Tt.idle:default:return"Ready"}});return{uiState:It([n,o],([a,i])=>({commitPlaceholder:a,operationDescription:i})),commitPlaceholder:n,operationDescription:o}}(this.currStatus);repositoryStateModel=p$(this.repositoryState);fileCollectionsModel=function(e){const n=e,o=It(n,i=>i.filter(l=>rr.hasUnstaged(l.statusRow))),a=It(n,i=>i.filter(l=>rr.hasStaged(l.statusRow)));return{allFiles:n,unstagedFiles:o,stagedFiles:a,unstagedFilesWithUI:It(o,i=>i.map(l=>({qualifiedPathName:l.qualifiedPathName,statusRow:l.statusRow,changesSummary:l.changesSummary}))),stagedFilesWithUI:It(a,i=>i.map(l=>({qualifiedPathName:l.qualifiedPathName,statusRow:l.statusRow,changesSummary:l.changesSummary})))}}(this.repositoryStateModel.files.files);commitInputModel=function(e,n,o,a){const i=It([e,n,o,a],([u,v,m,y])=>({message:u,isGenerating:v,generationError:m,canCancelGeneration:y})),l=It(n,u=>!!u),c=It([n,o],([u,v])=>v?"Generation failed - try again or write manually":u?"Generating commit message...":"Write or generate a commit message...");return{message:e,isGenerating:n,generationError:o,canCancelGeneration:a,state:i,isInputDisabled:l,placeholderText:c}}(un(this._gitCommitInputMessage),un(this._isGeneratingCommitMessage),un(this._commitMessageGenerationError),un(this._canCancelCommitMessageGeneration));_getWritableStores(){return{repositoryState:this._repositoryState,lastError:this._lastError,currStatus:this._currStatus,gitCommitInputMessage:this._gitCommitInputMessage,isGeneratingCommitMessage:this._isGeneratingCommitMessage,commitMessageGenerationError:this._commitMessageGenerationError,canCancelCommitMessageGeneration:this._canCancelCommitMessageGeneration}}_addFilesToUpdate(e){for(const n of e)this._filesToUpdate.add(n)}_getAndClearFilesToUpdate(){const e=Array.from(this._filesToUpdate);return this._filesToUpdate.clear(),e}_getFilesToUpdateCount(){return this._filesToUpdate.size}}class Fr{constructor(e,n,o,a){this._model=e,this.gitRPCClient=n,this._extensionClient=o,this._repoRoot=a,this._stores=this._model._getWritableStores(),this._throttledReloadFiles=or(()=>this._executeThrottledReload(),Fr.RELOAD_THROTTLE_MS),this._repoRoot||this.initialize()}_stores;_commitMessageGenerationAbortController;_throttledReloadFiles;static RELOAD_THROTTLE_MS=500;_ensureIdle(){const e=Rt(this._stores.currStatus);if(e!==Tt.idle)throw new Error(`Cannot start operation: ${e} is already in progress`)}async _executeOperation(e,n){this._ensureIdle();try{return this._stores.currStatus.set(e),this._stores.lastError.set(void 0),await n()}catch(o){const a=o instanceof Error?o.message:"Unknown error",i=this._getContextualErrorMessage(e,a);throw this._stores.lastError.set(i),o}finally{this._stores.currStatus.set(Tt.idle)}}_getContextualErrorMessage(e,n){return`${this._getOperationContext(e)}: ${n}`}_getOperationContext(e){switch(e){case Tt.initializing:return"Failed to initialize git repository";case Tt.refreshing:return"Failed to refresh repository state";case Tt.staging:return"Failed to stage files";case Tt.unstaging:return"Failed to unstage files";case Tt.checkingOut:return"Failed to checkout files";case Tt.committing:return"Failed to commit changes";default:return"Operation failed"}}clearError(){this._stores.lastError.set(void 0),Rt(this._stores.currStatus)!==Tt.idle&&this._stores.currStatus.set(Tt.idle)}getWritableStores(){return this._stores}_updateMetadata(e){e&&this._stores.repositoryState.update(n=>n&&{...n,metadata:{...n.metadata,...e}})}async initialize(){return this._executeOperation(Tt.initializing,async()=>{this._stores.repositoryState.set(void 0),this._stores.lastError.set(void 0),await this._refreshRepositoryInternal()})}async refreshRepository(){return this._executeOperation(Tt.refreshing,async()=>{await this._refreshRepositoryInternal()})}async _refreshRepositoryInternal(){const e=this._repoRoot||"",n=await this.gitRPCClient.getRepositoryState(e);this._stores.repositoryState.set(n)}async refreshSpecificFiles(e){try{const n=Rt(this._stores.repositoryState);if(!n)return void await this.refreshRepository();const o=this._repoRoot||"",a=await this.gitRPCClient.getStatusMatrix(o,{filepaths:e,includeStatistics:!0,filterChangedOnly:!0});this._updateMetadata(a.metadata);const i=a.statusMatrix.filter(c=>{const[,u,v,m]=c.statusRow;return u!==v||u!==m}),l=[...n.files.filter(c=>!e.includes(c.qualifiedPathName.relPath)),...i];this._stores.repositoryState.set({...n,files:l,lastUpdated:Date.now()}),this._stores.lastError.set(void 0)}catch(n){const o=n instanceof Error?n.message:"Unknown error";throw this._stores.lastError.set(`Failed to refresh specific files: ${o}`),n}}async stageFile(e){return this.stageFiles([e])}async stageFiles(e){return this._executeOperation(Tt.staging,async()=>{const n=this._repoRoot||"",o=await this.gitRPCClient.stageFiles(n,{filePaths:e});this._updateMetadata(o.metadata),await this.refreshSpecificFiles(e)})}async unstageFile(e){return this.unstageFiles([e])}async unstageFiles(e){return this._executeOperation(Tt.unstaging,async()=>{const n=this._repoRoot||"",o=await this.gitRPCClient.unstageFiles(n,{filePaths:e});this._updateMetadata(o.metadata),await this.refreshSpecificFiles(e)})}async checkoutFileToHead(e){return this.checkoutFilesToHead([e])}async checkoutFilesToHead(e){return this._executeOperation(Tt.checkingOut,async()=>{const n=this._repoRoot||"",o=await this.gitRPCClient.checkoutFiles(n,{filePaths:e,reference:h$});this._updateMetadata(o.metadata),await this.refreshSpecificFiles(e)})}async checkoutFileToReference(e,n){return this.checkoutFilesToReference([e],n)}async checkoutFilesToReference(e,n){return this._executeOperation(Tt.checkingOut,async()=>{const o=this._repoRoot||"",a=await this.gitRPCClient.checkoutFiles(o,{filePaths:e,reference:n});this._updateMetadata(a.metadata),await this.refreshSpecificFiles(e)})}async resetToIndexFile(e){return this.resetToIndexFiles([e])}async resetToIndexFiles(e){return this._executeOperation(Tt.checkingOut,async()=>{const n=this._repoRoot||"";await this.gitRPCClient.resetToIndex(n,{filePaths:e}),await this.refreshSpecificFiles(e)})}async stageAllUnstaged(){const e=Rt(this._model.fileCollectionsModel.unstagedFiles).map(n=>n.qualifiedPathName.relPath);await this.stageFiles(e)}async unstageAllStaged(){const e=Rt(this._model.fileCollectionsModel.stagedFiles).map(n=>n.qualifiedPathName.relPath);await this.unstageFiles(e)}async commit(e){return this._executeOperation(Tt.committing,async()=>{const n=this._repoRoot||"",o=await this.gitRPCClient.commit(n,{message:e});this._updateMetadata(o.metadata);const a=Rt(this._stores.repositoryState);if(a){const i=a.files.map(l=>l.qualifiedPathName.relPath);await this.refreshSpecificFiles(i)}return o.commitOid})}clearStagedChanges(){const e=Rt(this._stores.repositoryState);if(!e)return;const n=e.files.map(o=>{const[a,i,l]=o.statusRow;return{...o,statusRow:[a,i,l,i],changesSummary:void 0}});this._stores.repositoryState.set({...e,files:n})}async validateRepository(){try{const e=this._repoRoot||"",n=await this.gitRPCClient.validateRepository(e);return this._updateMetadata(n.metadata),n.isValid}catch(e){const n=e instanceof Error?e.message:"Unknown error";return this._stores.lastError.set(`Failed to validate repository: ${n}`),!1}}async openGitDiff(e,n=!1){const o=this._repoRoot||"",a=await this.gitRPCClient.openGitDiff(o,{filePath:e,staged:n});this._updateMetadata(a.metadata)}async generateCommitMessage(){if(!Rt(this._stores.isGeneratingCommitMessage)&&Rt(this._stores.currStatus)===Tt.idle){this._stores.commitMessageGenerationError.set(void 0),this._stores.isGeneratingCommitMessage.set(!0),this._stores.canCancelCommitMessageGeneration.set(!0),this._stores.gitCommitInputMessage.set(""),this._commitMessageGenerationAbortController=new AbortController;try{let e="";for await(const n of this._extensionClient.generateCommitMessage()){if(this._commitMessageGenerationAbortController.signal.aborted)break;n.response_text&&(e+=n.response_text,this._stores.gitCommitInputMessage.set(e))}if(!this._commitMessageGenerationAbortController.signal.aborted){const n=e.trim();this._stores.gitCommitInputMessage.set(n)}}catch(e){const n=e instanceof Error?e.message:"Unknown error";this._stores.commitMessageGenerationError.set(`Failed to generate commit message: ${n}`),console.error("Failed to generate commit message:",e)}finally{this._commitMessageGenerationAbortController&&!this._commitMessageGenerationAbortController.signal.aborted&&this._commitMessageGenerationAbortController.abort(),this._stores.isGeneratingCommitMessage.set(!1),this._stores.canCancelCommitMessageGeneration.set(!1),this._commitMessageGenerationAbortController=void 0}}}cancelCommitMessageGeneration(){this._commitMessageGenerationAbortController&&Rt(this._stores.isGeneratingCommitMessage)&&(this._commitMessageGenerationAbortController.abort(),this._stores.isGeneratingCommitMessage.set(!1),this._stores.canCancelCommitMessageGeneration.set(!1),this._stores.commitMessageGenerationError.set("Generation cancelled"),this._commitMessageGenerationAbortController=void 0)}setCommitInputMessage(e){this._stores.gitCommitInputMessage.set(e),this._stores.commitMessageGenerationError.set(void 0)}reloadFiles(e){this._model._addFilesToUpdate(e),this._throttledReloadFiles()}async _executeThrottledReload(){const e=this._model._getAndClearFilesToUpdate();if(e.length!==0)try{await this.refreshSpecificFiles(e)}catch(n){console.error("Failed to reload specific files:",n),this._model._addFilesToUpdate(e)}}clearCommitInputMessage(){this._stores.gitCommitInputMessage.set(""),this._stores.commitMessageGenerationError.set(void 0)}}var Sn=(s=>(s.REPO_LIST_REQUEST="git.repo.list.request",s.REPO_LIST_RESPONSE="git.repo.list.response",s.REPO_TRACK_REQUEST="git.repo.track.request",s.REPO_TRACK_RESPONSE="git.repo.track.response",s.REPO_INFO_REQUEST="git.repo.info.request",s.REPO_INFO_RESPONSE="git.repo.info.response",s.REPO_STATE_REQUEST="git.repo.state.request",s.REPO_STATE_RESPONSE="git.repo.state.response",s.REPO_REFRESH_REQUEST="git.repo.refresh.request",s.REPO_REFRESH_RESPONSE="git.repo.refresh.response",s.REPO_VALIDATE_REQUEST="git.repo.validate.request",s.REPO_VALIDATE_RESPONSE="git.repo.validate.response",s.FILE_STATUS_REQUEST="git.file.status.request",s.FILE_STATUS_RESPONSE="git.file.status.response",s.FILE_STAGE_REQUEST="git.file.stage.request",s.FILE_STAGE_RESPONSE="git.file.stage.response",s.FILE_UNSTAGE_REQUEST="git.file.unstage.request",s.FILE_UNSTAGE_RESPONSE="git.file.unstage.response",s.FILE_CHECKOUT_REQUEST="git.file.checkout.request",s.FILE_CHECKOUT_RESPONSE="git.file.checkout.response",s.FILE_RESET_TO_INDEX_REQUEST="git.file.resetToIndex.request",s.FILE_RESET_TO_INDEX_RESPONSE="git.file.resetToIndex.response",s.COMMIT_CREATE_REQUEST="git.commit.create.request",s.COMMIT_CREATE_RESPONSE="git.commit.create.response",s.DIFF_OPEN_REQUEST="git.diff.open.request",s.DIFF_OPEN_RESPONSE="git.diff.open.response",s.UPDATE_EVENT="git.update.event",s))(Sn||{});class m${constructor(e){if(this._extensionClient=e,!e)throw new Error("ExtensionClient is required for MultiRepoGitRPCClient")}async listRepositories(){return(await this._extensionClient.sendGitMessage({type:Sn.REPO_LIST_REQUEST,data:{}})).data.repositories}async trackRepository(e){return(await this._extensionClient.sendGitMessage({type:Sn.REPO_TRACK_REQUEST,data:{repoRoot:e}})).data}async getRepositoryInfo(e){return(await this._extensionClient.sendGitMessage({type:Sn.REPO_INFO_REQUEST,data:{repoRoot:e}})).data}async getRepositoryState(e){return(await this._extensionClient.sendGitMessage({type:Sn.REPO_STATE_REQUEST,data:{repoRoot:e}})).data}async refreshRepository(e){const n=await this._extensionClient.sendGitMessage({type:Sn.REPO_REFRESH_REQUEST,data:{repoRoot:e}});return{success:n.data.success,metadata:n.data.metadata}}async validateRepository(e){const n=await this._extensionClient.sendGitMessage({type:Sn.REPO_VALIDATE_REQUEST,data:{repoRoot:e}});return{isValid:n.data.isValid,metadata:n.data.metadata}}async getStatusMatrix(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.FILE_STATUS_REQUEST,data:{repoRoot:e,...n}});return{statusMatrix:o.data.statusMatrix,metadata:o.data.metadata}}async stageFiles(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.FILE_STAGE_REQUEST,data:{repoRoot:e,...n}});return{success:o.data.success,stagedFiles:o.data.stagedFiles,metadata:o.data.metadata}}async unstageFiles(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.FILE_UNSTAGE_REQUEST,data:{repoRoot:e,...n}});return{success:o.data.success,unstagedFiles:o.data.unstagedFiles,metadata:o.data.metadata}}async checkoutFiles(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.FILE_CHECKOUT_REQUEST,data:{repoRoot:e,...n}});return{success:o.data.success,checkedOutFiles:o.data.checkedOutFiles,reference:o.data.reference,metadata:o.data.metadata}}async resetToIndex(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.FILE_RESET_TO_INDEX_REQUEST,data:{repoRoot:e,...n}});return{success:o.data.success,resetFiles:o.data.resetFiles,metadata:o.data.metadata}}async commit(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.COMMIT_CREATE_REQUEST,data:{repoRoot:e,...n}});return{commitOid:o.data.commitOid,metadata:o.data.metadata}}async openGitDiff(e,n){const o=await this._extensionClient.sendGitMessage({type:Sn.DIFF_OPEN_REQUEST,data:{repoRoot:e,...n}});return{success:o.data.success,metadata:o.data.metadata}}}class Fs{static CTX_KEY=Symbol("multi-repo-git-context");_repositories;_activeRepository;_operationStatus;_lastError;repositories;activeRepository;operationStatus;lastError;availableRepositories;activeRepositoryModel;activeRepositoryState;activeRepositoryMetadata;constructor(){this._repositories=Yt(new Map),this._activeRepository=Yt(void 0),this._operationStatus=Yt("idle"),this._lastError=Yt(void 0),this.repositories=un(this._repositories),this.activeRepository=un(this._activeRepository),this.operationStatus=un(this._operationStatus),this.lastError=un(this._lastError),this.availableRepositories=It(this._repositories,e=>Array.from(e.keys()).sort()),this.activeRepositoryModel=It([this._repositories,this._activeRepository],([e,n])=>n?e.get(n):void 0),this.activeRepositoryState=It(this.activeRepositoryModel,e=>e?Rt(e.repositoryState):void 0),this.activeRepositoryMetadata=It(this.activeRepositoryModel,e=>{if(!e?.repositoryStateModel?.metadata)return{currentBranch:void 0,shortCommit:void 0};const n=e.repositoryStateModel.metadata,o=Rt(n.currentBranch),a=Rt(n.headOid);return{currentBranch:o,shortCommit:a?a.substring(0,7):void 0}})}getFileCollectionsModel(e){return Rt(this._repositories).get(e)?.fileCollectionsModel}getRepositoryStateModel(e){return Rt(this._repositories).get(e)?.repositoryStateModel}static setInContext(e,n){Rn(Fs.CTX_KEY,{model:e,controller:n})}static getContext(){return kt(Fs.CTX_KEY)}static requireContext(){const e=Fs.getContext();if(!e)throw new Error("MultiRepoGitModel context missing");return e}_getWritableStores(){return{repositories:this._repositories,activeRepository:this._activeRepository,operationStatus:this._operationStatus,lastError:this._lastError}}}class Qo{constructor(e,n,o,a){this._model=e,this._rpcClient=n,this._extensionClient=o,this._enableAgentGitTracker=a,this._stores=this._model._getWritableStores(),this._throttledRefreshRepositories=or(async()=>{try{Rt(this._stores.operationStatus)==="idle"&&await this.refreshRepositories()}catch(i){console.warn("Failed to refresh git repositories on update event:",i)}},Qo.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}),this._enableAgentGitTracker.subscribe(i=>{this.maybeInitializeRepos(i)})}_controllers=new Map;_stores;_throttledRefreshRepositories;static REFRESH_THROTTLE_MS=1e3;maybeInitializeRepos(e){if(e){const n=Rt(this._stores.operationStatus),o=Rt(this._model.availableRepositories);n==="idle"&&o.length===0&&this.listRepositories().catch(a=>{console.warn("Failed to initialize repositories when git tracking was enabled:",a)})}}_ensureIdle(){const e=Rt(this._stores.operationStatus);if(e!=="idle")throw new Error(`Cannot start operation: ${e} is already in progress`)}async _executeOperation(e,n){if(!this._enableAgentGitTracker)throw new Error("Git tracking is disabled");this._ensureIdle();try{return this._stores.operationStatus.set(e),this._stores.lastError.set(void 0),await n()}catch(o){const a=o instanceof Error?o.message:"Unknown error";throw this._stores.lastError.set(a),o}finally{this._stores.operationStatus.set("idle")}}clearError(){this._stores.lastError.set(void 0)}async listRepositories(){return this._enableAgentGitTracker?this._executeOperation("discovering",async()=>{const e=await this._rpcClient.listRepositories();for(const n of e){const o=n.repoRoot;if(Rt(this._stores.repositories).has(o))continue;const a=new Bs,i=new Fr(a,this._rpcClient,this._extensionClient,o);this._stores.repositories.update(l=>{const c=new Map(l);return c.set(o,a),c}),this._controllers.set(o,i),await i.initialize()}return!Rt(this._stores.activeRepository)&&e.length>0&&this._stores.activeRepository.set(e[0].repoRoot),e}):[]}async refreshRepositories(){return this._executeOperation("refreshing",async()=>{const e=Rt(this._stores.repositories),n=Array.from(e.keys()).map(async o=>{const a=this._controllers.get(o);if(a)try{await a.refreshRepository()}catch(i){console.error(`Failed to refresh repository ${o}:`,i)}});await Promise.all(n)})}async ensureRepository(e){return this._executeOperation("tracking",async()=>{await this._ensureRepositoryInternal(e)})}async _ensureRepositoryInternal(e){if(Rt(this._stores.repositories).has(e))return;const n=await this._rpcClient.trackRepository(e),o=new Bs,a=new Fr(o,this._rpcClient,this._extensionClient,e);this._updateRepositoryMetadata(e,n.metadata),this._stores.repositories.update(i=>{const l=new Map(i);return l.set(e,o),l}),this._controllers.set(e,a),await a.initialize()}async selectRepository(e){return this._executeOperation("selecting",async()=>{const n=Rt(this._stores.activeRepository);if(n&&n!==e){const o=this._controllers.get(n);o&&o.clearCommitInputMessage()}await this._ensureRepositoryInternal(e),this._stores.activeRepository.set(e)})}getActiveRepositoryController(){const e=Rt(this._stores.activeRepository);return e?this._controllers.get(e):void 0}getRepositoryController(e){return this._controllers.get(e)}_updateRepositoryMetadata(e,n){if(!n)return;const o=this.getRepositoryController(e);o&&o.getWritableStores().repositoryState.update(a=>a&&{...a,metadata:{...a.metadata,...n}})}handleMessageFromExtension(e){const n=e.data;if(n.type===jt.gitUpdateEvent){const o=n.data.changedFiles;return o===void 0?this._throttledRefreshRepositories():this._reloadSpecificFiles(o),!0}return!1}_reloadSpecificFiles(e){const n=new Map;for(const o of e){const a=o.rootPath;n.has(a)||n.set(a,[]),n.get(a).push(o.relPath)}for(const[o,a]of n){const i=this._controllers.get(o);i&&i.reloadFiles(a)}}}var f$=h("<!> <!>",1),_$=h("<!> <!>",1),y$=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),b$=h("<!> <!> <!>",1),$$=h('<!> <!> <!> <!> <!> <div class="chat svelte-1hs4wcp"><!> <!></div>',1);function w$(s,e){me(e,!0);const n=()=>V(E,"$enableRules",u),o=()=>V(M,"$enablePersonalities",u),a=()=>V(I,"$enableExternalSourcesInChat",u),i=()=>V(T,"$retryChatStreamTimeouts",u),l=()=>V(G,"$remoteAgentsModel",u),c=()=>V(H,"$currentConversationId",u),[u,v]=je();let m=S(e,"initialFlags",19,()=>{}),y=S(e,"initialConversation",19,()=>{}),f=S(e,"initialSubscriptionInfo",19,()=>{}),g=S(e,"initialSubscriptionDismissed",19,()=>{});const A=Ct(),{store:C}=ys(),_=Ot("enableAgentMode"),p=Ot("enableModelRegistry"),E=Ot("enableRules"),M=Ot("enablePersonalities"),I=Ot("enableExternalSourcesInChat"),T=Ot("retryChatStreamTimeouts"),O=Ot("enableBackgroundAgents"),P=qi(),H=ln(),D=vi(),U=Yu(),j=Xu(H),x=new gr(an);Jt(()=>{V(P,"$isStateHydrated",u)||A(Hi(y(),{}))});const N=new dr(an,x,{enableRules:n(),enablePersonalities:o(),enableExternalSourcesInChat:a(),retryChatStreamTimeouts:i()}),W=Ot("enableAgentGitTracker");if(V(W,"$enableAgentGitTracker",u)){const ge=function(de,we){const Be=new m$(de),De=new Fs,Le=new Qo(De,Be,de,we);return Fs.setInContext(De,Le),{model:De,controller:Le}}(N,W);x.registerConsumer(ge.controller)}const F=new Lr(x),G=new dn({reduxStore:C,msgBroker:x,isActive:!1,extensionClientConfig:{enableRules:n(),enablePersonalities:o(),enableExternalSourcesInChat:a(),retryChatStreamTimeouts:i()},enableBackgroundAgents:O,host:an,gitRefModel:F}),z=new Ea(x);x.registerConsumer(G),Rn(dn.key,G),Rn(Lr.key,F),Rn(Ea.key,z);const q=Yt(-1);Rn(Tp,q);const L={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},R=new ol(x,L,Wv,Gv);x.registerConsumer(R),Rn(Qi,R);const Y=new gs(C,G,{enableBackgroundAgents:V(O,"$enableBackgroundAgents",u),enableModelRegistry:V(p,"$enableModelRegistry",u)});x.registerConsumer(Y),Rn(gs.key,Y),rt(()=>n$(R,l(),L));let Z=R.state;rt(()=>{s$(Z,V(R,"$sharedWebviewStore",u),l(),N,Y)}),Ju(N);const Q=d(()=>!l().isRemoteAgentSshWindow),K=function({isCurrConversationAgentic:ge,remoteAgentsModel:de,canShowTaskList:we}){return It([ge,de,we],([Be,De,Le])=>{const Me=Be&&!De?.isActive;return{showMessageHistory:Me,showTasks:Me&&Le,showAgentEdits:Me&&Be}})}({isCurrConversationAgentic:D,remoteAgentsModel:G,canShowTaskList:j}),J=Mv(W,K,D);ur.setInContext(J),x.registerConsumer(new e$);let ue,ne=!1;rt(()=>(ge=>{const de=ge.isRemoteAgentSshWindow,we=ge.remoteAgentSshWindowId;ne===de&&ue===we||(ne=de,ue=we,de&&we&&(Y.setToRemoteAgent(we),ge.setCurrentAgent(we),ge.setIsActive(!0)))})(l())),Jt(()=>{A(Qu(!1)),f()?A(Zu(f())):A(ev()),g()?A(tv(new Date().toISOString())):A(nv()),m()&&A(Wi(m())),l().isRemoteAgentSshWindow&&l().remoteAgentSshWindowId&&(Y.setToRemoteAgent(l().remoteAgentSshWindowId),G.setCurrentAgent(l().remoteAgentSshWindowId),G.setIsActive(!0));const ge=[G.dispose];return N.getChatInitData(),()=>{ge.forEach(de=>de?.())}});const be=d(()=>V(_,"$enableAgentMode",u)&&V(D,"$isAgentic",u)&&!l().isActive);Dv();const ye=sv(),ee=rv(),ze=()=>{A(Rr(V(ye,"$nextConversationId",u),{shouldUpdateLastInteractedAt:!1}))},Ie=()=>{A(Rr(V(ee,"$prevConversationId",u),{shouldUpdateLastInteractedAt:!1}))};rt(()=>{c()&&J&&J.getCurrentAvailableTabs().includes(pn.messageHistory)&&J.setActiveTab(pn.messageHistory)});const Ee=Yr(is.deepLinkWarning);var _e=$$();Ht("message",Cn,function(...ge){x.onMessageFromExtension?.apply(this,ge)}),Ht("beforeunload",Cn,()=>{A(fo()),A(ov()),c()&&av(V(U,"$conversationExchangesCount",u))});var pe=w(_e);(function(ge,de){me(de,!0);const we=kt(dn.key),Be=kt("chatModeModel");yn(Cn,(De,Le)=>Ep?.(De,Le),()=>({config:de.hotkeyConfig,context:()=>({remoteAgentsModel:we,chatModeModel:Be})})),fe()})(0,{get hotkeyConfig(){return Ov}});var se=$(pe,2);r$(0,{get msgBroker(){return x}});var te=$(se,2);uo(te,{get modalId(){return is.threadsPanel},animationDirection:"left",children:(ge,de)=>{wp(ge,{onClose:()=>{A(gt(Ze.WEBVIEW.THREADS_MODAL_CLOSED,{})),A(_o(is.threadsPanel))}})},$$slots:{default:!0}});var re=$(te,2);uo(re,{get modalId(){return is.memories},children:(ge,de)=>{P1(ge,{})},$$slots:{default:!0}});var le=$(re,2);uo(le,{get modalId(){return is.deepLinkWarning},fullsize:!1,children:(ge,de)=>{g$(ge,{get deepLinkWarning(){return V(Ee,"$deeplinkWarningModal",u).params}})},$$slots:{default:!0}});var ve=$(le,2),$e=b(ve);(function(ge,de){me(de,!0);const we=()=>V(Le,"$activeCommandId",Be),[Be,De]=je(),Le=o$(),Me=Ct();rt(()=>{we()&&(Me(Uu(we())),Me(Vu()))});var We=a$();r(ge,We),fe(),De()})($e,{});var ce=$($e,2);Do(ce,{scope:"chat",children:(ge,de)=>{var we=b$(),Be=w(we),De=Me=>{var We=f$(),ke=w(We);on(ke,{name:"goToNextConversation",handler:ze});var Re=$(ke,2);on(Re,{name:"goToPreviousConversation",handler:Ie}),r(Me,We)};k(Be,Me=>{G?.isActive||Me(De)});var Le=$(Be,2);on(Le,{name:"toggleThreadsPanel",handler:()=>{A(gt(Ze.WEBVIEW.THREADS_MODAL_OPENED,{})),A(fa(is.threadsPanel))}});{const Me=xe=>{fl(xe,{children:(ae,Pe)=>{var Ce=_$(),Se=w(Ce);(function(Fe,Ge){const ot=S(Ge,"shouldShowThreadsList",3,!1),Ke=S(Ge,"onOpenThreads",3,()=>{});let Qe=Oe(!1);var Ye=tm(),bt=b(Ye),Ue=Ne=>{var Ve=Zp(),Xe=b(Ve);it(Xe,{side:"bottom",nested:!1,content:at=>{var $t=Qp(),Wt=$(b($t));fn(Wt,{commandName:"toggleThreadsPanel",keysOnly:!0}),r(at,$t)},children:(at,$t)=>{Nt(at,{class:"c-chat-header__menu-btn",variant:"ghost-block",color:"neutral",size:.5,get onclick(){return Ke()},children:(Wt,Mt)=>{qp(Wt,{children:(Dt,Gt)=>{Te(Dt,{name:"menu",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),r(Ne,Ve)};k(bt,Ne=>{ot()&&!t(Qe)&&Ne(Ue)});var lt=$(bt,2);Jp(b(lt),{get isEditing(){return t(Qe)},set isEditing(Ne){X(Qe,Ne,!0)}});var ct=$(lt,2),oe=Ne=>{var Ve=em();Lp(b(Ve),{}),r(Ne,Ve)};k(ct,Ne=>{t(Qe)||Ne(oe)}),r(Fe,Ye)})(Se,{onOpenThreads:()=>{A(gt(Ze.WEBVIEW.THREADS_MODAL_OPENED,{})),A(fa(is.threadsPanel))},get shouldShowThreadsList(){return t(Q)}}),function(Fe){var Ge=sm();nt(Ge,"id",El),r(Fe,Ge)}($(Se,2)),r(ae,Ce)}})},We=xe=>{(function(ae){var Pe=Z1(),Ce=b(Pe);U1(Ce,{}),Q1($(Ce,2),{}),r(ae,Pe)})(xe)},ke=xe=>{var ae=B(),Pe=w(ae),Ce=Fe=>{y1(Fe,{})},Se=Fe=>{var Ge=B(),ot=w(Ge),Ke=Ye=>{var bt=B(),Ue=w(bt);Gs(Ue,()=>Hs(()=>import("./RemoteMessageSection-OPbxN2sc.js"),__vite__mapDeps([75,1,2,55,33,12,13,10,5,6,4,7,9,11,14,15,16,17,18,19,20,21,22,23,24,34,3,8,25,26,27,28,29,30,36,37,38,39,40,35,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,76,57,58,59,60,61,64,65,66,67,77,78,31,32,62,63,68,69,70,79]),import.meta.url),null,(lt,ct)=>{var oe=d(()=>{var{default:et}=t(ct);return{RemoteMessageSection:et}}),Ne=d(()=>t(oe).RemoteMessageSection),Ve=B(),Xe=w(Ve);Ae(Xe,()=>t(Ne),(et,at)=>{at(et,{})}),r(lt,Ve)}),r(Ye,bt)},Qe=Ye=>{W1(Ye,{})};k(ot,Ye=>{l().isActive?Ye(Ke):Ye(Qe,!1)},!0),r(Fe,Ge)};k(Pe,Fe=>{t(be)?Fe(Ce):Fe(Se,!1)}),r(xe,ae)},Re=xe=>{var ae=y$(),Pe=w(ae);Us(Pe,()=>({"--toast-offset-y":"-12px"})),Ae(Pe.lastChild,()=>vs.Root,(Ce,Se)=>{Se(Ce,{})}),Zb($(Pe,2),{}),r(xe,ae)};(function(xe,ae){var Pe=nm(),Ce=b(Pe),Se=b(Ce);st(Se,()=>ae.headerArea??wt);var Fe=$(Ce,2),Ge=b(Fe);st(Ge,()=>ae.topStatusArea??wt);var ot=$(Fe,2),Ke=b(ot);st(Ke,()=>ae.messageArea??wt);var Qe=$(ot,2),Ye=b(Qe);st(Ye,()=>ae.inputHint??wt);var bt=$(Qe,2),Ue=b(bt),lt=b(Ue);st(lt,()=>ae.notificationsArea??wt);var ct=$(bt,2),oe=b(ct);st(oe,()=>ae.dividerArea??wt);var Ne=$(ct,2),Ve=b(Ne);st(Ve,()=>ae.inputArea??wt),he(()=>{nt(Ce,"id",Un.header),nt(Fe,"id",Un.floating),nt(ot,"id",Un.message),nt(Qe,"id",Un.inputHint),nt(Ue,"id",Un.notifications),nt(ct,"id",Un.divider),nt(Ne,"id",Un.input)}),r(xe,Pe)})($(Le,2),{headerArea:Me,topStatusArea:We,messageArea:ke,notificationsArea:Re})}r(ge,we)},$$slots:{default:!0}}),r(s,_e),fe(),v()}var k$=h('<div class="l-onboarding-layout__error svelte-1j9rq0d"><!></div>'),A$=h('<div class="l-onboarding-layout svelte-1j9rq0d"><div class="l-onboarding-layout__notifications svelte-1j9rq0d"><!></div> <div class="l-onboarding-layout__content svelte-1j9rq0d"><!></div> <!></div>');function Xr(s,e){var n=A$(),o=b(n),a=b(o);Ae(a,()=>vs.Root,(m,y)=>{y(m,{})});var i=$(o,2),l=b(i),c=m=>{var y=B(),f=w(y);st(f,()=>e.children),r(m,y)};k(l,m=>{e.children&&m(c)});var u=$(i,2),v=m=>{var y=k$(),f=b(y);st(f,()=>e.error),r(m,y)};k(u,m=>{e.error&&m(v)}),r(s,n)}var E$=h('<div class="c-augment-title__logo svelte-bwms5p"><!></div>'),C$=h('<div class="c-augment-title svelte-bwms5p"><!> <!></div>');function vc(s,e){const n=S(e,"showLogo",3,!1);var o=C$(),a=b(o),i=c=>{var u=E$(),v=b(u);Te(v,{name:"augment-logo"}),r(c,u)};k(a,c=>{n()&&c(i)});var l=$(a,2);qe(l,{size:4,color:"primary",children:(c,u)=>{var v=ie("augment code");r(c,v)},$$slots:{default:!0}}),r(s,o)}var T$=h('<span class="svelte-1xbphwq">Better Context.</span> <span class="svelte-1xbphwq">Better Agent.</span> <span class="svelte-1xbphwq">Better Code.</span>',1),S$=h('<div class="c-sign-in svelte-1xbphwq"><!> <!> <div class="c-sign-in__better-text svelte-1xbphwq"><!></div> <!> <!> <div class="c-augment-features svelte-1xbphwq"></div></div>');function I$(s,e){me(e,!0);const n=new dr(an,new gr(an));let o=Oe(void 0);function a(){n.track(Ze.WEBVIEW.ONBOARDING_SIGNIN_BUTTON_CLICKED,{}),an.postMessage({type:jt.mainPanelPerformAction,data:"sign-in"})}Jt(()=>{n.track(Ze.WEBVIEW.ONBOARDING_SIGNIN_VIEW_DISPLAYED,{}),an.postMessage({type:jt.signInLoaded})});const i=d(()=>[{name:"Agent",href:`https://docs.augmentcode.com/using-augment/agent?utm_source=${t(o)}`},{name:"Chat",href:`https://docs.augmentcode.com/using-augment/chat?utm_source=${t(o)}`},{name:"Code Completions",href:`https://docs.augmentcode.com/using-augment/completions?utm_source=${t(o)}`},{name:"Instructions",href:`https://docs.augmentcode.com/using-augment/instructions?utm_source=${t(o)}`},{name:"Next Edit",visible:!!t(o)&&t(o)!=="intellij",href:`https://docs.augmentcode.com/using-augment/next-edit?utm_source=${t(o)}`}].filter(l=>l.visible!==!1));Ht("message",Cn,l=>{const c=l.data;c.type===jt.signInLoadedResponse&&X(o,c.data.client,!0)}),Xr(s,{children:(l,c)=>{Hn(l,{maxWidth:"250px",children:(u,v)=>{var m=S$(),y=b(m);ll(y,{sizePx:60,floatHeight:10});var f=$(y,2);vc(f,{});var g=$(f,2),A=b(g);qe(A,{size:1,children:(E,M)=>{var I=T$();r(E,I)},$$slots:{default:!0}});var C=$(g,2);xt(C,{variant:"solid",color:"accent",size:1,onclick:a,"data-testid":"sign-in-button",children:(E,M)=>{var I=ie("Sign In");r(E,I)},$$slots:{default:!0}});var _=$(C,2);Wr(_,{size:4});var p=$(_,2);Vt(p,21,()=>t(i),E=>E.name,(E,M)=>{xt(E,{variant:"soft",color:"neutral",size:.5,get href(){return t(M).href},asAnchor:!0,onclick:()=>{return I=t(M).name,T=t(M).href,void n.track(Ze.WEBVIEW.ONBOARDING_FEATURE_LINK_CLICKED,{featureName:I,client:T});var I,T},children:(I,T)=>{qe(I,{size:0,children:(O,P)=>{var H=ie();he(()=>He(H,t(M).name)),r(O,H)},$$slots:{default:!0}})},$$slots:{default:!0}})}),r(u,m)},$$slots:{default:!0}})}}),fe()}var R$=h("<!> Back",1),x$=h('<div class="c-back-button-container"><!></div>'),M$=h('<div class="c-awaiting-syncing-permission__header svelte-1u4pkr8"><!></div>'),D$=h('<span>Your data always stays secure and private. <a href="https://docs.augmentcode.com/setup-augment/workspace-indexing" class="c-awaiting-syncing-permission__link svelte-1u4pkr8">Learn More</a></span>'),O$=h('<div class="c-awaiting-syncing-permission__content svelte-1u4pkr8"><!> <!> <!></div>'),N$=h("<div><!></div> Indexing allows Augment to make tailored suggestions and explain common practice patterns.",1),z$=h('<div class="c-awaiting-syncing-permission svelte-1u4pkr8"><!> <!> <div class="c-awaiting-syncing-permission__footer-text svelte-1u4pkr8"><!></div></div>'),L$=h("<!> <!>",1);function P$(s,e){me(e,!0);const n=()=>V(u,"$workspaceNameStore",o),[o,a]=je(),i=new gr(an),l=new dr(an,i,{enableRules:!1,enablePersonalities:!1,enableExternalSourcesInChat:!1,retryChatStreamTimeouts:!1});let c=Oe(!1);const u=Ml();function v(){X(c,!0),l.track(Ze.WEBVIEW.ONBOARDING_ENABLE_INDEXING_CLICKED,{}),l.grantSyncPermission(),f(Wi({areFlagsReady:!0}))}function m(){l.track(Ze.WEBVIEW.ONBOARDING_CHANGE_FOLDER_CLICKED,{}),l.openProjectFolder()}function y(){l.track(Ze.WEBVIEW.ONBOARDING_BACK_TO_FOLDER_SELECTION_CLICKED,{}),l.closeProjectFolder()}const f=Ct(),g=Xb(),A=d(()=>function(T){const O=new Set([Qn.workspaceNotSelected,Qn.workspaceTooLarge,Qn.uploadingHomeDir]);return T.filter(P=>O.has(P))}(V(g,"$mainPanelActions",o))),C=d(()=>t(A)[0]),_=d(()=>t(C)===Qn.workspaceTooLarge||t(C)===Qn.uploadingHomeDir);Jt(()=>{l.track(Ze.WEBVIEW.ONBOARDING_SYNCING_PERMISSION_VIEW_DISPLAYED,{workspaceName:n()??void 0}),f(ir({type:jt.awaitingSyncingPermissionLoaded}))});var p=L$(),E=w(p);Xr(E,{children:(T,O)=>{var P=z$(),H=b(P),D=N=>{var W=x$(),F=b(W);xt(F,{variant:"ghost",color:"neutral",size:1,onclick:y,children:(G,z)=>{var q=R$(),L=w(q);Te(L,{name:"chevron-left"}),r(G,q)},$$slots:{default:!0}}),r(N,W)};k(H,N=>{Ic()&&N(D)});var U=$(H,2);Hn(U,{maxWidth:"300px",header:W=>{var F=M$(),G=b(F);qe(G,{size:4,color:"primary",children:(z,q)=>{var L=ie("Indexing Codebase");r(z,L)},$$slots:{default:!0}}),r(W,F)},children:(W,F)=>{var G=O$(),z=b(G);it(z,{content:"Open a new project",children:(R,Y)=>{xt(R,{variant:"outline",color:"neutral",size:1,onclick:m,children:(Z,Q)=>{var K=ie();he(()=>He(K,n()??"Open a folder")),r(Z,K)},$$slots:{default:!0,iconLeft:(Z,Q)=>{Te(Z,{name:"folder-cog",slot:"iconLeft"})}}})},$$slots:{default:!0}});var q=$(z,2);qe(q,{size:1,children:(R,Y)=>{var Z=D$();r(R,Z)},$$slots:{default:!0}});var L=$(q,2);{let R=d(()=>!n()||t(_));xt(L,{variant:"solid",color:"accent",size:1,onclick:v,get disabled(){return t(R)},get loading(){return t(c)},children:(Y,Z)=>{var Q=ie("Start Indexing");r(Y,Q)},$$slots:{default:!0}})}r(W,G)},$$slots:{header:!0,default:!0}});var j=$(U,2),x=b(j);qe(x,{size:1,color:"secondary",children:(N,W)=>{var F=N$(),G=w(F),z=b(G);Te(z,{name:"info",size:2}),r(N,F)},$$slots:{default:!0}}),r(T,P)}});var M=$(E,2),I=T=>{cc(T,{get action(){return t(C)}})};k(M,T=>{t(C)&&T(I)}),r(s,p),fe(),a()}var B$=h('<a class="svelte-4d4nqo">Chat</a> & <a class="svelte-4d4nqo">Agent,</a>',1),F$=h(', <a class="svelte-4d4nqo">Instructions</a>,',1),q$=h('<a class="svelte-4d4nqo">Code Completions</a><!>',1),H$=h('<a class="svelte-4d4nqo">Next Edit</a>'),W$=h('<div class="c-augment-features svelte-4d4nqo"><!> <!> <!> <!></div>'),G$=h('<div class="c-folder-selection__content svelte-w9z64m"><!> <div class="c-folder-selection__buttons svelte-w9z64m"><!> <!></div> <!></div>'),U$=h('<div class="c-folder-selection svelte-w9z64m"><!></div>');function V$(s,e){me(e,!0);const[n,o]=je(),a=Qf(),i=new dr(an,new gr(an));function l(){i.openProjectFolder(),i.track(Ze.WEBVIEW.ONBOARDING_OPEN_FOLDER_CLICKED,{})}function c(){i.cloneRepository(),i.track(Ze.WEBVIEW.ONBOARDING_CLONE_REPOSITORY_CLICKED,{})}const u=d(()=>function(v){const m=v?.split("@")[0]??"";return m?m[0].toUpperCase()+m.slice(1):""}(V(a,"$userEmail",n)??void 0));Jt(()=>{i.track(Ze.WEBVIEW.ONBOARDING_FOLDER_SELECTION_VIEW_DISPLAYED,{}),an.postMessage({type:jt.folderSelectionLoaded})}),Xr(s,{children:(v,m)=>{var y=U$();{const f=g=>{vc(g,{showLogo:!0})};Hn(b(y),{maxWidth:"250px",header:f,children:(g,A)=>{var C=G$(),_=b(C);qe(_,{size:1,children:(I,T)=>{var O=B(),P=w(O),H=U=>{var j=ie();he(()=>He(j,`Hello, ${t(u)??""}.`)),r(U,j)},D=U=>{var j=ie("Welcome to Augment!");r(U,j)};k(P,U=>{t(u)?U(H):U(D,!1)}),r(I,O)},$$slots:{default:!0}});var p=$(_,2),E=b(p);xt(E,{variant:"soft",color:"neutral",size:2,onclick:l,children:(I,T)=>{qe(I,{size:1,children:(O,P)=>{var H=ie("Open a Folder");r(O,H)},$$slots:{default:!0}})},$$slots:{default:!0,iconLeft:(I,T)=>{Te(I,{name:"folder-open",slot:"iconLeft"})}}});var M=$(E,2);xt(M,{variant:"soft",color:"neutral",size:2,onclick:c,children:(I,T)=>{qe(I,{size:1,children:(O,P)=>{var H=ie("Clone a Repository");r(O,H)},$$slots:{default:!0}})},$$slots:{default:!0,iconLeft:(I,T)=>{Te(I,{name:"folders",slot:"iconLeft"})}}}),function(I,T){let O=S(T,"client",19,()=>{});var P=B(),H=w(P),D=U=>{var j=W$(),x=b(j);qe(x,{size:1,children:(z,q)=>{var L=ie("Augment Features:");r(z,L)},$$slots:{default:!0}});var N=$(x,2);qe(N,{size:1,children:(z,q)=>{var L=B$(),R=w(L),Y=$(R,2);he(()=>{nt(R,"href",`https://docs.augmentcode.com/using-augment/chat?utm_source=${O()??""}`),nt(Y,"href",`https://docs.augmentcode.com/using-augment/agent?utm_source=${O()??""}`)}),r(z,L)},$$slots:{default:!0}});var W=$(N,2);qe(W,{size:1,children:(z,q)=>{var L=q$(),R=w(L),Y=$(R),Z=Q=>{var K=F$(),J=$(w(K));he(()=>nt(J,"href",`https://docs.augmentcode.com/using-augment/instructions?utm_source=${O()??""}`)),r(Q,K)};k(Y,Q=>{O()!=="intellij"&&Q(Z)}),he(()=>nt(R,"href",`https://docs.augmentcode.com/using-augment/completions?utm_source=${O()??""}`)),r(z,L)},$$slots:{default:!0}});var F=$(W,2),G=z=>{qe(z,{size:1,children:(q,L)=>{var R=H$();he(()=>nt(R,"href",`https://docs.augmentcode.com/using-augment/next-edit?utm_source=${O()??""}`)),r(q,R)},$$slots:{default:!0}})};k(F,z=>{O()!=="intellij"&&z(G)}),r(U,j)};k(H,U=>{O()!==void 0&&U(D)}),r(I,P)}($(p,2),{}),r(g,C)},$$slots:{header:!0,default:!0}})}r(v,y)}}),fe(),o()}var j$=h('<div class="c-loading svelte-18w0lxw"><!></div>');function K$(s){return s&&function(e){return e&&e instanceof HTMLAnchorElement}(s)?s.closest("a"):null}var Y$=h("<div></div>"),X$=h('<main class="c-main-panel-view svelte-blrzw3"><!> <!></main>');function J$(s,e){me(e,!0);const n=()=>V(l,"$visibleApp",a),o=()=>V(c,"$isStateHydrated",a),[a,i]=je(),l=Eg(),c=qi();let u=Oe(!1);const v=Ct();rt(()=>{n()!==ss.chat||o()||t(u)||(v(Hi(void 0,{})),X(u,!0))}),Jt(()=>{an.postMessage({type:jt.mainPanelLoaded})});{let m=d(()=>n()===ss.chat),y=d(()=>n()===ss.chat);iv(s,{get fetch(){return t(m)},get wait(){return t(y)},children:(f,g)=>{var A=X$(),C=b(A),_=E=>{(function(M){Xr(M,{children:(I,T)=>{var O=j$(),P=b(O);ll(P,{}),r(I,O)}})})(E)},p=E=>{var M=B(),I=w(M),T=P=>{I$(P,{})},O=P=>{var H=B(),D=w(H),U=x=>{w$(x,{})},j=x=>{var N=B(),W=w(N),F=z=>{P$(z,{})},G=z=>{var q=B(),L=w(q),R=Y=>{V$(Y,{})};k(L,Y=>{n()===ss.folderSelection&&Y(R)},!0),r(z,q)};k(W,z=>{n()===ss.awaitingSyncingPermission?z(F):z(G,!1)},!0),r(x,N)};k(D,x=>{n()===ss.chat?x(U):x(j,!1)},!0),r(P,H)};k(I,P=>{n()===ss.signIn?P(T):P(O,!1)},!0),r(E,M)};k(C,E=>{n()===ss.loading||n()===ss.chat&&!o()?E(_):E(p,!1)}),function(E){var M=Y$();he(()=>nt(M,"id",uc)),r(E,M)}($(C,2)),yn(A,E=>function(M){function I(T){const O=K$(T.target);if(!O)return;const P=O.getAttribute("href");if(P&&P.startsWith("augment://")){const H=`Unhandled augment link: "${P}"`,D=new Error(H);return an.postMessage({type:jt.reportError,data:{originalRequestId:null,sanitizedMessage:D.message,stackTrace:D.stack||"",diagnostics:[]}}),an.postMessage({type:jt.showNotification,data:{message:H,type:"error"}}),T.stopImmediatePropagation(),T.preventDefault(),T.stopPropagation(),!1}}return M.addEventListener("click",I),{destroy(){M.removeEventListener("click",I)}}}(E)),r(f,A)},$$slots:{default:!0}})}fe(),i()}function Q$(s){ui.Root(s,{children:(e,n)=>{lv(e,{children:(o,a)=>{J$(o,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}(async function(){an&&an.initialize&&await an.initialize(),Rc(Q$,{target:document.getElementById("app")})})();export{Cl as A,nc as C,Ol as D,Yp as E,Bs as G,On as I,Fs as M,Es as P,Xo as R,Tp as S,Qs as T,rr as a,Tt as b,Un as c,Lr as d,Wy as e,xl as f,zl as g,ql as h,Ww as i,Gy as j,Na as k,sr as l,Pl as m,qy as n,Uw as o,S0 as p,Gw as q,Py as r,El as t};
//# sourceMappingURL=main-panel-BWaqdbJR.js.map
