import{W as ki,v as nt,x as R,H as o,Q as N,z as e,A as $e,P as s,a3 as ci,S as me,V as Vt,aT as ii,N as t,B as st,ae as se,a7 as De,O as pt,I as J,ab as z,aK as Ti,F as i,Z as Ke,Y as ai,aj as xi,_ as Zt,R as u,a6 as Qe,X as hi,aS as qi,ai as wi,D as xt,w as vi,C as Qt,b0 as Ai,L as ie,J as Be,af as ft,ag as bt,aL as ui,y as Ht,m as I,aa as re,ad as Li,G as gi,K as He,aJ as Ii,T as Me,aR as Ri,b3 as Ei,aI as di,b4 as Yt,an as Zi,at as Di,aG as Hi,ak as Vi,aH as Ui}from"./Icon-CaBYD5oO.js";import"./design-system-init-DCR3FqZN.js";/* empty css                                */import{M as Bi}from"./message-broker-CliB7GoL.js";import{R as Kt}from"./ra-diff-ops-model-Bh6ZhEmC.js";import{k as Wi}from"./key-CsCKik6T.js";import{t as Ji,s as Gi}from"./index-Ct3ef_qL.js";import{c as mi,p as Yi,i as Ki,b as ti,d as Qi,e as Fi,n as Xi,g as Oe,a as ri,M as ea,f as ta}from"./marked.esm-CBEAPn3z.js";import{g as It,a as ia,i as aa,b as na,D as sa}from"./diff-operations-D1Km8fUV.js";import{M as la,C as ra,a as oa,b as da}from"./Markdown-oTNiBtsM.js";import{a as ca,b as va,g as pa,M as fa}from"./index-DF_yYUtg.js";import{a as ha,I as Ci}from"./IconButtonAugment-Rffikxkp.js";import{T as Nt,a as Rt,C as ua}from"./TextTooltipAugment-B4cqQh4H.js";import{B as kt}from"./ButtonAugment-DECgcPdk.js";import{F as ga,g as oi,p as Mi,d as ma}from"./index-nbgGMYE9.js";import{L as Pi}from"./LanguageIcon-Du_otND8.js";import{C as _a}from"./Chevron-Ct6H6suA.js";import{F as ya}from"./Filespan-CzwbVFJm.js";import"./toggleHighContrast-iCsKcMx3.js";try{Gt=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(bi=new Gt.Error().stack)&&(Gt._sentryDebugIds=Gt._sentryDebugIds||{},Gt._sentryDebugIds[bi]="b1977a23-5f9d-4a24-8e83-015a3cc3ae93",Gt._sentryDebugIdIdentifier="sentry-dbid-b1977a23-5f9d-4a24-8e83-015a3cc3ae93")}catch{}var Gt,bi;class pi{constructor(a){this._asyncMsgSender=a}static key="remoteAgentDiffModel";_opts=null;_subscribers=new Set;subscribe(a){return this._subscribers.add(a),a(this),()=>{this._subscribers.delete(a)}}notifySubscribers(){this._subscribers.forEach(a=>a(this))}get opts(){return this._opts}updateOpts(a){this._opts=a,this.notifySubscribers()}async onPanelLoaded(){try{this.updateOpts(null);const a=await this._asyncMsgSender.send({type:ki.remoteAgentDiffPanelLoaded});this.updateOpts(a.data)}catch(a){console.error("Failed to load diff panel:",a),this.updateOpts(null)}}handleMessageFromExtension(a){const p=a.data;return!(!p||!p.type)&&p.type===ki.remoteAgentDiffPanelSetOpts&&(this.updateOpts(p.data),!0)}}var wa=o("<span><code><!></code></span>");function Ca(_e,a){nt(a,!0);let p=R(a,"element",15),Q=$e(()=>a.token.raw.slice(1,a.token.raw.length-1)),X=$e(()=>e(Q).startsWith('"')),g=$e(()=>/^#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}/.test(e(Q))),te=$e(()=>e(g)&&function(v){if(!/^#([0-9A-F]{3}|[0-9A-F]{6})$/i.test(v))throw new Error('Invalid hex color format. Expected "#RGB" or "#RRGGBB"');let m,he,le;return v.length===4?(m=parseInt(v.charAt(1),16),he=parseInt(v.charAt(2),16),le=parseInt(v.charAt(3),16),m*=17,he*=17,le*=17):(m=parseInt(v.slice(1,3),16),he=parseInt(v.slice(3,5),16),le=parseInt(v.slice(5,7),16)),.299*m+.587*he+.114*le<130}(e(Q)));var j=wa(),q=s(j);let ye;var B=s(q),ve=v=>{var m=se();me(()=>De(m,e(Q))),t(v,m)},M=v=>{var m=se();me(()=>De(m,e(Q))),t(v,m)};N(B,v=>{e(g)?v(ve):v(M,!1)}),ci(j,v=>p(v),()=>p()),me(v=>{ye=Vt(q,1,"markdown-codespan svelte-1sz0ne6",null,ye,v),ii(q,e(g)?`background-color: ${e(Q)}; color: ${e(te)?"white":"black"}`:"")},[()=>({"markdown-string":e(X)})]),t(_e,j),st()}function _i(_e,a){let p=R(a,"markdown",8);const Q={codespan:Ca};{let X=pt(()=>(z(p()),J(()=>p().replace(/`?#[0-9a-fA-F]{3,6}`?/g,g=>g.startsWith("`")?g:`\`${g}\``))));la(_e,{get markdown(){return e(X)},get renderers(){return Q}})}}const $a=(_e,a)=>{let p=null,Q=null,X=null,g=!1;function te(){X&&cancelAnimationFrame(X),X=requestAnimationFrame(()=>{const{path:B,onCollapseStateChange:ve}=a;if(g)return void(X=null);const M=Array.from(document.querySelectorAll(`[data-description-id^="${B}:"]`));let v=!1;for(const m of M)if(m!==_e&&j(_e,m)){v=!0;break}v&&(g=!0),ve&&ve(v),X=null})}function j(B,ve){const M=B.getBoundingClientRect(),v=ve.getBoundingClientRect();return!(M.bottom<=v.top||v.bottom<=M.top)}function q(){ye(),p=new MutationObserver(()=>{te()});const B=_e.closest(".descriptions")||document.body;p.observe(B,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","data-description-id"]}),window.ResizeObserver&&(Q=new ResizeObserver(()=>{te()}),Q.observe(_e)),window.addEventListener("resize",te),window.addEventListener("scroll",te)}function ye(){p&&(p.disconnect(),p=null),Q&&(Q.disconnect(),Q=null),X&&(cancelAnimationFrame(X),X=null),window.removeEventListener("resize",te),window.removeEventListener("scroll",te)}return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{q(),te()}):requestAnimationFrame(()=>{q(),te()}),{update:B=>{a=B,g=!1,te()},destroy:ye}};var ba=o('<div role="region" aria-label="Code diff description"><div class="c-diff-description__content svelte-52qo80"><!></div> <div class="c-diff-description__truncated-content svelte-52qo80"><!> <div class="c-diff-description__expand-hint svelte-52qo80">hover to expand</div></div></div>'),ka=o('<div class="toggle-button svelte-a73pgy"><!></div> <div class="descriptions svelte-a73pgy"></div>',1),xa=o('<div><div class="editor-container svelte-a73pgy"></div> <!></div>');function Aa(_e,a){nt(a,!0);const p=()=>xt(he,"$monaco",Q),[Q,X]=Qt(),g=qi();let te=R(a,"originalCode",3,""),j=R(a,"modifiedCode",3,""),q=R(a,"descriptions",19,()=>[]),ye=R(a,"lineOffset",3,0),B=R(a,"extraPrefixLines",19,()=>[]),ve=R(a,"extraSuffixLines",19,()=>[]),M=R(a,"areDescriptionsVisible",15,!0),v=R(a,"isNewFile",3,!1),m=R(a,"isDeletedFile",3,!1);const he=ca.getContext().monaco;let le,f=Ke(void 0),c=Ke(void 0),O=Ke(void 0),D=[],x=Ke(void 0);const $=va();let w,Z=vi(0),E=Ke(wi(v()?20*j().split(`
`).length+40:100));const S=p()?p().languages.getLanguages().map(_=>_.id):[];function l(_,b){if(b){const H=b.split(".").pop()?.toLowerCase();if(H){const pe=p()?.languages.getLanguages().find(oe=>oe.extensions?.includes("."+H))?.id;if(pe&&S.includes(pe))return pe}}return"plaintext"}const Fe=vi({});let ae=null;function xe(){if(!e(f))return;D=D.filter(H=>(H.dispose(),!1));const _=e(f).getOriginalEditor(),b=e(f).getModifiedEditor();D.push(_.onDidScrollChange(()=>{Ai(Z,_.getScrollTop())}),b.onDidScrollChange(()=>{Ai(Z,b.getScrollTop())}))}function Se(){if(!e(f)||!e(x))return;const _=e(f).getOriginalEditor(),b=e(f).getModifiedEditor();D.push(b.onDidContentSizeChange(()=>$.requestLayout()),_.onDidContentSizeChange(()=>$.requestLayout()),e(f).onDidUpdateDiff(()=>$.requestLayout()),b.onDidChangeHiddenAreas(()=>$.requestLayout()),_.onDidChangeHiddenAreas(()=>$.requestLayout()),b.onDidLayoutChange(()=>$.requestLayout()),_.onDidLayoutChange(()=>$.requestLayout()),b.onDidFocusEditorWidget(()=>{Pe(!0)}),_.onDidFocusEditorWidget(()=>{Pe(!0)}),b.onDidBlurEditorWidget(()=>{Pe(!1)}),_.onDidBlurEditorWidget(()=>{Pe(!1)}),b.onDidChangeModelContent(()=>{we=!0,ne=Date.now();const H=e(O)?.getValue()||"";if(H===j())return;const pe=H.replace(B().join(""),"").replace(ve().join(""),"");g("codeChange",{modifiedCode:pe});const oe=setTimeout(()=>{we=!1},500);D.push({dispose:()=>clearTimeout(oe)})})),function(){!e(x)||!e(f)||(ae&&clearTimeout(ae),ae=setTimeout(()=>{if(!e(x).__hasClickListener){const H=pe=>{const oe=pe.target;oe&&(oe.closest('[title="Show Unchanged Region"]')||oe.closest('[title="Hide Unchanged Region"]'))&&ee()};e(x)?.addEventListener("click",H),e(x).__hasClickListener=!0,D.push({dispose:()=>{e(x)?.removeEventListener("click",H)}})}e(f)&&D.push(e(f).onDidUpdateDiff(()=>{ee()}))},300))}()}xi(()=>{e(f)?.dispose(),e(c)?.dispose(),le?.dispose(),e(O)?.dispose(),D.forEach(_=>_.dispose()),ae&&clearTimeout(ae),w?.()});let ue=null;function ee(){ue&&clearTimeout(ue),ue=setTimeout(()=>{$.requestLayout(),ue=null},100),ue&&D.push({dispose:()=>{ue&&(clearTimeout(ue),ue=null)}})}function Te(_,b,H,pe=[],oe=[]){if(!p())return void console.error("Monaco not loaded. Diff view cannot be updated.");le?.dispose(),e(O)?.dispose(),b=b||"",H=H||"";const Ce=pe.join(""),Ne=oe.join("");if(b=v()?H.split(`
`).map(()=>" ").join(`
`):Ce+b+Ne,H=Ce+H+Ne,le=p().editor.createModel(b,void 0,_!==void 0?p().Uri.parse("file://"+_+`#${crypto.randomUUID()}`):void 0),m()&&(H=H.split(`
`).map(()=>" ").join(`
`)),i(O,p().editor.createModel(H,void 0,_!==void 0?p().Uri.parse("file://"+_+`#${crypto.randomUUID()}`):void 0),!0),e(f)){e(f).setModel({original:le,modified:e(O)});const be=e(f).getOriginalEditor();be&&be.updateOptions({lineNumbers:"off"}),xe(),ae&&clearTimeout(ae),ae=setTimeout(()=>{Se(),ae=null},300)}}ai(()=>{if(p()&&e(x))if(v()){i(c,p().editor.create(e(x),{automaticLayout:!0,stickyScroll:{enabled:!0},scrollBeyondLastLine:!1,minimap:{enabled:!1},overviewRulerBorder:!1,theme:a.theme,scrollbar:{alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},lineNumbers:pe=>`${ye()-B().length+pe}`}),!0);const _=l(j(),a.path);i(O,p().editor.createModel(j(),_,a.path!==void 0?p().Uri.parse("file://"+a.path+`#${crypto.randomUUID()}`):void 0),!0),e(c).setModel(e(O)),D.push(e(c).onDidChangeModelContent(()=>{we=!0,ne=Date.now();const pe=e(O)?.getValue()||"";if(pe===j())return;g("codeChange",{modifiedCode:pe});const oe=setTimeout(()=>{we=!1},500);D.push({dispose:()=>clearTimeout(oe)})})),D.push(e(c).onDidFocusEditorWidget(()=>{e(c)?.updateOptions({scrollbar:{handleMouseWheel:!0}})}),e(c).onDidBlurEditorWidget(()=>{e(c)?.updateOptions({scrollbar:{handleMouseWheel:!1}})}));const b=e(c).getContentHeight();i(E,Math.max(b,60),!0);const H=setTimeout(()=>{e(c)?.layout()},0);D.push({dispose:()=>clearTimeout(H)})}else i(f,p().editor.createDiffEditor(e(x),{automaticLayout:!0,useInlineViewWhenSpaceIsLimited:!0,enableSplitViewResizing:!0,stickyScroll:{enabled:!0},scrollBeyondLastLine:!1,minimap:{enabled:!1},renderOverviewRuler:!1,renderGutterMenu:!1,theme:a.theme,scrollbar:{alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},lineNumbers:_=>`${ye()-B().length+_}`,hideUnchangedRegions:{enabled:!0,revealLineCount:3,minimumLineCount:3,contextLineCount:3}}),!0),w&&w(),w=$.registerEditor({editor:e(f),updateHeight:Je,id:`monaco-diff-${crypto.randomUUID().slice(0,8)}`}),Te(a.path,te(),j(),B(),ve()),xe(),Se(),ae&&clearTimeout(ae),ae=setTimeout(()=>{$.requestLayout(),ae=null},100);else console.error("Monaco not loaded. Diff view cannot be initialized.")});let we=!1,ne=0;function qe(_,b=!0){return e(f)?(b?e(f).getModifiedEditor():e(f).getOriginalEditor()).getTopForLineNumber(_):18*_}function Je(){if(!e(f))return;const _=e(f).getModel(),b=_?.original,H=_?.modified;if(!b||!H)return;const pe=e(f).getOriginalEditor(),oe=e(f).getModifiedEditor(),Ce=e(f).getLineChanges()||[];let Ne;if(Ce.length===0){const be=pe.getContentHeight(),ze=oe.getContentHeight();Ne=Math.max(100,be,ze)}else{let be=0,ze=0;for(const L of Ce)L.originalEndLineNumber>0&&(be=Math.max(be,L.originalEndLineNumber)),L.modifiedEndLineNumber>0&&(ze=Math.max(ze,L.modifiedEndLineNumber));be=Math.min(be+3,b.getLineCount()),ze=Math.min(ze+3,H.getLineCount());const Xe=pe.getTopForLineNumber(be),r=oe.getTopForLineNumber(ze);Ne=Math.max(Xe,r)+60}i(E,Math.min(Ne,2e4),!0),e(f).layout(),Ee()}function Pe(_){if(!e(f))return;const b=e(f).getOriginalEditor(),H=e(f).getModifiedEditor();b.updateOptions({scrollbar:{handleMouseWheel:_}}),H.updateOptions({scrollbar:{handleMouseWheel:_}})}function ge(_){if(!e(f))return e(c)?e(c).getTopForLineNumber(_.range.start+1):0;const b=e(f).getModel(),H=b?.original,pe=b?.modified;if(!H||!pe)return 0;const oe=qe(_.range.start+1,!1),Ce=qe(_.range.start+1,!0);return oe&&!Ce?oe:!oe&&Ce?Ce:Math.min(oe,Ce)}function Ee(){if(!e(f)&&!e(c)||q().length===0)return;const _={};q().forEach((b,H)=>{_[H]=ge(b)}),function(b,H=50){const pe=Object.keys(b).sort((oe,Ce)=>b[Number(oe)]-b[Number(Ce)]);for(let oe=0;oe<pe.length-1;oe++){const Ce=Number(pe[oe]),Ne=b[Ce];b[Ce+1]-Ne<H&&(b[Number(pe[oe+1])]=Ne+H)}}(_),Fe.set(_)}const lt=crypto.randomUUID();Zt(()=>{if(_=j(),!(we||Date.now()-ne<1e3||e(O)&&e(O).getValue()===B().join("")+_+ve().join("")))if(v()&&e(c)){if(e(O))e(O).setValue(j());else{const b=l(j(),a.path);p()&&i(O,p().editor.createModel(j(),b,a.path!==void 0?p().Uri.parse("file://"+a.path+`#${crypto.randomUUID()}`):void 0),!0),e(O)&&e(c).setModel(e(O))}i(E,20*j().split(`
`).length+40),e(c).layout()}else!v()&&e(f)&&(Te(a.path,te(),j(),B(),ve()),$.requestLayout());var _}),Zt(()=>{(e(f)||e(c))&&q().length>0&&Ee()}),Zt(()=>{if(v()&&j()&&e(c)){const _=e(c).getContentHeight();i(E,Math.max(_,60),!0),e(c).layout()}});var Ie=xa();let ht;var ut=s(Ie);ci(ut,_=>i(x,_),()=>e(x));var rt=u(ut,2),We=_=>{var b=ka(),H=ie(b),pe=s(H);Ci(pe,{variant:"ghost",color:"neutral",size:1,onclick:()=>M(!M()),children:(Ce,Ne)=>{{let be=$e(()=>M()?"x":"book");Be(Ce,{get name(){return e(be)}})}},$$slots:{default:!0}});var oe=u(H,2);ft(oe,21,q,bt,(Ce,Ne,be)=>{{let ze=$e(()=>xt(Fe,"$descriptionPositions",Q)[be]||ge(e(Ne)));(function(Xe,r){nt(r,!0);let L=Ke(!1),C=Ke(!1),A=Ke(void 0),W=Ke(0);const d=Ti(k=>{i(L,k,!0)},100);function y(k){const U=document.createElement("canvas").getContext("2d");return U?U.measureText(k).width:8*k.length}function n(){if(e(A)){const k=e(A).getBoundingClientRect();i(W,k.width-128)}}let h=null;ai(()=>{e(A)&&typeof ResizeObserver<"u"&&(h=new ResizeObserver(()=>{n()}),h.observe(e(A)),n())}),xi(()=>{h&&h.disconnect()}),Zt(()=>{e(A)&&n()});let F=$e(()=>(()=>{const k=r.description.text.split(`
`)[0].split(" ");let U="";if(e(W)<=0)for(const K of k){const P=U+(U?" ":"")+K;if(P.length>30)break;U=P}else for(const K of k){const P=U+(U?" ":"")+K;if(y(P+"...")>e(W))break;U=P}return U+"..."})());var T=ba();let G;var Y=s(T);_i(s(Y),{get markdown(){return r.description.text}});var V=u(Y,2);_i(s(V),{get markdown(){return e(F)}}),ci(T,k=>i(A,k),()=>e(A)),ha(T,(k,U)=>$a?.(k,U),()=>({path:r.fileId,onCollapseStateChange:k=>i(C,k,!0)})),me((k,U)=>{G=Vt(T,1,"c-diff-description svelte-52qo80",null,G,k),ii(T,`top: ${r.position??""}px;`),Qe(T,"data-description-id",U)},[()=>({"c-diff-description__collapsed":e(C)&&!e(L),"c-diff-description__hovered":e(L)}),()=>function(k,U){return`${k}:${U}`}(r.fileId,r.index)]),hi("mouseenter",T,k=>{d.cancel(),i(L,!0),k.stopPropagation()}),hi("mouseleave",T,k=>{d(!1),k.stopPropagation()}),t(Xe,T),st()})(Ce,{get description(){return e(Ne)},get position(){return e(ze)},get fileId(){return lt},index:be})}}),me(()=>ii(oe,`transform: translateY(${-xt(Z,"$scrollY",Q)}px)`)),t(_,b)};N(rt,_=>{q().length>0&&_(We)}),me(_=>{ht=Vt(Ie,1,"monaco-diff-container svelte-a73pgy",null,ht,_),ii(ut,`height: ${e(E)??""}px`)},[()=>({"monaco-diff-container-with-descriptions":q().length>0&&M()})]),t(_e,Ie),st(),X()}const Ni=Symbol("focusedPath");function Oi(){return Ht(Ni)}function yi(_e){return`file-diff-${It(_e)}`}var Fa=o('<!> <img class="image-preview svelte-1bijh4a"/>',1),Ma=o("<!> <!>",1),La=o("<!> ",1),Ea=o('<!> <img class="image-preview image-preview--previous svelte-1bijh4a"/>',1),Da=o('<!> <img class="image-preview svelte-1bijh4a"/> <!>',1),Pa=o('<div class="image-container svelte-1bijh4a"><!></div>'),Na=o("<!> No text preview available.",1),Oa=o('<div class="binary-file-message svelte-1bijh4a"><!></div>'),za=o('<div class="too-large-message svelte-1bijh4a"><!></div>'),ja=o('<div class="changes svelte-1bijh4a"><!></div>'),Sa=o('<span class="c-directory svelte-1bijh4a"> </span>'),Ta=o('<span class="new-file-badge svelte-1bijh4a">New File</span>'),qa=o('<span class="additions svelte-1bijh4a"><!></span>'),Ia=o('<span class="deletions svelte-1bijh4a"><!></span>'),Ra=o('<div class="changes-indicator svelte-1bijh4a"><!> <!></div>'),Za=o('<div class="applied svelte-1bijh4a"><!></div>'),Ha=o('<div class="applied__icon svelte-1bijh4a"><!></div>'),Va=o("<!> <!>",1),Ua=o('<div slot="header" class="header svelte-1bijh4a"><!> <div class="c-path svelte-1bijh4a"><!> <!></div> <!> <!> <!></div>'),Ba=o("<div><!></div>");function zi(_e,a){nt(a,!1);const p=()=>xt(Ii,"$themeStore",Q),[Q,X]=Qt(),g=I(),te=I(),j=I(),q=I(),ye=I(),B=I(),ve=I(),M=I(),v=I(),m=I(),he=I(),le=I(),f=I(),c=I(),O=I(),D=I(),x=I(),$=I(),w=I(),Z=I(),E=I();let S=R(a,"path",8),l=R(a,"change",12),Fe=R(a,"descriptions",24,()=>[]),ae=R(a,"areDescriptionsVisible",12,!0),xe=R(a,"isExpandedDefault",8),Se=R(a,"isCollapsed",28,()=>!xe()),ue=R(a,"isApplying",8),ee=R(a,"hasApplied",8),Te=R(a,"onApplyChanges",24,()=>{}),we=R(a,"onCodeChange",24,()=>{}),ne=R(a,"onOpenFile",24,()=>{}),qe=R(a,"isAgentFromDifferentRepo",8,!1);const Je=Oi(),Pe=Ht(Kt.key);let ge=I(l().modifiedCode);function Ee(b){i(ge,b.detail.modifiedCode),we()?.(e(ge))}function lt(){Pe.reportApplyChangesEvent(),l(l().modifiedCode=e(ge),!0),we()?.(e(ge)),Te()?.()}let Ie=I(e(w));function ht(){i(Ie,`Open ${e(w)??"file"}`)}async function ut(){ne()&&(i(Ie,"Opening file..."),await ne()()?ht():(i(Ie,"Failed to open file. Does the file exist?"),setTimeout(()=>{ht()},2e3)))}ai(()=>{ht()}),re(()=>z(l()),()=>{i(ge,l().modifiedCode)}),re(()=>z(l()),()=>{i(g,ia(l().diff))}),re(()=>e(g),()=>{i(te,e(g).additions)}),re(()=>e(g),()=>{i(j,e(g).deletions)}),re(()=>z(l()),()=>{i(q,aa(l()))}),re(()=>z(l()),()=>{i(ye,na(l()))}),re(()=>z(S()),()=>{i(B,Ki(S()))}),re(()=>z(S()),()=>{i(ve,ti(S()))}),re(()=>z(S()),()=>{i(M,Qi(S()))}),re(()=>z(l()),()=>{i(v,l().originalCode?.length||0)}),re(()=>e(ge),()=>{i(m,e(ge)?.length||0)}),re(()=>e(v),()=>{i(he,Fi(e(v)))}),re(()=>e(m),()=>{i(le,Fi(e(m)))}),re(()=>(e(ge),z(l())),()=>{i(f,!e(ge)&&!!l().originalCode)}),re(()=>(e(ge),z(l())),()=>{i(c,!!e(ge)&&!l().originalCode)}),re(()=>e(B),()=>{i(O,e(B))}),re(()=>(e(B),e(M)),()=>{i(D,!e(B)&&e(M))}),re(()=>(e(B),e(M),e(le),e(f),e(he),e(c)),()=>{i(x,!e(B)&&!e(M)&&(e(le)||e(f)&&e(he)||e(c)&&e(le)))}),re(()=>p(),()=>{i($,pa(p()?.category,p()?.intensity))}),re(()=>z(S()),()=>{i(w,Xi(S()))}),re(()=>(z(ue()),z(qe())),()=>{i(Z,ue()||qe())}),re(()=>(z(ue()),z(ee()),z(qe())),()=>{i(E,ue()?"Applying changes...":ee()?"Reapply changes to local file":qe()?"Cannot apply changes from a different repository locally":"Apply changes to local file")}),Li(),gi();var rt=Ba();let We;var _=s(rt);ra(_,{stickyHeader:!0,get collapsed(){return Se()},set collapsed(b){Se(b)},children:(b,H)=>{var pe=ja(),oe=s(pe),Ce=be=>{var ze=Pa(),Xe=s(ze),r=C=>{var A=Ma(),W=ie(A);Me(W,{class:"image-info-text",children:(n,h)=>{var F=se();me(T=>De(F,`Image deleted: ${T??""}`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(n,F)},$$slots:{default:!0}});var d=u(W,2),y=n=>{var h=Fa(),F=ie(h);Me(F,{class:"image-info-text",children:(G,Y)=>{var V=se("Previous version:");t(G,V)},$$slots:{default:!0}});var T=u(F,2);me((G,Y,V)=>{Qe(T,"src",`data:${G??""};base64,${Y??""}`),Qe(T,"alt",`Original ${V??""}`)},[()=>(z(ti),z(S()),J(()=>ti(S()))),()=>(z(l()),J(()=>btoa(l().originalCode))),()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(n,h)};N(d,n=>{z(l()),J(()=>l().originalCode)&&n(y)}),t(C,A)},L=C=>{var A=He(),W=ie(A),d=y=>{var n=Da(),h=ie(n);Me(h,{class:"image-info-text",children:(Y,V)=>{var k=La(),U=ie(k),K=fe=>{var ot=se("New image added");t(fe,ot)},P=fe=>{var ot=se("Image modified");t(fe,ot)};N(U,fe=>{e(q)||e(c)?fe(K):fe(P,!1)});var de=u(U);me(fe=>De(de,`: ${fe??""}`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(Y,k)},$$slots:{default:!0}});var F=u(h,2),T=u(F,2),G=Y=>{var V=Ea(),k=ie(V);Me(k,{class:"image-info-text",children:(K,P)=>{var de=se("Previous version:");t(K,de)},$$slots:{default:!0}});var U=u(k,2);me((K,P,de)=>{Qe(U,"src",`data:${K??""};base64,${P??""}`),Qe(U,"alt",`Original ${de??""}`)},[()=>(z(ti),z(S()),J(()=>ti(S()))),()=>(z(l()),J(()=>btoa(l().originalCode))),()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(Y,V)};N(T,Y=>{z(l()),e(ge),e(q),J(()=>l().originalCode&&e(ge)!==l().originalCode&&!e(q))&&Y(G)}),me((Y,V)=>{Qe(F,"src",`data:${e(ve)??""};base64,${Y??""}`),Qe(F,"alt",`Current ${V??""}`)},[()=>(e(ge),J(()=>btoa(e(ge)))),()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(y,n)};N(W,y=>{e(ge)&&y(d)},!0),t(C,A)};N(Xe,C=>{e(f)?C(r):C(L,!1)}),t(be,ze)},Ne=be=>{var ze=He(),Xe=ie(ze),r=C=>{var A=Oa(),W=s(A);Me(W,{children:(d,y)=>{var n=Na(),h=ie(n),F=G=>{var Y=se();me(V=>De(Y,`Binary file added: ${V??""}.`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(G,Y)},T=G=>{var Y=He(),V=ie(Y),k=K=>{var P=se();me(de=>De(P,`Binary file deleted: ${de??""}.`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(K,P)},U=K=>{var P=se();me(de=>De(P,`Binary file modified: ${de??""}.`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(K,P)};N(V,K=>{e(f)?K(k):K(U,!1)},!0),t(G,Y)};N(h,G=>{e(q)||e(c)?G(F):G(T,!1)}),t(d,n)},$$slots:{default:!0}}),t(C,A)},L=C=>{var A=He(),W=ie(A),d=n=>{var h=za(),F=s(h);Me(F,{size:1,children:(T,G)=>{var Y=se();me(V=>De(Y,`File "${V??""}" is too large to display a diff (size: ${(e(f)?e(v):e(m))??""} bytes, max: ${ea} bytes).`),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(T,Y)},$$slots:{default:!0}}),t(n,h)},y=n=>{Aa(n,{get path(){return S()},get originalCode(){return z(l()),J(()=>l().originalCode)},get modifiedCode(){return e(ge)},get theme(){return e($)},get descriptions(){return Fe()},get isNewFile(){return e(q)},get isDeletedFile(){return e(ye)},get areDescriptionsVisible(){return ae()},set areDescriptionsVisible(h){ae(h)},$$events:{codeChange:Ee},$$legacy:!0})};N(W,n=>{e(x)?n(d):n(y,!1)},!0),t(C,A)};N(Xe,C=>{e(D)?C(r):C(L,!1)},!0),t(be,ze)};N(oe,be=>{e(O)?be(Ce):be(Ne,!1)}),t(b,pe)},$$slots:{default:!0,header:(b,H)=>{var pe=Ua(),oe=s(pe);oa(oe,{});var Ce=u(oe,2),Ne=s(Ce);{let d=pt(()=>(z(Rt),J(()=>[Rt.Hover])));Nt(Ne,{get content(){return e(Ie)},get triggerOn(){return e(d)},delayDurationMs:300,children:(y,n)=>{kt(y,{variant:"ghost-block",color:"neutral",size:1,class:"c-codeblock__filename",$$events:{click:ut},children:(h,F)=>{var T=se();me(G=>De(T,G),[()=>(z(Oe),e(w),J(()=>Oe(e(w))))]),t(h,T)},$$slots:{default:!0}})},$$slots:{default:!0}})}var be=u(Ne,2),ze=d=>{var y=Sa(),n=s(y);me(h=>De(n,h),[()=>(z(ri),e(w),J(()=>ri(e(w))))]),t(d,y)};N(be,d=>{z(ri),e(w),J(()=>ri(e(w)))&&d(ze)});var Xe=u(Ce,2),r=d=>{var y=Ta();t(d,y)},L=d=>{var y=Ra(),n=s(y),h=G=>{var Y=qa(),V=s(Y);Me(V,{size:1,children:(k,U)=>{var K=se();me(()=>De(K,`+${e(te)??""}`)),t(k,K)},$$slots:{default:!0}}),t(G,Y)};N(n,G=>{e(te)>0&&G(h)});var F=u(n,2),T=G=>{var Y=Ia(),V=s(Y);Me(V,{size:1,children:(k,U)=>{var K=se();me(()=>De(K,`-${e(j)??""}`)),t(k,K)},$$slots:{default:!0}}),t(G,Y)};N(F,G=>{e(j)>0&&G(T)}),t(d,y)};N(Xe,d=>{e(q)?d(r):d(L,!1)});var C=u(Xe,2);{let d=pt(()=>(z(Rt),J(()=>[Rt.Hover])));Nt(C,{get content(){return e(E)},get triggerOn(){return e(d)},delayDurationMs:300,children:(y,n)=>{kt(y,{variant:"ghost-block",color:"neutral",size:2,get disabled(){return e(Z)},$$events:{click:lt},children:(h,F)=>{var T=Va(),G=ie(T),Y=P=>{var de=se("Applied");t(P,de)},V=P=>{var de=se("Apply");t(P,de)};N(G,P=>{ee()?P(Y):P(V,!1)});var k=u(G,2),U=P=>{var de=Za(),fe=s(de);Be(fe,{name:"check"}),t(P,de)},K=P=>{var de=Ha(),fe=s(de);Be(fe,{name:"circle-play"}),t(P,de)};N(k,P=>{ee()?P(U):P(K,!1)}),t(h,T)},$$slots:{default:!0}})},$$slots:{default:!0}})}var A=u(C,2),W=d=>{{let y=pt(()=>(z(Rt),J(()=>[Rt.Hover])));Nt(d,{get content(){return e(Ie)},get triggerOn(){return e(y)},delayDurationMs:300,children:(n,h)=>{Ci(n,{size:1,variant:"ghost",color:"neutral",$$events:{click:ut},children:(F,T)=>{Be(F,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}})}};N(A,d=>{ee()&&d(W)}),t(b,pe)}},$$legacy:!0}),me((b,H)=>{We=Vt(rt,1,"c svelte-1bijh4a",null,We,b),Qe(rt,"id",H)},[()=>({focused:xt(Je,"$focusedPath",Q)===S()}),()=>(z(yi),z(S()),J(()=>yi(S())))]),t(_e,rt),st(),X()}var Wa=(_e,a)=>_e.key==="Enter"&&a(),Ja=o('<span class="full-path-text svelte-1l1oxw5"> </span>'),Ga=o('<div class="tree-node__children svelte-1l1oxw5" role="group"></div>'),Ya=o('<div class="tree-node svelte-1l1oxw5"><div role="treeitem" tabindex="0"><div class="tree-node__indent svelte-1l1oxw5"></div> <div class="tree-node__icon-container svelte-1l1oxw5"><!></div> <span><!></span></div> <!></div>');function ji(_e,a){nt(a,!0);const p=()=>xt(j,"$focusedPath",Q),[Q,X]=Qt();let g=R(a,"node",15),te=R(a,"indentLevel",3,0);const j=Oi();function q(){g().isFile?j.set(g().path):g(g().isExpanded=!g().isExpanded,!0)}var ye=Ya(),B=s(ye);let ve;B.__click=q,B.__keydown=[Wa,q];var M=s(B),v=u(M,2),m=s(v),he=$=>{{let w=$e(()=>g().isExpanded?"down":"right");_a($,{get direction(){return e(w)},size:1})}},le=$=>{Pi($,{get filename(){return g().name}})};N(m,$=>{g().isFile?$(le,!1):$(he)});var f=u(v,2);let c;var O=s(f);Me(O,{size:1,children:($,w)=>{var Z=Ja(),E=s(Z);me(()=>De(E,g().displayName||g().name)),t($,Z)},$$slots:{default:!0}});var D=u(B,2),x=$=>{var w=Ga();ft(w,21,()=>Array.from(g().children.values()).sort((Z,E)=>Z.isFile===E.isFile?Z.name.localeCompare(E.name):Z.isFile?1:-1),bt,(Z,E)=>{{let S=$e(()=>te()+1);ji(Z,{get node(){return e(E)},get indentLevel(){return e(S)}})}}),t($,w)};N(D,$=>{!g().isFile&&g().isExpanded&&g().children.size>0&&$(x)}),me(($,w)=>{ve=Vt(B,1,"tree-node__content svelte-1l1oxw5",null,ve,$),Qe(B,"aria-selected",g().path===p()),Qe(B,"aria-expanded",g().isFile?void 0:g().isExpanded),ii(M,`width: ${6*te()}px`),c=Vt(f,1,"tree-node__label svelte-1l1oxw5",null,c,w),Qe(f,"title",g().displayName||g().name)},[()=>({selected:g().path===p(),"collapsed-folder":g().displayName&&!g().isFile}),()=>({"full-path":g().displayName})]),t(_e,ye),st(),X()}Ri(["click","keydown"]);var Ka=o('<div class="tree-view__loading svelte-7hhod8"><div class="tree-view__skeleton svelte-7hhod8"><div class="tree-view__skeleton-item svelte-7hhod8"></div> <div class="tree-view__skeleton-item svelte-7hhod8" style="margin-left: 12px;"></div> <div class="tree-view__skeleton-item svelte-7hhod8" style="margin-left: 12px;"></div> <div class="tree-view__skeleton-item svelte-7hhod8"></div> <div class="tree-view__skeleton-item svelte-7hhod8" style="margin-left: 12px;"></div> <div class="tree-view__skeleton-item svelte-7hhod8" style="width: 70%;"></div></div></div>'),Qa=o('<div class="tree-view__empty svelte-7hhod8"><!></div>'),Xa=o('<div class="tree-view svelte-7hhod8"><div class="tree-view__content svelte-7hhod8" role="tree" aria-label="Changed Files"><!></div></div>');function Si(_e,a){nt(a,!0);let p=R(a,"changedFiles",19,()=>[]),Q=R(a,"isLoading",3,!1);function X(M){const v={name:"",path:"",isFile:!1,children:new Map,isExpanded:!0};return M.forEach(m=>{const he=m.change_type===ga.deleted?m.old_path:m.new_path;he&&function(le,f){const c=f.split("/");let O=le;for(let D=0;D<c.length;D++){const x=c[D],$=D===c.length-1,w=c.slice(0,D+1).join("/");O.children.has(x)||O.children.set(x,{name:x,path:w,isFile:$,children:new Map,isExpanded:!0}),O=O.children.get(x)}}(v,he)}),function(m){if(!m.isFile){if(m.path===""){const he=Array.from(m.children.values()).filter(le=>!le.isFile);for(const le of he)g(le,!0);return}g(m)}}(v),v}function g(M,v=!1){if(M.isFile)return;let m="";v&&(m=function(c){let O=c.path.split("/"),D=c;for(;;){const x=Array.from(D.children.values()).filter(w=>!w.isFile),$=Array.from(D.children.values()).filter(w=>w.isFile);if(x.length!==1||$.length!==0)break;D=x[0],O.push(D.name)}return O.join("/")}(M));const he=Array.from(M.children.values()).filter(c=>!c.isFile);for(const c of he)g(c);const le=Array.from(M.children.values()).filter(c=>!c.isFile),f=Array.from(M.children.values()).filter(c=>c.isFile);if(le.length===1&&f.length===0){const c=le[0],O=c.name;if(v){M.displayName=m||`${M.name}/${O}`;for(const[D,x]of c.children.entries()){const $=`${D}`;M.children.set($,x)}M.children.delete(O)}else{M.displayName?c.displayName=`${M.displayName}/${O}`:c.displayName=`${M.name}/${O}`;for(const[D,x]of c.children.entries()){const $=`${O}/${D}`;M.children.set($,x)}M.children.delete(O)}}}let te=$e(()=>X(p()));var j=Xa(),q=s(j),ye=s(q),B=M=>{var v=Ka();t(M,v)},ve=M=>{var v=He(),m=ie(v),he=f=>{var c=Qa(),O=s(c);Me(O,{size:1,color:"neutral",children:(D,x)=>{var $=se("No changed files");t(D,$)},$$slots:{default:!0}}),t(f,c)},le=f=>{var c=He(),O=ie(c);ft(O,17,()=>Array.from(e(te).children.values()).sort((D,x)=>D.isFile===x.isFile?D.name.localeCompare(x.name):D.isFile?1:-1),bt,(D,x)=>{ji(D,{get node(){return e(x)},indentLevel:0})}),t(f,c)};N(m,f=>{e(te).children.size===0?f(he):f(le,!1)},!0),t(M,v)};N(ye,M=>{Q()?M(B):M(ve,!1)}),t(_e,j),st()}var en=o('<!> <div class="c-edits-list-controls__icon svelte-1rnlk4v"><!></div>',1),tn=o("<div><!></div>"),an=o('<div class="c-edits-list-header svelte-1rnlk4v"><div class="c-edits-list-controls svelte-1rnlk4v"><!></div></div> <div class="c-edits-list svelte-1rnlk4v"><div class="c-edits-section svelte-1rnlk4v"></div></div>',1),nn=o('<div class="c-edits-list c-edits-list--empty svelte-1rnlk4v"><!></div>'),sn=o('<div class="c-edits-list-container svelte-1rnlk4v"><div class="c-file-explorer__layout svelte-1rnlk4v"><div class="c-file-explorer__tree svelte-1rnlk4v"><div class="c-file-explorer__tree__header svelte-1rnlk4v"><!> <!></div></div> <div class="c-file-explorer__details svelte-1rnlk4v"><!></div></div></div>');function ln(_e,a){nt(a,!0);let p=R(a,"onOpenFile",19,()=>{}),Q=R(a,"pendingFiles",19,()=>[]),X=R(a,"appliedFiles",19,()=>[]),g=R(a,"isLoadingTreeView",3,!1),te=Ke(wi({})),j=Ke(!1),q=Ke(!1);function ye(){if(!a.onApplyChanges)return;const Z=e(v).map(S=>S.qualifiedPathName.relPath);if(Z.every(S=>X().includes(S)))return void i(q,!0);const E=Z.filter(S=>!X().includes(S)&&!Q().includes(S));E.length!==0&&(i(j,!0),i(q,!1),E.forEach(S=>{const l=e(v).find(Fe=>Fe.qualifiedPathName.relPath===S);if(l){const Fe=e(te)[S]||l.newContents;a.onApplyChanges(S,l.oldContents,Fe)}}))}let B=$e(()=>JSON.stringify(a.changedFiles)),ve=$e(()=>JSON.stringify(X())),M=$e(()=>JSON.stringify(Q()));Zt(()=>{e(B)&&(i(te,{},!0),i(j,!1),i(q,!1))});let v=$e(()=>a.changedFiles.map(Z=>{const E=Z.new_path||Z.old_path,S=Z.old_contents||"",l=Z.new_contents||"",Fe=sa.generateDiff(Z.old_path,Z.new_path,S,l),ae=function(xe,Se){const ue=mi("oldFile","newFile",xe,Se,"","",{context:3}),ee=Yi(ue);let Te=0,we=0,ne=[];for(const qe of ee)for(const Je of qe.hunks)for(const Pe of Je.lines){const ge=Pe.startsWith("+"),Ee=Pe.startsWith("-");ge&&Te++,Ee&&we++,ne.push({value:Pe,added:ge,removed:Ee})}return{totalAddedLines:Te,totalRemovedLines:we,changes:ne,diff:ue}}(S,l);return e(te)[E]||(e(te)[E]=l),{qualifiedPathName:{rootPath:"",relPath:E},lineChanges:ae,oldContents:S,newContents:l,diff:Fe}})),m=$e(()=>(()=>{if(e(B)&&e(ve)&&e(M)){const Z=e(v).map(E=>E.qualifiedPathName.relPath);return Z.length!==0&&Z.some(E=>!X().includes(E)&&!Q().includes(E))}return!1})());Zt(()=>{if(e(j)){const Z=e(v).map(E=>E.qualifiedPathName.relPath);Z.filter(E=>!X().includes(E)&&!Q().includes(E)).length===0&&Z.every(E=>X().includes(E)||Q().includes(E))&&Q().length===0&&X().length>0&&(i(j,!1),i(q,!0))}}),Zt(()=>{if(e(v).length>0&&!e(j)&&e(ve)){const Z=e(v).map(E=>E.qualifiedPathName.relPath);if(Z.length>0){const E=Z.every(S=>X().includes(S));E&&X().length>0?i(q,!0):!E&&e(q)&&i(q,!1)}}});var he=sn(),le=s(he),f=s(le),c=s(f),O=s(c);Me(O,{size:1,class:"c-file-explorer__tree__header__label",children:(Z,E)=>{var S=se("Changed files");t(Z,S)},$$slots:{default:!0}}),Si(u(O,2),{get changedFiles(){return a.changedFiles},get isLoading(){return g()}});var D=u(f,2),x=s(D),$=Z=>{var E=an(),S=ie(E),l=s(S),Fe=s(l),ae=ue=>{{let ee=$e(()=>e(j)||e(q)||Q().length>0||!e(m));kt(ue,{variant:"ghost-block",color:"neutral",size:2,get disabled(){return e(ee)},$$events:{click:ye},children:(Te,we)=>{var ne=en(),qe=ie(ne),Je=lt=>{var Ie=se("Applying...");t(lt,Ie)},Pe=lt=>{var Ie=He(),ht=ie(Ie),ut=We=>{var _=se("All applied");t(We,_)},rt=We=>{var _=se("Apply all");t(We,_)};N(ht,We=>{e(q)?We(ut):We(rt,!1)},!0),t(lt,Ie)};N(qe,lt=>{e(j)?lt(Je):lt(Pe,!1)});var ge=u(qe,2),Ee=s(ge);Be(Ee,{name:"circle-play"}),t(Te,ne)},$$slots:{default:!0}})}};N(Fe,ue=>{e(v).length>0&&ue(ae)});var xe=u(S,2),Se=s(xe);ft(Se,21,()=>e(v),ue=>ue.qualifiedPathName.relPath,(ue,ee)=>{var Te=tn(),we=s(Te);{let ne=$e(()=>Q().includes(e(ee).qualifiedPathName.relPath)),qe=$e(()=>X().includes(e(ee).qualifiedPathName.relPath)),Je=$e(()=>p()?()=>p()(e(ee).qualifiedPathName.relPath):void 0);zi(we,{get path(){return e(ee).qualifiedPathName.relPath},get change(){return e(ee).diff},get isApplying(){return e(ne)},get hasApplied(){return e(qe)},onCodeChange:Pe=>{(function(ge,Ee){e(te)[ge]=Ee})(e(ee).qualifiedPathName.relPath,Pe)},onApplyChanges:()=>{const Pe=e(te)[e(ee).qualifiedPathName.relPath]||e(ee).newContents;a.onApplyChanges(e(ee).qualifiedPathName.relPath,e(ee).oldContents,Pe)},get onOpenFile(){return e(Je)},isExpandedDefault:!0})}Ji(3,Te,()=>Gi),t(ue,Te)}),t(Z,E)},w=Z=>{var E=nn(),S=s(E);Me(S,{size:1,color:"neutral",children:(l,Fe)=>{var ae=se("No changes to show");t(l,ae)},$$slots:{default:!0}}),t(Z,E)};N(x,Z=>{e(v).length>0?Z($):Z(w,!1)}),t(_e,he),st()}var rn=Ei('<path fill-rule="evenodd" clip-rule="evenodd"></path>'),on=Ei('<svg width="14" viewBox="0 0 20 20" fill="currentColor" class="svelte-pr9d2v"><!></svg>'),dn=o('<div class="c-skeleton-diff__controls svelte-1pui4kt"><div class="c-skeleton-diff__button svelte-1pui4kt"></div></div>'),cn=o('<div class="c-skeleton-diff__changes-item svelte-1pui4kt"><div class="c-skeleton-diff__file-header svelte-1pui4kt"><div class="c-skeleton-diff__file-info svelte-1pui4kt"><div class="c-skeleton-diff__file-icon svelte-1pui4kt"></div> <div class="c-skeleton-diff__file-path svelte-1pui4kt"></div></div> <div class="c-skeleton-diff__file-actions svelte-1pui4kt"></div></div> <div class="c-skeleton-diff__code-block svelte-1pui4kt"><div class="c-skeleton-diff__code-line svelte-1pui4kt"><span class="c-skeleton-diff__line-number svelte-1pui4kt"></span> <span class="c-skeleton-diff__line-content svelte-1pui4kt"></span></div> <div class="c-skeleton-diff__code-line svelte-1pui4kt"><span class="c-skeleton-diff__line-number svelte-1pui4kt"></span> <span class="c-skeleton-diff__line-content svelte-1pui4kt" style="width: 70%;"></span></div> <div class="c-skeleton-diff__code-line svelte-1pui4kt"><span class="c-skeleton-diff__line-number svelte-1pui4kt"></span> <span class="c-skeleton-diff__line-content svelte-1pui4kt" style="width: 85%;"></span></div> <div class="c-skeleton-diff__code-line svelte-1pui4kt"><span class="c-skeleton-diff__line-number svelte-1pui4kt"></span> <span class="c-skeleton-diff__line-content svelte-1pui4kt" style="width: 60%;"></span></div></div></div>'),vn=o('<div class="c-skeleton-diff__subsection svelte-1pui4kt"><div class="c-skeleton-diff__header svelte-1pui4kt"><div class="c-skeleton-diff__content svelte-1pui4kt"><div class="c-skeleton-diff__subtitle svelte-1pui4kt"></div></div> <div class="c-skeleton-diff__icon svelte-1pui4kt"></div></div> <div class="c-skeleton-diff__changes svelte-1pui4kt"></div></div>'),pn=o('<div class="c-skeleton-diff__section svelte-1pui4kt"><div class="c-skeleton-diff__header svelte-1pui4kt"><div class="c-skeleton-diff__content svelte-1pui4kt"><div class="c-skeleton-diff__title svelte-1pui4kt"></div> <div class="c-skeleton-diff__description svelte-1pui4kt"><div class="c-skeleton-diff__line svelte-1pui4kt"></div> <div class="c-skeleton-diff__line svelte-1pui4kt" style="width: 85%;"></div></div></div> <!></div> <!></div>'),fn=o('<div class="c-skeleton-diff svelte-1pui4kt"></div>'),hn=o("<!> <!>",1),un=o('<div class="c-conflicts-card__file svelte-nuqoch"><!> <!></div>'),gn=o('<div class="c-conflicts-card__header svelte-nuqoch"><div class="c-conflicts-card__icon svelte-nuqoch"><!></div> <span class="c-conflicts-card__title svelte-nuqoch"> </span></div> <div class="c-conflicts-card__description svelte-nuqoch"><!></div> <!>',1),mn=o('<div class="c-conflicts-card"><!></div>'),_n=o('<div class="c-unstaged-changes-modal__stash-button-loading svelte-126kj3r"><!></div>'),yn=o("<!> <span>Stash & Apply Locally</span>",1),wn=o('<div class="c-unstaged-changes-modal__footer svelte-126kj3r"><!> <!></div>'),Cn=o(`There are unstaged changes in your working directory. Please commit your changes or we will
      run <!> to stash your changes before applying changes from the remote agent.`,1),$n=o('<div class="c-unstaged-changes-modal__body svelte-126kj3r"><!> <!></div>'),bn=o('<div class="c-diff-view__error svelte-xrv003"><!> <!> <!></div>'),kn=o('<div class="c-diff-view__empty svelte-xrv003"><!></div>'),xn=o("<!> <!>",1),An=o("<!> <!>",1),Fn=o('<div class="c-diff-view__applying svelte-xrv003"><!> <!></div>'),Mn=o("Applied <!>",1),Ln=o('<div class="c-diff-view__applied svelte-xrv003"><!></div>'),En=o('Apply All <div class="c-diff-view__controls__icon svelte-xrv003"><!></div>',1),Dn=o('<div class="c-diff-view__controls svelte-xrv003"><!></div> <!>',1),Pn=o('<div class="c-diff-view__skeleton-title svelte-xrv003"></div>'),Nn=o('<div class="c-diff-view__skeleton-text svelte-xrv003"></div> <div class="c-diff-view__skeleton-text svelte-xrv003"></div>',1),On=o("<!> Collapse All",1),zn=o("<!> Expand All",1),jn=o('<div class="c-diff-view__applying svelte-xrv003"><!> <!></div>'),Sn=o('<div class="c-diff-view__applied svelte-xrv003"><!> <!></div>'),Tn=o('Apply All <div class="c-diff-view__controls__icon svelte-xrv003"><!></div>',1),qn=o('<div class="c-diff-view__controls svelte-xrv003"><!> <!></div>'),In=o('<div class="c-diff-view__skeleton-text svelte-xrv003"></div>'),Rn=o('<div class="c-diff-view__warning svelte-xrv003"><!> </div>'),Zn=o('<div class="c-diff-view__changes-item svelte-xrv003"><!></div>'),Hn=o('<div class="c-diff-view__subsection svelte-xrv003"><div class="c-diff-view__header svelte-xrv003"><div class="c-diff-view__content svelte-xrv003"><div class="c-diff-view__icon svelte-xrv003"><!></div> <h5 class="c-diff-view__title svelte-xrv003"><!></h5> <!></div></div> <div class="c-diff-view__changes svelte-xrv003"></div></div>'),Vn=o('<div class="c-diff-view__section svelte-xrv003"><div class="c-diff-view__header svelte-xrv003"><div class="c-diff-view__content svelte-xrv003"><h5 class="c-diff-view__title svelte-xrv003"><!></h5> <div class="c-diff-view__description svelte-xrv003"><!></div></div> <!></div> <!> <!></div>'),Un=o('<div class="c-diff-view__layout svelte-xrv003"><div class="c-diff-view__tree svelte-xrv003"><div class="c-diff-view__tree__header svelte-xrv003"><!> <!> <!> <!></div></div> <div class="c-diff-view__explanation svelte-xrv003"><!></div></div>'),Bn=o('<div class="c-diff-view svelte-xrv003"><!> <!></div> <!>',1);function Wn(_e,a){nt(a,!1);const p=()=>xt(ge,"$diffViewFilesMap",X),Q=()=>xt(Z,"$diffModel",X),[X,g]=Qt(),te=I(),j=I(),q=I(),ye=I(),B=I(),ve=I(),M=I(),v=I();let m=R(a,"changedFiles",8),he=R(a,"agentLabel",24,()=>{}),le=R(a,"latestUserPrompt",24,()=>{}),f=R(a,"onApplyChanges",24,()=>{}),c=R(a,"onOpenFile",24,()=>{}),O=R(a,"onRenderBackup",24,()=>{}),D=R(a,"preloadedExplanation",24,()=>{}),x=R(a,"isAgentFromDifferentRepo",8,!1),$=R(a,"conflictFiles",24,()=>new Set);const w=Ht(Kt.key),Z=Ht(pi.key);let E="",S=I(!1),l=I([]),Fe=I([]),ae=I(!1),xe=I(!1),Se=I(null),ue=I(!0),ee=I({}),Te=I([]),we=I(!1),ne=I(!1),qe=I(!0),Je=I(new Set),Pe=I(!1);const ge=vi({});let Ee=I({});function lt(){const r=oi(e(l)),L=Object.values(e(ee)).some(Boolean);i(ue,L),Array.from(r).forEach(C=>{Yt(ee,e(ee)[C]=!e(ue))})}async function Ie(r,L,C){if(f())return ge.update(A=>(A[r]="pending",A)),new Promise(A=>{f()?.(r,L,C).then(()=>{ge.update(W=>(W[r]="applied",W)),A()})})}async function ht(){const r=await w.canApplyChanges();r.canApply?ut():r.hasUnstagedChanges&&i(Pe,!0)}function ut(){if(!f())return;w.reportApplyChangesEvent(),i(we,!0),i(ne,!1);const{filesToApply:r,areAllPathsApplied:L}=Mi(e(l),m(),e(Ee));L||r.length===0?i(ne,L):ma(r,Ie).then(()=>{i(we,!1),i(ne,!0)})}function rt(r){const L={title:"Changed Files",description:`${r.length} files were changed`,sections:[]},C=[],A=[],W=[];return r.forEach(d=>{d.old_path?d.new_path?A.push(d):W.push(d):C.push(d)}),C.length>0&&L.sections.push(We("Added files","feature",C)),A.length>0&&L.sections.push(We("Modified files","fix",A)),W.length>0&&L.sections.push(We("Deleted files","chore",W)),[L]}function We(r,L,C){const A=[];return C.forEach(W=>{const d=W.new_path||W.old_path,y=W.old_contents||"",n=W.new_contents||"",h=W.old_path?W.old_path:"",F=mi(h,W.new_path||"/dev/null",y,n,"","",{context:3}),T=`${It(d)}-${It(y+n)}`;A.push({id:T,path:d,diff:F,originalCode:y,modifiedCode:n})}),{title:r,descriptions:[],type:L,changes:A}}async function _(){if(!e(S))return;if(i(ae,!0),i(xe,!1),i(Se,null),i(Fe,[]),i(l,[]),e(B))return void i(ae,!1);const r=102400;let L=0;if(m().forEach(C=>{L+=(C.old_contents?.length||0)+(C.new_contents?.length||0)}),m().length>12||L>512e3){try{i(l,rt(m()))}catch(C){console.error("Failed to create simple explanation:",C),i(Se,"Failed to create explanation for large changes.")}i(ae,!1)}else try{const C=new Zi(d=>Di.postMessage(d)),A=new Map,W=m().map(d=>{const y=d.new_path||d.old_path,n=d.old_contents||"",h=d.new_contents||"",F=`${It(y)}-${It(n+h)}`;return A.set(F,{old_path:d.old_path,new_path:d.new_path,old_contents:n,new_contents:h,change_type:d.change_type}),{id:F,old_path:d.old_path,new_path:d.new_path,change_type:d.change_type}});try{const d=W.length===1;let y=[];d?y=W.map(n=>({path:n.new_path||n.old_path,changes:[{id:n.id,path:n.new_path||n.old_path,diff:`File: ${n.new_path||n.old_path}
Change type: ${n.change_type||"modified"}`,originalCode:"",modifiedCode:""}]})):y=(await C.send({type:"get-diff-group-changes-request",data:{changedFiles:W,changesById:!0,apikey:E}},3e4)).data.groupedChanges,i(Fe,y.map(n=>({path:n.path,changes:n.changes.map(h=>{if(h.id&&A.has(h.id)){const F=A.get(h.id);let T=h.diff;return T&&!T.startsWith("File:")||(T=mi(F.old_path||"",F.new_path||"",F.old_contents||"",F.new_contents||"")),{...h,diff:T,old_path:F.old_path,new_path:F.new_path,old_contents:F.old_contents,new_contents:F.new_contents,change_type:F.change_type,originalCode:F.old_contents||"",modifiedCode:F.new_contents||""}}return h})})))}catch(d){console.error("Failed to group changes with LLM, falling back to simple grouping:",d);try{const y=W.map(n=>{if(n.id&&A.has(n.id)){const h=A.get(n.id);return{...n,old_path:h.old_path,new_path:h.new_path,old_contents:h.old_contents||"",new_contents:h.new_contents||"",change_type:h.change_type}}return n});i(l,rt(y)),i(Fe,e(l)[0].sections.map(n=>({path:n.title,changes:n.changes}))),i(xe,!1)}catch(y){console.error("Failed to create simple explanation:",y),i(Se,"Failed to group changes. Please try again.")}}if(i(ae,!1),!e(Fe)||e(Fe).length===0)throw new Error("Failed to group changes");if(!e(l)||e(l).length===0){i(l,function(y){const n={title:"Loading...",description:"",sections:[]};return y.forEach(h=>{const F=h.changes.map(G=>{if(G.id)return G;const Y=It(G.path),V=It(G.originalCode+G.modifiedCode);return{...G,id:`${Y}-${V}`}}),T={title:h.path,descriptions:[],type:"other",changes:F};n.sections.push(T)}),[n]}(e(Fe)));const d=e(l)[0].sections.map(y=>({path:y.title,changes:y.changes.map(n=>{const h=n.originalCode?.length||0,F=n.modifiedCode?.length||0,T=n.diff?.length||0;return h>r||F>r||T>r?{id:n.id,path:n.path,diff:`File: ${n.path}
Content too large to include in explanation request (${Math.max(h,F,T)} bytes)`,originalCode:h>r?`[File content too large: ${h} bytes]`:n.originalCode,modifiedCode:F>r?`[File content too large: ${F} bytes]`:n.modifiedCode}:{id:n.id,path:n.path,diff:n.diff,originalCode:n.originalCode,modifiedCode:n.modifiedCode}})}));i(xe,!0);try{const y=Q()?.opts?.remoteAgentId;if(!y)throw new Error("Remote agent ID not available");const n=Q()?.opts?.startSequenceId??0,h=Q()?.opts?.endSequenceId??1e5,{explanation:F,error:T}=await w.getDescriptionsFromRemoteAgentSummary(y,d,n,h);if(T==="Token limit exceeded")return i(l,rt(m())),i(ae,!1),void i(xe,!1);if(F&&F.length>0){const G=F.map((Y,V)=>{const k=e(l)[V];return{...Y,sections:Y.sections?.map((U,K)=>{const P=k?.sections?.[K];return{...U,changes:P?.changes||U?.changes||[]}})||[]}});i(l,G)}}catch(y){console.error("Failed to get descriptions, using skeleton explanation:",y)}}e(l).length===0&&i(Se,"Failed to generate explanation.")}catch(C){console.error("Failed to get explanation:",C),i(Se,C instanceof Error?C.message:"An error occurred while generating the explanation.")}finally{i(ae,!1),i(xe,!1)}}ai(()=>{const r=localStorage.getItem("anthropic_apikey");r&&(E=r),i(S,!0)});let b=I(""),H=I("Apply all changes locally");re(()=>(z(m()),p()),()=>{m()&&ge.set(m().reduce((r,L)=>{const C=L.new_path||L.old_path;return r[C]=p()[C]??"none",r},{}))}),re(()=>e(ee),()=>{i(te,Object.values(e(ee)).some(Boolean))}),re(()=>z(m()),()=>{i(ve,JSON.stringify(m()))}),re(()=>(e(S),e(ve),e(b),z(D())),()=>{e(S)&&e(ve)&&e(ve)!==e(b)&&(i(b,e(ve)),D()&&D().length>0?(i(l,D()),i(ae,!1),i(xe,!1)):_(),i(we,!1),i(ne,!1),i(Ee,{}))}),re(()=>(e(l),e(Ee)),()=>{e(l)&&e(l).length>0&&e(l).flatMap(r=>r.sections||[]).flatMap(r=>r.changes).forEach(r=>{e(Ee)[r.path]||Yt(Ee,e(Ee)[r.path]=r.modifiedCode)})}),re(()=>e(l),()=>{i(j,JSON.stringify(e(l)))}),re(()=>(e(l),e(ee),e(ue)),()=>{if(e(l)&&e(l).length>0){const r=oi(e(l));Array.from(r).forEach(A=>{e(ee)[A]===void 0&&Yt(ee,e(ee)[A]=!e(ue))});const L=Object.keys(e(ee)).filter(A=>e(ee)[A]),C=Array.from(r);C.length>0&&i(ue,!C.some(A=>L.includes(A)))}}),re(()=>(e(j),p(),e(l)),()=>{i(q,(()=>{if(e(j)&&p()){const r=oi(e(l));return r.size!==0&&Array.from(r).some(L=>p()[L]!=="applied")}return!1})())}),re(()=>p(),()=>{i(ne,Object.keys(p()).every(r=>p()[r]==="applied"))}),re(()=>p(),()=>{i(ye,Object.keys(p()).filter(r=>p()[r]==="pending"))}),re(()=>(e(l),z(m()),e(Ee)),()=>{(async function(r,L,C){const{filesToApply:A}=Mi(r,L,C),W=new Set;for(const d of A)(await w.previewApplyChanges(d.path,d.originalCode,d.newCode)).hasConflicts&&W.add(d.path);i(Je,W)})(e(l),m(),e(Ee))}),re(()=>z(m()),()=>{i(B,m().length===0)}),re(()=>(e(j),e(ne),e(l),p()),()=>{if(e(j)&&e(ne)){const r=oi(e(l));Array.from(r).every(L=>p()[L]==="applied")||i(ne,!1)}}),re(()=>(e(ne),z($())),()=>{i(M,e(ne)&&$().size>0)}),re(()=>(z(x()),e(we),e(ne),e(ye),e(q)),()=>{i(v,x()||e(we)||e(ne)||e(ye).length>0||!e(q))}),re(()=>(e(v),z(x()),e(we),e(M),e(ne),e(ye),e(q)),()=>{e(v)?x()?i(H,"Cannot apply changes from a different repository locally"):e(we)?i(H,"Applying changes..."):e(M)?i(H,"All changes applied, but conflicts need to be resolved manually"):e(ne)?i(H,"All changes applied"):e(ye).length>0?i(H,"Waiting for changes to apply"):e(q)||i(H,"No changes to apply"):i(H,"Apply all changes locally")}),Li(),gi();var pe=Bn(),oe=ie(pe),Ce=s(oe),Ne=r=>{var L=bn(),C=s(L);Be(C,{name:"circle-alert"});var A=u(C),W=u(A);kt(W,{variant:"ghost",size:1,$$events:{click:_},children:(n,h)=>{var F=se("Retry");t(n,F)},$$slots:{default:!0}});var d=u(W,2),y=n=>{kt(n,{variant:"ghost",size:1,$$events:{click(...h){O()?.apply(this,h)}},children:(h,F)=>{var T=se("Render as list");t(h,T)},$$slots:{default:!0}})};N(d,n=>{O()&&n(y)}),me(()=>De(A,` ${e(Se)??""} `)),t(r,L)};N(Ce,r=>{e(Se)&&r(Ne)});var be=u(Ce,2),ze=r=>{var L=kn(),C=s(L);Me(C,{size:2,color:"secondary",children:(A,W)=>{var d=se("No files changed");t(A,d)},$$slots:{default:!0}}),t(r,L)},Xe=r=>{var L=Un(),C=s(L),A=s(C),W=s(A),d=V=>{var k=xn(),U=ie(k);Me(U,{size:1,class:"c-diff-view__tree__header__label",children:(P,de)=>{var fe=se("Changes from agent");t(P,fe)},$$slots:{default:!0}});var K=u(U,2);Me(K,{size:1,weight:"medium",class:"c-diff-view__tree__header__title",children:(P,de)=>{var fe=se();me(()=>De(fe,he())),t(P,fe)},$$slots:{default:!0}}),t(V,k)};N(W,V=>{he()&&le()!==he()&&V(d)});var y=u(W,2),n=V=>{var k=An(),U=ie(k);Me(U,{size:1,class:"c-diff-view__tree__header__label",children:(P,de)=>{var fe=se("Last user prompt");t(P,fe)},$$slots:{default:!0}});var K=u(U,2);Me(K,{size:1,weight:"medium",class:"c-diff-view__tree__header__title",children:(P,de)=>{var fe=se();me(()=>De(fe,le())),t(P,fe)},$$slots:{default:!0}}),t(V,k)};N(y,V=>{le()&&V(n)});var h=u(y,2);Me(h,{size:1,class:"c-diff-view__tree__header__label",children:(V,k)=>{var U=se("Changed files");t(V,U)},$$slots:{default:!0}}),Si(u(h,2),{get changedFiles(){return m()}});var F=u(C,2),T=s(F),G=V=>{var k=Dn(),U=ie(k),K=s(U);{let P=pt(()=>e(we)?"Applying changes...":e(ne)?"All changes applied":e(q)?"Apply all changes":"No changes to apply");Nt(K,{get content(){return e(P)},children:(de,fe)=>{{let ot=pt(()=>(e(we),e(ne),e(ye),e(q),J(()=>e(we)||e(ne)||e(ye).length>0||!e(q))));kt(de,{variant:"ghost-block",color:"neutral",size:2,get disabled(){return e(ot)},$$events:{click:ht},children:(Re,et)=>{var gt=He(),At=ie(gt),Ot=yt=>{var Ft=Fn(),dt=s(Ft);di(dt,{size:1,useCurrentColor:!0});var Et=u(dt,2);Me(Et,{size:2,children:(Bt,wt)=>{var ct=se("Applying...");t(Bt,ct)},$$slots:{default:!0}}),t(yt,Ft)},Ut=yt=>{var Ft=He(),dt=ie(Ft),Et=wt=>{var ct=Ln(),zt=s(ct);Me(zt,{size:2,children:(jt,ni)=>{var Xt=Mn(),si=u(ie(Xt));Be(si,{name:"check"}),t(jt,Xt)},$$slots:{default:!0}}),t(wt,ct)},Bt=wt=>{var ct=En(),zt=u(ie(ct)),jt=s(zt);Be(jt,{name:"circle-play"}),t(wt,ct)};N(dt,wt=>{e(ne)?wt(Et):wt(Bt,!1)},!0),t(yt,Ft)};N(At,yt=>{e(we)?yt(Ot):yt(Ut,!1)}),t(Re,gt)},$$slots:{default:!0}})}},$$slots:{default:!0}})}(function(P,de){let fe=R(de,"count",3,2);var ot=fn();ft(ot,21,()=>Array(fe()),bt,(Re,et,gt)=>{var At=pn(),Ot=s(At),Ut=u(s(Ot),2),yt=dt=>{var Et=dn();t(dt,Et)};N(Ut,dt=>{gt===0&&dt(yt)});var Ft=u(Ot,2);ft(Ft,16,()=>Array(2),bt,(dt,Et,Bt,wt)=>{var ct=vn(),zt=u(s(ct),2);ft(zt,20,()=>Array(2),bt,(jt,ni,Xt,si)=>{var Ae=cn();t(jt,Ae)}),t(dt,ct)}),t(Re,At)}),t(P,ot)})(u(U,2),{count:2}),t(V,k)},Y=V=>{var k=He(),U=ie(k),K=P=>{var de=He(),fe=ie(de);ft(fe,1,()=>e(l),bt,(ot,Re,et)=>{var gt=Vn();Qe(gt,"id",`section-${et}`);var At=s(gt),Ot=s(At),Ut=s(Ot),yt=s(Ut),Ft=Ae=>{var ke=Pn();t(Ae,ke)},dt=Ae=>{var ke=se();me(()=>De(ke,(e(Re),J(()=>e(Re).title)))),t(Ae,ke)};N(yt,Ae=>{e(xe),e(Re),J(()=>e(xe)&&e(Re).title==="Loading...")?Ae(Ft):Ae(dt,!1)});var Et=u(Ut,2),Bt=s(Et),wt=Ae=>{var ke=Nn();t(Ae,ke)},ct=Ae=>{_i(Ae,{get markdown(){return e(Re),J(()=>e(Re).description)}})};N(Bt,Ae=>{e(xe),e(Re),J(()=>e(xe)&&e(Re).description==="")?Ae(wt):Ae(ct,!1)});var zt=u(Ot,2),jt=Ae=>{var ke=qn(),St=s(ke);kt(St,{variant:"ghost-block",color:"neutral",size:2,$$events:{click:lt},children:(Dt,Wt)=>{var Mt=He(),Tt=ie(Mt),qt=tt=>{var vt=On(),Ge=ie(vt);Be(Ge,{name:"chevrons-down-up"}),t(tt,vt)},Pt=tt=>{var vt=zn(),Ge=ie(vt);Be(Ge,{name:"chevrons-up-down"}),t(tt,vt)};N(Tt,tt=>{e(te)?tt(Pt,!1):tt(qt)}),t(Dt,Mt)},$$slots:{default:!0}});var mt=u(St,2);Nt(mt,{get content(){return e(H)},children:(Dt,Wt)=>{kt(Dt,{variant:"ghost-block",color:"neutral",size:2,get disabled(){return e(v)},$$events:{click:ht},children:(Mt,Tt)=>{var qt=He(),Pt=ie(qt),tt=Ge=>{var Lt=jn(),Le=s(Lt);di(Le,{size:1,useCurrentColor:!0});var ce=u(Le,2);Me(ce,{size:2,children:(Ye,Ve)=>{var it=se("Applying...");t(Ye,it)},$$slots:{default:!0}}),t(Ge,Lt)},vt=Ge=>{var Lt=He(),Le=ie(Lt),ce=Ve=>{var it=Sn(),Ct=s(it);Me(Ct,{size:2,children:(je,$t)=>{var _t=se("Applied");t(je,_t)},$$slots:{default:!0}});var Ue=u(Ct,2),at=je=>{Be(je,{name:"circle-alert"})},Ze=je=>{Be(je,{name:"check"})};N(Ue,je=>{e(M)?je(at):je(Ze,!1)}),t(Ve,it)},Ye=Ve=>{var it=Tn(),Ct=u(ie(it)),Ue=s(Ct);Be(Ue,{name:"circle-play"}),t(Ve,it)};N(Le,Ve=>{e(ne)?Ve(ce):Ve(Ye,!1)},!0),t(Ge,Lt)};N(Pt,Ge=>{e(we)?Ge(tt):Ge(vt,!1)}),t(Mt,qt)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(Ae,ke)};N(zt,Ae=>{et===0&&Ae(jt)});var ni=u(At,2),Xt=Ae=>{const ke=pt(()=>e(ne)?$():e(Je));(function(St,mt){nt(mt,!0);let Dt=R(mt,"onOpenFile",19,()=>{});var Wt=mn(),Mt=s(Wt);ua(Mt,{includeBackground:!1,children:(Tt,qt)=>{var Pt=gn(),tt=ie(Pt),vt=s(tt),Ge=s(vt);Be(Ge,{name:"circle-alert"});var Lt=u(vt,2),Le=s(Lt),ce=u(tt,2),Ye=s(ce),Ve=Ue=>{var at=se("The following files have merge conflicts that need to be resolved manually.");t(Ue,at)},it=Ue=>{var at=se(`The following files will have merge conflicts if applied locally. Conflict markers will be
        added to the file which can be resolved manually after applying.`);t(Ue,at)};N(Ye,Ue=>{mt.hasAppliedAll?Ue(Ve):Ue(it,!1)});var Ct=u(ce,2);ft(Ct,17,()=>mt.files,bt,(Ue,at)=>{var Ze=un(),je=s(Ze);Nt(je,{get content(){return e(at)},nested:!0,children:(_t,li)=>{var Jt=hn(),ei=ie(Jt);Pi(ei,{get filename(){return e(at)}});var fi=u(ei,2);ya(fi,{get filepath(){return e(at)}}),t(_t,Jt)},$$slots:{default:!0}});var $t=u(je,2);Nt($t,{content:"Open file",children:(_t,li)=>{Ci(_t,{size:1,variant:"ghost-block",color:"neutral",onclick:()=>Dt()?.(e(at)),children:(Jt,ei)=>{Be(Jt,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}}),t(Ue,Ze)}),me(()=>De(Le,`Conflicts (${mt.files.size??""})`)),t(Tt,Pt)},$$slots:{default:!0}}),t(St,Wt),st()})(Ae,{get files(){return e(ke)},get hasAppliedAll(){return e(ne)},get onOpenFile(){return c()}})};N(ni,Ae=>{e(ne),z($()),e(Je),J(()=>(e(ne)&&$().size>0||!e(ne)&&e(Je).size>0)&&et===0)&&Ae(Xt)});var si=u(ni,2);ft(si,1,()=>(e(Re),J(()=>e(Re).sections||[])),bt,(Ae,ke,St)=>{var mt=Hn();Qe(mt,"id",`subsection-${et}-${St}`);var Dt=s(mt),Wt=s(Dt),Mt=s(Wt);(function(Le,ce){nt(ce,!0);const Ye={fix:{paths:["M6.56 1.14a.75.75 0 0 1 .177 1.045 3.989 3.989 0 0 0-.464.86c.185.17.382.329.59.473A3.993 3.993 0 0 1 10 2c1.272 0 2.405.594 3.137 1.518.208-.144.405-.302.59-.473a3.989 3.989 0 0 0-.464-.86.75.75 0 0 1 1.222-.869c.369.519.65 1.105.822 1.736a.75.75 0 0 1-.174.707 7.03 7.03 0 0 1-1.299 1.098A4 4 0 0 1 14 6c0 .52-.301.963-.723 1.187a6.961 6.961 0 0 1-1.158.486c.13.208.231.436.296.679 1.413-.174 2.779-.5 4.081-.96a19.655 19.655 0 0 0-.09-2.319.75.75 0 1 1 1.493-.146 21.239 21.239 0 0 1 .08 3.028.75.75 0 0 1-.482.667 20.873 20.873 0 0 1-5.153 1.249 2.521 2.521 0 0 1-.107.247 20.945 20.945 0 0 1 5.252 1.257.75.75 0 0 1 .482.74 20.945 20.945 0 0 1-.908 5.107.75.75 0 0 1-1.433-.444c.415-1.34.69-2.743.806-4.191-.495-.173-1-.327-1.512-.46.05.284.076.575.076.873 0 1.814-.517 3.312-1.426 4.37A4.639 4.639 0 0 1 10 19a4.639 4.639 0 0 1-3.574-1.63C5.516 16.311 5 14.813 5 13c0-.298.026-.59.076-.873-.513.133-1.017.287-1.512.46.116 1.448.39 2.85.806 4.191a.75.75 0 1 1-1.433.444 20.94 20.94 0 0 1-.908-5.107.75.75 0 0 1 .482-.74 20.838 20.838 0 0 1 5.252-1.257 2.493 2.493 0 0 1-.107-.247 20.874 20.874 0 0 1-5.153-1.249.75.75 0 0 1-.482-.667 21.342 21.342 0 0 1 .08-3.028.75.75 0 1 1 1.493.146 19.745 19.745 0 0 0-.09 2.319c1.302.46 2.668.786 4.08.96.066-.243.166-.471.297-.679a6.962 6.962 0 0 1-1.158-.486A1.348 1.348 0 0 1 6 6a4 4 0 0 1 .166-1.143 7.032 7.032 0 0 1-1.3-1.098.75.75 0 0 1-.173-.707 5.48 5.48 0 0 1 .822-1.736.75.75 0 0 1 1.046-.177Z"],color:"var(--ds-color-warning-9)"},feature:{paths:["M14 6a2.5 2.5 0 0 0-4-3 2.5 2.5 0 0 0-4 3H3.25C2.56 6 2 6.56 2 7.25v.5C2 8.44 2.56 9 3.25 9h6V6h1.5v3h6C17.44 9 18 8.44 18 7.75v-.5C18 6.56 17.44 6 16.75 6H14Zm-1-1.5a1 1 0 0 1-1 1h-1v-1a1 1 0 1 1 2 0Zm-6 0a1 1 0 0 0 1 1h1v-1a1 1 0 0 0-2 0Z","M9.25 10.5H3v4.75A2.75 2.75 0 0 0 5.75 18h3.5v-7.5ZM10.75 18v-7.5H17v4.75A2.75 2.75 0 0 1 14.25 18h-3.5Z"],color:"var(--ds-color-warning-9)"},refactor:{paths:["M8.157 2.176a1.5 1.5 0 0 0-1.147 0l-4.084 1.69A1.5 1.5 0 0 0 2 5.25v10.877a1.5 1.5 0 0 0 2.074 1.386l3.51-1.452 4.26 1.762a1.5 1.5 0 0 0 1.146 0l4.083-1.69A1.5 1.5 0 0 0 18 14.75V3.872a1.5 1.5 0 0 0-2.073-1.386l-3.51 1.452-4.26-1.762ZM7.58 5a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0v-6.5A.75.75 0 0 1 7.58 5Zm5.59 2.75a.75.75 0 0 0-1.5 0v6.5a.75.75 0 0 0 1.5 0v-6.5Z"],color:"var(--ds-color-warning-9)"},documentation:{paths:["M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm2.25 8.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm0 3a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Z"],color:"var(--ds-color-warning-9)"},style:{paths:["M15.993 1.385a1.87 1.87 0 0 1 2.623 2.622l-4.03 5.27a12.749 12.749 0 0 1-4.237 3.562 4.508 4.508 0 0 0-3.188-3.188 12.75 12.75 0 0 1 3.562-4.236l5.27-4.03ZM6 11a3 3 0 0 0-3 3 .5.5 0 0 1-.72.45.75.75 0 0 0-1.035.931A4.001 4.001 0 0 0 9 14.004V14a3.01 3.01 0 0 0-1.66-2.685A2.99 2.99 0 0 0 6 11Z"],color:"var(--ds-color-warning-9)"},test:{paths:["M8.5 3.528v4.644c0 .729-.29 1.428-.805 1.944l-1.217 1.216a8.75 8.75 0 0 1 3.55.621l.502.201a7.25 7.25 0 0 0 4.178.365l-2.403-2.403a2.75 2.75 0 0 1-.805-1.944V3.528a40.205 40.205 0 0 0-3 0Zm4.5.084.19.015a.75.75 0 1 0 .12-1.495 41.364 41.364 0 0 0-6.62 0 .75.75 0 0 0 .12 1.495L7 3.612v4.56c0 .331-.132.649-.366.883L2.6 13.09c-1.496 1.496-.817 4.15 1.403 4.475C5.961 17.852 7.963 18 10 18s4.039-.148 5.997-.436c2.22-.325 2.9-2.979 1.403-4.475l-4.034-4.034A1.25 1.25 0 0 1 13 8.172v-4.56Z"],color:"var(--ds-color-warning-9)"},chore:{paths:["m6.75.98-.884.883a1.25 1.25 0 1 0 1.768 0L6.75.98ZM13.25.98l-.884.883a1.25 1.25 0 1 0 1.768 0L13.25.98ZM10 .98l.884.883a1.25 1.25 0 1 1-1.768 0L10 .98ZM7.5 5.75a.75.75 0 0 0-1.5 0v.464c-1.179.304-2 1.39-2 2.622v.094c.1-.02.202-.038.306-.052A42.867 42.867 0 0 1 10 8.5c1.93 0 3.83.129 5.694.378.104.014.206.032.306.052v-.094c0-1.232-.821-2.317-2-2.622V5.75a.75.75 0 0 0-1.5 0v.318a45.645 45.645 0 0 0-1.75-.062V5.75a.75.75 0 0 0-1.5 0v.256c-.586.01-1.17.03-1.75.062V5.75ZM4.505 10.365A41.36 41.36 0 0 1 10 10c1.863 0 3.697.124 5.495.365C16.967 10.562 18 11.838 18 13.28v.693a3.72 3.72 0 0 1-1.665-.393 5.222 5.222 0 0 0-4.67 0 3.722 3.722 0 0 1-3.33 0 5.222 5.222 0 0 0-4.67 0A3.72 3.72 0 0 1 2 13.972v-.693c0-1.441 1.033-2.717 2.505-2.914ZM15.665 14.92a5.22 5.22 0 0 0 2.335.552V16.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 2 16.5v-1.028c.8 0 1.6-.184 2.335-.551a3.722 3.722 0 0 1 3.33 0c1.47.735 3.2.735 4.67 0a3.722 3.722 0 0 1 3.33 0Z"],color:"var(--ds-color-warning-9)"},performance:{paths:["M4.606 12.97a.75.75 0 0 1-.134 1.051 2.494 2.494 0 0 0-.93 2.437 2.494 2.494 0 0 0 2.437-.93.75.75 0 1 1 1.186.918 3.995 3.995 0 0 1-4.482 1.332.75.75 0 0 1-.461-.461 3.994 3.994 0 0 1 1.332-4.482.75.75 0 0 1 1.052.134Z","M5.752 12A13.07 13.07 0 0 0 8 14.248v4.002c0 .414.336.75.75.75a5 5 0 0 0 4.797-6.414 12.984 12.984 0 0 0 5.45-10.848.75.75 0 0 0-.735-.735 12.984 12.984 0 0 0-10.849 5.45A5 5 0 0 0 1 11.25c.001.414.337.75.751.75h4.002ZM13 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],color:"var(--ds-color-warning-9)"},revert:{paths:["M7.50043 1.37598C7.2023 1.37598 6.91637 1.49431 6.70543 1.70499L6.70521 1.70521L1.70521 6.70521L1.70499 6.70543C1.49431 6.91637 1.37598 7.2023 1.37598 7.50043C1.37598 7.79855 1.49431 8.08449 1.70499 8.29543L1.70521 8.29565L6.69987 13.2903C6.80149 13.3974 6.92322 13.4835 7.05815 13.5436C7.19615 13.6051 7.34512 13.6382 7.49617 13.6408C7.64723 13.6435 7.79727 13.6157 7.93735 13.5591C8.07744 13.5026 8.20469 13.4183 8.31151 13.3115C8.41834 13.2047 8.50256 13.0774 8.55914 12.9374C8.61572 12.7973 8.64351 12.6472 8.64084 12.4962C8.63818 12.3451 8.60511 12.1961 8.54363 12.0581C8.48351 11.9232 8.39743 11.8015 8.29032 11.6999L5.21587 8.62543H12.5004C13.0093 8.62543 13.5132 8.72566 13.9833 8.92039C14.4535 9.11513 14.8806 9.40056 15.2405 9.76039C15.6003 10.1202 15.8857 10.5474 16.0805 11.0175C16.2752 11.4877 16.3754 11.9916 16.3754 12.5004C16.3754 13.0093 16.2752 13.5132 16.0805 13.9833C15.8857 14.4535 15.6003 14.8806 15.2405 15.2405C14.8806 15.6003 14.4535 15.8857 13.9833 16.0805C13.5132 16.2752 13.0093 16.3754 12.5004 16.3754H10.0004C9.70206 16.3754 9.41591 16.494 9.20493 16.7049C8.99395 16.9159 8.87543 17.2021 8.87543 17.5004C8.87543 17.7988 8.99395 18.0849 9.20493 18.2959C9.41591 18.5069 9.70206 18.6254 10.0004 18.6254H12.5004C14.1249 18.6254 15.6828 17.9801 16.8315 16.8315C17.9801 15.6828 18.6254 14.1249 18.6254 12.5004C18.6254 10.876 17.9801 9.31806 16.8315 8.1694C15.6828 7.02074 14.1249 6.37543 12.5004 6.37543H5.21587L8.29565 3.29565L8.29587 3.29543C8.50654 3.08449 8.62488 2.79855 8.62488 2.50043C8.62488 2.2023 8.50654 1.91636 8.29587 1.70543L8.29543 1.70499C8.08449 1.49431 7.79855 1.37598 7.50043 1.37598Z","M7.712 4.818A1.5 1.5 0 0 1 10 6.095v2.972c.104-.13.234-.248.389-.343l6.323-3.906A1.5 1.5 0 0 1 19 6.095v7.81a1.5 1.5 0 0 1-2.288 1.276l-6.323-3.905a1.505 1.505 0 0 1-.389-.344v2.973a1.5 1.5 0 0 1-2.288 1.276l-6.323-3.905a1.5 1.5 0 0 1 0-2.552l6.323-3.906Z"],color:"var(--ds-color-warning-9)"},other:{paths:["M2 4.25C2 3.65326 2.23705 3.08097 2.65901 2.65901C3.08097 2.23705 3.65326 2 4.25 2H6.75C7.34674 2 7.91903 2.23705 8.34099 2.65901C8.76295 3.08097 9 3.65326 9 4.25V6.75C9 7.34674 8.76295 7.91903 8.34099 8.34099C7.91903 8.76295 7.34674 9 6.75 9H4.25C3.65326 9 3.08097 8.76295 2.65901 8.34099C2.23705 7.91903 2 7.34674 2 6.75V4.25ZM15.25 11.75C15.25 11.5511 15.171 11.3603 15.0303 11.2197C14.8897 11.079 14.6989 11 14.5 11C14.3011 11 14.1103 11.079 13.9697 11.2197C13.829 11.3603 13.75 11.5511 13.75 11.75V13.75H11.75C11.5511 13.75 11.3603 13.829 11.2197 13.9697C11.079 14.1103 11 14.3011 11 14.5C11 14.6989 11.079 14.8897 11.2197 15.0303C11.3603 15.171 11.5511 15.25 11.75 15.25H13.75V17.25C13.75 17.4489 13.829 17.6397 13.9697 17.7803C14.1103 17.921 14.3011 18 14.5 18C14.6989 18 14.8897 17.921 15.0303 17.7803C15.171 17.6397 15.25 17.4489 15.25 17.25V15.25H17.25C17.4489 15.25 17.6397 15.171 17.7803 15.0303C17.921 14.8897 18 14.6989 18 14.5C18 14.3011 17.921 14.1103 17.7803 13.9697C17.6397 13.829 17.4489 13.75 17.25 13.75H15.25V11.75Z","M13.8399 2.86538C14.1332 2.37829 14.867 2.37829 15.1603 2.86538L17.8969 7.40443C18.1901 7.89152 17.8228 8.50006 17.2363 8.50006H11.7635C11.1766 8.50006 10.8097 7.89152 11.1034 7.40443L13.8399 2.86538Z","M9 14.5C9 16.433 7.433 18 5.5 18C3.567 18 2 16.433 2 14.5C2 12.567 3.567 11 5.5 11C7.433 11 9 12.567 9 14.5Z","M13.8399 2.86538C14.1332 2.37829 14.867 2.37829 15.1603 2.86538L17.8969 7.40443C18.1901 7.89152 17.8228 8.50006 17.2363 8.50006H11.7635C11.1766 8.50006 10.8097 7.89152 11.1034 7.40443L13.8399 2.86538Z","M 9 14.5 A 3.5 3.5 0 1 1 2 14.5 A 3.5 3.5 0 1 1 9 14.5 Z"],color:"var(--ds-color-warning-9)"}};let Ve=$e(()=>Ye[ce.type]??Ye.other);{let it=$e(()=>`This is a ${ce.type} change`),Ct=$e(()=>[Rt.Hover]);Nt(Le,{get content(){return e(it)},get triggerOn(){return e(Ct)},children:(Ue,at)=>{var Ze=on(),je=s(Ze),$t=_t=>{var li=He(),Jt=ie(li);ft(Jt,17,()=>e(Ve).paths,bt,(ei,fi)=>{var $i=rn();me(()=>Qe($i,"d",e(fi))),t(ei,$i)}),t(_t,li)};N(je,_t=>{e(Ve)&&_t($t)}),t(Ue,Ze)},$$slots:{default:!0}})}st()})(s(Mt),{get type(){return e(ke),J(()=>e(ke).type)}});var Tt=u(Mt,2),qt=s(Tt),Pt=Le=>{var ce=In();t(Le,ce)},tt=Le=>{var ce=se();me(()=>De(ce,(e(ke),J(()=>e(ke).title)))),t(Le,ce)};N(qt,Le=>{e(xe),e(ke),J(()=>e(xe)&&e(ke).descriptions.length===0)?Le(Pt):Le(tt,!1)});var vt=u(Tt,2),Ge=Le=>{var ce=Rn(),Ye=s(ce);Be(Ye,{name:"circle-alert"});var Ve=u(Ye);me(()=>De(Ve,` ${e(ke),J(()=>e(ke).warning)??""}`)),t(Le,ce)};N(vt,Le=>{e(xe),e(ke),J(()=>!e(xe)&&e(ke).warning)&&Le(Ge)});var Lt=u(Dt,2);ft(Lt,5,()=>(e(ke),J(()=>e(ke).changes)),Le=>Le.id,(Le,ce)=>{var Ye=Zn(),Ve=s(Ye);{let it=pt(()=>(e(ee),e(ce),e(ue),J(()=>e(ee)[e(ce).path]!==void 0?!e(ee)[e(ce).path]:e(ue)))),Ct=pt(()=>(p(),e(ce),J(()=>p()[e(ce).path]==="pending"))),Ue=pt(()=>(p(),e(ce),J(()=>p()[e(ce).path]==="applied"))),at=pt(()=>c()?()=>c()(e(ce).path):void 0);ci(zi(Ve,{get path(){return e(ce),J(()=>e(ce).path)},get change(){return e(ce)},get descriptions(){return e(ke),J(()=>e(ke).descriptions)},get isExpandedDefault(){return e(it)},get isApplying(){return e(Ct)},get hasApplied(){return e(Ue)},onCodeChange:Ze=>{(function(je,$t){Yt(Ee,e(Ee)[je]=$t)})(e(ce).path,Ze)},onApplyChanges:()=>{Ie(e(ce).path,e(ce).originalCode,e(ce).modifiedCode)},get onOpenFile(){return e(at)},get isAgentFromDifferentRepo(){return x()},get isCollapsed(){return e(ee)[e(ce).path]},set isCollapsed(Ze){Yt(ee,e(ee)[e(ce).path]=Ze)},get areDescriptionsVisible(){return e(qe)},set areDescriptionsVisible(Ze){i(qe,Ze)},$$legacy:!0}),(Ze,je,$t,_t)=>Yt(Te,e(Te)[100*je+10*$t+_t.path.length%10]=Ze),(Ze,je,$t)=>e(Te)?.[100*Ze+10*je+$t.path.length%10],()=>[et,St,e(ce)])}t(Le,Ye)}),t(Ae,mt)}),t(ot,gt)}),t(P,de)};N(U,P=>{e(l),J(()=>e(l)&&e(l).length>0)&&P(K)},!0),t(V,k)};N(T,V=>{e(ae),e(Fe),J(()=>e(ae)&&e(Fe).length===0)?V(G):V(Y,!1)}),t(r,L)};N(be,r=>{e(B)?r(ze):r(Xe,!1)}),function(r,L){nt(L,!1);let C=R(L,"showModal",12,!1),A=R(L,"applyAllChanges",8);const W=Ht(Kt.key);let d=I(void 0),y=I(!1);async function n(){if(i(y,!0),!await W.stashUnstagedChanges())return i(d,"Failed to stash changes. Please manually stash or commit your unstaged changes."),void i(y,!1);await new Promise(F=>setTimeout(F,1500)),i(d,void 0),C(!1),A()(),i(y,!1)}function h(){C(!1),i(d,void 0)}gi(),ta(r,{get show(){return C()},title:"Unstaged changes",$$events:{cancel:h},footer:T=>{var G=wn(),Y=s(G);{let k=pt(()=>!!e(d)||e(y));kt(Y,{variant:"solid",color:"accent",get disabled(){return e(k)},$$events:{click:n},children:(U,K)=>{var P=yn(),de=ie(P),fe=et=>{var gt=_n(),At=s(gt);di(At,{size:1}),t(et,gt)};N(de,et=>{e(y)&&et(fe)});var ot=u(de,2);let Re;me(et=>Re=Vt(ot,1,"c-unstaged-changes-modal__stash-button-text svelte-126kj3r",null,Re,et),[()=>({loading:e(y)})]),t(U,P)},$$slots:{default:!0}})}var V=u(Y,2);kt(V,{variant:"solid",color:"neutral",get disabled(){return e(y)},$$events:{click:h},children:(k,U)=>{var K=se("Abort");t(k,K)},$$slots:{default:!0}}),t(T,G)},children:(T,G)=>{var Y=$n(),V=s(Y);Me(V,{children:(K,P)=>{var de=Cn(),fe=u(ie(de));da(fe,{token:{type:"codespan",text:"`git stash`",raw:"`git stash`"}}),t(K,de)},$$slots:{default:!0}});var k=u(V,2),U=K=>{Me(K,{children:(P,de)=>{var fe=se();me(()=>De(fe,e(d))),t(P,fe)},$$slots:{default:!0}})};N(k,K=>{e(d)&&K(U)}),t(T,Y)},$$slots:{footer:!0,default:!0}}),st()}(u(oe,2),{applyAllChanges:ut,get showModal(){return e(Pe)},set showModal(r){i(Pe,r)},$$legacy:!0}),t(_e,pe),st(),g()}var Jn=o('<div class="file-explorer-contents svelte-1rb6ljx"><!></div>'),Gn=o('<div class="diff-page svelte-1rb6ljx"><div class="file-explorer-main svelte-1rb6ljx"><!></div></div>');function Yn(_e,a){nt(a,!0);const p=()=>xt(v,"$diffModel",Q),[Q,X]=Qt();let g=R(a,"changedFiles",19,()=>[]),te=R(a,"pendingFiles",19,()=>[]),j=R(a,"appliedFiles",19,()=>[]),q=R(a,"agentLabel",19,()=>{}),ye=R(a,"latestUserPrompt",19,()=>{}),B=R(a,"isAgentFromDifferentRepo",3,!1),ve=Ke(wi(new Set));const M=Ht(Kt.key),v=Ht(pi.key);let m=Ke("summary");const he=async(x,$,w)=>{const{success:Z,hasConflicts:E}=await M.applyChanges(x,$,w);Z&&E&&i(ve,new Set([...e(ve),x]),!0)},le=x=>M.openFile(x);(function(x){x.subscribe($=>{if($){const w=document.getElementById(yi($));w&&w.scrollIntoView({behavior:"smooth",block:"center"})}})})(function(x=null){const $=vi(x);return ui(Ni,$),$}(null));var f=Gn(),c=s(f),O=s(c),D=x=>{var $=Jn(),w=s($);Wi(w,()=>p().opts,Z=>{var E=He(),S=ie(E),l=ae=>{ln(ae,{get changedFiles(){return g()},onApplyChanges:he,onOpenFile:le,get pendingFiles(){return te()},get appliedFiles(){return j()}})},Fe=ae=>{{let xe=$e(()=>p()?.opts?.preloadedExplanation);Wn(ae,{get changedFiles(){return g()},onApplyChanges:he,onOpenFile:le,get agentLabel(){return q()},get latestUserPrompt(){return ye()},onRenderBackup:()=>{i(m,"changedFiles")},get preloadedExplanation(){return e(xe)},get isAgentFromDifferentRepo(){return B()},get conflictFiles(){return e(ve)}})}};N(S,ae=>{e(m)==="changedFiles"?ae(l):ae(Fe,!1)}),t(Z,E)}),t(x,$)};N(O,x=>{g()&&x(D)}),t(_e,f),st(),X()}var Kn=o('<div class="l-center svelte-1iabdmr"><!> <p>Loading diff view...</p></div>'),Qn=o('<div class="l-main svelte-1iabdmr"><!></div>');Ui(function(_e,a){nt(a,!0);const[p,Q]=Qt();let X=new Bi(Di),g=new pi(X);X.registerConsumer(g);let te=new Kt(X);ui(Kt.key,te),ui(pi.key,g);let j=$e(()=>xt(g,"$remoteAgentDiffModel",p).opts);ai(()=>(g.onPanelLoaded(),()=>{X.dispose()}));var q=He();hi("message",Hi,function(...B){X.onMessageFromExtension?.apply(this,B)});var ye=ie(q);Vi(ye,()=>fa.Root,(B,ve)=>{ve(B,{children:(M,v)=>{var m=Qn(),he=s(m),le=c=>{{let O=$e(()=>te.applyingFilePaths||[]),D=$e(()=>te.appliedFilePaths||[]),x=$e(()=>e(j).isAgentFromDifferentRepo||!1);Yn(c,{get changedFiles(){return e(j).changedFiles},get agentLabel(){return e(j).sessionSummary},get latestUserPrompt(){return e(j).userPrompt},get pendingFiles(){return e(O)},get appliedFiles(){return e(D)},get isAgentFromDifferentRepo(){return e(x)}})}},f=c=>{var O=Kn(),D=s(O);di(D,{size:1}),t(c,O)};N(he,c=>{e(j)?c(le):c(f,!1)}),t(M,m)},$$slots:{default:!0}})}),t(_e,q),st(),Q()},{target:document.getElementById("app")});
//# sourceMappingURL=remote-agent-diff-BwvM4A8P.js.map
