const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BWvxlY6O.js","./_commonjsHelpers-CwkBNZ52.js"])))=>i.map(i=>d[i]);
import{w as A,aL as te,as as oe,y as ae,v as N,x as M,G as re,K as P,L as S,Q as O,N as w,B as K,C as X,D as I,H as z,T as F,ae as V,P as R,S as ne,a7 as se,I as ie,M as de,aq as j,aK as ce,aU as le,aO as ue,_ as x,aj as Q,X as Y,a3 as ge,z as a,F as E,Z as $,aJ as he,aG as G,A as fe}from"./Icon-CaBYD5oO.js";try{T=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(B=new T.Error().stack)&&(T._sentryDebugIds=T._sentryDebugIds||{},T._sentryDebugIds[B]="e023fcda-d33a-4b93-9ef2-67f33e9ee58e",T._sentryDebugIdIdentifier="sentry-dbid-e023fcda-d33a-4b93-9ef2-67f33e9ee58e")}catch{}var T,B;class D{static CONTEXT_KEY="augment-monaco-provider";_monaco=A(null);_isLoading=A(!0);_error=A(null);constructor(){te(D.CONTEXT_KEY,this),this._initializeMonaco()}async _initializeMonaco(){try{if(this._isLoading.set(!0),!window.augmentDeps?.monaco)throw new Error("Monaco is not available. Make sure monaco-bootstrap.js is included in your HTML.");const e=await window.augmentDeps.monaco;this._monaco.set(e),this._isLoading.set(!1)}catch(e){this._error.set(e instanceof Error?e:new Error(String(e))),this._isLoading.set(!1),console.error("Failed to load Monaco:",e)}}get monaco(){return this._monaco}get isLoading(){return this._isLoading}get error(){return this._error}isReady=oe([this._monaco,this._isLoading,this._error],([e,t,i])=>e!==null&&!t&&i===null);static getContext(){const e=ae(D.CONTEXT_KEY);if(!e)throw new Error("Monaco context not found. Make sure you're using MonacoProvider.Root as a parent component.");return e}}var me=z('<div class="c-monaco-provider__loading svelte-7cg4jy"><!></div>'),ve=z('<div class="c-monaco-provider__error svelte-7cg4jy"><!></div>');const pe=new Map([[j.light,"hc-light"],[j.dark,"hc-black"]]),ye=new Map([[j.light,"vs"],[j.dark,"vs-dark"]]);function we(f,e){if(!f)return"";let t=ye;return e==="high-contrast"&&(t=pe),t.get(f)||""}function Le(f,e,t){var i=!0,p=!0;if(typeof f!="function")throw new TypeError("Expected a function");return le(t)&&(i="leading"in t?!!t.leading:i,p="trailing"in t?!!t.trailing:p),ce(f,e,{leading:i,maxWait:e,trailing:p})}class C{static instance;registeredTargets=new Map;throttledPerformLayout;constructor(){this.throttledPerformLayout=Le(this.performLayout.bind(this),333,{leading:!1,trailing:!0})}static getInstance(){return C.instance||(C.instance=new C),C.instance}registerEditor(e){return this.registeredTargets.set(e.editor,e),()=>{this.registeredTargets.delete(e.editor)}}requestLayout(){this.throttledPerformLayout()}async performLayout(){await ue();for(const[e,t]of this.registeredTargets)try{t.updateHeight&&t.updateHeight(),e.layout()}catch(i){console.warn(`Monaco layout failed for editor ${t.id||"unknown"}:`,i)}}getRegisteredEditorCount(){return this.registeredTargets.size}clearAllEditors(){this.registeredTargets.clear(),this.throttledPerformLayout.cancel()}isEditorRegistered(e){return this.registeredTargets.has(e)}}function _e(){return C.getInstance()}var be=z('<div class="c-codeblock svelte-1ma8iy5"><div class="c-codeblock__monaco svelte-1ma8iy5"></div></div>');function Z(f,e){N(e,!0);const t=()=>I(h,"$monaco",i),[i,p]=X(),_={tabSize:4,readOnly:!0,scrollBeyondLastLine:!1,minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1,vertical:"hidden"},wordWrap:"on",theme:"vs-dark",automaticLayout:!0,unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1}};let l,g=M(e,"options",19,()=>({})),d=M(e,"decorations",19,()=>{}),r=M(e,"height",19,()=>{}),o=M(e,"editorInstance",15),m=$(void 0);const h=D.getContext().monaco,u=_e();let n=$(void 0);function y(){if(!o()||!a(m))return;if(r()!==void 0)return a(m).style.height=`${r()}px`,void o().layout();const s=Math.min(1e3,o().getContentHeight());a(m).style.height=`${s}px`,o().layout()}function c(s,L){o()&&(o().setModel(s),L.length>0&&(l?.clear(),l=o().createDecorationsCollection(L)),s.onDidChangeContent(y),y())}x(()=>{if(t()&&a(m)&&!o()){const s={..._,...g()};o(t().editor.create(a(m),s)),a(n)&&a(n)(),E(n,u.registerEditor({editor:o(),updateHeight:y,id:`monaco-${crypto.randomUUID().slice(0,8)}`}),!0),c(e.model,d()||[]),o().onDidChangeModel(y)}}),x(()=>{c(e.model,d()||[])}),x(()=>{const s=I(he,"$themeStore",i),L=we(s?.category,s?.intensity);o()?.updateOptions({theme:L}),o()?.layout(void 0)}),Q(()=>{a(n)?.(),o()?.dispose()});var v=be();Y("focus",G,()=>u.requestLayout()),Y("resize",G,()=>u.requestLayout());var b=R(v);ge(b,s=>E(m,s),()=>a(m)),w(f,v),K(),p()}const J={},Ee=function(f,e,t){let i=Promise.resolve();if(e&&e.length>0){const l=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),d=g?.nonce||g?.getAttribute("nonce");p=e.map(r=>{if(r=function(u,n){return new URL(u,n).href}(r,t),r in J)return;J[r]=!0;const o=r.endsWith(".css"),m=o?'[rel="stylesheet"]':"";if(t)for(let u=l.length-1;u>=0;u--){const n=l[u];if(n.href===r&&(!o||n.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${m}`))return;const h=document.createElement("link");return h.rel=o?"stylesheet":"modulepreload",o||(h.as="script"),h.crossOrigin="",h.href=r,d&&h.setAttribute("nonce",d),document.head.appendChild(h),o?new Promise((u,n)=>{h.addEventListener("load",u),h.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${r}`)))}):void 0}),i=Promise.all(p.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))}var p;function _(l){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=l,window.dispatchEvent(g),!g.defaultPrevented)throw l}return i.then(l=>{for(const g of l||[])g.status==="rejected"&&_(g.reason);return f().catch(_)})};var Me=z('<div class="c-monaco-simple svelte-1im8grv"><!></div>');function W(f,e){N(e,!0);const t=()=>I(g,"$monaco",i),[i,p]=X();let _=M(e,"options",19,()=>({})),l=M(e,"editorInstance",15);const g=D.getContext().monaco;let d=$(void 0),r=$(void 0),o=$(void 0),m=$(!0),h=fe(()=>t()?.languages.getLanguages().map(c=>c.id)||[]);x(()=>{a(d)&&!a(m)&&a(d).getValue()!==e.text&&a(d).setValue(e.text)}),x(()=>{e.lang!==void 0&&t()&&async function(){if(e.lang&&a(h).includes(e.lang))E(r,e.lang,!0);else{const{default:c}=await Ee(async()=>{const{default:b}=await import("./index-BWvxlY6O.js");return{default:b}},__vite__mapDeps([0,1]),import.meta.url),v=c.highlightAuto(e.text,a(h));E(r,v.language,!0)}a(d)&&a(r)&&t()&&t().editor.setModelLanguage(a(d),a(r))}()}),x(()=>{t()&&function(c){if(!t()||a(d)&&c===a(o))return;const v=c?t().Uri.parse(`file://${c}#${crypto.randomUUID()}`):t().Uri.parse(`file://#${crypto.randomUUID()}`);a(d)?.dispose(),E(d,t().editor.createModel(e.text,a(r),v),!0),E(o,c,!0),E(m,!1)}(e.pathName)}),Q(()=>{a(d)?.dispose()});var u=P(),n=S(u),y=c=>{var v=Me();Z(R(v),{get options(){return _()},get model(){return a(d)},get height(){return e.height},get editorInstance(){return l()},set editorInstance(b){l(b)}}),w(c,v)};O(n,c=>{a(d)&&c(y)}),w(f,u),K(),p()}const $e=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"})),Ce={Root:function(f,e){N(e,!1);const t=()=>I(d,"$error",i),[i,p]=X();let _=M(e,"showLoadingIndicator",8,!0);const l=new D,g=l.isLoading,d=l.error,r=l.isReady;re();var o=P(),m=S(o),h=n=>{var y=me(),c=R(y);F(c,{size:1,color:"neutral",children:(v,b)=>{var s=V("Loading Monaco Editor...");w(v,s)},$$slots:{default:!0}}),w(n,y)},u=n=>{var y=P(),c=S(y),v=s=>{var L=ve(),H=R(L);F(H,{size:1,color:"error",children:(q,U)=>{var k=V();ne(()=>se(k,`Failed to load Monaco Editor: ${t(),ie(()=>t().message)??""}`)),w(q,k)},$$slots:{default:!0}}),w(s,L)},b=s=>{var L=P(),H=S(L),q=U=>{var k=P(),ee=S(k);de(ee,e,"default",{},null),w(U,k)};O(H,U=>{I(r,"$isReady",i)&&U(q)},!0),w(s,L)};O(c,s=>{t()?s(v):s(b,!1)},!0),w(n,y)};O(m,n=>{I(g,"$isLoading",i)&&_()?n(h):n(u,!1)}),w(f,o),K(),p()},Monaco:Z,SimpleMonaco:W};export{ye as C,Ce as M,W as S,Ee as _,D as a,_e as b,Z as c,$e as d,we as g,Le as t};
//# sourceMappingURL=index-DF_yYUtg.js.map
