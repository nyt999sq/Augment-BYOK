import{aR as ge,v as Y,x as I,H as g,Q as T,P as i,R as s,S as O,V as W,N as v,B as Z,a7 as se,a6 as be,aS as me,Z as x,ai as pe,Y as fe,W as N,z as t,F as q,_ as ye,A as ne,L as oe,at as j,K as he,X as ke,aG as _e,ak as qe,aH as we}from"./Icon-CaBYD5oO.js";import{A as ie}from"./AugmentMessage-BDJkLW0G.js";import{b as Ae,a as Be}from"./BaseTextInput-CPpF4fmq.js";import{M as De}from"./index-DF_yYUtg.js";import{S as xe,F as Ie}from"./extension-client-context-CwKdOhUw.js";import"./index-Ct3ef_qL.js";import"./IconButtonAugment-Rffikxkp.js";import"./Markdown-oTNiBtsM.js";import"./TextTooltipAugment-B4cqQh4H.js";import"./marked.esm-CBEAPn3z.js";import"./message-broker-CliB7GoL.js";import"./toggleHighContrast-iCsKcMx3.js";import"./ButtonAugment-DECgcPdk.js";import"./noop-CVINQ7cR.js";import"./Filespan-CzwbVFJm.js";import"./mermaid-Bezvo2Lx.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./OpenFileButton-BnBhQVIy.js";import"./index-nbgGMYE9.js";import"./remote-agents-client-DV0OXQaI.js";import"./types-CaiUesx9.js";import"./SuccessfulButton-Df7hGnns.js";import"./CopyButton-BCoIBrt5.js";import"./Chevron-Ct6H6suA.js";import"./LanguageIcon-Du_otND8.js";import"./keypress-fD7XHdyk.js";import"./await-bImbqfxU.js";import"./TextAreaAugment-BzfuWeQA.js";import"./index-BBZh5tbU.js";import"./index-B4NDmpYR.js";import"./utils-DpHtg3Qz.js";import"./CalloutAugment-DfDZpfuE.js";import"./key-CsCKik6T.js";try{L=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(ve=new L.Error().stack)&&(L._sentryDebugIds=L._sentryDebugIds||{},L._sentryDebugIds[ve]="06e5ec89-dfb6-4f71-81e1-23307c214d74",L._sentryDebugIdIdentifier="sentry-dbid-06e5ec89-dfb6-4f71-81e1-23307c214d74")}catch{}var L,ve,Re=g('<div class="header svelte-1e21l2h"> </div>'),$e=(o,e)=>e("A3"),Ce=(o,e)=>e("A2"),Se=(o,e)=>e("A1"),Me=(o,e)=>e("="),We=(o,e)=>e("B1"),Fe=(o,e)=>e("B2"),Pe=(o,e)=>e("B3"),ze=g('<div class="container svelte-1e21l2h"><!> <div class="buttons svelte-1e21l2h"><button type="button">A</button> <button type="button">A</button> <button type="button">A</button> <button type="button">=</button> <button type="button">B</button> <button type="button">B</button> <button type="button">B</button></div></div>');function re(o,e){Y(e,!0);let a=I(e,"selected",15,null),w=I(e,"question",3,null);function u(k){a(k)}var A=ze(),b=i(A),d=k=>{var E=Re(),K=i(E);O(()=>se(K,w())),v(k,E)};T(b,k=>{w()&&k(d)});var p=s(b,2),r=i(p);let R;r.__click=[$e,u];var $=s(r,2);let G;$.__click=[Ce,u];var C=s($,2);let Q;C.__click=[Se,u];var m=s(C,2);let F;m.__click=[Me,u];var B=s(m,2);let f;B.__click=[We,u];var y=s(B,2);let P;y.__click=[Fe,u];var z=s(y,2);let D;z.__click=[Pe,u],O((k,E,K,l,c,J,U)=>{R=W(r,1,"button large svelte-1e21l2h",null,R,k),G=W($,1,"button medium svelte-1e21l2h",null,G,E),Q=W(C,1,"button small svelte-1e21l2h",null,Q,K),F=W(m,1,"button equal svelte-1e21l2h",null,F,l),f=W(B,1,"button small svelte-1e21l2h",null,f,c),P=W(y,1,"button medium svelte-1e21l2h",null,P,J),D=W(z,1,"button large svelte-1e21l2h",null,D,U)},[()=>({highlighted:a()==="A3"}),()=>({highlighted:a()==="A2"}),()=>({highlighted:a()==="A1"}),()=>({highlighted:a()==="="}),()=>({highlighted:a()==="B1"}),()=>({highlighted:a()==="B2"}),()=>({highlighted:a()==="B3"})]),v(o,A),Z()}ge(["click"]);var Ee=g('<div class="question svelte-bdbnck"> </div>'),He=g('<div class="container svelte-bdbnck"><!> <textarea class="input svelte-bdbnck" rows="3"></textarea></div>'),Le=g('<button class="button svelte-yv75jl"> </button>');ge(["click"]);var Oe=g("<div> </div>"),Ne=g('<div class="container svelte-1asql96"><!> <label class="custom-checkbox svelte-1asql96"><input type="checkbox" class="svelte-1asql96"/> <span class="svelte-1asql96"></span></label></div>'),Te=g("<!> <!> <!> <!> <!> <!>",1),je=g("<p>Streaming in progress... Please wait for both responses to complete.</p>"),Ge=g('<main><div class="l-pref svelte-ghgusd"><h1 class="svelte-ghgusd">Input message</h1> <!> <hr class="l-side-by-side svelte-ghgusd"/> <div class="l-side-by-side svelte-ghgusd"><div class="l-side-by-side__child svelte-ghgusd"><h1 class="svelte-ghgusd">Option A</h1> <!></div> <div class="divider svelte-ghgusd"></div> <div class="l-side-by-side__child svelte-ghgusd"><h1 class="svelte-ghgusd">Option B</h1> <!></div></div> <hr class="svelte-ghgusd"/> <!></div></main>');function Qe(o,e){Y(e,!0);const a=me();let w=x(null),u=x(null),A=null,b=x(null),d=x(""),p=x(!1),r=x(pe({a:null,b:null})),R=x(pe(e.inputData.data.a.response.length>0&&e.inputData.data.b.response.length>0));function $(){if(A="=",t(b)===null)return void a("notify","Overall rating is required");const l={overallRating:t(b),formattingRating:t(w)||"=",hallucinationRating:A||"=",instructionFollowingRating:t(u)||"=",isHighQuality:t(p),textFeedback:t(d)};a("result",l)}fe(()=>{window.addEventListener("message",l=>{const c=l.data;c.type===N.chatModelReply?(c.stream==="A"?t(r).a=c.data.text:c.stream==="B"&&(t(r).b=c.data.text),q(r,t(r),!0)):c.type===N.chatStreamDone&&q(R,!0)})});let G=ne(()=>{return(l=t(b))==="="||l===null?"Is this a high quality comparison?":`Are you completely happy with response '${l.startsWith("A")?"A":"B"}'?`;var l}),C=ne(()=>t(r).a!==null?t(r).a:e.inputData.data.a.response),Q=ne(()=>t(r).b!==null?t(r).b:e.inputData.data.b.response);ye(()=>{q(R,e.inputData.data.a.response.length>0&&e.inputData.data.b.response.length>0,!0)});var m=Ge(),F=i(m),B=s(i(F),2);ie(B,{get markdown(){return e.inputData.data.a.message}});var f=s(B,4),y=i(f),P=s(i(y),2);ie(P,{get markdown(){return t(C)}});var z=s(y,4),D=s(i(z),2);ie(D,{get markdown(){return t(Q)}});var k=s(f,4),E=l=>{var c=Te(),J=oe(c);re(J,{question:"Which response is formatted better? (e.g. level of detail style, structure)?",get selected(){return t(w)},set selected(n){q(w,n,!0)}});var U=s(J,2);re(U,{question:"Which response follows your instruction better?",get selected(){return t(u)},set selected(n){q(u,n,!0)}});var ue=s(U,2);re(ue,{question:"Which response is better overall?",get selected(){return t(b)},set selected(n){q(b,n,!0)}});var de=s(ue,2);(function(n,h){Y(h,!0);let V=I(h,"isChecked",15,!1),_=I(h,"question",3,null);var H=Ne(),S=i(H),ee=M=>{var X=Oe(),le=i(X);O(()=>se(le,_())),v(M,X)};T(S,M=>{_()&&M(ee)});var ae=s(S,2),te=i(ae);Be(te,V),v(n,H),Z()})(de,{get question(){return t(G)},get isChecked(){return t(p)},set isChecked(n){q(p,n,!0)}});var ce=s(de,2);(function(n,h){Y(h,!0);let V=I(h,"value",15,""),_=I(h,"question",3,null),H=I(h,"placeholder",3,"");var S=He(),ee=i(S),ae=M=>{var X=Ee(),le=i(X);O(()=>se(le,_())),v(M,X)};T(ee,M=>{_()&&M(ae)});var te=s(ee,2);O(()=>be(te,"placeholder",H())),Ae(te,V),v(n,S),Z()})(ce,{question:"Any additional feedback?",placeholder:"Please explain your answers to the above questions.",get value(){return t(d)},set value(n){q(d,n,!0)}}),function(n,h){let V=I(h,"label",3,"Submit");var _=Le();_.__click=function(...S){h.onClick?.apply(this,S)};var H=i(_);O(()=>se(H,V())),v(n,_)}(s(ce,2),{label:"Submit",onClick:$}),v(l,c)},K=l=>{var c=je();v(l,c)};T(k,l=>{t(R)?l(E):l(K,!1)}),v(o,m),Z()}var Ke=g("<main><!></main>");function Ve(o,e){Y(e,!0);let a=x(void 0);function w(d){const p=d.detail;j.postMessage({type:N.preferenceResultMessage,data:p})}function u(d){j.postMessage({type:N.preferenceNotify,data:d.detail})}j.postMessage({type:N.preferencePanelLoaded});var A=he();ke("message",_e,function(d){const p=d.data;p.type===N.preferenceInit&&q(a,p.data,!0)});var b=oe(A);qe(b,()=>De.Root,(d,p)=>{p(d,{children:(r,R)=>{xe(r,{children:($,G)=>{Ie($,{children:(C,Q)=>{var m=Ke(),F=i(m),B=f=>{var y=he(),P=oe(y),z=D=>{Qe(D,{get inputData(){return t(a)},$$events:{result:w,notify:u}})};T(P,D=>{t(a).type==="Chat"&&D(z)}),v(f,y)};T(F,f=>{t(a)&&f(B)}),v(C,m)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}),v(o,A),Z()}(async function(){j&&j.initialize&&await j.initialize(),we(Ve,{target:document.getElementById("app")})})();
//# sourceMappingURL=preference-C9U1L-bB.js.map
