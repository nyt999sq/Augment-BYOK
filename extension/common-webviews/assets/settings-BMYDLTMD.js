import{A as K,z as t,F as m,bk as On,v as ze,x as Y,K as ge,L as F,Q as O,N as a,B as Fe,a4 as wt,H as f,$ as wr,a5 as dr,P as l,a0 as $r,w as It,W as We,as as Ia,ar as oa,bl as Tr,aR as ea,af as gt,R as d,J as pe,T as W,ae as S,S as X,a7 as le,V as Ot,ai as ur,a6 as or,aT as As,C as Vt,D as Le,bb as Cs,at as Pt,an as za,X as Qt,aG as Fa,_ as Wt,Z as ye,aI as Hr,ak as qe,M as Un,aL as Yr,y as xr,G as Ar,ab as rt,I as ct,bm as Us,m as ut,Y as tr,aa as Ht,ad as Da,ag as pr,bn as Ls,a3 as Xt,O as kt,bo as ln,bp as Ja,aj as ss,am as ns,b0 as zs,aS as cn,bq as Ln,ac as dn,aZ as br,a8 as un,a1 as zn,a2 as Fn,br as Dn,aH as Bn}from"./Icon-CaBYD5oO.js";import"./design-system-init-DCR3FqZN.js";import{aG as ot,aH as xt,aD as de,aI as Ue,aJ as st,aE as Vr,aK as jr,aF as ir,aL as Wn,aM as Ut,aN as Lt,aO as ba,aP as pa,aQ as da,aR as Ur,aS as Ba,aT as Gn,aU as is,aV as Fs,aW as Ds,aX as Hn,aY as qn,aZ as Vn,a_ as Yt,a$ as vn,a as lr,T as er,b0 as fa,b1 as jn,b2 as Jn,b3 as Kn,b4 as Yn,D as et,b as ta,b5 as Xn,b6 as Zn,b7 as Qn,b8 as ei,b9 as ti,ba as ri,bb as ai,bc as Bs,bd as Ws,be as Gs,bf as si,bg as ni,bh as Hs,bi as ii,bj as oi,bk as li,bl as ci,bm as di,bn as qs,bo as ui,bp as vi,bq as hi,s as gi,o as mi,br as pi,V as St,bs as aa,bt as Sa,i as ar,bu as Na,bv as ft,bw as hn,bx as fi,by as wa,bz as bt,bA as yi,bB as _i,bC as Ka,bD as bi,bE as Si,bF as wi,bG as $i,bH as Er,z as Ei,bI as $a,bJ as Ai,bK as os,E as Ci,d as Ti,S as Ri,F as ki,bL as Vs,bM as js,bN as Ii,bO as Js,bP as Ni,bQ as xi,bR as Mi,bS as Pi,bT as Oi,bU as sa,bV as Ks,bW as Ui,bX as Li,bY as zi,bZ as Fi,b_ as Ys,b$ as Di,c0 as Bi}from"./extension-client-context-CwKdOhUw.js";import{R as Wi,M as Gi}from"./message-broker-CliB7GoL.js";import{S as Hi}from"./shared-webview-store-model-BEcw7czj.js";import{a as qi,c as Vi,b as ji,d as na,m as Ji,T as Nr,e as Ki,u as Yi,S as ls,N as Xi,s as Xs,v as Zi}from"./shared-app-state-BibCi4jI.js";import{S as De,f as Qi,a as gn,b as eo,M as vt,P as Lr,d as to,c as ua,m as ro,e as ao,O as so}from"./index-BBZh5tbU.js";import{o as Ta}from"./keypress-fD7XHdyk.js";import{I as Nt}from"./IconButtonAugment-Rffikxkp.js";import{C as no}from"./Chevron-Ct6H6suA.js";import{B as Ge}from"./ButtonAugment-DECgcPdk.js";import{B as yr}from"./types-CaiUesx9.js";import{T as qt,a as ya,b as Ya}from"./TextTooltipAugment-B4cqQh4H.js";import{C as vr}from"./CalloutAugment-DfDZpfuE.js";import{T as Wa}from"./TextAreaAugment-BzfuWeQA.js";import{C as mn,a as pn,M as io}from"./Markdown-oTNiBtsM.js";import{S as oo}from"./SuccessfulButton-Df7hGnns.js";import"./BaseTextInput-CPpF4fmq.js";import{R as lo}from"./RulesModeSelector-X8JADsuG.js";import{f as Ga}from"./marked.esm-CBEAPn3z.js";import{F as co}from"./Filespan-CzwbVFJm.js";import{M as uo}from"./MemoriesMarkdownEditor-Bw7euA9v.js";import{T as vo}from"./TextCombo-89YZbRHm.js";import{t as Rr,a as Kr}from"./index-Ct3ef_qL.js";import{M as ho}from"./index-DF_yYUtg.js";import"./index-B4NDmpYR.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./await-bImbqfxU.js";import"./index-Dt79ugWJ.js";import"./toggleHighContrast-iCsKcMx3.js";import"./MonacoMarkdownEditor-BBd4goIb.js";import"./OpenFileButton-BnBhQVIy.js";import"./index-nbgGMYE9.js";import"./remote-agents-client-DV0OXQaI.js";try{qr=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Os=new qr.Error().stack)&&(qr._sentryDebugIds=qr._sentryDebugIds||{},qr._sentryDebugIds[Os]="483a5326-b5e1-4fb2-9ef1-3e95dd2a50c6",qr._sentryDebugIdIdentifier="sentry-dbid-483a5326-b5e1-4fb2-9ef1-3e95dd2a50c6")}catch{}var qr,Os;const go=Vi({component:"meter",parts:["root"]});class Ts{static create(e){return new Ts(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=qi(this.opts.ref)}#e=K(()=>({role:"meter",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current,"data-value":this.opts.value.current,"data-max":this.opts.max.current,"data-min":this.opts.min.current,[go.root]:"",...this.attachment}));get props(){return t(this.#e)}set props(e){m(this.#e,e)}}var mo=f("<div><!></div>");function po(n,e){const r=On();ze(e,!0);let s=Y(e,"value",3,0),i=Y(e,"max",3,100),o=Y(e,"min",3,0),c=Y(e,"id",19,()=>ji(r)),v=Y(e,"ref",15,null),h=$r(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const g=Ts.create({value:na(()=>s()),max:na(()=>i()),min:na(()=>o()),id:na(()=>c()),ref:na(()=>v(),T=>v(T))}),y=K(()=>Ji(h,g.props));var w=ge(),k=F(w),I=T=>{var u=ge(),E=F(u);wt(E,()=>e.child,()=>({props:t(y)})),a(T,u)},N=T=>{var u=mo();wr(u,()=>({...t(y)}));var E=l(u);wt(E,()=>e.children??dr),a(T,u)};O(k,T=>{e.child?T(I):T(N,!1)}),a(n,w),Fe()}const ia={maxMS:9e5,initialMS:6e4,mult:2,maxSteps:4};let fo=class{constructor(n,e=ia){this.callback=n;const r={...e};r.maxMS<0&&(console.warn("PollingManager: Negative maxMS detected, using default value of 15 minutes"),r.maxMS=ia.maxMS),r.initialMS<=0&&(console.warn("PollingManager: Negative or zero initialMS detected, using default value of 1 minute"),r.initialMS=ia.initialMS),r.mult<=0&&(console.warn("PollingManager: Negative or zero multiplier detected, using default value of 2"),r.mult=ia.mult),r.maxSteps!==void 0&&r.maxSteps<0&&(console.warn("PollingManager: Negative maxSteps detected, using default value of 4"),r.maxSteps=ia.maxSteps),this.params=r,this.currentMS=this.params.maxMS}timerId=null;currentMS;step=0;params;startPolling(){this.stopPolling(),this.currentMS=this.params.initialMS,this.step=0,this.safeExecute(),this.scheduleNext()}stopPolling(){this.timerId!==null&&(window.clearTimeout(this.timerId),this.timerId=null)}dispose(){this.stopPolling()}scheduleNext(){this.timerId=window.setTimeout(()=>{if(this.safeExecute(),this.params.maxMS===0){if(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps)return void this.stopPolling()}else this.currentMS<this.params.maxMS&&(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps?(this.currentMS=this.params.maxMS,this.step=0):this.currentMS=Math.min(this.currentMS*this.params.mult,this.params.maxMS));this.scheduleNext()},this.currentMS)}safeExecute(){try{const n=this.callback();n instanceof Promise&&n.catch(e=>console.error("Error in polling callback:",e))}catch(n){console.error("Error in polling callback:",n)}}};function yo(n){return n.toLowerCase().replace(/_([a-z])/g,(e,r)=>r.toUpperCase())}function _o(n){return function(e,r,s,i=yo){if(e===void 0)return;const o=Object.entries(r).find(([,v])=>v===e)?.[0];if(!o)return;const c=i(o);return c&&c in s||console.warn(`Failed to convert proto enum '${e}' value ${o} converted to '${c}' to lib.`),s[c]}(n,Wn,ir)}ot.Unknown,ot.WebSearch,xt.WEB_SEARCH,ot.GithubApi,xt.GITHUB_API,ot.GithubAppReadonlyApi,xt.GITHUB_APP_READONLY_API,ot.GithubAppPostComment,xt.GITHUB_APP_POST_COMMENT,ot.GithubAppPrDescription,ot.Linear,xt.LINEAR,ot.Jira,xt.JIRA,ot.Confluence,xt.CONFLUENCE,ot.Notion,xt.NOTION,ot.Supabase,xt.SUPABASE,ot.Glean,xt.GLEAN;const bo={[xt.UNKNOWN]:void 0,[xt.WEB_SEARCH]:ot.WebSearch,[xt.GITHUB_API]:ot.GithubApi,[xt.GITHUB_APP_READONLY_API]:ot.GithubAppReadonlyApi,[xt.GITHUB_APP_POST_COMMENT]:ot.GithubAppPostComment,[xt.LINEAR]:ot.Linear,[xt.JIRA]:ot.Jira,[xt.CONFLUENCE]:ot.Confluence,[xt.NOTION]:ot.Notion,[xt.SUPABASE]:ot.Supabase,[xt.GLEAN]:ot.Glean};function fn(n){if(n!==void 0)return bo[n]}de.readFile,Ue.READ_FILE,de.saveFile,Ue.SAVE_FILE,de.editFile,Ue.EDIT_FILE,de.clarify,Ue.CLARIFY,de.onboardingSubAgent,Ue.ONBOARDING_SUB_AGENT,de.launchProcess,Ue.LAUNCH_PROCESS,de.killProcess,Ue.KILL_PROCESS,de.readProcess,Ue.READ_PROCESS,de.writeProcess,Ue.WRITE_PROCESS,de.listProcesses,Ue.LIST_PROCESSES,de.waitProcess,Ue.WAIT_PROCESS,de.openBrowser,Ue.OPEN_BROWSER,de.strReplaceEditor,Ue.STR_REPLACE_EDITOR,de.remember,Ue.REMEMBER,de.diagnostics,Ue.DIAGNOSTICS,de.webFetch,Ue.WEB_FETCH,de.setupScript,Ue.SETUP_SCRIPT,de.readTerminal,Ue.READ_TERMINAL,de.gitCommitRetrieval,Ue.GIT_COMMIT_RETRIEVAL,de.memoryRetrieval,Ue.MEMORY_RETRIEVAL,de.startWorkerAgent,Ue.START_WORKER_AGENT,de.readWorkerState,Ue.READ_WORKER_STATE,de.waitForWorkerAgent,Ue.WAIT_FOR_WORKER_AGENT,de.sendInstructionToWorkerAgent,Ue.SEND_INSTRUCTION_TO_WORKER_AGENT,de.stopWorkerAgent,Ue.STOP_WORKER_AGENT,de.deleteWorkerAgent,Ue.DELETE_WORKER_AGENT,de.readWorkerAgentEdits,Ue.READ_WORKER_AGENT_EDITS,de.applyWorkerAgentEdits,Ue.APPLY_WORKER_AGENT_EDITS,de.LocalSubAgent,Ue.LOCAL_SUB_AGENT;const So={[Ue.UNKNOWN]:void 0,[Ue.READ_FILE]:de.readFile,[Ue.SAVE_FILE]:de.saveFile,[Ue.EDIT_FILE]:de.editFile,[Ue.CLARIFY]:de.clarify,[Ue.ONBOARDING_SUB_AGENT]:de.onboardingSubAgent,[Ue.LAUNCH_PROCESS]:de.launchProcess,[Ue.KILL_PROCESS]:de.killProcess,[Ue.READ_PROCESS]:de.readProcess,[Ue.WRITE_PROCESS]:de.writeProcess,[Ue.LIST_PROCESSES]:de.listProcesses,[Ue.WAIT_PROCESS]:de.waitProcess,[Ue.OPEN_BROWSER]:de.openBrowser,[Ue.STR_REPLACE_EDITOR]:de.strReplaceEditor,[Ue.REMEMBER]:de.remember,[Ue.DIAGNOSTICS]:de.diagnostics,[Ue.WEB_FETCH]:de.webFetch,[Ue.SETUP_SCRIPT]:de.setupScript,[Ue.READ_TERMINAL]:de.readTerminal,[Ue.GIT_COMMIT_RETRIEVAL]:de.gitCommitRetrieval,[Ue.MEMORY_RETRIEVAL]:de.memoryRetrieval,[Ue.START_WORKER_AGENT]:de.startWorkerAgent,[Ue.READ_WORKER_STATE]:de.readWorkerState,[Ue.WAIT_FOR_WORKER_AGENT]:de.waitForWorkerAgent,[Ue.SEND_INSTRUCTION_TO_WORKER_AGENT]:de.sendInstructionToWorkerAgent,[Ue.STOP_WORKER_AGENT]:de.stopWorkerAgent,[Ue.DELETE_WORKER_AGENT]:de.deleteWorkerAgent,[Ue.READ_WORKER_AGENT_EDITS]:de.readWorkerAgentEdits,[Ue.APPLY_WORKER_AGENT_EDITS]:de.applyWorkerAgentEdits,[Ue.LOCAL_SUB_AGENT]:de.LocalSubAgent};function yn(n){if(n!==void 0)return So[n]}De.shell,st.SHELL,De.webFetch,st.WEB_FETCH,De.strReplaceEditor,st.STR_REPLACE_EDITOR,De.codebaseRetrieval,st.CODEBASE_RETRIEVAL,De.removeFiles,st.REMOVE_FILES,De.remember,st.REMEMBER,De.view,st.VIEW,De.saveFile,st.SAVE_FILE,De.viewTaskList,st.VIEW_TASK_LIST,De.viewRangeUntruncated,st.VIEW_RANGE_UNTRUNCATED,De.searchUntruncated,st.SEARCH_UNTRUNCATED,De.reorganizeTaskList,st.REORGANIZE_TASK_LIST,De.updateTasks,st.UPDATE_TASKS,De.addTasks,st.ADD_TASKS,De.renderMermaid,st.RENDER_MERMAID,De.grepSearch,st.GREP_SEARCH,De.subAgent,st.SUB_AGENT,De.applyPatch,st.APPLY_PATCH;const wo={[st.UNKNOWN]:void 0,[st.SHELL]:De.shell,[st.WEB_FETCH]:De.webFetch,[st.STR_REPLACE_EDITOR]:De.strReplaceEditor,[st.CODEBASE_RETRIEVAL]:De.codebaseRetrieval,[st.REMOVE_FILES]:De.removeFiles,[st.REMEMBER]:De.remember,[st.VIEW]:De.view,[st.SAVE_FILE]:De.saveFile,[st.VIEW_TASK_LIST]:De.viewTaskList,[st.VIEW_RANGE_UNTRUNCATED]:De.viewRangeUntruncated,[st.SEARCH_UNTRUNCATED]:De.searchUntruncated,[st.REORGANIZE_TASK_LIST]:De.reorganizeTaskList,[st.UPDATE_TASKS]:De.updateTasks,[st.ADD_TASKS]:De.addTasks,[st.RENDER_MERMAID]:De.renderMermaid,[st.GREP_SEARCH]:De.grepSearch,[st.SUB_AGENT]:De.subAgent,[st.APPLY_PATCH]:De.applyPatch};function _n(n){if(n!==void 0)return wo[n]}Vr.Unsafe,jr.UNSAFE,Vr.Safe,jr.SAFE,Vr.Check,jr.CHECK,jr.UNSAFE,Vr.Unsafe,jr.SAFE,Vr.Safe,jr.CHECK,Vr.Check;class va{constructor(e){this._host=e,this.pollingManager=new fo(()=>this.requestToolStatus(!1),{maxMS:0,initialMS:2e3,mult:1,maxSteps:150}),this.initializeToolConfig()}static key="toolConfigModel";configs=It([]);pollingManager;_settingsComponentSupported=It({workspaceContext:!1,mcpServerList:!1,mcpServerImport:!1,remoteTools:!1,userGuidelines:!1,terminal:!1,rules:!1,allowFeatureFlagOverrides:!1,secretsManagerEnabled:!1});_enableAgentMode=It(!1);_userTier=It("unknown");_userEmail=It(void 0);_guidelines=It({});async initializeToolConfig(){try{const e=await Ut(Lt),r=await e.toolConfigLoaded({});if(r.settingsComponentSupported!==void 0){const s=this.convertProtoSettingsComponentSupported(r.settingsComponentSupported);this._settingsComponentSupported.set(s)}if(r.enableAgentMode!==void 0&&this._enableAgentMode.set(r.enableAgentMode),r.userTier!==void 0){const s=this.convertProtoUserTier(r.userTier);this._userTier.set(s)}if(r.userEmail!==void 0&&this._userEmail.set(r.userEmail),r.guidelines!==void 0){const s=this.convertProtoGuidelines(r.guidelines);this._guidelines.set(s)}this.requestToolStatus()}catch(e){console.error("Failed to initialize tool config:",e)}}transformToolDisplay(e,r){const s=!e.isConfigured,i=e.oauthUrl;if(r.hostName===ir.remoteToolHost){let o=r.toolId;switch(typeof o=="string"&&(o=Number.parseInt(o)),o){case ot.GithubApi:return{displayName:"GitHub",description:"Configure GitHub API access for repository operations",iconName:"github",requiresAuthentication:s,authUrl:i};case ot.GithubAppReadonlyApi:case ot.GithubAppPostComment:case ot.GithubAppPrDescription:return null;case ot.Linear:return{displayName:"Linear",description:"Configure Linear API access for issue tracking",iconName:"linear",requiresAuthentication:s,authUrl:i};case ot.Jira:return{displayName:"Jira",description:"Configure Jira API access for issue tracking",iconName:"jira",requiresAuthentication:s,authUrl:i};case ot.Notion:return{displayName:"Notion",description:"Configure Notion API access",iconName:"notion",requiresAuthentication:s,authUrl:i};case ot.Confluence:return{displayName:"Confluence",description:"Configure Confluence API access",iconName:"confluence",requiresAuthentication:s,authUrl:i};case ot.WebSearch:return{displayName:"Web Search",description:"Configure web search capabilities",iconName:"globe",requiresAuthentication:s,authUrl:i};case ot.Supabase:return{displayName:"Supabase",description:"Configure Supabase API access",iconName:"supabase",requiresAuthentication:s,authUrl:i};case ot.Glean:return{displayName:"Glean",description:"Configure Glean API access",iconName:"glean",requiresAuthentication:s,authUrl:i};case ot.Unknown:return{displayName:"Unknown",description:"Unknown tool",requiresAuthentication:s,authUrl:i};default:throw new Error(`Unhandled RemoteToolId: ${o}`)}}else if(r.hostName===ir.localToolHost){const o=r.toolId;switch(o){case de.readFile:case de.editFile:case de.saveFile:case de.launchProcess:case de.killProcess:case de.readProcess:case de.writeProcess:case de.listProcesses:case de.waitProcess:case de.openBrowser:case de.clarify:case de.onboardingSubAgent:case de.strReplaceEditor:case de.remember:case de.diagnostics:case de.webFetch:case de.setupScript:case de.readTerminal:case de.gitCommitRetrieval:case de.memoryRetrieval:case de.startWorkerAgent:case de.readWorkerState:case de.waitForWorkerAgent:case de.sendInstructionToWorkerAgent:case de.stopWorkerAgent:case de.deleteWorkerAgent:case de.readWorkerAgentEdits:case de.applyWorkerAgentEdits:case de.LocalSubAgent:return{displayName:e.definition.name.toString(),description:"Local tool",iconName:"file-text",requiresAuthentication:s,authUrl:i};default:throw new Error(`Unhandled LocalToolType: ${o}`)}}else if(r.hostName===ir.sidecarToolHost){const o=r.toolId;switch(o){case De.codebaseRetrieval:return{displayName:"Code Search",description:"Configure codebase search capabilities",iconName:"search-code",requiresAuthentication:s,authUrl:i};case De.shell:return{displayName:"Shell",description:"Shell",iconName:"square-terminal",requiresAuthentication:s,authUrl:i};case De.strReplaceEditor:return{displayName:"File Edit",description:"File Editor",iconName:"file-pen",requiresAuthentication:s,authUrl:i};case De.applyPatch:return{displayName:"Apply Patch",description:"Apply a patch to the codebase",iconName:"file-pen",requiresAuthentication:s,authUrl:i};case De.view:return{displayName:"File View",description:"File Viewer",iconName:"file",requiresAuthentication:s,authUrl:i};case De.webFetch:return{displayName:"Web Fetch",description:"Retrieve information from the web",iconName:"globe",requiresAuthentication:s,authUrl:i};case De.removeFiles:return{displayName:"Remove Files",description:"Remove files from the codebase",iconName:"file-minus",requiresAuthentication:s,authUrl:i};case De.remember:return{displayName:e.definition.name.toString(),description:"Remember",iconName:"brain",requiresAuthentication:s,authUrl:i};case De.saveFile:return{displayName:"Save File",description:"Save a new file",iconName:"file-plus",requiresAuthentication:s,authUrl:i};case De.viewTaskList:return{displayName:"View Task List",description:"View the current task list",iconName:"list-checks",requiresAuthentication:s,authUrl:i};case De.reorganizeTaskList:return{displayName:"Reorganize Task List",description:"Reorganize the task list structure for major restructuring",iconName:"list",requiresAuthentication:s,authUrl:i};case De.viewRangeUntruncated:return{displayName:e.definition.name.toString(),description:"View Range",iconName:"file-text",requiresAuthentication:s,authUrl:i};case De.updateTasks:return{displayName:"Update Tasks",description:"Update one or more tasks in the task list",iconName:"list-checks",requiresAuthentication:s,authUrl:i};case De.addTasks:return{displayName:"Add Tasks",description:"Add one or more new tasks to the task list",iconName:"list-plus",requiresAuthentication:s,authUrl:i};case De.searchUntruncated:return{displayName:e.definition.name.toString(),description:"Search Untruncated",iconName:"search",requiresAuthentication:s,authUrl:i};case De.renderMermaid:return{displayName:"View Mermaid Diagram",description:"View a mermaid diagram",iconName:"network",requiresAuthentication:s,authUrl:i};case De.grepSearch:return{displayName:"Grep search",description:"Run grep search",iconName:"search",requiresAuthentication:s,authUrl:i};case De.subAgent:return{displayName:"Sub-agent",description:"Delegate tasks to sub-agents",iconName:"user",requiresAuthentication:s,authUrl:i};default:throw new Error(`Unhandled SidecarToolType: ${o}`)}}return{displayName:e.definition.name.toString(),description:e.definition.description||"",requiresAuthentication:s,authUrl:i}}handleMessageFromExtension(e){const r=e.data;switch(r.type){case We.toolConfigInitialize:return!1;case We.toolConfigDefinitionsResponse:return this.configs.update(s=>this.createConfigsFromHostTools(r.data.hostTools,[]).map(i=>{const o=s.find(c=>c.name===i.name);return o?{...o,displayName:i.displayName,description:i.description,iconName:i.iconName,requiresAuthentication:i.requiresAuthentication,authUrl:i.authUrl,isConfigured:i.isConfigured,toolApprovalConfig:i.toolApprovalConfig}:i})),!0}return!1}convertProtoGuidelines(e){return{userGuidelines:e.userGuidelines?{overLimit:e.userGuidelines.overLimit,contents:e.userGuidelines.contents,lengthLimit:e.userGuidelines.lengthLimit}:void 0,workspaceGuidelines:e.workspaceGuidelines.map(r=>({overLimit:r.overLimit,contents:r.contents,workspaceFolder:r.workspaceFolder,lengthLimit:r.lengthLimit}))}}convertProtoUserTier(e){switch(e){case ba.UNKNOWN:return"unknown";case ba.COMMUNITY:return"community";case ba.PROFESSIONAL:return"professional";case ba.ENTERPRISE:return"enterprise";default:return"unknown"}}convertProtoSettingsComponentSupported(e){return{workspaceContext:e.workspaceContext,mcpServerList:e.mcpServerList,mcpServerImport:e.mcpServerImport,remoteTools:e.remoteTools,userGuidelines:e.userGuidelines,terminal:e.terminal,rules:e.rules,allowFeatureFlagOverrides:e.allowFeatureFlagOverrides,secretsManagerEnabled:e.secretsManagerEnabled??!1}}convertProtoToolIdentifier(e){const r=e.toolId;if(!r)throw new Error("toolId oneof is required in ToolIdentifier");switch(r.case){case"remoteToolId":{const s=fn(r.value);return s==null?null:{hostName:ir.remoteToolHost,toolId:s}}case"localToolId":{const s=yn(r.value);return s==null?null:{hostName:ir.localToolHost,toolId:s}}case"sidecarToolId":{const s=_n(r.value);return s==null?null:{hostName:ir.sidecarToolHost,toolId:s}}case"mcpToolId":return{hostName:ir.mcpHost,toolId:r.value};default:throw new Error(`Unknown toolId case: ${r.case}`)}}createConfigsFromHostTools(e,r){return e.map(s=>{const i=this.transformToolDisplay(s,s.identifier);if(i==null)return null;const o=r.find(v=>v.name===s.definition.name),c=o?.isConfigured??!i.requiresAuthentication;return{config:o?.config??{},configString:JSON.stringify(o?.config??{},null,2),isConfigured:c,name:s.definition.name.toString(),displayName:i.displayName,description:i.description,identifier:s.identifier,iconName:i.iconName,requiresAuthentication:i.requiresAuthentication,authUrl:i.authUrl,showStatus:!1,statusMessage:"",statusType:"info",toolApprovalConfig:s.toolApprovalConfig}}).filter(s=>s!==null)}getConfigs(){return this.configs}isDisplayableTool(e){return["github","linear","notion","jira","confluence","supabase"].includes(e.displayName.toLowerCase())}getDisplayableTools(){return Ia(this.configs,e=>{const r=e.filter(i=>this.isDisplayableTool(i)),s=new Map;for(const i of r)s.set(i.displayName,i);return Array.from(s.values()).sort((i,o)=>{const c={GitHub:1,Linear:2,Notion:3},v=Number.MAX_SAFE_INTEGER,h=c[i.displayName]||v,g=c[o.displayName]||v;return h<v&&g<v||h===v&&g===v?h!==g?h-g:i.displayName.localeCompare(o.displayName):h-g})})}getPretendNativeToolDefs(){return Ia(this.configs,e=>Qi(e))}saveConfig(e){this.startPolling()}notifyLoaded(){this._host.postMessage({type:We.toolConfigLoaded})}startPolling(){this.pollingManager.startPolling()}requestToolStatus(e=!0){this._host.postMessage({type:We.toolConfigGetDefinitions,data:{useCache:e}})}dispose(){this.pollingManager.dispose()}getEnableAgentMode(){return this._enableAgentMode}getUserTier(){return this._userTier}getUserEmail(){return this._userEmail}getGuidelines(){return this._guidelines}updateLocalUserGuidelines(e){this._guidelines.update(r=>r.userGuidelines?{...r,userGuidelines:{...r.userGuidelines,contents:e,enabled:e.length>0}}:r)}updateToolApprovalConfig(e,r){this.configs.update(s=>s.map(i=>i.identifier.toolId===e.toolId&&i.identifier.hostName===e.hostName?{...i,toolApprovalConfig:r}:i))}getSettingsComponentSupported(){return this._settingsComponentSupported}}var cs=(n=>(n[n.ok=0]="ok",n[n.cancelled=1]="cancelled",n[n.unknown=2]="unknown",n[n.unavailable=3]="unavailable",n[n.unimplemented=4]="unimplemented",n[n.invalidArgument=5]="invalidArgument",n[n.resourceExhausted=6]="resourceExhausted",n[n.unauthenticated=7]="unauthenticated",n[n.permissionDenied=8]="permissionDenied",n[n.deadlineExceeded=9]="deadlineExceeded",n[n.augmentTooLarge=10]="augmentTooLarge",n[n.augmentClientTimeout=11]="augmentClientTimeout",n[n.augmentUpgradeRequired=12]="augmentUpgradeRequired",n))(cs||{});function Sr(n,e=!1){if(n instanceof Error){if(e){const r=function(s){return s.cause instanceof String?String(s.cause):s.cause instanceof Object?JSON.stringify(s.cause):""}(n);if(r!=="")return`${n.message} (due to ${r})`}return n.message}return String(n)}cs.unavailable,cs.cancelled;const hr=pa({name:Ur().optional(),title:Ur().optional(),type:Gn(["stdio","http","sse"]).optional(),command:Ur().optional(),args:Ba(is([Ur(),Fs(),Ds()])).optional(),env:da(is([Ur(),Fs(),Ds(),Hn(),qn()])).optional(),url:Ur().optional(),headers:da(Ur()).optional()}).passthrough();function zr(n){try{const e=hr.transform(r=>{let s;if(r.type)s=r.type;else if(r.url)s="http";else{if(!r.command)throw new Error("Server must have either 'command' (for stdio) or 'url' (for http/sse) property");s="stdio"}if(s==="http"||s==="sse"){if(!r.url)throw new Error(`${s.toUpperCase()} server must have a 'url' property`);const i=r.name||r.title||r.url,o=r.headers?Object.fromEntries(Object.entries(r.headers).filter(([c,v])=>v!=null).map(([c,v])=>[c,String(v)])):void 0;return{type:s,name:i,url:r.url,headers:Object.keys(o||{}).length>0?o:void 0}}if(s==="stdio"){const i=r.command||"",o=r.args?r.args.map(g=>String(g)):[];if(!i)throw new Error("Stdio server must have a 'command' property");const c=o.length>0?`${i} ${o.join(" ")}`:i,v=r.name||r.title||(i?i.split(" ")[0]:""),h=r.env?Object.fromEntries(Object.entries(r.env).filter(([g,y])=>y!=null).map(([g,y])=>[g,String(y)])):void 0;return{id:crypto.randomUUID(),type:"stdio",name:v,command:c,args:[],env:Object.keys(h||{}).length>0?h:void 0,useShellInterpolation:!0}}throw new Error(`Unsupported server type: ${s}`)}).refine(r=>!!r.name,{message:"Server must have a name",path:["name"]}).refine(r=>r.type==="http"||r.type==="sse"?!!r.url:!!r.command,{message:"Server must have either 'command' (for stdio) or 'url' (for http/sse)",path:["command","url"]}).safeParse(n);if(!e.success)throw new Jt(e.error.message);return{...e.data,id:crypto.randomUUID()}}catch(e){throw e instanceof Error?new Jt(`Invalid server configuration: ${e.message}`):new Jt("Invalid server configuration")}}const $o=Ba(hr),Eo=pa({servers:Ba(hr)}),Ao=pa({mcpServers:Ba(hr)}),Co=pa({servers:da(hr)}),To=pa({mcpServers:da(hr)}),Ro=da(Vn()),ko=hr.refine(n=>{const e=n.command!==void 0,r=n.url!==void 0;if(!e&&!r)return!1;const s=new Set(["name","title","type","command","args","env","url","headers"]);return Object.keys(n).every(i=>s.has(i))},{message:"Single server object must have valid server properties"});class Jt extends Error{constructor(e){super(e),this.name="MCPServerError",Object.setPrototypeOf(this,Jt.prototype)}}function nr(n){return n?.type==="http"||n?.type==="sse"}function Fr(n){return n?.type==="stdio"}function Ea(n){return nr(n)?n.url:Fr(n)?n.command:""}class ha{constructor(e){this.extensionClient=e,this.loadServersFromStorage(),this.loadToolsFromSidecar(),this.refreshAuthRequiredServers()}servers=It([]);tools=It({});authRequired=It(new Set);dispose(){}handleMcpMessage(e){const r=e.data;switch(r.type){case Yt.UPDATE_SERVERS:return this.loadServersFromStorage(),!0;case Yt.UPDATE_TOOLS:{const{name:s,tools:i}=r.data;return this.tools.update(o=>({...o,[s]:i})),!0}case Yt.UPDATE_AUTH_REQUIRED_SERVERS:{const{authRequiredServers:s}=r.data;return this.authRequired.set(new Set(s)),!0}default:return!1}}getAuthRequiredStore(){return this.authRequired}async getAuthSecret(e){return await this.extensionClient.mcpGetAuthSecret(e)}async setAuthSecret(e,r){await this.extensionClient.mcpSetAuthSecret(e,r)}async refreshAuthRequiredServers(){const e=await this.extensionClient.mcpGetAuthRequiredServers();this.authRequired.set(new Set(e))}async importServersFromJSON(e){try{const r=ha.parseServerConfigFromJSON(e),s=oa(this.servers),i=new Set(s.map(o=>o.name));for(const o of r){if(!o.name)throw new Jt("All servers must have a name.");if(i.has(o.name))throw new Jt(`A server with the name '${o.name}' already exists.`);i.add(o.name)}return await this.extensionClient.mcpAddWebviewServers(r.map(o=>({...o,id:crypto.randomUUID()}))),r.length}catch(r){throw r instanceof Jt?r:new Jt("Failed to import MCP servers from JSON. Please check the format.")}}async loadServersFromStorage(){try{const e=await this.extensionClient.mcpGetWebviewServers();this.servers.set(e)}catch(e){console.error("Failed to load MCP servers:",e),this.servers.set([])}}async loadToolsFromSidecar(){try{const e=await this.extensionClient.mcpGetWebviewTools();this.tools.set(e)}catch(e){console.error("Failed to load MCP tools:",e),this.tools.set({})}}getServers(){return this.servers}getToolsStore(){return this.tools}getTools(e){return oa(this.tools)[e]??[]}checkExistingServerName(e,r){const s=oa(this.servers).find(i=>i.name===e);if(s&&s?.id!==r)throw new Jt(`Server name '${e}' already exists`)}async addServer(e,r){this.checkExistingServerName(e.name),r&&await this.setAuthSecret(e.name,r),await this.extensionClient.mcpAddWebviewServers([{...e,id:crypto.randomUUID()}])}async updateServer(e,r){this.checkExistingServerName(e.name,e.id),r&&await this.setAuthSecret(e.name,r),await this.extensionClient.mcpUpdateWebviewServer(e)}async deleteServer(e){await this.extensionClient.mcpDeleteWebviewServer(e.id),this.tools.update(r=>{const{[e.name]:s,...i}=r;return i}),e.type!=="http"&&e.type!=="sse"||await this.extensionClient.mcpDeleteAuthSecret(e.name)}async toggleDisabledServer(e){const r=oa(this.servers).find(s=>s.id===e);if(!r)throw new Error(`Server with id ${e} not found`);await this.extensionClient.mcpUpdateWebviewServer({...r,disabled:!r.disabled})}static convertServerToJSON(e){return nr(e)?JSON.stringify({mcpServers:{[e.name]:{url:e.url,type:e.type}}},null,2):JSON.stringify({mcpServers:{[e.name]:{command:e.command.split(" ")[0],args:e.command.split(" ").slice(1),env:e.env}}},null,2)}parseServerValidationMessages(e){const r=new Map,s=new Map;e.forEach(o=>{const c=this.getTools(o.name),v=c.filter(h=>!h.enabled).map(h=>h.definition.mcp_tool_name);o.disabled?r.set(o.id,"MCP server has been manually disabled"):c&&c.length===0?r.set(o.id,"No tools are available for this MCP server"):v&&v.length===c.length?r.set(o.id,"All tools for this MCP server have validation errors: "+v.join(", ")):v&&v.length>0&&s.set(o.id,"MCP server has validation errors in the following tools which have been disabled: "+v.join(", "))});const i=ha.parseDuplicateServerIds(e);return{errors:new Map([...r,...i]),warnings:s}}static parseDuplicateServerIds(e){const r=new Map;for(const i of e)r.has(i.name)||r.set(i.name,[]),r.get(i.name).push(i.id);const s=new Map;for(const[,i]of r)if(i.length>1)for(let o=1;o<i.length;o++)s.set(i[o],"MCP server is disabled due to duplicate server names");return s}static parseServerConfigFromJSON(e){return function(r){try{const s=JSON.parse(r),i=is([$o.transform(o=>o.map(c=>zr(c))),Eo.transform(o=>o.servers.map(c=>zr(c))),Ao.transform(o=>o.mcpServers.map(c=>zr(c))),Co.transform(o=>Object.entries(o.servers).map(([c,v])=>{const h=hr.parse(v);return zr({...h,name:h.name||c})})),To.transform(o=>Object.entries(o.mcpServers).map(([c,v])=>{const h=hr.parse(v);return zr({...h,name:h.name||c})})),ko.transform(o=>[zr(o)]),Ro.transform(o=>{if(!Object.values(o).some(c=>{const v=hr.safeParse(c);return v.success&&(v.data.command!==void 0||v.data.url!==void 0)}))throw new Error("No command or url property found in any server config");return Object.entries(o).map(([c,v])=>{const h=hr.parse(v);return zr({...h,name:h.name||c})})})]).safeParse(s);if(i.success)return i.data;throw new Jt(`Invalid MCP servers JSON. Expected either an array of server configs or an object with a 'servers' array property (e.g. { "servers": [ ... ] }).`)}catch(s){throw s instanceof Jt?s:new Jt("Failed to parse MCP servers from JSON. Please check the format.")}}(e)}}class Io{_terminalSettings=It({supportedShells:[],selectedShell:void 0,startupScript:void 0});constructor(){this.requestTerminalSettings()}getTerminalSettings(){return this._terminalSettings}async requestTerminalSettings(){try{const e=await Ut(Lt),r=await e.getTerminalSettings({});if(r.terminalSettings){const s=this._convertProtoToTerminalSettings(r.terminalSettings);this._terminalSettings.set(s)}}catch(e){console.error("Failed to get terminal settings:",e)}}async updateSelectedShell(e){try{const r=await Ut(Lt),s=await r.updateTerminalSettings({selectedShell:e});if(s.terminalSettings){const i=this._convertProtoToTerminalSettings(s.terminalSettings);this._terminalSettings.set(i)}}catch(r){console.error("Failed to update selected shell:",r)}}async updateStartupScript(e){try{const r=await Ut(Lt),s=await r.updateTerminalSettings({startupScript:e});if(s.terminalSettings){const i=this._convertProtoToTerminalSettings(s.terminalSettings);this._terminalSettings.set(i)}}catch(r){console.error("Failed to update startup script:",r)}}_convertProtoToTerminalSettings(e){const r=(e?.supportedShells||[]).map(s=>({name:s.name,path:s.path,args:s.args??[],env:s.env??{},friendlyName:s.friendlyName,supportString:s.supportString}));return{...e,supportedShells:r}}}var Dr=(n=>(n.file="file",n.folder="folder",n))(Dr||{});class kr{constructor(e,r){this.host=e,this.asyncMsgSender=r;const{subscribe:s,set:i,update:o}=It({sourceFolders:[],sourceTree:[],syncStatus:vn.done});this.subscribe=s,this.set=i,this.update=o,this.getSourceFolders().then(c=>{this.update(v=>({...v,sourceFolders:c,sourceTree:kr.sourceFoldersToSourceNodes(c)}))})}subscribe;set;update;async expandNode(e){e.children=await this.getChildren(e.fileId),e.expanded=!0,this.update(r=>r)}collapseNode(e){this.update(r=>(e.children=[],e.expanded=!1,r))}toggleNode(e){e.type==="folder"&&e.inclusionState!==Tr.excluded&&(e.expanded?this.collapseNode(e):this.expandNode(e))}addMoreSourceFolders(){this.host.postMessage({type:We.wsContextAddMoreSourceFolders})}removeSourceFolder(e){this.host.postMessage({type:We.wsContextRemoveSourceFolder,data:e})}requestRefresh(){this.host.postMessage({type:We.wsContextUserRequestedRefresh})}handleMessageFromExtension=async e=>{const r=e.data;switch(r.type){case We.wsContextSourceFoldersChanged:case We.wsContextFolderContentsChanged:this.updateSourceFolders(await this.getSourceFolders());break;case We.sourceFoldersSyncStatus:this.update(s=>({...s,syncStatus:r.data.status}))}};async updateSourceFolders(e){let r=oa(this);const s=await this.getRefreshedSourceTree(r.sourceTree,e);this.update(i=>({...i,sourceFolders:e,sourceTree:s}))}async getRefreshedSourceTree(e,r){const s=kr.sourceFoldersToSourceNodes(r);return this.getRefreshedSourceTreeRecurse(e,s)}async getRefreshedSourceTreeRecurse(e,r){const s=new Map(e.map(i=>[JSON.stringify([i.fileId.folderRoot,i.fileId.relPath]),i]));for(let i of r){const o=kr.fileIdToString(i.fileId);if(i.type==="folder"){const c=s.get(o);c&&(i.expanded=c.type==="folder"&&c.expanded,i.expanded&&(i.children=await this.getChildren(i.fileId),i.children=await this.getRefreshedSourceTreeRecurse(c.children,i.children)))}}return r}static fileIdToString(e){return JSON.stringify([e.folderRoot,e.relPath])}static sourceFoldersToSourceNodes(e){return e.filter(r=>!r.isNestedFolder&&!r.isPending).sort((r,s)=>r.name.localeCompare(s.name)).map(r=>({name:r.name,fileId:r.fileId,children:[],expanded:!1,type:"folder",inclusionState:r.inclusionState,reason:"",trackedFileCount:r.trackedFileCount}))}getSourceFolders=async()=>(await this.asyncMsgSender.send({type:We.wsContextGetSourceFoldersRequest},1e4)).data.workspaceFolders;getChildren=async e=>(await this.asyncMsgSender.send({type:We.wsContextGetChildrenRequest,data:{fileId:{folderRoot:e.folderRoot,relPath:e.relPath}}},1e4)).data.children.map(r=>r.type==="folder"?{...r,children:[],expanded:!1}:{...r}).sort((r,s)=>r.type===s.type?r.name.localeCompare(s.name):r.type==="folder"?-1:1)}var No=f('<div><!> <!> <span class="name svelte-wku3wr"> <!></span> <!></div>'),xo=f('<div class="source-folder svelte-wku3wr"><!> <div role="button" tabindex="0" class="add-more svelte-wku3wr"><!> Add more...</div></div>');ea(["keyup","click"]);var Mo=f('<div class="children-container"></div>'),Po=f('<div><div role="treeitem" aria-selected="false" tabindex="0"><!> <span class="name svelte-1qg3awc"> </span> <!> <!></div> <!></div>');function bn(n,e){ze(e,!0);let r=ur(e.data);const s=()=>{e.wsContextModel.toggleNode(r)},i={[Tr.included]:"Included",[Tr.excluded]:"Excluded",[Tr.partial]:"Partially included"};let o=K(()=>r.type===Dr.folder&&r.inclusionState!==Tr.excluded),c=K(()=>r.type===Dr.folder&&r.expanded&&r.children&&r.children.length>0?r:null);var v=Po(),h=l(v);let g;h.__click=s;var y=K(()=>Ta("Enter",s));h.__keyup=function(...A){t(y)?.apply(this,A)};var w=l(h),k=A=>{{let C=K(()=>r.expanded?"down":"right");no(A,{get direction(){return t(C)},size:1})}},I=A=>{var C=ge(),M=F(C),p=L=>{pe(L,{name:"folder",size:1})},$=L=>{pe(L,{name:"file",size:1})};O(M,L=>{r.type===Dr.folder?L(p):L($,!1)},!0),a(A,C)};O(w,A=>{r.type===Dr.folder&&r.inclusionState!==Tr.excluded?A(k):A(I,!1)});var N=d(w,2),T=l(N),u=d(N,2),E=A=>{W(A,{size:1,class:"file-count",children:(C,M)=>{var p=S();X($=>le(p,$),[()=>r.trackedFileCount.toLocaleString()]),a(C,p)},$$slots:{default:!0}})};O(u,A=>{r.type===Dr.folder&&r.inclusionState!==Tr.excluded&&typeof r.trackedFileCount=="number"&&A(E)});var R=d(u,2);{let A=K(()=>r.inclusionState===Tr.excluded?"error":"success");gn(R,{get status(){return t(A)},get content(){return i[r.inclusionState]}})}var b=d(h,2),_=A=>{var C=Mo();gt(C,21,()=>t(c).children,M=>kr.fileIdToString(M.fileId),(M,p)=>{{let $=K(()=>e.indentLevel+1);bn(M,{get data(){return t(p)},get wsContextModel(){return e.wsContextModel},get indentLevel(){return t($)}})}}),a(A,C)};O(b,A=>{t(c)&&A(_)}),X(A=>{g=Ot(h,1,"tree-item svelte-1qg3awc",null,g,A),or(h,"title",r.reason),or(h,"aria-expanded",r.type===Dr.folder&&r.expanded),or(h,"aria-level",e.indentLevel),As(h,`padding-left: ${15*e.indentLevel+10}px;`),le(T,r.name)},[()=>({"included-folder":t(o)})]),a(n,v),Fe()}ea(["click","keyup"]);var Oo=f('<div class="files-container svelte-ne2oho"></div>');function Uo(n,e){ze(e,!0);const[r,s]=Vt();let i=K(()=>Le(e.wsContextModel,"$wsContextModel",r).sourceTree);var o=Oo();gt(o,21,()=>t(i),c=>kr.fileIdToString(c.fileId),(c,v)=>{bn(c,{get wsContextModel(){return e.wsContextModel},get data(){return t(v)},indentLevel:0})}),a(n,o),Fe(),s()}var Lo=f('<div class="icon-wrapper svelte-17335g0"><!></div>'),zo=f("<!> <!>",1),Fo=f('<div class="settings-card-body"><!></div>'),Do=f('<div><div class="settings-card-content svelte-17335g0"><div class="settings-card-left svelte-17335g0"><!></div> <div class="settings-card-right svelte-17335g0"><!></div></div> <!></div>');function Kt(n,e){let r=Y(e,"class",3,""),s=Y(e,"transparent",3,!1);var i=Do();let o;var c=l(i),v=l(c),h=l(v),g=u=>{var E=zo(),R=F(E),b=C=>{var M=Lo(),p=l(M);pe(p,{get name(){return e.iconName},size:2}),a(C,M)};O(R,C=>{e.iconName&&C(b)});var _=d(R,2),A=C=>{W(C,{color:"neutral",size:1,weight:"light",class:"card-title",children:(M,p)=>{var $=S();X(()=>le($,e.title)),a(M,$)},$$slots:{default:!0}})};O(_,C=>{e.title&&C(A)}),a(u,E)},y=u=>{var E=ge(),R=F(E),b=_=>{var A=ge(),C=F(A);wt(C,()=>e.headerLeft),a(_,A)};O(R,_=>{e.headerLeft&&_(b)},!0),a(u,E)};O(h,u=>{e.iconName||e.title?u(g):u(y,!1)});var w=d(v,2),k=l(w),I=u=>{var E=ge(),R=F(E);wt(R,()=>e.headerRight),a(u,E)};O(k,u=>{e.headerRight&&u(I)});var N=d(c,2),T=u=>{var E=Fo(),R=l(E);wt(R,()=>e.children),a(u,E)};O(N,u=>{e.children&&u(T)}),X(u=>o=Ot(i,1,Cs(["settings-card",r()]),"svelte-17335g0",o,u),[()=>({"settings-card--transparent":s()})]),a(n,i)}var Bo=f('<div class="c-settings-title svelte-1nrvk6x"><!></div>');function zt(n,e){const r=Y(e,"level",3,1),s=Y(e,"marginBottom",3,3),i=Y(e,"capitalize",3,!1),o={1:7,2:3,3:2},c=K(()=>o[r()]);var v=Bo();let h;var g=l(v);W(g,{get size(){return t(c)},color:"primary",weight:"regular",block:!0,get capitalize(){return i()},children:(y,w)=>{var k=ge(),I=F(k);wt(I,()=>e.children),a(y,k)},$$slots:{default:!0}}),X(y=>h=As(v,"",h,y),[()=>({"--margin-bottom":s()})]),a(n,v)}var Wo=f("<div><!></div>"),Go=f('<div class="context-list svelte-yszddx"><div><!> <!></div> <div><div class="files-header svelte-yszddx"><!> <!></div> <!></div></div>'),Ho=f("<!> <!>",1);function qo(n,e){ze(e,!0);const r=()=>Le(o,"$wsContextModel",s),[s,i]=Vt();let o=new kr(Pt,new za(Pt.postMessage)),c=K(()=>r().sourceFolders.sort((y,w)=>y.isWorkspaceFolder!==w.isWorkspaceFolder?y.isWorkspaceFolder?-1:1:y.fileId.folderRoot.localeCompare(w.fileId.folderRoot))),v=K(()=>t(c).reduce((y,w)=>y+(w.trackedFileCount??0),0));var h=Ho();Qt("message",Fa,function(...y){o.handleMessageFromExtension?.apply(this,y)});var g=F(h);zt(g,{level:1,children:(y,w)=>{var k=S("Context");a(y,k)},$$slots:{default:!0}});{const y=w=>{var k=Wo(),I=l(k),N=T=>{var u=K(()=>Ta("Enter",()=>o.requestRefresh()));Nt(T,{title:"Refresh",variant:"ghost-block",color:"neutral",size:1,$$events:{click:()=>o.requestRefresh(),keyup(...E){t(u)?.apply(this,E)}},children:(E,R)=>{pe(E,{name:"refresh-ccw"})},$$slots:{default:!0}})};O(I,T=>{r().syncStatus===vn.done&&T(N)}),a(w,k)};Kt(d(g,2),{headerRight:y,children:(w,k)=>{var I=Go(),N=l(I),T=l(N);W(T,{size:1,weight:"medium",class:"context-section-header",children:(_,A)=>{var C=S("SOURCE FOLDERS");a(_,C)},$$slots:{default:!0}}),function(_,A){ze(A,!0);let C=Y(A,"folders",19,()=>[]);var M=xo(),p=l(M);gt(p,17,C,x=>kr.fileIdToString(x.fileId),(x,U)=>{var J=No();let re;var G=l(J),ie=P=>{{let Z=K(()=>Ta("Enter",()=>A.onRemove(t(U).fileId.folderRoot)));Nt(P,{title:"Remove source folder from Augment context",onclick:()=>A.onRemove(t(U).fileId.folderRoot),get onkeyup(){return t(Z)},variant:"ghost",color:"neutral",size:.5,children:(ue,ve)=>{pe(ue,{name:"x"})},$$slots:{default:!0}})}};O(G,P=>{t(U).isWorkspaceFolder||P(ie)});var H=d(G,2);{let P=K(()=>(Z=>Z.isWorkspaceFolder?"folder-root":"folder")(t(U)));pe(H,{get name(){return t(P)}})}var B=d(H,2),q=l(B),oe=d(q);W(oe,{size:0,color:"secondary",style:"font-style: italic;",children:(P,Z)=>{var ue=S();X(()=>le(ue,t(U).isPending?"(pending)":t(U).fileId.folderRoot)),a(P,ue)},$$slots:{default:!0}});var te=d(B,2),j=P=>{W(P,{size:1,class:"file-count",children:(Z,ue)=>{var ve=S();X(be=>le(ve,be),[()=>t(U).trackedFileCount.toLocaleString()]),a(Z,ve)},$$slots:{default:!0}})};O(te,P=>{t(U).trackedFileCount&&P(j)}),X(P=>{re=Ot(J,1,"source-folder__item svelte-wku3wr",null,re,P),le(q,`${t(U).name??""} `)},[()=>({"workspace-folder":t(U).isWorkspaceFolder})]),a(x,J)});var $=d(p,2),L=K(()=>Ta("Enter",A.onAddMore));$.__keyup=function(...x){t(L)?.apply(this,x)},$.__click=function(...x){A.onAddMore?.apply(this,x)};var z=l($);pe(z,{name:"plus"}),a(_,M),Fe()}(d(T,2),{get folders(){return t(c)},onRemove:_=>o.removeSourceFolder(_),onAddMore:()=>o.addMoreSourceFolders()});var u=d(N,2),E=l(u),R=l(E);W(R,{size:1,weight:"medium",class:"context-section-header",children:(_,A)=>{var C=S("FILES");a(_,C)},$$slots:{default:!0}});var b=d(R,2);W(b,{size:1,class:"file-count",children:(_,A)=>{var C=S();X(M=>le(C,M),[()=>t(v).toLocaleString()]),a(_,C)},$$slots:{default:!0}}),Uo(d(E,2),{get wsContextModel(){return o}}),a(w,I)},$$slots:{headerRight:!0,default:!0}})}a(n,h),Fe(),i()}var Vo=f('<span>Cancel</span> <div class="connect-button-spinner svelte-1m3ir4e"><!></div>',1),jo=f("<span>Connect</span> <!>",1),Jo=f('<div class="connect-button-content svelte-1m3ir4e"><!></div>'),Ko=f('<div class="status-controls svelte-1m3ir4e"><div class="revoke-access-button svelte-1m3ir4e"><!></div> <!></div>'),Yo=f("<div> </div>"),Xo=f('<div class="config-wrapper svelte-1m3ir4e" role="group" aria-label="Connection status controls"><!> <!></div>'),Zo=f('<div class="loading-container svelte-1kb2yeg"><!> <!></div>'),Qo=f('<div class="category-content"><!></div>'),el=f('<div class="category"><div class="category-heading"><!></div> <!></div>');function Sn(n,e){let r=Y(e,"title",8),s=Y(e,"loading",8,!1);var i=el(),o=l(i);zt(l(o),{level:2,marginBottom:0,children:(g,y)=>{var w=S();X(()=>le(w,r())),a(g,w)},$$slots:{default:!0}});var c=d(o,2),v=g=>{var y=Zo(),w=l(y);Hr(w,{size:1});var k=d(w,2);W(k,{size:1,color:"secondary",children:(I,N)=>{var T=S("Loading...");a(I,T)},$$slots:{default:!0}}),a(g,y)},h=g=>{var y=Qo(),w=l(y);Un(w,e,"default",{},null),a(g,y)};O(c,g=>{s()?g(v):g(h,!1)}),a(n,i)}const wn="mcpServerModel";function Rs(){const n=xr(wn);if(!n)throw new Error("MCPServerModel context not found. Make sure setMCPServerModelContext() was called in a parent component.");return n}var tl=f('<span>Cancel</span> <div class="connect-button-spinner svelte-1wv2ms7"><!></div>',1),rl=f("<span>Connect</span> <!>",1),al=f('<div class="connect-button-content svelte-1wv2ms7"><!></div>'),sl=f('<div class="api-key-input-container svelte-1wv2ms7"><!> <!> <!></div>'),nl=f('<div class="status-controls svelte-1wv2ms7"><div class="disconnect-button svelte-1wv2ms7"><!></div> <!></div>'),il=f("<div> </div>"),ol=f('<div class="config-wrapper svelte-1wv2ms7" role="group" aria-label="Connection status controls"><!> <!></div>');function ll(n,e){ze(e,!0);const[r,s]=Vt(),i=Rs(),o=lr(),c=i.getServers(),v=K(()=>Le(c,"$serversStore",r).find(M=>M.name===e.config.name));let h=K(()=>({...eo(e.config),isConfigured:t(v)!==void 0}));async function g(){await o.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${t(h).displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&(t(v)&&i.deleteServer(t(v)),m(y,!1))}let y=ye(!1),w=ye(null);Wt(()=>{t(h).isConfigured&&t(y)&&(m(y,!1),t(w)&&(clearTimeout(t(w)),m(w,null)))});let k=ye(""),I=ye(!1);const N=i.getAuthRequiredStore();let T=K(()=>Le(N,"$authRequiredSet",r).has(t(h).name));async function u(){t(h).authType===vt.OAUTH?await async function(){if(t(y))return t(w)&&(clearTimeout(t(w)),m(w,null)),void m(y,!1);o.startRemoteMCPAuth(t(h).name),m(y,!0);const M=new Promise(p=>{m(w,setTimeout(()=>{p(),m(w,null)},6e4),!0)});await Promise.race([M]),m(y,!1)}():t(h).authType===vt.HEADER&&(m(k,""),m(I,!0))}async function E(){if(m(I,!1),!t(h).mcpUrl)return;const M={type:"http",name:t(h).name,url:t(h).mcpUrl},p={type:vt.HEADER,headers:{Authorization:`Bearer ${t(k)}`}};i.addServer(M,p)}async function R(){t(v)&&i.deleteServer(t(v)),m(y,!1)}var b=ol(),_=l(b);Kt(_,{get iconName(){return t(h).iconName},get title(){return t(h).displayName},headerRight:p=>{var $=ge(),L=F($),z=U=>{var J=ge(),re=F(J),G=H=>{Ge(H,{variant:"ghost-block",color:"neutral",size:.5,onclick:u,children:(B,q)=>{var oe=al(),te=l(oe),j=Z=>{var ue=tl(),ve=d(F(ue),2),be=l(ve);Hr(be,{size:1,useCurrentColor:!0}),a(Z,ue)},P=Z=>{var ue=rl(),ve=d(F(ue),2);pe(ve,{name:"arrow-up-right"}),a(Z,ue)};O(te,Z=>{t(y)?Z(j):Z(P,!1)}),a(B,oe)},$$slots:{default:!0}})},ie=H=>{var B=ge(),q=F(B),oe=te=>{var j=sl(),P=l(j);er(P,{size:1,placeholder:"Enter your API key",get value(){return t(k)},set value(ve){m(k,ve,!0)}});var Z=d(P,2);Nt(Z,{color:"neutral",variant:"ghost",size:1,onclick:()=>{m(k,""),m(I,!1)},children:(ve,be)=>{pe(ve,{name:"x"})},$$slots:{default:!0}});var ue=d(Z,2);Nt(ue,{color:"neutral",variant:"ghost-block",size:.5,onclick:E,children:(ve,be)=>{pe(ve,{name:"check"})},$$slots:{default:!0}}),a(te,j)};O(q,te=>{t(h).authType===vt.HEADER&&te(oe)},!0),a(H,B)};O(re,H=>{t(I)?H(ie,!1):H(G)}),a(U,J)},x=U=>{var J=ge(),re=F(J),G=ie=>{var H=nl(),B=l(H),q=l(B);{let P=K(()=>[ya.Hover]);qt(q,{get triggerOn(){return t(P)},content:"Revoke Access",children:(Z,ue)=>{Nt(Z,{color:"neutral",variant:"ghost-block",size:.5,onclick:g,children:(ve,be)=>{pe(ve,{name:"unplug"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var oe=d(B,2),te=P=>{Ge(P,{variant:"ghost-block",color:"warning",size:.5,onclick:R,children:(Z,ue)=>{var ve=S("Authenticate");a(Z,ve)},$$slots:{default:!0}})},j=P=>{var Z=ge(),ue=F(Z);qe(ue,()=>yr.Root,(ve,be)=>{be(ve,{color:"success",size:1,variant:"soft",children:(we,Oe)=>{var Pe=S("Connected");a(we,Pe)},$$slots:{default:!0}})}),a(P,Z)};O(oe,P=>{t(T)?P(te):P(j,!1)}),a(ie,H)};O(re,ie=>{t(h).isConfigured&&ie(G)},!0),a(U,J)};O(L,U=>{t(h).isConfigured?U(x,!1):U(z)}),a(p,$)},$$slots:{headerRight:!0}});var A=d(_,2),C=M=>{var p=il(),$=l(p);X(()=>{Ot(p,1,`status-message ${t(h).statusType??""}`,"svelte-1wv2ms7"),le($,t(h).statusMessage)}),a(M,p)};O(A,M=>{t(h).showStatus&&M(C)}),a(n,b),Fe(),s()}var cl=f('<div class="tool-category-list svelte-1hdlwqf"><!> <!></div>');function dl(n,e){ze(e,!0);const r=()=>Le(c,"$pretendNativeToolDefs",s),[s,i]=Vt();let o=Y(e,"tools",19,()=>[]);const c=xr(va.key).getPretendNativeToolDefs();{let v=K(()=>o().length===0);Sn(n,{get title(){return e.title},get loading(){return t(v)},children:(h,g)=>{var y=cl(),w=l(y);gt(w,17,o,I=>I.name,(I,N)=>{(function(T,u){ze(u,!0);let E=Y(u,"transparent",3,!1),R=ye(!1),b=ye(null);function _(){if(t(R))m(R,!1),t(b)&&(clearTimeout(t(b)),m(b,null));else{m(R,!0);const $=u.config.authUrl||"";u.onAuthenticate({authUrl:$,toolName:u.config.displayName.toLowerCase()}),m(b,setTimeout(()=>{m(R,!1),m(b,null)},6e4),!0)}}Wt(()=>{u.config.isConfigured&&t(R)&&(m(R,!1),t(b)&&(clearTimeout(t(b)),m(b,null)))});var A=Xo(),C=l(A);Kt(C,{get iconName(){return u.config.iconName},get title(){return u.config.displayName},get transparent(){return E()},headerRight:L=>{var z=ge(),x=F(z),U=re=>{Ge(re,{variant:"ghost-block",color:"neutral",size:.5,onclick:_,children:(G,ie)=>{var H=Jo(),B=l(H),q=te=>{var j=Vo(),P=d(F(j),2),Z=l(P);Hr(Z,{size:1,useCurrentColor:!0}),a(te,j)},oe=te=>{var j=jo(),P=d(F(j),2);pe(P,{name:"arrow-up-right"}),a(te,j)};O(B,te=>{t(R)?te(q):te(oe,!1)}),a(G,H)},$$slots:{default:!0}})},J=re=>{var G=ge(),ie=F(G),H=B=>{var q=Ko(),oe=l(q),te=l(oe);{let P=K(()=>[ya.Hover]);qt(te,{get triggerOn(){return t(P)},content:"Revoke Access",children:(Z,ue)=>{Nt(Z,{color:"neutral",variant:"ghost-block",size:.5,onclick:()=>u.onRevokeAccess(u.config),children:(ve,be)=>{pe(ve,{name:"unplug",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})}var j=d(oe,2);qe(j,()=>yr.Root,(P,Z)=>{Z(P,{color:"success",size:1,variant:"soft",children:(ue,ve)=>{var be=S("Connected");a(ue,be)},$$slots:{default:!0}})}),a(B,q)};O(ie,B=>{u.config.isConfigured&&B(H)},!0),a(re,G)};O(x,re=>{!u.config.isConfigured&&u.config.authUrl?re(U):re(J,!1)}),a(L,z)},$$slots:{headerRight:!0}});var M=d(C,2),p=$=>{var L=Yo(),z=l(L);X(()=>{Ot(L,1,`status-message ${u.config.statusType??""}`,"svelte-1m3ir4e"),le(z,u.config.statusMessage)}),a($,L)};O(M,$=>{u.config.showStatus&&$(p)}),a(T,A),Fe()})(I,{get config(){return t(N)},get onAuthenticate(){return e.onAuthenticate},get onRevokeAccess(){return e.onRevokeAccess}})});var k=d(w,2);gt(k,1,r,I=>I.name,(I,N)=>{ll(I,{get config(){return t(N)}})}),a(h,y)},$$slots:{default:!0}})}Fe(),i()}var ul=f('<tr class="key-val-row svelte-9znzh3"><td class="key-cell svelte-9znzh3"><!></td><td class="value-cell svelte-9znzh3"><!></td><td class="action-cell svelte-9znzh3"><!></td></tr>'),vl=f('<!> <table class="key-val-table svelte-9znzh3"><tbody><!></tbody></table> <div class="new-var-button-container svelte-9znzh3"><!></div>',1);function Zs(n,e){ze(e,!1);let r=Y(e,"handleEnterEditMode",8),s=Y(e,"keyValEntries",28,()=>[]),i=Y(e,"title",8,"Key Value"),o=Y(e,"keyPlaceholder",8,"Key"),c=Y(e,"valuePlaceholder",8,"Value"),v=Y(e,"addButtonText",8,"Entry");Ar();var h=vl(),g=F(h);W(g,{size:1,weight:"medium",children:(u,E)=>{var R=S();X(()=>le(R,i())),a(u,R)},$$slots:{default:!0}});var y=d(g,2),w=l(y),k=l(w),I=u=>{var E=ge(),R=F(E);gt(R,1,s,b=>b.id,(b,_,A)=>{var C=ul(),M=l(C),p=l(M);er(p,{size:1,get placeholder(){return o()},class:"full-width",get value(){return t(_).key},set value(U){t(_).key=U,Us(()=>s())},$$events:{focus(...U){r()?.apply(this,U)},change:()=>function(U,J){const re=s().findIndex(G=>G.id===U);re!==-1&&(s(s()[re].key=J,!0),s(s()))}(t(_).id,t(_).key)},$$legacy:!0});var $=d(M),L=l($);er(L,{size:1,get placeholder(){return c()},class:"full-width",get value(){return t(_).value},set value(U){t(_).value=U,Us(()=>s())},$$events:{focus(...U){r()?.apply(this,U)},change:()=>function(U,J){const re=s().findIndex(G=>G.id===U);re!==-1&&(s(s()[re].value=J,!0),s(s()))}(t(_).id,t(_).value)},$$legacy:!0});var z=d($),x=l(z);qt(x,{content:"Remove",children:(U,J)=>{Ge(U,{variant:"ghost",color:"neutral",type:"button",size:1,$$events:{focus(...re){r()?.apply(this,re)},click:()=>{return re=t(_).id,r()(),void s(s().filter(G=>G.id!==re));var re}},$$slots:{iconLeft:(re,G)=>{pe(re,{slot:"iconLeft",name:"trash-2"})}}})},$$slots:{default:!0}}),a(b,C)}),a(u,E)};O(k,u=>{rt(s()),ct(()=>s().length>0)&&u(I)});var N=d(y,2),T=l(N);Ge(T,{size:1,variant:"soft",color:"neutral",type:"button",$$events:{click:function(){r()(),s([...s(),{id:crypto.randomUUID(),key:"",value:""}])}},children:(u,E)=>{var R=S();X(()=>le(R,v())),a(u,R)},$$slots:{default:!0,iconLeft:(u,E)=>{pe(u,{slot:"iconLeft",name:"plus"})}}}),a(n,h),Fe()}const Ms=class Ms{static setPluginMcpConfig(e){this._instance===void 0?this._instance=e:fa().warn("Attempting to initialize PluginMcpConfig when one is already configured. Keeping existing.")}static getPluginMcpConfig(){if(this._instance===void 0)throw new Error("PluginMcpConfig not set");return this._instance}static reset(){this._instance=void 0}};Ms._instance=void 0;let ds=Ms;const Xa=()=>ds.getPluginMcpConfig(),hl={shouldRefreshTokens:!0};let us;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(us="oauth4webapi/v3.8.1");function Xr(n,e){if(n==null)return!1;try{return n instanceof e||Object.getPrototypeOf(n)[Symbol.toStringTag]===e.prototype[Symbol.toStringTag]}catch{return!1}}const fr="ERR_INVALID_ARG_VALUE",Zt="ERR_INVALID_ARG_TYPE";function At(n,e,r){const s=new TypeError(n,{cause:r});return Object.assign(s,{code:e}),s}const ks=Symbol(),gl=Symbol(),ml=Symbol(),Ha=Symbol(),vs=Symbol(),pl=new TextEncoder,fl=new TextDecoder;function hs(n){return typeof n=="string"?pl.encode(n):fl.decode(n)}let gs,$n;Uint8Array.prototype.toBase64?gs=n=>(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),n.toBase64({alphabet:"base64url",omitPadding:!0})):gs=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));const r=[];for(let s=0;s<e.byteLength;s+=32768)r.push(String.fromCharCode.apply(null,e.subarray(s,s+32768)));return btoa(r.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};function xa(n){return typeof n=="string"?$n(n):gs(n)}$n=Uint8Array.fromBase64?n=>{try{return Uint8Array.fromBase64(n,{alphabet:"base64url"})}catch(e){throw At("The input to be decoded is not correctly encoded.",fr,e)}}:n=>{try{const e=atob(n.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}catch(e){throw At("The input to be decoded is not correctly encoded.",fr,e)}};class Ra extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Ul,Error.captureStackTrace?.(this,this.constructor)}}class yl extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,r?.code&&(this.code=r?.code),Error.captureStackTrace?.(this,this.constructor)}}function Ye(n,e,r){return new yl(n,{code:e,cause:r})}function Ma(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function Is(n){Xr(n,Headers)&&(n=Object.fromEntries(n.entries()));const e=new Headers(n??{});if(us&&!e.has("user-agent")&&e.set("user-agent",us),e.has("authorization"))throw At('"options.headers" must not include the "authorization" header name',fr);return e}function Ns(n,e){if(e!==void 0){if(typeof e=="function"&&(e=e(n.href)),!(e instanceof AbortSignal))throw At('"options.signal" must return or be an instance of AbortSignal',Zt);return e}}function Zr(n,e,r,s,i){try{if(typeof n!="number"||!Number.isFinite(n))throw At(`${r} must be a number`,Zt,i);if(n>0)return;if(e){if(n!==0)throw At(`${r} must be a non-negative number`,fr,i);return}throw At(`${r} must be a positive number`,fr,i)}catch(o){throw s?Ye(o.message,s,i):o}}function Bt(n,e,r,s){try{if(typeof n!="string")throw At(`${e} must be a string`,Zt,s);if(n.length===0)throw At(`${e} must not be empty`,fr,s)}catch(i){throw r?Ye(i.message,r,s):i}}function En(n){(function(e,r){if(s=e,s.headers.get("content-type")?.split(";")[0]!==r)throw function(i,...o){let c='"response" content-type must be ';if(o.length>2){const v=o.pop();c+=`${o.join(", ")}, or ${v}`}else o.length===2?c+=`${o[0]} or ${o[1]}`:c+=o[0];return Ye(c,zl,i)}(e,r);var s})(n,"application/json")}function Za(){return xa(crypto.getRandomValues(new Uint8Array(32)))}function ms(n){const e=n?.[gl];return typeof e=="number"&&Number.isFinite(e)?e:0}function ps(n){const e=n?.[ml];return typeof e=="number"&&Number.isFinite(e)&&Math.sign(e)!==-1?e:30}function fs(){return Math.floor(Date.now()/1e3)}function ga(n){if(typeof n!="object"||n===null)throw At('"as" must be an object',Zt);Bt(n.issuer,'"as.issuer"')}function Pa(n){if(typeof n!="object"||n===null)throw At('"client" must be an object',Zt);Bt(n.client_id,'"client.client_id"')}const _l=URL.parse?(n,e)=>URL.parse(n,e):(n,e)=>{try{return new URL(n,e)}catch{return null}};function An(n,e){if(e&&n.protocol!=="https:")throw Ye("only requests to HTTPS are allowed",Fl,n);if(n.protocol!=="https:"&&n.protocol!=="http:")throw Ye("only HTTP and HTTPS requests are allowed",Dl,n)}function Qs(n,e,r,s){let i;if(typeof n!="string"||!(i=_l(n)))throw Ye("authorization server metadata does not contain a valid "+(r?`"as.mtls_endpoint_aliases.${e}"`:`"as.${e}"`),n===void 0?Bl:Wl,{attribute:r?`mtls_endpoint_aliases.${e}`:e});return An(i,s),i}function Cn(n,e,r,s){return r&&n.mtls_endpoint_aliases&&e in n.mtls_endpoint_aliases?Qs(n.mtls_endpoint_aliases[e],e,r,s):Qs(n[e],e,r,s)}class Tn extends Error{cause;code;error;status;error_description;response;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Ol,this.cause=r.cause,this.error=r.cause.error,this.status=r.response.status,this.error_description=r.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),Error.captureStackTrace?.(this,this.constructor)}}class Rn extends Error{cause;code;error;error_description;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Ll,this.cause=r.cause,this.error=r.cause.get("error"),this.error_description=r.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class bl extends Error{cause;code;response;status;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Pl,this.cause=r.cause,this.status=r.response.status,this.response=r.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}const Oa="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",Sl="("+Oa+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"',wl="("+Oa+")\\s*=\\s*("+Oa+")",$l=new RegExp("^[,\\s]*("+Oa+")\\s(.*)"),El=new RegExp("^[,\\s]*"+Sl+"[,\\s]*(.*)"),Al=new RegExp("^[,\\s]*"+wl+"[,\\s]*(.*)"),Cl=new RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function kn(n,e,r){if(n.status!==e){let s;throw function(i){let o;if(o=function(c){if(!Xr(c,Response))throw At('"response" must be an instance of Response',Zt);const v=c.headers.get("www-authenticate");if(v===null)return;const h=[];let g=v;for(;g;){let y=g.match($l);const w=y?.[1].toLowerCase();if(g=y?.[2],!w)return;const k={};let I;for(;g;){let T,u;if(y=g.match(El)){if([,T,u,g]=y,u.includes("\\"))try{u=JSON.parse(`"${u}"`)}catch{}k[T.toLowerCase()]=u}else{if(!(y=g.match(Al))){if(y=g.match(Cl)){if(Object.keys(k).length)break;[,I,g]=y;break}return}[,T,u,g]=y,k[T.toLowerCase()]=u}}const N={scheme:w,parameters:k};I&&(N.token68=I),h.push(N)}return h.length?h:void 0}(i))throw new bl("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:o,response:i})}(n),(s=await async function(i){if(i.status>399&&i.status<500){la(i),En(i);try{const o=await i.clone().json();if(Ma(o)&&typeof o.error=="string"&&o.error.length)return o}catch{}}}(n))?(await n.body?.cancel(),new Tn("server responded with an error in the response body",{cause:s,response:n})):Ye(`"response" is not a conform ${r} response (unexpected HTTP status code)`,bs,n)}}async function en(n,e,r,s,i,o){const c=Cn(n,"token_endpoint",e.use_mtls_endpoint_aliases,o?.[ks]!==!0);i.set("grant_type",s);const v=Is(o?.headers);return v.set("accept","application/json"),await async function(g,y,w,k,I,N,T){return await w(g,y,I,N),N.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(T?.[Ha]||fetch)(k.href,{body:I,headers:Object.fromEntries(N.entries()),method:"POST",redirect:"manual",signal:Ns(k,T?.signal)})}(n,e,r,c,i,v,o)}const In=new WeakMap,Tl=new WeakMap;function tn(n){if(!n.id_token)return;const e=In.get(n);if(!e)throw At('"ref" was already garbage collected or did not resolve from the proper sources',fr);return e}async function ys(n,e,r,s,i,o){if(ga(n),Pa(e),!Xr(r,Response))throw At('"response" must be an instance of Response',Zt);await kn(r,200,"Token Endpoint"),la(r);const c=await ka(r);if(Bt(c.access_token,'"response" body "access_token" property',lt,{body:c}),Bt(c.token_type,'"response" body "token_type" property',lt,{body:c}),c.token_type=c.token_type.toLowerCase(),c.expires_in!==void 0){let v=typeof c.expires_in!="number"?parseFloat(c.expires_in):c.expires_in;Zr(v,!0,'"response" body "expires_in" property',lt,{body:c}),c.expires_in=v}if(c.refresh_token!==void 0&&Bt(c.refresh_token,'"response" body "refresh_token" property',lt,{body:c}),c.scope!==void 0&&typeof c.scope!="string")throw Ye('"response" body "scope" property must be a string',lt,{body:c});if(c.id_token!==void 0){Bt(c.id_token,'"response" body "id_token" property',lt,{body:c});const v=["aud","exp","iat","iss","sub"];e.require_auth_time===!0&&v.push("auth_time"),e.default_max_age!==void 0&&(Zr(e.default_max_age,!0,'"client.default_max_age"'),v.push("auth_time")),s?.length&&v.push(...s);const{claims:h,jwt:g}=await async function(y,w,k,I,N){let T,u,{0:E,1:R,length:b}=y.split(".");if(b===5){if(N===void 0)throw new Ra("JWE decryption is not configured",{cause:y});y=await N(y),{0:E,1:R,length:b}=y.split(".")}if(b!==3)throw Ye("Invalid JWT",lt,y);try{T=JSON.parse(hs(xa(E)))}catch(A){throw Ye("failed to parse JWT Header body as base64url encoded JSON",_s,A)}if(!Ma(T))throw Ye("JWT Header must be a top level object",lt,y);if(w(T),T.crit!==void 0)throw new Ra('no JWT "crit" header parameter extensions are supported',{cause:{header:T}});try{u=JSON.parse(hs(xa(R)))}catch(A){throw Ye("failed to parse JWT Payload body as base64url encoded JSON",_s,A)}if(!Ma(u))throw Ye("JWT Payload must be a top level object",lt,y);const _=fs()+k;if(u.exp!==void 0){if(typeof u.exp!="number")throw Ye('unexpected JWT "exp" (expiration time) claim type',lt,{claims:u});if(u.exp<=_-I)throw Ye('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',Ua,{claims:u,now:_,tolerance:I,claim:"exp"})}if(u.iat!==void 0&&typeof u.iat!="number")throw Ye('unexpected JWT "iat" (issued at) claim type',lt,{claims:u});if(u.iss!==void 0&&typeof u.iss!="string")throw Ye('unexpected JWT "iss" (issuer) claim type',lt,{claims:u});if(u.nbf!==void 0){if(typeof u.nbf!="number")throw Ye('unexpected JWT "nbf" (not before) claim type',lt,{claims:u});if(u.nbf>_+I)throw Ye('unexpected JWT "nbf" (not before) claim value',Ua,{claims:u,now:_,tolerance:I,claim:"nbf"})}if(u.aud!==void 0&&typeof u.aud!="string"&&!Array.isArray(u.aud))throw Ye('unexpected JWT "aud" (audience) claim type',lt,{claims:u});return{header:T,claims:u,jwt:y}}(c.id_token,Gl.bind(void 0,e.id_token_signed_response_alg,n.id_token_signing_alg_values_supported,"RS256"),ms(e),ps(e),i).then(xl.bind(void 0,v)).then(kl.bind(void 0,n)).then(Rl.bind(void 0,e.client_id));if(Array.isArray(h.aud)&&h.aud.length!==1){if(h.azp===void 0)throw Ye('ID Token "aud" (audience) claim includes additional untrusted audiences',Ir,{claims:h,claim:"aud"});if(h.azp!==e.client_id)throw Ye('unexpected ID Token "azp" (authorized party) claim value',Ir,{expected:e.client_id,claims:h,claim:"azp"})}h.auth_time!==void 0&&Zr(h.auth_time,!0,'ID Token "auth_time" (authentication time)',lt,{claims:h}),Tl.set(r,g),In.set(c,h)}if(o?.[c.token_type]!==void 0)o[c.token_type](r,c);else if(c.token_type!=="dpop"&&c.token_type!=="bearer")throw new Ra("unsupported `token_type` value",{cause:{body:c}});return c}function Rl(n,e){if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(n))throw Ye('unexpected JWT "aud" (audience) claim value',Ir,{expected:n,claims:e.claims,claim:"aud"})}else if(e.claims.aud!==n)throw Ye('unexpected JWT "aud" (audience) claim value',Ir,{expected:n,claims:e.claims,claim:"aud"});return e}function kl(n,e){const r=n[Kl]?.(e)??n.issuer;if(e.claims.iss!==r)throw Ye('unexpected JWT "iss" (issuer) claim value',Ir,{expected:r,claims:e.claims,claim:"iss"});return e}const xs=new WeakSet,Il=Symbol(),Nl={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function xl(n,e){for(const r of n)if(e.claims[r]===void 0)throw Ye(`JWT "${r}" (${Nl[r]}) claim missing`,lt,{claims:e.claims});return e}const Qa=Symbol(),es=Symbol();async function Ml(n,e,r,s){return typeof s?.expectedNonce=="string"||typeof s?.maxAge=="number"||s?.requireIdToken?async function(i,o,c,v,h,g,y){const w=[];switch(v){case void 0:v=Qa;break;case Qa:break;default:Bt(v,'"expectedNonce" argument'),w.push("nonce")}switch(h??=o.default_max_age,h){case void 0:h=es;break;case es:break;default:Zr(h,!0,'"maxAge" argument'),w.push("auth_time")}const k=await ys(i,o,c,w,g,y);Bt(k.id_token,'"response" body "id_token" property',lt,{body:k});const I=tn(k);if(h!==es){const N=fs()+ms(o),T=ps(o);if(I.auth_time+h<N-T)throw Ye("too much time has elapsed since the last End-User authentication",Ua,{claims:I,now:N,tolerance:T,claim:"auth_time"})}if(v===Qa){if(I.nonce!==void 0)throw Ye('unexpected ID Token "nonce" claim value',Ir,{expected:void 0,claims:I,claim:"nonce"})}else if(I.nonce!==v)throw Ye('unexpected ID Token "nonce" claim value',Ir,{expected:v,claims:I,claim:"nonce"});return k}(n,e,r,s.expectedNonce,s.maxAge,s[vs],s.recognizedTokenTypes):async function(i,o,c,v,h){const g=await ys(i,o,c,void 0,v,h),y=tn(g);if(y){if(o.default_max_age!==void 0){Zr(o.default_max_age,!0,'"client.default_max_age"');const w=fs()+ms(o),k=ps(o);if(y.auth_time+o.default_max_age<w-k)throw Ye("too much time has elapsed since the last End-User authentication",Ua,{claims:y,now:w,tolerance:k,claim:"auth_time"})}if(y.nonce!==void 0)throw Ye('unexpected ID Token "nonce" claim value',Ir,{expected:void 0,claims:y,claim:"nonce"})}return g}(n,e,r,s?.[vs],s?.recognizedTokenTypes)}const Pl="OAUTH_WWW_AUTHENTICATE_CHALLENGE",Ol="OAUTH_RESPONSE_BODY_ERROR",Ul="OAUTH_UNSUPPORTED_OPERATION",Ll="OAUTH_AUTHORIZATION_RESPONSE_ERROR",_s="OAUTH_PARSE_ERROR",lt="OAUTH_INVALID_RESPONSE",zl="OAUTH_RESPONSE_IS_NOT_JSON",bs="OAUTH_RESPONSE_IS_NOT_CONFORM",Fl="OAUTH_HTTP_REQUEST_FORBIDDEN",Dl="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",Ua="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",Ir="OAUTH_JWT_CLAIM_COMPARISON_FAILED",rn="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",Bl="OAUTH_MISSING_SERVER_METADATA",Wl="OAUTH_INVALID_SERVER_METADATA";function la(n){if(n.bodyUsed)throw At('"response" body has been used already',fr)}function Gl(n,e,r,s){if(n===void 0)if(Array.isArray(e)){if(!e.includes(s.alg))throw Ye('unexpected JWT "alg" header parameter',lt,{header:s,expected:e,reason:"authorization server metadata"})}else{if(r===void 0)throw Ye('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:n,issuer:e,fallback:r});if(typeof r=="string"?s.alg!==r:typeof r=="function"?!r(s.alg):!r.includes(s.alg))throw Ye('unexpected JWT "alg" header parameter',lt,{header:s,expected:r,reason:"default value"})}else if(typeof n=="string"?s.alg!==n:!n.includes(s.alg))throw Ye('unexpected JWT "alg" header parameter',lt,{header:s,expected:n,reason:"client configuration"})}function Br(n,e){const{0:r,length:s}=n.getAll(e);if(s>1)throw Ye(`"${e}" parameter must be provided only once`,lt);return r}const Hl=Symbol(),ql=Symbol();function Vl(n,e,r,s){if(ga(n),Pa(e),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw At('"parameters" must be an instance of URLSearchParams, or URL',Zt);if(Br(r,"response"))throw Ye('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',lt,{parameters:r});const i=Br(r,"iss"),o=Br(r,"state");if(!i&&n.authorization_response_iss_parameter_supported)throw Ye('response parameter "iss" (issuer) missing',lt,{parameters:r});if(i&&i!==n.issuer)throw Ye('unexpected "iss" (issuer) response parameter value',lt,{expected:n.issuer,parameters:r});switch(s){case void 0:case ql:if(o!==void 0)throw Ye('unexpected "state" response parameter encountered',lt,{expected:void 0,parameters:r});break;case Hl:break;default:if(Bt(s,'"expectedState" argument'),o!==s)throw Ye(o===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',lt,{expected:s,parameters:r})}if(Br(r,"error"))throw new Rn("authorization response from the server is an error",{cause:r});const c=Br(r,"id_token"),v=Br(r,"token");if(c!==void 0||v!==void 0)throw new Ra("implicit and hybrid flows are not supported");return h=new URLSearchParams(r),xs.add(h),h;var h}async function jl(n,e,r){ga(n);const s=Cn(n,"registration_endpoint",e.use_mtls_endpoint_aliases,r?.[ks]!==!0),i=Is(r?.headers);i.set("accept","application/json"),i.set("content-type","application/json");const o="POST";r?.DPoP&&(function(v){if(!xs.has(v))throw At('"options.DPoP" is not a valid DPoPHandle',fr)}(r.DPoP),await r.DPoP.addProof(s,i,o,r.initialAccessToken)),r?.initialAccessToken&&i.set("authorization",`${i.has("dpop")?"DPoP":"Bearer"} ${r.initialAccessToken}`);const c=await(r?.[Ha]||fetch)(s.href,{body:JSON.stringify(e),headers:Object.fromEntries(i.entries()),method:o,redirect:"manual",signal:Ns(s,r?.signal)});return r?.DPoP?.cacheNonce(c),c}async function Jl(n,e){return async function(r,s,i,o){if(!(r instanceof URL))throw At(`"${s}" must be an instance of URL`,Zt);An(r,o?.[ks]!==!0);const c=i(new URL(r.href)),v=Is(o?.headers);return v.set("accept","application/json"),(o?.[Ha]||fetch)(c.href,{body:void 0,headers:Object.fromEntries(v.entries()),method:"GET",redirect:"manual",signal:Ns(c,o?.signal)})}(n,"resourceIdentifier",r=>(function(s,i,o=!1){var c;s.pathname==="/"?s.pathname=i:s.pathname=(c=`${i}/${o?s.pathname:s.pathname.replace(/(\/)$/,"")}`).includes("//")?c.replace("//","/"):c}(r,".well-known/oauth-protected-resource",!0),r),e)}async function ka(n,e=En){let r;try{r=await n.json()}catch(s){throw e(n),Ye('failed to parse "response" body as JSON',_s,s)}if(!Ma(r))throw Ye('"response" body must be a top level object',lt,{body:r});return r}const Aa=Symbol(),Kl=Symbol(),ca=class ca{static get _logger(){return fa()}static async discover(e){try{const r=await this._discoverResourceMetadata(e),s=r?.authorization_servers?.map(i=>new URL(i))??[e];for(const i of s){const o=await this._discoverAuthServerMetadataUrl(i);if(o)return o}}catch(r){throw this._formatError(r)}throw new Error("Failed to discover metadata URL")}static async _discoverResourceMetadata(e){try{const r=await Jl(e);return await async function(s,i){const o=s;if(!(o instanceof URL)&&o!==Aa)throw At('"expectedResourceIdentifier" must be an instance of URL',Zt);if(!Xr(i,Response))throw At('"response" must be an instance of Response',Zt);if(i.status!==200)throw Ye('"response" is not a conform Resource Server Metadata response (unexpected HTTP status code)',bs,i);la(i);const c=await ka(i);if(Bt(c.resource,'"response" body "resource" property',lt,{body:c}),o!==Aa&&new URL(c.resource).href!==o.href)throw Ye('"response" body "resource" property does not match the expected value',rn,{expected:o.href,body:c,attribute:"resource"});return c}(e,r)}catch{return}}static async _discoverAuthServerMetadataUrl(e){for(const r of this._buildWellKnownUrls(e))try{const s=new URL(r,e);if(!(await fetch(s)).ok)continue;return s}catch{continue}}static _buildWellKnownUrls(e){const r=e.pathname.startsWith("/")?e.pathname.substring(1):e.pathname;return[...e.pathname.length>0?[new URL(`/.well-known/oauth-authorization-server/${r}`,e),new URL(`/.well-known/openid-configuration/${r}`,e),new URL(`/${r}/.well-known/openid-configuration`,e)]:[],new URL("/.well-known/oauth-authorization-server",e),new URL("/.well-known/openid-configuration",e)]}static async getAuthServerMetadata(e){try{const r=await fetch(e),s=await this._extractIssuerFromDiscoveryResponse(r.clone());if(!s)throw new Error("Missing issuer from discovery response");return await async function(i,o){const c=i;if(!(c instanceof URL)&&c!==Aa)throw At('"expectedIssuerIdentifier" must be an instance of URL',Zt);if(!Xr(o,Response))throw At('"response" must be an instance of Response',Zt);if(o.status!==200)throw Ye('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',bs,o);la(o);const v=await ka(o);if(Bt(v.issuer,'"response" body "issuer" property',lt,{body:v}),c!==Aa&&new URL(v.issuer).href!==c.href)throw Ye('"response" body "issuer" property does not match the expected value',rn,{expected:c.href,body:v,attribute:"issuer"});return v}(s,r)}catch(r){throw this._formatError(r)}}static async _extractIssuerFromDiscoveryResponse(e){if(!e.ok)throw new Error("Invalid status code from discovery response");const r=await e.json();if(!r.issuer||typeof r.issuer!="string")throw new Error("Invalid issuer from discovery response");return new URL(r.issuer)}static async registerClient(e,r){try{const s=await jl(e,{client_name:this.CLIENT_NAME,client_uri:this.CLIENT_URI,logo_uri:this.LOGO_URI,redirect_uris:r,grant_types:["authorization_code","refresh_token"],response_types:["code"]},{[Ha]:this._fetchRegisterClient.bind(this)});return s.ok||this._logger.error(`Dynamic client registration failed with HTTP status ${s.status} (${s.statusText})`),await async function(i){if(!Xr(i,Response))throw At('"response" must be an instance of Response',Zt);await kn(i,201,"Dynamic Client Registration Endpoint"),la(i);const o=await ka(i);return Bt(o.client_id,'"response" body "client_id" property',lt,{body:o}),o.client_secret!==void 0&&Bt(o.client_secret,'"response" body "client_secret" property',lt,{body:o}),o.client_secret&&Zr(o.client_secret_expires_at,!0,'"response" body "client_secret_expires_at" property',lt,{body:o}),o}(s)}catch(s){throw this._formatError(s)}}static async _fetchRegisterClient(e,r){const s=await fetch(e,r);let i=await s.clone().text();const o={status:s.status,statusText:s.statusText,headers:s.headers};if(s.ok||this._logger.error(`Dynamic client registration error response body (HTTP ${s.status} ${s.statusText}): ${i}`),s.status===200&&(o.status=201,o.statusText="Created"),s.status===201){const c=await s.json();c.client_secret_expires_at||(c.client_secret_expires_at=0),i=JSON.stringify(c)}return new Response(i,o)}static async buildAuthorizationState(e,r,s,i){if(!s.authorization_endpoint)throw new Error("No authorization endpoint");const o=Za(),c=await async function(y){return Bt(y,"codeVerifier"),xa(await crypto.subtle.digest("SHA-256",hs(y)))}(o),v=Za();let h;const g=new URL(s.authorization_endpoint);return g.searchParams.set("response_type","code"),g.searchParams.set("client_id",r.client_id),g.searchParams.set("code_challenge",c),g.searchParams.set("code_challenge_method","S256"),g.searchParams.set("redirect_uri",i),g.searchParams.set("resource",e.toString()),g.searchParams.set("state",v),s.code_challenge_methods_supported?.includes("S256")||(h=Za(),g.searchParams.set("nonce",h)),{type:vt.OAUTH,client:r,serverMetadata:s,redirectUri:i,codeVerifier:o,nonce:h,state:v,authUri:g}}static async authorizationCodeGrant(e,r){try{const s=Vl(r.serverMetadata,r.client,e,r.state),i=await async function(c,v,h,g,y,w,k){if(ga(c),Pa(v),!xs.has(g))throw At('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',fr);Bt(y,'"redirectUri"');const I=Br(g,"code");if(!I)throw Ye('no authorization code in "callbackParameters"',lt);const N=new URLSearchParams(k?.additionalParameters);return N.set("redirect_uri",y),N.set("code",I),w!==Il&&(Bt(w,'"codeVerifier"'),N.set("code_verifier",w)),en(c,v,h,"authorization_code",N,k)}(r.serverMetadata,r.client,this._getClientAuth(r.client),s,r.redirectUri,r.codeVerifier),o=await Ml(r.serverMetadata,r.client,i,{expectedNonce:r.nonce});return this._buildAuthSecret(o,r.serverMetadata,r.client)}catch(s){throw this._formatError(s)}}static async refreshTokenGrant(e){if(!e.refreshToken)throw new Error("No refresh token available");try{const r=await async function(i,o,c,v,h){ga(i),Pa(o),Bt(v,'"refreshToken"');const g=new URLSearchParams(h?.additionalParameters);return g.set("refresh_token",v),en(i,o,c,"refresh_token",g,h)}(e.serverMetadata,e.client,this._getClientAuth(e.client),e.refreshToken),s=await async function(i,o,c,v){return ys(i,o,c,void 0,v?.[vs],v?.recognizedTokenTypes)}(e.serverMetadata,e.client,r);return this._buildAuthSecret(s,e.serverMetadata,e.client)}catch(r){throw this._formatError(r)}}static _getClientAuth(e){const r=e.client_secret;return e.client_secret&&typeof r=="string"?(Bt(s=r,'"clientSecret"'),(i,o,c,v)=>{c.set("client_id",o.client_id),c.set("client_secret",s)}):(i,o,c,v)=>{c.set("client_id",o.client_id)};var s}static _buildAuthSecret(e,r,s){return{type:vt.OAUTH,accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,tokenType:e.token_type,scope:e.scope,serverMetadata:r,client:s}}static _formatError(e){return e instanceof Tn||e instanceof Rn?new Error(`${e.message} (${e.error_description})`,{cause:e}):e}};ca.CLIENT_NAME="Augment Code",ca.CLIENT_URI="https://augmentcode.com",ca.LOGO_URI="https://storage.googleapis.com/augment-bazel-data/public/auth0/2024-10-15-auth0-augment-logo-512x512.png";let gr=ca;const Ps=class Ps{static setWebviewMessagingClient(e){this._instance===void 0?this._instance=e:fa().warn("Attempting to initialize webview messages when one is already configured. Keeping existing webview message client.")}static getWebviewMessagingClient(){if(this._instance===void 0)throw new Error("Webview messaging client not set");return this._instance}static reset(){this._instance=void 0}};Ps._instance=void 0;let Ss=Ps;const Yl=jn(Jn(Kn("CjNjbGllbnRzL3NpZGVjYXIvbGlicy9wcm90b3Mvd2Vidmlld19tZXNzYWdpbmcucHJvdG8SKGNvbS5hdWdtZW50Y29kZS5zaWRlY2FyLndlYnZpZXdtZXNzYWdpbmcqLgoUV2ViVmlld01lc3NhZ2VUYXJnZXQSCAoEQ0hBVBAAEgwKCFNFVFRJTkdTEAFiBnByb3RvMw"),0));class Xl{constructor(e){this._mcpService=e,this._logger=fa(),this.supportedTypes=Yt}handle(e,r){(async()=>{try{this._logger.debug(`Handling MCP message: ${e.type}`);const s=await this._handleRequest(e);s&&r(s)}catch(s){this._logger.error(`Error handling MCP message ${e.type}:`,s);const i=e.type.replace("_REQUEST","_RESPONSE"),o=e;r({type:i,data:{success:!1,error:s instanceof Error?s.message:"Unknown error",repoRoot:o.data?.repoRoot||""}})}})()}static sendMessage(e,r){try{Ss.getWebviewMessagingClient().sendMessageToWebview(Yl.SETTINGS,{type:e,data:r})}catch{return}}async _handleRequest(e){switch(e.type){case Yt.GET_AUTH_REQUIRED_SERVERS_REQUEST:return this._handleGetAuthRequiredServersRequest();case Yt.GET_AUTH_SECRET_REQUEST:return this._handleGetAuthSecretRequest(e);case Yt.SET_AUTH_SECRET_REQUEST:return this._handleSetAuthSecretRequest(e);case Yt.DELETE_AUTH_SECRET_REQUEST:return this._handleDeleteAuthSecretRequest(e);default:return void this._logger.warn(`Unhandled MCP message type: ${e.type}`)}}_handleGetAuthRequiredServersRequest(){return{type:Yt.GET_AUTH_REQUIRED_SERVERS_RESPONSE,data:{authRequiredServers:Array.from(this._mcpService.auth.getAuthRequiredServers())}}}async _handleGetAuthSecretRequest(e){const r=this._mcpService.getServerByName(e.data.id),s=r?await this._mcpService.auth.getAuthSecret(r):void 0;return{type:Yt.GET_AUTH_SECRET_RESPONSE,data:{authSecret:s}}}async _handleSetAuthSecretRequest(e){return await this._mcpService.auth.setAuthSecret(e.data.id,e.data.secret),{type:Yt.SET_AUTH_SECRET_RESPONSE,data:{}}}async _handleDeleteAuthSecretRequest(e){return await this._mcpService.auth.deleteAuthSecret(e.data.id),{type:Yt.DELETE_AUTH_SECRET_RESPONSE,data:{}}}}const La=class La{constructor(e=hl){this._flags=e,this._logger=fa(),this._authRequired=new Set,this._authState={}}static getAuthTypeFunctional(e){switch(e){case vt.OAUTH:case vt.MIGRATION_OAUTH:return vt.OAUTH;case vt.HEADER:return vt.HEADER;default:return e}}async getAuthHeaders(e){if(!e.name)return void this._logger.error("MCP server config is missing name");if(this._logger.debug(`Getting auth headers for MCP: ${e.name}`),(e.type==="http"||e.type==="sse")&&e.headers)return this._logger.debug(`Using headers from config for MCP: ${e.name}`),e.headers;const r=await this.getAuthSecret(e);if(r)switch(r.type){case vt.OAUTH:case vt.MIGRATION_OAUTH:return{Authorization:`Bearer ${await this.getAccessToken(e.name,r)}`};case vt.HEADER:return r.headers}else this._logger.warn(`No auth secret found for MCP: ${e.name}`)}async getAccessToken(e,r){switch(r.type){case vt.OAUTH:return await this.getAccessTokenOAuthFromSecret(e,r);case vt.MIGRATION_OAUTH:return r.accessToken;default:return}}async getAccessTokenOAuthFromSecret(e,r){const s=Date.now();if(!(r.expiresAt&&s+2e4>=r.expiresAt))return r.accessToken;if(this._logger.debug(`Token for MCP ${e} is expiring soon, attempting refresh`),this._flags.shouldRefreshTokens===!0)try{const i=await gr.refreshTokenGrant(r);return await this.setAuthSecret(e,i),this._logger.debug(`Successfully refreshed and stored new token for MCP: ${e}`),i.accessToken}catch(i){this._logger.error(`Failed to refresh token for MCP ${e}: ${Sr(i)}`)}else this._logger.debug(`Not refreshing token for MCP ${e} because shouldRefreshTokens is false`);return r.accessToken}async getAuthSecret(e){const r=e.name;if(!r)return void this._logger.error("MCP server config is missing name");let s,i;try{s=await Xa().getSecret(this.getAuthSecretKey(r))}catch(o){return void this._logger.error(`Failed to retrieve token data for MCP ${r}: ${Sr(o)}`)}if(s){try{i=JSON.parse(s)}catch{this._logger.warn(`Failed to parse auth secret data for MCP ${r}, reformatting it into migration format.`),i=await this._migrateAuthSecretMigrationOAuth(r,s)}return typeof i=="string"?(this._logger.error(`Unexpected string value for auth secret for MCP ${r}`),void await this.deleteAuthSecret(r)):(i.type===vt.OAUTH&&"clientId"in i&&(i=await this._migrateAuthSecretOAuthWithoutMetadata(r,i)),this._logger.debug(`Successfully retrieved auth secret for MCP: ${r}`),i)}this._logger.warn(`No token data found for MCP ${r}`)}async _migrateAuthSecretMigrationOAuth(e,r){const s={type:vt.MIGRATION_OAUTH,accessToken:r};return await this.setAuthSecret(e,s),s}async _migrateAuthSecretOAuthWithoutMetadata(e,r){try{const s=await gr.discover(new URL(r.resource)),i=await gr.getAuthServerMetadata(s),o={...r,serverMetadata:i,client:{client_id:r.clientId,client_secret:void 0}};return await this.setAuthSecret(e,o),o}catch(s){return void this._logger.error(`Failed to migrate auth secret for MCP ${e}: ${Sr(s)}`)}}async setAuthSecret(e,r){try{this._logger.debug(`Storing auth secret for MCP: ${e}`),await Xa().setSecret(this.getAuthSecretKey(e),JSON.stringify(r)),this._logger.debug(`Successfully stored auth secret for MCP: ${e}`)}catch(s){throw this._logger.error(`Failed to store token data for MCP ${e}: ${Sr(s)}`),new Error(`Failed to store token data for MCP ${e}: ${Sr(s)}`)}}async deleteAuthSecret(e){try{this._logger.debug(`Deleting auth secret for MCP: ${e}`),await Xa().deleteSecret(this.getAuthSecretKey(e)),this._logger.debug(`Successfully deleted auth secret for MCP: ${e}`)}catch(r){throw this._logger.error(`Failed to delete token data for MCP ${e}: ${Sr(r)}`),new Error(`Failed to delete token data for MCP ${e}: ${Sr(r)}`)}}getAuthSecretKey(e){return`${La.MCP_ACCESS_TOKEN_KEY_PREFIX}${e}`}getAuthRequiredServers(){return this._authRequired}isAuthRequired(e){return this._authRequired.has(e)}addAuthRequired(e){this._authRequired.has(e)||(this._authRequired.add(e),this._notifyUpdateAuthRequiredServers())}removeAuthRequired(e){this._authRequired.has(e)&&(this._authRequired.delete(e),this._notifyUpdateAuthRequiredServers())}getAuthState(e){return this._authState[e]}setAuthState(e,r){this._authState[e]=r}deleteAuthState(e){delete this._authState[e]}async initiateOAuth(e,r,s){const i=new URL(r.url);this._logger.debug(`Initiating OAuth for MCP ${e} (${i.toString()})`);const o=await gr.discover(i);this._logger.debug(`Discovered OAuth metadata URL for MCP ${e}: ${o.toString()}`);const c=await gr.getAuthServerMetadata(o);this._logger.debug(`Successfully retrieved OAuth metadata for MCP ${e}`);const v=await gr.registerClient(c,[s]);this._logger.debug(`Successfully registered client for MCP ${e} (client_id: ${v.client_id})`);const h=await gr.buildAuthorizationState(i,v,c,s);return this._logger.debug(`Successfully built authorization state for MCP ${e}`),this.setAuthState(e,h),h.authUri.toString()}async handleOAuthCallback(e,r){this._logger.debug(`Handling OAuth callback for MCP ${e}`);const s=this.getAuthState(e);if(this.deleteAuthState(e),s?.type!==vt.OAUTH)throw this._logger.error(`Unexpected auth state type for MCP ${e}: expected ${vt.OAUTH}, got ${s?.type}`),new Error(`Unexpected auth state type: ${s?.type}`);let i;try{i=await gr.authorizationCodeGrant(r,s)}catch(o){throw this._logger.error(`Failed to complete OAuth for MCP ${e}: ${Sr(o)}`),new Error(`Failed to complete OAuth: ${Sr(o)}`)}this._logger.debug(`Successfully completed OAuth for MCP ${e}`),await this.setAuthSecret(e,i)}_notifyUpdateAuthRequiredServers(){Xl.sendMessage(Yt.UPDATE_AUTH_REQUIRED_SERVERS,{authRequiredServers:Array.from(this._authRequired)})}};La.MCP_ACCESS_TOKEN_KEY_PREFIX="augment.mcp-access-token.";let ws=La;var Zl=f("<div></div>"),Ql=f(" <!>",1),ec=f('<div class="server-name svelte-8g1e5g"><!></div>'),tc=f('<div class="l-header svelte-8g1e5g"><!> <!> <!> <div class="command-text svelte-8g1e5g"><!></div></div>'),rc=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),ac=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),sc=f('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),nc=f("<!> <!> <!>",1),ic=f("<!> <!>",1),oc=f('<div class="server-actions svelte-8g1e5g"><!> <div class="status-controls svelte-8g1e5g"><!> <!></div></div>'),lc=f('<div class="c-tool-item svelte-8g1e5g"><div class="c-tool-info svelte-8g1e5g"><div class="tool-status svelte-8g1e5g"><div></div> <!></div> <div class="c-tool-description svelte-8g1e5g"><!></div></div></div>'),cc=f('<div class="c-tool-items svelte-8g1e5g"></div>'),dc=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>',1),uc=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div>',1),vc=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),hc=f('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),gc=f('<!> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <!>',1),mc=f('<form><div class="server-edit-form svelte-8g1e5g"><div class="server-header svelte-8g1e5g"><div class="server-title svelte-8g1e5g"><div class="server-icon svelte-8g1e5g"><!></div> <!></div></div> <!> <!> <div class="form-actions-row svelte-8g1e5g"><div><!></div> <div class="form-actions svelte-8g1e5g"><!> <!></div></div></div></form>');function an(n,e){ze(e,!1);const r=()=>Le(J,"$toolsStore",i),s=()=>Le(G,"$authRequiredSet",i),[i,o]=Vt(),c=ut(),v=ut(),h=ut(),g=ut(),y=ut(),w=ut(),k=ut(),I=ut(),N=ut(),T=ut();let u=Y(e,"server",8,null),E=Y(e,"onDelete",8),R=Y(e,"onAdd",8),b=Y(e,"onSave",8),_=Y(e,"onEdit",8),A=Y(e,"onToggleDisableServer",8),C=Y(e,"onJSONImport",8),M=Y(e,"onCancel",8),p=Y(e,"onAuthenticate",24,()=>{}),$=Y(e,"disabledText",24,()=>{}),L=Y(e,"warningText",24,()=>{}),z=Y(e,"mcpServerModel",8),x=Y(e,"mode",12,"view"),U=Y(e,"mcpServerError",12,"");const J=z().getToolsStore();let re=ut(0);const G=z().getAuthRequiredStore();let ie=ut(u()?.name??""),H=ut(nr(u())?"":Fr(u())?u().command:""),B=ut(nr(u())?u().url:""),q=Fr(u())?u().env??{}:{},oe=ut(""),te=ut(nr(u())?u().type:"http"),j=ut(void 0),P={};async function Z(){const ee=nr(u())?await z().getAuthSecret(u().name):void 0;m(j,ee?ws.getAuthTypeFunctional(ee?.type):vt.OAUTH),P=ee?.type===vt.HEADER?ee?.headers:{},Oe()}tr(async()=>{await Z()});let ue=ut([]);we();let ve=ut([]);Oe();let be=ut(!0);function we(){m(ue,Object.entries(q).map(([ee,me])=>({id:crypto.randomUUID(),key:ee,value:me})))}function Oe(){m(ve,Object.entries(P).map(([ee,me])=>({id:crypto.randomUUID(),key:ee,value:me})))}let Pe=ut(void 0);function Be(){u()&&x()==="view"&&(x("edit"),_()(u()),t(Pe)?.requestClose())}let Je=Y(e,"busy",12,!1);function Ze({key:ee,value:me}){return ee.trim()&&me.trim()}async function Ae(){U(""),Je(!0);const ee=t(ue).filter(Ze);q=Object.fromEntries(ee.map(({key:ce,value:Ce})=>[ce.trim(),Ce.trim()])),we();const me=t(ve).filter(Ze);P=Object.fromEntries(me.map(({key:ce,value:Ce})=>[ce.trim(),Ce.trim()])),Oe();const $e=t(j)===vt.HEADER?{type:vt.HEADER,headers:P}:void 0;try{if(x()==="add"){const ce={type:"stdio",name:t(ie).trim(),command:t(H).trim(),args:[],useShellInterpolation:!0,env:Object.keys(q).length>0?q:void 0};await R()(ce)}else if(x()==="addRemote"){const ce={type:t(te),name:t(ie).trim(),url:t(B).trim()};await R()(ce,$e)}else if(x()==="addJson"){try{JSON.parse(t(oe))}catch(ce){const Ce=ce instanceof Error?ce.message:String(ce);throw new Jt(`Invalid JSON format: ${Ce}`)}await C()(t(oe))}else if(x()==="edit"&&u()){if(nr(u())){const ce={...u(),type:t(te),name:t(ie).trim(),url:t(B).trim()};await b()(ce,$e)}else if(Fr(u())){const ce={...u(),name:t(ie).trim(),command:t(H).trim(),args:[],env:Object.keys(q).length>0?q:void 0};await b()(ce)}}}catch(ce){U(ce instanceof Jt?ce.message:"Failed to save server"),console.warn(ce)}finally{Je(!1)}}function Se(){Je(!1),U(""),M()?.(),m(oe,""),m(ie,u()?.name??""),m(H,nr(u())?"":Fr(u())?u().command:""),m(B,nr(u())?u().url:""),m(te,nr(u())?u().type:"http"),q=Fr(u())&&u().env?{...u().env}:{},we(),Z()}Ht(()=>(rt(u()),r()),()=>{m(c,u()?r()[u().name]??[]:[])}),Ht(()=>(rt(x()),rt(u())),()=>{m(v,x()==="add"||x()==="edit"&&Fr(u()))}),Ht(()=>(rt(x()),rt(u())),()=>{m(h,x()==="addRemote"||x()==="edit"&&nr(u()))}),Ht(()=>rt(u()),()=>{m(g,nr(u()))}),Ht(()=>t(re),()=>{m(y,Date.now()-t(re)<3e3)}),Ht(()=>(t(g),rt(u()),s(),t(c),t(y)),()=>{m(w,t(g)&&!u()?.disabled&&u()&&s().has(u()?.name)&&t(c).length===0&&!t(y))}),Ht(()=>(t(ie),t(H)),()=>{t(ie)&&t(H)&&U("")}),Ht(()=>(rt(x()),t(ie),t(H),t(B)),()=>{m(k,!((x()!=="add"||t(ie).trim()&&t(H).trim())&&(x()!=="addRemote"||t(ie).trim()&&t(B).trim())))}),Ht(()=>(rt(x()),t(oe)),()=>{m(I,x()==="addJson"&&!t(oe).trim())}),Ht(()=>(t(k),rt(x()),t(I)),()=>{m(N,t(k)||x()==="view"||t(I))}),Ht(()=>rt(x()),()=>{m(T,(()=>{switch(x()){case"add":return"New MCP Server";case"addRemote":return"New Remote MCP Server";case"addJson":return"Import MCP Server";default:return"Edit MCP Server"}})())}),Da();var fe={loadAuthHeaders:Z,setLocalEnvVarFormState:we,setLocalAuthHeaderFormState:Oe};Ar();var Me=ge(),ne=F(Me),D=ee=>{mn(ee,{get collapsed(){return t(be)},set collapsed(ce){m(be,ce)},header:ce=>{Kt(ce,{transparent:!0,headerLeft:Ne=>{var Te=tc(),xe=l(Te),ae=Ee=>{pn(Ee,{})};O(xe,Ee=>{t(c),ct(()=>t(c).length>0)&&Ee(ae)});var Ie=d(xe,2);{let Ee=kt(()=>$()||(t(w)?"Authentication required":L()));qt(Ie,{get content(){return t(Ee)},children:(ke,it)=>{var tt=Zl();let at;X(Xe=>at=Ot(tt,1,"c-dot svelte-8g1e5g",null,at,Xe),[()=>({"c-green":!$()&&!t(w),"c-warning":t(w)||!$()&&!!L(),"c-red":!!$()&&!t(w),"c-disabled":u().disabled})]),a(ke,tt)},$$slots:{default:!0}})}var se=d(Ie,2);qt(se,{get content(){return rt(u()),ct(()=>u().name)},side:"top",align:"start",children:(Ee,ke)=>{var it=ec(),tt=l(it);W(tt,{size:1,weight:"medium",children:(at,Xe)=>{var $t=Ql(),je=F($t),Ve=d(je),Ke=He=>{var Qe=S();X(()=>le(Qe,`(${t(c),ct(()=>t(c).length)??""}) tools`)),a(He,Qe)};O(Ve,He=>{t(c),ct(()=>t(c).length>0)&&He(Ke)}),X(()=>le(je,`${rt(u()),ct(()=>u().name)??""} `)),a(at,$t)},$$slots:{default:!0}}),a(Ee,it)},$$slots:{default:!0}});var he=d(se,2),Re=l(he);{let Ee=kt(()=>(rt(Ea),rt(u()),ct(()=>Ea(u()))));qt(Re,{get content(){return t(Ee)},side:"top",align:"start",children:(ke,it)=>{W(ke,{color:"secondary",size:1,weight:"regular",children:(tt,at)=>{var Xe=S();X($t=>le(Xe,$t),[()=>(rt(Ea),rt(u()),ct(()=>Ea(u())))]),a(tt,Xe)},$$slots:{default:!0}})},$$slots:{default:!0}})}a(Ne,Te)},headerRight:Ne=>{var Te=oc(),xe=l(Te),ae=Ee=>{Ge(Ee,{size:1,variant:"surface",color:"warning",onclick:()=>{u().type==="http"&&t(j)===vt.OAUTH?p()?.(u()):t(j)===vt.HEADER&&Be()},children:(ke,it)=>{var tt=S("Authenticate");a(ke,tt)},$$slots:{default:!0}})};O(xe,Ee=>{t(w)&&Ee(ae)});var Ie=d(xe,2),se=l(Ie),he=Ee=>{{let ke=kt(()=>(rt(u()),ct(()=>!u().disabled)));Nr(Ee,{size:1,get checked(){return t(ke)},onchange:()=>{u()&&(m(re,Date.now()),A()(u().id)),t(Pe)?.requestClose()}})}};O(se,Ee=>{rt(Ls),ct(Ls)&&Ee(he)});var Re=d(se,2);Xt(et.Root(Re,{children:(Ee,ke)=>{var it=ic(),tt=F(it);et.Trigger(tt,{children:(Xe,$t)=>{Nt(Xe,{size:.5,variant:"ghost-block",color:"neutral",children:(je,Ve)=>{pe(je,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}});var at=d(tt,2);et.Content(at,{side:"bottom",align:"end",children:(Xe,$t)=>{var je=nc(),Ve=F(je);et.Item(Ve,{onSelect:Be,children:(Qe,mt)=>{var nt=rc(),yt=l(nt);pe(yt,{name:"square-pen"});var pt=d(yt,2);W(pt,{size:1,weight:"medium",children:(Tt,Ft)=>{var Ct=S("Edit");a(Tt,Ct)},$$slots:{default:!0}}),a(Qe,nt)},$$slots:{default:!0}});var Ke=d(Ve,2);et.Item(Ke,{onSelect:()=>{(function(){if(u()){const Qe=ha.convertServerToJSON(u());navigator.clipboard.writeText(Qe)}})(),t(Pe)?.requestClose()},children:(Qe,mt)=>{var nt=ac(),yt=l(nt);pe(yt,{name:"copy"});var pt=d(yt,2);W(pt,{size:1,weight:"medium",children:(Tt,Ft)=>{var Ct=S("Copy JSON");a(Tt,Ct)},$$slots:{default:!0}}),a(Qe,nt)},$$slots:{default:!0}});var He=d(Ke,2);et.Item(He,{color:"error",onSelect:()=>{E()(u()),t(Pe)?.requestClose()},children:(Qe,mt)=>{var nt=sc(),yt=l(nt);pe(yt,{name:"trash-2"});var pt=d(yt,2);W(pt,{size:1,weight:"medium",children:(Tt,Ft)=>{var Ct=S("Delete");a(Tt,Ct)},$$slots:{default:!0}}),a(Qe,nt)},$$slots:{default:!0}}),a(Xe,je)},$$slots:{default:!0}}),a(Ee,it)},$$slots:{default:!0},$$legacy:!0}),Ee=>m(Pe,Ee),()=>t(Pe)),a(Ne,Te)},$$slots:{headerLeft:!0,headerRight:!0}})},footer:ce=>{var Ce=cc();gt(Ce,5,()=>t(c),pr,(_e,Ne)=>{Kt(_e,{children:(Te,xe)=>{var ae=lc(),Ie=l(ae),se=l(Ie),he=l(se);let Re;var Ee=d(he,2);W(Ee,{size:1,weight:"medium",children:(tt,at)=>{var Xe=S();X(()=>le(Xe,(t(Ne),ct(()=>t(Ne).definition.mcp_tool_name||t(Ne).definition.name)))),a(tt,Xe)},$$slots:{default:!0}});var ke=d(se,2),it=l(ke);qt(it,{get content(){return t(Ne),ct(()=>t(Ne).definition.description)},align:"start",children:(tt,at)=>{var Xe=ge(),$t=F(Xe),je=Ve=>{W(Ve,{size:1,color:"secondary",children:(Ke,He)=>{var Qe=S();X(()=>le(Qe,(t(Ne),ct(()=>t(Ne).definition.description)))),a(Ke,Qe)},$$slots:{default:!0}})};O($t,Ve=>{t(Ne),ct(()=>t(Ne).definition.description)&&Ve(je)}),a(tt,Xe)},$$slots:{default:!0}}),X(tt=>Re=Ot(he,1,"tool-status-dot svelte-8g1e5g",null,Re,tt),[()=>({enabled:t(Ne).enabled,disabled:!t(Ne).enabled})]),a(Te,ae)},$$slots:{default:!0}})}),a(ce,Ce)},$$slots:{header:!0,footer:!0},$$legacy:!0})},V=ee=>{var me=mc(),$e=l(me),ce=l($e),Ce=l(ce),_e=l(Ce),Ne=l(_e);pe(Ne,{name:"cpu"});var Te=d(_e,2);W(Te,{color:"secondary",size:1,weight:"medium",children:(je,Ve)=>{var Ke=S();X(()=>le(Ke,t(T))),a(je,Ke)},$$slots:{default:!0}});var xe=d(ce,2),ae=je=>{var Ve=dc(),Ke=F(Ve),He=l(Ke),Qe=l(He);W(Qe,{size:1,weight:"medium",children:(pt,Tt)=>{var Ft=S("Code Snippet");a(pt,Ft)},$$slots:{default:!0}});var mt=d(Ke,2),nt=l(mt),yt=l(nt);Wa(yt,{size:1,placeholder:"Paste JSON here...",get value(){return t(oe)},set value(pt){m(oe,pt)},$$legacy:!0}),a(je,Ve)},Ie=je=>{var Ve=ge(),Ke=F(Ve),He=Qe=>{var mt=gc(),nt=F(mt),yt=dt=>{var Mt=uc(),Et=F(Mt),Rt=l(Et),ht=l(Rt);W(ht,{size:1,weight:"medium",children:(Dt,_r)=>{var cr=S("Connection Type");a(Dt,cr)},$$slots:{default:!0}});var sr=d(ht,2),Gt=l(sr);{let Dt=kt(()=>t(te)==="http"?"solid":"ghost"),_r=kt(()=>t(te)==="http"?"accent":"neutral");Ge(Gt,{size:1,get variant(){return t(Dt)},get color(){return t(_r)},type:"button",$$events:{click:()=>m(te,"http")},children:(cr,ja)=>{var Or=S("HTTP");a(cr,Or)},$$slots:{default:!0}})}var Mr=d(Gt,2);{let Dt=kt(()=>t(te)==="sse"?"solid":"ghost"),_r=kt(()=>t(te)==="sse"?"accent":"neutral");Ge(Mr,{size:1,get variant(){return t(Dt)},get color(){return t(_r)},type:"button",$$events:{click:()=>m(te,"sse")},children:(cr,ja)=>{var Or=S("SSE");a(cr,Or)},$$slots:{default:!0}})}var Pr=d(Et,2),Cr=l(Pr),ra=l(Cr);W(ra,{size:1,weight:"medium",children:(Dt,_r)=>{var cr=S("Authentication Type");a(Dt,cr)},$$slots:{default:!0}});var qa=d(ra,2),_a=l(qa);{let Dt=kt(()=>t(j)==="oauth"?"solid":"ghost"),_r=kt(()=>t(j)==="oauth"?"accent":"neutral");Ge(_a,{size:1,get variant(){return t(Dt)},get color(){return t(_r)},type:"button",$$events:{click:()=>m(j,vt.OAUTH)},children:(cr,ja)=>{var Or=S("OAuth");a(cr,Or)},$$slots:{default:!0}})}var Va=d(_a,2);{let Dt=kt(()=>t(j)==="header"?"solid":"ghost"),_r=kt(()=>t(j)==="header"?"accent":"neutral");Ge(Va,{size:1,get variant(){return t(Dt)},get color(){return t(_r)},type:"button",$$events:{click:()=>m(j,vt.HEADER)},children:(cr,ja)=>{var Or=S("Header");a(cr,Or)},$$slots:{default:!0}})}a(dt,Mt)};O(nt,dt=>{t(h)&&dt(yt)});var pt=d(nt,2),Tt=l(pt),Ft=l(Tt);er(Ft,{size:1,placeholder:"Enter a name for your MCP server (e.g., 'Server Memory')",get value(){return t(ie)},set value(dt){m(ie,dt)},$$events:{focus:Be},$$slots:{label:(dt,Mt)=>{W(dt,{slot:"label",size:1,weight:"medium",children:(Et,Rt)=>{var ht=S("Name");a(Et,ht)},$$slots:{default:!0}})}},$$legacy:!0});var Ct=d(pt,2),rr=dt=>{var Mt=vc(),Et=l(Mt),Rt=l(Et);er(Rt,{size:1,placeholder:"Enter the URL (e.g., 'https://api.example.com/mcp')",get value(){return t(B)},set value(ht){m(B,ht)},$$events:{focus:Be},$$slots:{label:(ht,sr)=>{W(ht,{slot:"label",size:1,weight:"medium",children:(Gt,Mr)=>{var Pr=S("URL");a(Gt,Pr)},$$slots:{default:!0}})}},$$legacy:!0}),a(dt,Mt)},_t=dt=>{var Mt=hc(),Et=l(Mt),Rt=l(Et);er(Rt,{size:1,placeholder:"Enter the MCP command (e.g., 'npx -y @modelcontextprotocol/server-memory')",get value(){return t(H)},set value(ht){m(H,ht)},$$events:{focus:Be},$$slots:{label:(ht,sr)=>{W(ht,{slot:"label",size:1,weight:"medium",children:(Gt,Mr)=>{var Pr=S("Command");a(Gt,Pr)},$$slots:{default:!0}})}},$$legacy:!0}),a(dt,Mt)};O(Ct,dt=>{t(h)?dt(rr):dt(_t,!1)}),a(Qe,mt)};O(Ke,Qe=>{x()!=="add"&&x()!=="addRemote"&&x()!=="edit"||Qe(He)},!0),a(je,Ve)};O(xe,je=>{x()==="addJson"?je(ae):je(Ie,!1)});var se=d(xe,2),he=je=>{Zs(je,{handleEnterEditMode:Be,title:"Environment Variables",keyPlaceholder:"Key",valuePlaceholder:"Value",addButtonText:"Variable",get keyValEntries(){return t(ue)},set keyValEntries(Ve){m(ue,Ve)},$$legacy:!0})},Re=je=>{var Ve=ge(),Ke=F(Ve),He=Qe=>{Zs(Qe,{handleEnterEditMode:Be,title:"Headers",keyPlaceholder:"Header",valuePlaceholder:"Value",addButtonText:"Header",get keyValEntries(){return t(ve)},set keyValEntries(mt){m(ve,mt)},$$legacy:!0})};O(Ke,Qe=>{t(h),t(j),rt(vt),ct(()=>t(h)&&t(j)===vt.HEADER)&&Qe(He)},!0),a(je,Ve)};O(se,je=>{t(v)?je(he):je(Re,!1)});var Ee=d(se,2),ke=l(Ee);let it;var tt=l(ke);vr(tt,{variant:"soft",color:"error",size:1,icon:Ve=>{pe(Ve,{name:"circle-x"})},children:(Ve,Ke)=>{var He=S();X(()=>le(He,U())),a(Ve,He)},$$slots:{icon:!0,default:!0}});var at=d(ke,2),Xe=l(at);Ge(Xe,{size:1,variant:"ghost",color:"neutral",type:"button",$$events:{click:Se},children:(je,Ve)=>{var Ke=S("Cancel");a(je,Ke)},$$slots:{default:!0}});var $t=d(Xe,2);Ge($t,{size:1,variant:"solid",color:"accent",get loading(){return Je()},type:"submit",get disabled(){return t(N)},children:(je,Ve)=>{var Ke=ge(),He=F(Ke),Qe=nt=>{var yt=S("Import");a(nt,yt)},mt=nt=>{var yt=ge(),pt=F(yt),Tt=Ct=>{var rr=S("Add");a(Ct,rr)},Ft=Ct=>{var rr=ge(),_t=F(rr),dt=Et=>{var Rt=S("Add");a(Et,Rt)},Mt=Et=>{var Rt=ge(),ht=F(Rt),sr=Gt=>{var Mr=S("Save");a(Gt,Mr)};O(ht,Gt=>{x()==="edit"&&Gt(sr)},!0),a(Et,Rt)};O(_t,Et=>{x()==="addRemote"?Et(dt):Et(Mt,!1)},!0),a(Ct,rr)};O(pt,Ct=>{x()==="add"?Ct(Tt):Ct(Ft,!1)},!0),a(nt,yt)};O(He,nt=>{x()==="addJson"?nt(Qe):nt(mt,!1)}),a(je,Ke)},$$slots:{default:!0}}),X(je=>{Ot(me,1,"c-mcp-server-card "+(x()==="add"||x()==="addJson"||x()==="addRemote"?"add-server-section":"server-item"),"svelte-8g1e5g"),it=Ot(ke,1,"error-container svelte-8g1e5g",null,it,je)},[()=>({"is-error":!!U()})]),Qt("submit",me,Yn(Ae)),a(ee,me)};O(ne,ee=>{x()==="view"&&u()?ee(D):ee(V,!1)}),a(n,Me),Ya(e,"loadAuthHeaders",Z),Ya(e,"setLocalEnvVarFormState",we),Ya(e,"setLocalAuthHeaderFormState",Oe);var Q=Fe(fe);return o(),Q}const Nn=[{label:Lr.REDIS,description:"Real-time data platform for building fast apps",iconName:"redis",command:"uvx",args:["--from","redis-mcp-server@latest","redis-mcp-server","--url"],userInput:[{label:"Redis connection URL",description:"Enter your connection URL (redis://localhost:6379/0)",placeholder:"rediss://<USERNAME>:<PASSWORD>@<HOST>:<PORT>?ssl_cert_reqs=required&ssl_ca_certs=<PATH_TO_CERT>",correspondingArg:"--url",type:"argument"}]},{label:Lr.MONGODB,description:"Optimize database queries and performance.",iconName:"mongodb",command:"npx",args:["-y","mongodb-mcp-server","--connectionString"],userInput:[{label:"MongoDB Connection String",description:"Enter your MongoDB connection string",placeholder:"mongodb://username:password@host:port/database",correspondingArg:"--connectionString",type:"argument"}]},{label:Lr.CIRCLECI,description:"Debug builds and improve CI/CD pipelines.",iconName:"circleci",command:"npx",args:["-y","@circleci/mcp-server-circleci"],userInput:[{label:"CircleCI Token",description:"Enter your CircleCI token",placeholder:"YOUR_CIRCLE_CI_TOKEN",type:"environmentVariable",envVarName:"CIRCLECI_TOKEN"},{label:"Base URL",description:"Enter the base URL for your CircleCI instance",placeholder:"https://circleci.com",defaultValue:"https://circleci.com",type:"environmentVariable",envVarName:"CIRCLECI_BASE_URL"}]},{label:Lr.HEROKU,description:"Interact with the Heroku Platform.",iconName:"heroku",command:"heroku",args:["mcp:start"],userInput:[]},{label:Lr.RAILWAY,description:"Railway simplifies your infrastructure stack from servers to observability with a single, scalable, easy-to-use platform.",iconName:"railway",command:"npx -y @railway/mcp-server"},{label:Lr.CONVEX,description:"The backend platform that keeps your app in sync.",iconName:"convex",command:"npx -y convex@latest mcp start"},{label:Lr.SNOWFLAKE,description:"Snowflake Cortex AI, object management, SQL orchestration, and semantic views.",iconName:"snowflake",command:"uvx",args:["snowflake-labs-mcp","--service-config-file"],userInput:[{label:"Service Config File Path",description:"Path to your Snowflake MCP configuration YAML file",placeholder:"/path/to/config.yaml",correspondingArg:"--service-config-file",type:"argument"}]},{label:"Context 7",description:"Package documentation",iconName:"mcp",command:"npx -y @upstash/context7-mcp@latest"},{label:"Playwright",description:"Browser automation",iconName:"playwright",command:"npx -y @playwright/mcp@latest"},{label:"Sequential thinking",description:"Think through complex problems step-by-step.",iconName:"mcp",command:"npx -y @modelcontextprotocol/server-sequential-thinking"}];var pc=f('<div class="mcp-install-left svelte-14uub1e"><!> <!></div>'),fc=f('<div class="mcp-install-header svelte-14uub1e"><!></div>'),yc=f('<div class="user-input-field svelte-14uub1e"><!> <!> <!></div>'),_c=f('<div class="user-input-container svelte-14uub1e"><!> <div class="user-input-actions svelte-14uub1e"><!> <!></div></div>'),bc=f('<div class="mcp-service-content svelte-14uub1e"><!> <div class="mcp-service-info svelte-14uub1e"><div class="mcp-service-title svelte-14uub1e"><!></div> <!> <!></div></div>'),Sc=f('<div class="installed-indicator svelte-14uub1e"><!></div>'),wc=f('<div class="mcp-service-actions svelte-14uub1e"><!></div>'),$c=f('<div class="mcp-service-item"><!></div>'),Ec=f('<div class="mcp-install-content svelte-14uub1e"><div class="mcp-list-container svelte-14uub1e"></div></div>'),Ac=f('<div class="mcp-install-wrapper svelte-14uub1e"><!></div>');function Cc(n,e){ze(e,!0);let r=Y(e,"onMCPServerAdd",19,()=>{}),s=Y(e,"servers",19,()=>[]);const i="easyMCPInstall.collapsed";let o=ye(!1),c=ye(!1);Wt(()=>{const N=localStorage.getItem(i);if(N!==null)try{m(o,JSON.parse(N),!0)}catch{localStorage.removeItem(i)}m(c,!0)}),Wt(()=>{typeof window<"u"&&t(c)&&localStorage.setItem(i,JSON.stringify(t(o)))});let v=ye(null),h=ye(ur({})),g=ur({});function y(N){if(!N.userInput)return;for(let R=0;R<N.userInput.length;R++){const b=N.userInput[R];let _;if(_=b.type==="environmentVariable"&&b.envVarName?b.envVarName:b.correspondingArg?b.correspondingArg:`input_${R}`,!t(h)[_]?.trim()){const C=g[_];return void(C&&C.focus())}}let T=[N.command],u={};N.args&&T.push(...N.args);for(let R=0;R<N.userInput.length;R++){const b=N.userInput[R];let _;_=b.type==="environmentVariable"&&b.envVarName?b.envVarName:b.correspondingArg?b.correspondingArg:`input_${R}`;const A=t(h)[_].trim(),C=`"${A}"`;if(b.type==="environmentVariable"&&b.envVarName)u[b.envVarName]=A;else if(b.correspondingArg){const M=T.indexOf(b.correspondingArg);M!==-1?T.splice(M+1,0,C):T.push(b.correspondingArg,C)}else T.push(C)}const E={type:"stdio",name:N.label,command:T.join(" "),args:[],useShellInterpolation:!0,env:Object.keys(u).length>0?u:void 0};r()&&r()(E),m(v,null),m(h,{},!0)}function w(){m(v,null),m(h,{},!0)}var k=Ac(),I=l(k);mn(I,{get collapsed(){return t(o)},set collapsed(T){m(o,T,!0)},header:T=>{var u=fc();{const E=R=>{var b=pc(),_=l(b);pn(_,{});var A=d(_,2);W(A,{color:"neutral",size:1,weight:"light",class:"card-title",children:(C,M)=>{var p=S("Easy MCP Installation");a(C,p)},$$slots:{default:!0}}),a(R,b)};Kt(l(u),{transparent:!0,headerLeft:E,$$slots:{headerLeft:!0}})}a(T,u)},children:(T,u)=>{var E=Ec(),R=l(E);gt(R,21,()=>Nn,pr,(b,_)=>{var A=$c();{const C=p=>{var $=bc(),L=l($);pe(L,{get name(){return t(_).iconName},size:4});var z=d(L,2),x=l(z),U=l(x);W(U,{size:1,weight:"medium",children:(H,B)=>{var q=S();X(()=>le(q,t(_).label)),a(H,q)},$$slots:{default:!0}});var J=d(x,2),re=H=>{W(H,{size:1,color:"secondary",children:(B,q)=>{var oe=S();X(()=>le(oe,t(_).description)),a(B,oe)},$$slots:{default:!0}})};O(J,H=>{t(_).description&&H(re)});var G=d(J,2),ie=H=>{var B=_c(),q=l(B);gt(q,17,()=>t(_).userInput,pr,(P,Z,ue)=>{const ve=K(()=>t(Z).type==="environmentVariable"&&t(Z).envVarName?t(Z).envVarName:t(Z).type==="argument"&&t(Z).correspondingArg||`input_${ue}`);var be=yc(),we=l(be);W(we,{size:1,weight:"medium",color:"neutral",children:(Je,Ze)=>{var Ae=S();X(()=>le(Ae,t(Z).label)),a(Je,Ae)},$$slots:{default:!0}});var Oe=d(we,2),Pe=Je=>{W(Je,{size:1,color:"secondary",children:(Ze,Ae)=>{var Se=S();X(()=>le(Se,t(Z).description)),a(Ze,Se)},$$slots:{default:!0}})};O(Oe,Je=>{t(Z).description&&Je(Pe)});var Be=d(Oe,2);{let Je=K(()=>t(Z).placeholder||"");er(Be,{get placeholder(){return t(Je)},size:1,variant:"surface",onkeydown:Ze=>{Ze.key==="Enter"?y(t(_)):Ze.key==="Escape"&&w()},get value(){return t(h)[t(ve)]},set value(Ze){t(h)[t(ve)]=Ze},get textInput(){return g[t(ve)]},set textInput(Ze){g[t(ve)]=Ze}})}a(P,be)});var oe=d(q,2),te=l(oe);Ge(te,{variant:"ghost-block",color:"accent",size:1,onclick:()=>y(t(_)),children:(P,Z)=>{var ue=S("Install");a(P,ue)},$$slots:{default:!0}});var j=d(te,2);Ge(j,{variant:"ghost-block",color:"neutral",size:1,onclick:w,children:(P,Z)=>{var ue=S("Cancel");a(P,ue)},$$slots:{default:!0}}),a(H,B)};O(G,H=>{t(v)===t(_).label&&t(_).userInput&&H(ie)}),a(p,$)},M=p=>{var $=wc(),L=l($),z=U=>{var J=Sc(),re=l(J);qe(re,()=>yr.Root,(G,ie)=>{ie(G,{color:"success",size:1,variant:"soft",children:(H,B)=>{var q=S("Installed");a(H,q)},$$slots:{default:!0}})}),a(U,J)},x=U=>{var J=ge(),re=F(J),G=ie=>{Nt(ie,{variant:"ghost-block",color:"accent",size:1,onclick:()=>function(H){if(s().some(q=>q.name===H.label))return;if(H.userInput&&H.userInput.length>0)return m(h,{},!0),H.userInput.forEach((q,oe)=>{let te;te=q.type==="environmentVariable"&&q.envVarName?q.envVarName:q.correspondingArg?q.correspondingArg:`input_${oe}`,t(h)[te]=q.defaultValue||""}),void m(v,H.label,!0);const B={type:"stdio",name:H.label,command:H.args?`${H.command} ${H.args.join(" ")}`:H.command,args:[],useShellInterpolation:!0};r()&&r()(B)}(t(_)),children:(H,B)=>{pe(H,{name:"plus"})},$$slots:{default:!0}})};O(re,ie=>{t(v)!==t(_).label&&ie(G)},!0),a(U,J)};O(L,U=>{s().some(J=>J.name===t(_).label)?U(z):U(x,!1)}),a(p,$)};Kt(l(A),{headerLeft:C,headerRight:M,$$slots:{headerLeft:!0,headerRight:!0}})}a(b,A)}),a(T,E)},$$slots:{header:!0,default:!0}}),a(n,k),Fe()}const Tc={mcpDocsURL:"https://docs.augmentcode.com/setup-augment/mcp"},Rc={mcpDocsURL:"https://docs.augmentcode.com/jetbrains/setup-augment/mcp"},kc=ln(),Ic=new class{strings;constructor(n){let e={[Ja.vscode]:{},[Ja.jetbrains]:Rc,[Ja.web]:{}};this.strings={...Tc,...e[n]}}get(n){return this.strings[n]}}(kc.clientType);var Nc=f(`<div class="c-mcp-category svelte-2oxayh"><div class="mcp-servers svelte-2oxayh"><!> <div class="description-text svelte-2oxayh">Configure a new Model Context Protocol server to connect Augment to custom tools. Find out
      more about MCP <a>in the docs</a>.</div> <!> <!></div> <!> <div class="add-mcp-button-container svelte-2oxayh"><!> <!> <!></div></div>`);function xc(n,e){ze(e,!0);const[r,s]=Vt();let i=Y(e,"isMCPImportEnabled",3,!0);const o=lr();function c(te){o.startRemoteMCPAuth(te.name)}let v=ye(null),h=ye(null),g=K(()=>t(h)==="add"||t(h)==="addJson"||t(h)==="addRemote"||t(v)!==null);function y(){m(v,null),m(h,null),e.onCancel?.()}const w=Rs(),k=w.getServers(),I=w.getToolsStore();let N=K(()=>to(Le(k,"$allServers",r)));function T(te){m(v,te.id,!0)}function u(te){return async function(...j){const P=await te(...j);return m(h,null),m(v,null),P}}const E=u(e.onMCPServerAdd),R=u(e.onMCPServerSave),b=u(e.onMCPServerJSONImport),_=u(e.onMCPServerDelete),A=u(e.onMCPServerToggleDisable),C=Ic.get("mcpDocsURL");let M=K(()=>(Le(I,"$toolsStore",r),w.parseServerValidationMessages(t(N))));var p=Nc(),$=l(p),L=l($);zt(L,{level:2,marginBottom:0,children:(te,j)=>{var P=S("MCP");a(te,P)},$$slots:{default:!0}});var z=d(L,2),x=d(l(z)),U=d(z,2);Cc(U,{get onMCPServerAdd(){return E},get servers(){return t(N)}});var J=d(U,2);gt(J,17,()=>t(N),te=>te.id,(te,j)=>{{let P=K(()=>t(v)===t(j).id?"edit":"view"),Z=K(()=>t(M).errors.get(t(j).id)),ue=K(()=>t(M).warnings.get(t(j).id));an(te,{get mode(){return t(P)},get server(){return t(j)},get onAdd(){return E},get onSave(){return R},get onDelete(){return _},get onToggleDisableServer(){return A},onEdit:T,onCancel:y,get onJSONImport(){return b},onAuthenticate:c,get disabledText(){return t(Z)},get warningText(){return t(ue)},get mcpServerModel(){return w}})}});var re=d($,2),G=te=>{an(te,{get mode(){return t(h)},get onAdd(){return E},get onSave(){return R},get onDelete(){return _},get onToggleDisableServer(){return A},onEdit:T,onCancel:y,get onJSONImport(){return b},onAuthenticate:c,get mcpServerModel(){return w}})};O(re,te=>{t(h)!=="add"&&t(h)!=="addJson"&&t(h)!=="addRemote"||te(G)});var ie=d(re,2),H=l(ie);Ge(H,{get disabled(){return t(g)},color:"neutral",variant:"soft",size:1,$$events:{click:()=>{m(h,"add")}},iconLeft:j=>{pe(j,{name:"plus"})},children:(j,P)=>{var Z=S("Add MCP");a(j,Z)},$$slots:{iconLeft:!0,default:!0}});var B=d(H,2);Ge(B,{get disabled(){return t(g)},color:"neutral",variant:"soft",size:1,$$events:{click:()=>{m(h,"addRemote")}},iconLeft:j=>{pe(j,{name:"plus"})},children:(j,P)=>{var Z=S("Add remote MCP");a(j,Z)},$$slots:{iconLeft:!0,default:!0}});var q=d(B,2),oe=te=>{Ge(te,{get disabled(){return t(g)},color:"neutral",variant:"soft",size:1,title:"Add MCP from JSON",$$events:{click:()=>{m(h,"addJson")}},iconLeft:P=>{pe(P,{name:"download"})},children:(P,Z)=>{var ue=S("Import from JSON");a(P,ue)},$$slots:{iconLeft:!0,default:!0}})};O(q,te=>{i()&&te(oe)}),X(()=>or(x,"href",C)),a(n,p),Fe(),s()}var Mc=f(' <span class="support-string svelte-1xynlc1"> </span>',1),Pc=f('<span class="name"> </span> <span class="support-string svelte-1xynlc1"> </span>',1),Oc=f("<!> <!>",1),Uc=f('<div class="terminal-settings svelte-1xynlc1"><!> <div class="shell-selector svelte-1xynlc1"><!> <!></div> <div class="startup-script-container svelte-1xynlc1"><!> <!></div></div>');function Lc(n,e){ze(e,!1);const r=ut();let s=Y(e,"supportedShells",24,()=>[]),i=Y(e,"selectedShell",24,()=>{}),o=Y(e,"startupScript",28,()=>{}),c=Y(e,"onShellSelect",8),v=Y(e,"onStartupScriptChange",8),h=ut();Ht(()=>rt(i()),()=>{var E;m(r,i()?(E=i(),s().find(R=>R.friendlyName===E)):void 0)}),Da(),Ar();var g=Uc(),y=l(g);zt(y,{level:2,marginBottom:0,children:(E,R)=>{var b=S("Terminal");a(E,b)},$$slots:{default:!0}});var w=d(y,2),k=l(w);W(k,{size:1,children:(E,R)=>{var b=S("Shell:");a(E,b)},$$slots:{default:!0}});var I=d(k,2);Xt(et.Root(I,{children:(E,R)=>{var b=Oc(),_=F(b);et.Trigger(_,{children:(C,M)=>{{let p=kt(()=>(rt(s()),ct(()=>s().length===0)));Ge(C,{size:1,variant:"outline",color:"neutral",get disabled(){return t(p)},children:($,L)=>{var z=ge(),x=F(z),U=re=>{var G=Mc(),ie=F(G),H=d(ie),B=l(H);X(()=>{le(ie,`${t(r),ct(()=>t(r).friendlyName)??""} `),le(B,`(${t(r),ct(()=>t(r).supportString)??""})`)}),a(re,G)},J=re=>{var G=ge(),ie=F(G),H=q=>{var oe=S("No shells available");a(q,oe)},B=q=>{var oe=S("Select a shell");a(q,oe)};O(ie,q=>{rt(s()),ct(()=>s().length===0)?q(H):q(B,!1)},!0),a(re,G)};O(x,re=>{t(r),rt(s()),ct(()=>t(r)&&s().length>0)?re(U):re(J,!1)}),a($,z)},$$slots:{default:!0,iconRight:($,L)=>{pe($,{slot:"iconRight",name:"chevron-down"})}}})}},$$slots:{default:!0}});var A=d(_,2);et.Content(A,{side:"bottom",align:"start",children:(C,M)=>{var p=ge(),$=F(p),L=x=>{var U=ge(),J=F(U);gt(J,1,s,re=>re.friendlyName,(re,G)=>{{let ie=kt(()=>(rt(i()),t(G),ct(()=>i()===t(G).friendlyName)));et.Item(re,{onSelect:()=>{c()(t(G).friendlyName),t(h)?.requestClose()},get highlight(){return t(ie)},children:(H,B)=>{var q=Pc(),oe=F(q),te=l(oe),j=d(oe,2),P=l(j);X(()=>{le(te,(t(G),ct(()=>t(G).friendlyName))),le(P,`(${t(G),ct(()=>t(G).supportString)??""})`)}),a(H,q)},$$slots:{default:!0}})}}),a(x,U)},z=x=>{et.Label(x,{children:(U,J)=>{var re=S("No shells available");a(U,re)},$$slots:{default:!0}})};O($,x=>{rt(s()),ct(()=>s().length>0)?x(L):x(z,!1)}),a(C,p)},$$slots:{default:!0}}),a(E,b)},$$slots:{default:!0},$$legacy:!0}),E=>m(h,E),()=>t(h));var N=d(w,2),T=l(N);W(T,{size:1,children:(E,R)=>{var b=S("Start-up script: Code to run wherever a new terminal is opened");a(E,b)},$$slots:{default:!0}});var u=d(T,2);Wa(u,{onchange:function(E){const R=E.target;v()(R.value)},placeholder:"Enter shell commands to run on terminal startup",resize:"vertical",get value(){return o()},set value(E){o(E)},$$legacy:!0}),a(n,g),Fe()}var zc=f('<div class="c-sound-setting__info svelte-vusrgo"><div><!></div> <div><!></div></div>'),Fc=f('<div class="c-sound-setting__info svelte-vusrgo"><div><!></div> <div><!></div></div>'),Dc=f('<div class="c-sound-setting__info svelte-vusrgo"><div><!></div> <div><!></div></div>'),Bc=f("<!> <!>",1),Wc=f('<div class="c-sound-settings svelte-vusrgo"><!> <!> <!></div>'),Gc=f('<!> <div class="c-settings-tools svelte-13dsvvl"><!> <!> <!> <!></div>',1);function Hc(n,e){let r=Y(e,"tools",19,()=>[]),s=Y(e,"isMCPEnabled",3,!0),i=Y(e,"isMCPImportEnabled",3,!0),o=Y(e,"isTerminalEnabled",3,!0),c=Y(e,"onCancel",19,()=>{}),v=Y(e,"supportedShells",19,()=>[]),h=Y(e,"selectedShell",19,()=>{}),g=Y(e,"startupScript",19,()=>{}),y=Y(e,"onShellSelect",3,()=>{}),w=Y(e,"onStartupScriptChange",3,()=>{});var k=Gc(),I=F(k);zt(I,{level:1,children:(_,A)=>{var C=S("Tools");a(_,C)},$$slots:{default:!0}});var N=d(I,2),T=l(N);dl(T,{title:"Services",get tools(){return r()},get onAuthenticate(){return e.onAuthenticate},get onRevokeAccess(){return e.onRevokeAccess}});var u=d(T,2),E=_=>{xc(_,{get onMCPServerAdd(){return e.onMCPServerAdd},get onMCPServerSave(){return e.onMCPServerSave},get onMCPServerDelete(){return e.onMCPServerDelete},get onMCPServerToggleDisable(){return e.onMCPServerToggleDisable},get onMCPServerJSONImport(){return e.onMCPServerJSONImport},get onCancel(){return c()},get isMCPImportEnabled(){return i()}})};O(u,_=>{s()&&_(E)});var R=d(u,2),b=_=>{Lc(_,{get supportedShells(){return v()},get selectedShell(){return h()},get startupScript(){return g()},get onShellSelect(){return y()},get onStartupScriptChange(){return w()}})};O(R,_=>{o()&&_(b)}),function(_,A){ze(A,!1);const C=()=>Le(z,"$isEnabled",p),M=()=>Le(x,"$playOnlyWhenWindowUnfocused",p),[p,$]=Vt(),L=ta(),z=Xn(),x=Zn();async function U(){return L(ri({playOnlyWhenWindowUnfocused:!1})),"success"}tr(()=>{L(Qn())}),Ar();var J=Wc(),re=l(J);zt(re,{level:2,marginBottom:0,children:(B,q)=>{var oe=S("Sound Settings");a(B,oe)},$$slots:{default:!0}});var G=d(re,2);Kt(G,{headerLeft:oe=>{var te=zc(),j=l(te),P=l(j);W(P,{size:2,weight:"medium",children:(ve,be)=>{var we=S("Enable Sound Effects");a(ve,we)},$$slots:{default:!0}});var Z=d(j,2),ue=l(Z);W(ue,{size:1,weight:"medium",children:(ve,be)=>{var we=S("Play a sound when an agent completes a task");a(ve,we)},$$slots:{default:!0}}),a(oe,te)},headerRight:oe=>{Nr(oe,{size:1,get checked(){return C()},ariaLabel:"Enable sound effects",onchange:()=>L(ei(!C()))})},$$slots:{headerLeft:!0,headerRight:!0}});var ie=d(G,2),H=B=>{var q=Bc(),oe=F(q);Kt(oe,{headerLeft:P=>{var Z=Fc(),ue=l(Z),ve=l(ue);W(ve,{size:2,weight:"medium",children:(Oe,Pe)=>{var Be=S("Only play when app window is unfocused");a(Oe,Be)},$$slots:{default:!0}});var be=d(ue,2),we=l(be);W(we,{size:1,weight:"medium",children:(Oe,Pe)=>{var Be=S("Play the agent completion sound only when the host window is not focused");a(Oe,Be)},$$slots:{default:!0}}),a(P,Z)},headerRight:P=>{{let Z=kt(()=>M()??!1);Nr(P,{size:1,get checked(){return t(Z)},ariaLabel:"Only play when app window is unfocused",onchange:()=>L(ti({playOnlyWhenWindowUnfocused:!M()}))})}},$$slots:{headerLeft:!0,headerRight:!0}});{const te=P=>{var Z=Dc(),ue=l(Z),ve=l(ue);W(ve,{size:2,weight:"medium",children:(Oe,Pe)=>{var Be=S("Test Sound");a(Oe,Be)},$$slots:{default:!0}});var be=d(ue,2),we=l(be);W(we,{size:1,weight:"medium",children:(Oe,Pe)=>{var Be=S("Play a sample of the agent completion sound");a(Oe,Be)},$$slots:{default:!0}}),a(P,Z)},j=P=>{{let Z=kt(()=>C()?"":"Enable sound effects to test"),ue=kt(()=>[ya.Hover]);qt(P,{get content(){return t(Z)},get triggerOn(){return t(ue)},children:(ve,be)=>{{let we=kt(()=>!C());oo(ve,{size:1,defaultColor:"neutral",get enabled(){return C()},stickyColor:!1,get disabled(){return t(we)},onClick:U,stateVariant:{success:"soft",neutral:"soft",failure:"soft"},tooltip:{neutral:"Play a sample of the agent completion sound",success:"Played!"},children:(Oe,Pe)=>{var Be=S("Play");a(Oe,Be)},$$slots:{default:!0}})}},$$slots:{default:!0}})}};Kt(d(oe,2),{headerLeft:te,headerRight:j,$$slots:{headerLeft:!0,headerRight:!0}})}a(B,q)};O(ie,B=>{C()&&B(H)}),a(_,J),Fe(),$()}(d(R,2),{}),a(n,k)}var qc=f('<div class="l-markdown-editor svelte-z9ze0l"><div class="c-markdown-editor__header svelte-z9ze0l"><!></div> <!> <div class="c-markdown-editor__content svelte-z9ze0l"><!> <!></div></div> <div class="c-markdown-editor__status svelte-z9ze0l"><!> <!></div>',1),Vc=f('<div class="c-user-guidelines-category__input svelte-19odral"><!></div>');function xn(n,e){ze(e,!0);const[r,s]=Vt();let i=Y(e,"userGuidelines",15,""),o=Y(e,"userGuidelinesLengthLimit",19,()=>{}),c=Y(e,"updateUserGuideline",3,async()=>!1);const v=It(void 0);async function h(){const y=i().trim();if(Le(v,"$originalValue",r)!==y){if(!await c()(y))throw o()&&y.length>o()?new Error(`The user guideline must be less than ${o()} character long`):new Error("An error occurred updating the user");zs(v,y)}}tr(()=>{zs(v,i().trim())}),ss(()=>{h()});var g=Vc();(function(y,w){ze(w,!0);let k,I=Y(w,"variant",3,"surface"),N=Y(w,"size",3,2),T=Y(w,"color",19,()=>{}),u=Y(w,"resize",3,"none"),E=Y(w,"textInput",15),R=Y(w,"value",15,""),b=Y(w,"selectedText",15,""),_=Y(w,"selectionStart",15,0),A=Y(w,"selectionEnd",15,0),C=$r(w,["$$slots","$$events","$$legacy","variant","size","color","resize","textInput","value","selectedText","selectionStart","selectionEnd","saveFunction","header","children","title"]),M=ye(!1),p=ye(void 0);const $=async()=>{try{w.saveFunction(),m(M,!0),clearTimeout(k),k=setTimeout(()=>{m(M,!1)},1500)}catch(P){m(p,P instanceof Error?P.message:String(P),!0)}};function L(){E()&&(_(E().selectionStart),A(E().selectionEnd),_()!==A()?b(R().substring(_(),A())):b(""))}ss(()=>{$()});var z=qc(),x=F(z),U=l(x),J=l(U);wt(J,()=>w.header??dr);var re=d(U,2);wt(re,()=>w.children??dr);var G=d(re,2),ie=l(G);wt(ie,()=>w.title??dr);var H=d(ie,2);Wa(H,ns({get variant(){return I()},get size(){return N()},get color(){return T()},get resize(){return u()},placeholder:"Enter markdown content...",onselect:L,onmouseup:L,onkeyup:()=>{L()},onblur:$,onkeydown:P=>{(P.key==="Escape"||(P.metaKey||P.ctrlKey)&&P.key==="s")&&(P.preventDefault(),$())}},()=>C,{get textInput(){return E()},set textInput(P){E(P)},get value(){return R()},set value(P){R(P)}}));var B=d(x,2),q=l(B),oe=P=>{W(P,{size:1,weight:"light",color:"error",children:(Z,ue)=>{var ve=S();X(()=>le(ve,t(p))),a(Z,ve)},$$slots:{default:!0}})};O(q,P=>{t(p)&&P(oe)});var te=d(q,2),j=P=>{W(P,{size:1,weight:"light",color:"success",children:(Z,ue)=>{var ve=S("Saved");a(Z,ve)},$$slots:{default:!0}})};O(te,P=>{t(M)&&P(j)}),a(y,z),Fe()})(l(g),{placeholder:"Add your guidelines for Augment Chat...",resize:"vertical",rows:6,saveFunction:h,get value(){return i()},set value(y){i(y)}}),a(n,g),Fe(),s()}var jc=f("<!> <!> <!>",1),Jc=f("<!> <!>",1),Kc=f('<input type="text" value="No existing rules found" readonly="" class="c-dropdown-input svelte-1wjtvv4"/>'),Yc=f('<div class="c-dropdown-trigger svelte-1wjtvv4"><input type="text" readonly="" class="c-dropdown-input svelte-1wjtvv4"/> <!></div>'),Xc=f("<!> <!>",1),Zc=f("<!> <!>",1),Qc=f("<!> <!>",1),ed=f("<!> <!> <!> <!>",1),td=f('<div class="c-auto-import-rules-dialog svelte-1wjtvv4"><!></div>'),rd=f("<!> <!>",1);function ad(n,e){ze(e,!1);const r=()=>Le(t(I),"$focusedIndex",s),[s,i]=Vt(),o=ut(),c=cn();let v=Y(e,"show",8,!1),h=Y(e,"options",24,()=>[]),g=Y(e,"isLoading",8,!1),y=Y(e,"errorMessage",8,""),w=Y(e,"successMessage",8,""),k=ut(t(o)),I=ut(void 0),N=ut(void 0);function T(){t(k)&&!g()&&c("select",t(k))}function u(){g()||(c("cancel"),m(k,t(o)))}Ht(()=>rt(h()),()=>{m(o,h().length>0?h()[0]:null)}),Ht(()=>(rt(v()),t(o)),()=>{v()&&m(k,t(o))}),Da(),Ar(),Qt("keydown",Fa,function(E){v()&&!g()&&(E.key==="Escape"?(E.preventDefault(),u()):E.key==="Enter"&&t(k)&&(E.preventDefault(),T()))}),Ga(n,{get show(){return v()},title:"Auto Import Rules",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return g()},get preventEscapeClose(){return g()},$$events:{cancel:u},body:b=>{var _=td(),A=l(_),C=p=>{var $=Kc();a(p,$)},M=p=>{var $=ed(),L=F($);W(L,{size:2,color:"secondary",children:(G,ie)=>{var H=S("Select existing rules to auto import to .augment/rules");a(G,H)},$$slots:{default:!0}});var z=d(L,2);{let G=kt(()=>(rt(h()),ct(()=>h().length===0?[]:void 0)));Xt(et.Root(z,{get triggerOn(){return t(G)},get focusedIndex(){return t(I)},set focusedIndex(ie){dn(m(I,ie),"$focusedIndex",s)},children:(ie,H)=>{var B=Qc(),q=F(B);et.Trigger(q,{children:(te,j)=>{var P=Yc(),Z=l(P),ue=d(Z,2);pe(ue,{name:"chevron-down"}),X(()=>Ln(Z,(t(k),ct(()=>t(k)?t(k).label:"Existing rules")))),a(te,P)},$$slots:{default:!0}});var oe=d(q,2);et.Content(oe,{align:"start",side:"bottom",children:(te,j)=>{var P=Zc(),Z=F(P);gt(Z,1,h,pr,(be,we)=>{{let Oe=kt(()=>(t(k),t(we),ct(()=>t(k)?.label===t(we).label)));et.Item(be,{onSelect:()=>function(Pe){m(k,Pe),t(N)?.requestClose()}(t(we)),get highlight(){return t(Oe)},children:(Pe,Be)=>{var Je=S();X(()=>le(Je,(t(we),ct(()=>t(we).label)))),a(Pe,Je)},$$slots:{default:!0}})}});var ue=d(Z,2),ve=be=>{var we=Xc(),Oe=F(we);et.Separator(Oe,{});var Pe=d(Oe,2);et.Label(Pe,{children:(Be,Je)=>{var Ze=S();X(()=>le(Ze,(r(),rt(h()),t(k),ct(()=>r()!==void 0?h()[r()].description:t(k)?.description)))),a(Be,Ze)},$$slots:{default:!0}}),a(be,we)};O(ue,be=>{(r()!==void 0||t(k))&&be(ve)}),a(te,P)},$$slots:{default:!0}}),a(ie,B)},$$slots:{default:!0},$$legacy:!0}),ie=>m(N,ie),()=>t(N))}var x=d(z,2),U=G=>{vr(G,{variant:"soft",color:"error",size:1,icon:H=>{pe(H,{name:"circle-alert"})},children:(H,B)=>{var q=S();X(()=>le(q,y())),a(H,q)},$$slots:{icon:!0,default:!0}})};O(x,G=>{y()&&G(U)});var J=d(x,2),re=G=>{vr(G,{variant:"soft",color:"success",size:1,icon:H=>{pe(H,{name:"circle-check"})},children:(H,B)=>{var q=S();X(()=>le(q,w())),a(H,q)},$$slots:{icon:!0,default:!0}})};O(J,G=>{w()&&G(re)}),a(p,$)};O(A,p=>{rt(h()),ct(()=>h().length===0)?p(C):p(M,!1)}),a(b,_)},footer:b=>{var _=rd(),A=F(_);Ge(A,{variant:"solid",color:"neutral",get disabled(){return g()},$$events:{click:u},children:(p,$)=>{var L=S("Cancel");a(p,L)},$$slots:{default:!0}});var C=d(A,2),M=p=>{{let $=kt(()=>!t(k)||g());Ge(p,{color:"accent",variant:"solid",get disabled(){return t($)},get loading(){return g()},$$events:{click:T},children:(L,z)=>{var x=S();X(()=>le(x,g()?"Importing...":"Import ")),a(L,x)},$$slots:{default:!0}})}};O(C,p=>{rt(h()),ct(()=>h().length>0)&&p(M)}),a(b,_)},$$slots:{body:!0,footer:!0}}),Fe(),i()}var sd=f(`Rules are instructions for Augment Chat and Agent that can be applied automatically across all
      conversations or referenced in specific conversations using @mentions (e.g., @rule-file.md) <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a>`,1),nd=f('<div class="loading-container"><!> <!></div>'),id=f('<div class="c-rules-list-empty svelte-33mxxk"><!></div>'),od=f('<div class="c-rule-item-info svelte-33mxxk"><div class="l-icon-wrapper svelte-33mxxk"><!></div> <div class="c-rule-item-path svelte-33mxxk"><!></div></div>'),ld=f('<div class="server-actions"><div class="status-controls svelte-33mxxk"><div class="c-rules-dropdown"><!></div> <!> <!></div></div>'),cd=f('<div class="c-rules-actions-button-content svelte-33mxxk">Create new rule file</div>'),dd=f('<div class="c-rules-actions-button-content svelte-33mxxk">Import rules</div>'),ud=f("<!> <!>",1),vd=f("<!> <!>",1),hd=f("<!> <!>",1),gd=f(`User Guidelines allow you to control Augment's behavior through natural language instructions.
      These guidelines are applied globally to all Chat and Agent interactions. <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a>`,1),md=f('<!> <!> <!> <div class="c-rules-category svelte-33mxxk"><div class="c-rules-section svelte-33mxxk"><div class="c-rules-header svelte-33mxxk"><!> <!></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <div class="c-rules-list svelte-33mxxk"><!></div> <div class="c-rules-actions-container svelte-33mxxk"><!> <!></div></div> <div class="c-user-guidelines-section svelte-33mxxk"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div></div> <!> <!>',1);function pd(n,e){ze(e,!0);const r=()=>Le(w,"$rulesFiles",o),s=()=>Le(k,"$areRulesLoading",o),i=()=>Le(t($),"$importFocusedIndex",o),[o,c]=Vt();let v=Y(e,"userGuidelines",3,""),h=Y(e,"workspaceGuidelinesContent",3,""),g=Y(e,"updateUserGuideline",3,async()=>!1);const y=ta(),w=ai(),k=Bs("createRule"),I=Ws("createRule"),N=Gs("createRule"),T=Bs("autoImport"),u=si(),E=Ws("autoImport"),R=ni("autoImport"),b=Gs("autoImport");let _=K(()=>e.workspaceGuidelinesLengthLimit),A=K(()=>Ki({rules:r(),workspaceGuidelinesContent:h(),rulesAndGuidelinesLimit:t(_)})),C=K(()=>t(A).isOverLimit),M=K(()=>t(A).warningMessage);const p=[{label:"Auto import existing rules in the workspace",id:"auto_import",description:"Choose existing rules in your workspace to auto import to Augment."},{label:"Select file(s) or directory to import",id:"select_file_or_directory",description:"Select an existing directory or list of markdown files to import to Augment."}];let $=ye(void 0),L=ye(void 0);var z=md(),x=F(z);Hs(x,{sagaName:"rulesRefetch"});var U=d(x,2);Hs(U,{sagaName:"rulesEditing"});var J=d(U,2);zt(J,{level:1,children:(Ae,Se)=>{var fe=S("Rules & Guidelines");a(Ae,fe)},$$slots:{default:!0}});var re=d(J,2),G=l(re),ie=l(G),H=l(ie);zt(H,{level:2,marginBottom:0,children:(Ae,Se)=>{var fe=S("Rules");a(Ae,fe)},$$slots:{default:!0}});var B=d(H,2);qt(B,{content:"Refresh rules",children:(Ae,Se)=>{Nt(Ae,{size:1,variant:"ghost-block",color:"neutral",get disabled(){return s()},title:"Refresh rules",$$events:{click:()=>y(ii())},children:(fe,Me)=>{pe(fe,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}});var q=d(ie,2);ua(q,()=>({"--text-color":"var(--ds-color-secondary-a11)"})),W(q.lastChild,{size:1,color:"neutral",block:!0,children:(Ae,Se)=>{var fe=sd(),Me=d(F(fe)),ne=l(Me);W(ne,{size:1,weight:"regular",children:(D,V)=>{var Q=S("Learn more");a(D,Q)},$$slots:{default:!0}}),a(Ae,fe)},$$slots:{default:!0}});var oe=d(q,2),te=Ae=>{vr(Ae,{variant:"soft",color:"warning",size:1,icon:fe=>{pe(fe,{name:"circle-alert"})},children:(fe,Me)=>{var ne=S();X(()=>le(ne,t(M))),a(fe,ne)},$$slots:{icon:!0,default:!0}})};O(oe,Ae=>{t(C)&&Ae(te)});var j=d(oe,2),P=l(j),Z=Ae=>{var Se=nd(),fe=l(Se);Hr(fe,{size:1});var Me=d(fe,2);W(Me,{size:1,color:"secondary",children:(ne,D)=>{var V=S("Loading rules...");a(ne,V)},$$slots:{default:!0}}),a(Ae,Se)},ue=Ae=>{var Se=ge(),fe=F(Se),Me=D=>{var V=id(),Q=l(V);W(Q,{size:1,color:"neutral",children:(ee,me)=>{var $e=S("No rules files found");a(ee,$e)},$$slots:{default:!0}}),a(D,V)},ne=D=>{var V=ge(),Q=F(V);gt(Q,1,r,ee=>ee.path,(ee,me)=>{Kt(ee,{headerLeft:Ce=>{var _e=od(),Ne=l(_e),Te=l(Ne),xe=he=>{qt(he,{content:"No description found",children:(Re,Ee)=>{pe(Re,{name:"circle-alert"})},$$slots:{default:!0}})},ae=he=>{pe(he,{name:"file"})};O(Te,he=>{t(me).type!==Wi.AGENT_REQUESTED||t(me).description?he(ae,!1):he(xe)});var Ie=d(Ne,2),se=l(Ie);co(se,{get filepath(){return t(me).path}}),a(Ce,_e)},headerRight:Ce=>{var _e=ld(),Ne=l(_e),Te=l(Ne),xe=l(Te);lo(xe,{get rule(){return t(me)},onSave:(se,he)=>{y(gi({type:se,path:t(me).path,content:t(me).content,description:he,settingsStored:t(me).settingsStored}))}});var ae=d(Te,2);Nt(ae,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",$$events:{click:se=>{se.stopPropagation(),y(mi({pathName:t(me).path}))}},children:(se,he)=>{pe(se,{name:"external-link",size:1})},$$slots:{default:!0}});var Ie=d(ae,2);Nt(Ie,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",$$events:{click:se=>{se.stopPropagation(),y(pi(t(me).path))}},children:(se,he)=>{pe(se,{name:"trash-2",size:1})},$$slots:{default:!0}}),a(Ce,_e)},$$slots:{headerLeft:!0,headerRight:!0}})}),a(D,V)};O(fe,D=>{r().length===0?D(Me):D(ne,!1)},!0),a(Ae,Se)};O(P,Ae=>{s()&&r().length===0?Ae(Z):Ae(ue,!1)});var ve=d(j,2),be=l(ve);Ge(be,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",$$events:{click:()=>y(oi("createRule"))},iconLeft:Se=>{pe(Se,{name:"plus"})},children:(Se,fe)=>{var Me=cd();a(Se,Me)},$$slots:{iconLeft:!0,default:!0}});var we=d(be,2);qe(we,()=>et.Root,(Ae,Se)=>{Xt(Se(Ae,{get focusedIndex(){return t($)},set focusedIndex(fe){dn(m($,fe,!0),"$importFocusedIndex",o)},children:(fe,Me)=>{var ne=hd(),D=F(ne);qe(D,()=>et.Trigger,(Q,ee)=>{ee(Q,{children:(me,$e)=>{Ge(me,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",iconLeft:_e=>{pe(_e,{name:"download"})},iconRight:_e=>{pe(_e,{name:"chevron-down"})},children:(_e,Ne)=>{var Te=dd();a(_e,Te)},$$slots:{iconLeft:!0,iconRight:!0,default:!0}})},$$slots:{default:!0}})});var V=d(D,2);qe(V,()=>et.Content,(Q,ee)=>{ee(Q,{align:"start",side:"bottom",children:(me,$e)=>{var ce=vd(),Ce=F(ce);gt(Ce,17,()=>p,Te=>Te.id,(Te,xe)=>{var ae=ge(),Ie=F(ae);qe(Ie,()=>et.Item,(se,he)=>{he(se,{onSelect:()=>function(Re){Re.id==="select_file_or_directory"?y(li()):Re.id==="auto_import"&&y(ci()),t(L)?.requestClose()}(t(xe)),children:(Re,Ee)=>{var ke=S();X(()=>le(ke,t(xe).label)),a(Re,ke)},$$slots:{default:!0}})}),a(Te,ae)});var _e=d(Ce,2),Ne=Te=>{var xe=ud(),ae=F(xe);qe(ae,()=>et.Separator,(se,he)=>{he(se,{})});var Ie=d(ae,2);qe(Ie,()=>et.Label,(se,he)=>{he(se,{children:(Re,Ee)=>{var ke=S();X(()=>le(ke,i()!==void 0?p[i()].description:p[0].description)),a(Re,ke)},$$slots:{default:!0}})}),a(Te,xe)};O(_e,Te=>{(i()!==void 0||p.length>0)&&Te(Ne)}),a(me,ce)},$$slots:{default:!0}})}),a(fe,ne)},$$slots:{default:!0}}),fe=>m(L,fe,!0),()=>t(L))});var Oe=d(G,2),Pe=l(Oe);zt(Pe,{level:2,marginBottom:0,children:(Ae,Se)=>{var fe=S("User Guidelines");a(Ae,fe)},$$slots:{default:!0}});var Be=d(Pe,2);ua(Be,()=>({"--text-color":"var(--ds-color-secondary-a11)"})),W(Be.lastChild,{size:1,color:"neutral",block:!0,children:(Ae,Se)=>{var fe=gd(),Me=d(F(fe)),ne=l(Me);W(ne,{size:1,weight:"regular",children:(D,V)=>{var Q=S("Learn more");a(D,Q)},$$slots:{default:!0}}),a(Ae,fe)},$$slots:{default:!0}}),xn(d(Be,2),{get userGuidelines(){return v()},get userGuidelinesLengthLimit(){return e.userGuidelinesLengthLimit},get updateUserGuideline(){return g()}});var Je=d(re,2);(function(Ae,Se){ze(Se,!1);const fe=cn();let Me=Y(Se,"show",8,!1),ne=Y(Se,"errorMessage",8,""),D=ut(""),V=ut(void 0),Q=ut(!1);function ee(){t(D).trim()&&!t(Q)&&(m(Q,!0),fe("create",t(D).trim()))}function me(){t(Q)||(fe("cancel"),m(D,""))}function $e(ce){t(Q)||(ce.key==="Enter"?(ce.preventDefault(),ee()):ce.key==="Escape"&&(ce.preventDefault(),me()))}Ht(()=>(rt(Me()),t(V)),()=>{Me()&&t(V)&&setTimeout(()=>t(V)?.focus(),100)}),Ht(()=>(rt(Me()),rt(ne())),()=>{Me()&&!ne()||m(Q,!1)}),Ht(()=>(rt(Me()),rt(ne())),()=>{Me()||ne()||m(D,"")}),Da(),Ar(),Ga(Ae,{get show(){return Me()},title:"Create New Rule",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return t(Q)},get preventEscapeClose(){return t(Q)},$$events:{cancel:me,keydown:function(_e){t(Q)||_e.detail.key==="Enter"&&(_e.detail.preventDefault(),ee())}},body:_e=>{var Ne=jc(),Te=F(Ne);W(Te,{size:2,color:"secondary",children:(se,he)=>{var Re=S("Enter a name for the new rule file (e.g., architecture.md):");a(se,Re)},$$slots:{default:!0}});var xe=d(Te,2);er(xe,{placeholder:"rule-name.md",get disabled(){return t(Q)},get value(){return t(D)},set value(se){m(D,se)},get textInput(){return t(V)},set textInput(se){m(V,se)},$$events:{keydown:$e},$$legacy:!0});var ae=d(xe,2),Ie=se=>{vr(se,{variant:"soft",color:"error",size:1,icon:Re=>{pe(Re,{name:"circle-alert"})},children:(Re,Ee)=>{var ke=S();X(()=>le(ke,ne())),a(Re,ke)},$$slots:{icon:!0,default:!0}})};O(ae,se=>{ne()&&se(Ie)}),a(_e,Ne)},footer:_e=>{var Ne=Jc(),Te=F(Ne);Ge(Te,{variant:"solid",color:"neutral",get disabled(){return t(Q)},$$events:{click:me},children:(ae,Ie)=>{var se=S("Cancel");a(ae,se)},$$slots:{default:!0}});var xe=d(Te,2);{let ae=kt(()=>(t(D),t(Q),ct(()=>!t(D).trim()||t(Q))));Ge(xe,{variant:"solid",color:"accent",get disabled(){return t(ae)},get loading(){return t(Q)},$$events:{click:ee},children:(Ie,se)=>{var he=S();X(()=>le(he,t(Q)?"Creating...":"Create")),a(Ie,he)},$$slots:{default:!0}})}a(_e,Ne)},$$slots:{body:!0,footer:!0}}),Fe()})(Je,{get show(){return Le(I,"$showCreateRuleDialog",o)},get errorMessage(){return Le(N,"$createRuleError",o)},$$events:{create:function(Ae){y(hi(Ae.detail))},cancel:function(){y(qs("createRule"))}}});var Ze=d(Je,2);{let Ae=K(()=>Le(u,"$autoImportOptions",o)||[]);ad(Ze,{get show(){return Le(E,"$showAutoImportDialog",o)},get options(){return t(Ae)},get isLoading(){return Le(T,"$autoImportLoading",o)},get errorMessage(){return Le(b,"$autoImportError",o)},get successMessage(){return Le(R,"$autoImportSuccess",o)},$$events:{select:function(Se){const fe=Se.detail;y(di(fe))},cancel:function(){y(qs("autoImport")),y(ui("autoImport","")),y(vi("autoImport",""))}}})}a(n,z),Fe(),c()}class fd{constructor(e,r){this._callback=e,this.initialMS=r.initialMS,this.maxMS=r.maxMS,this.waitForCallback=r.waitForCallback??!0,this.backoffMultiplier=r.backoffMultiplier??2,this.autoBackoff=r.autoBackoff??!1,this.maxSteps=r.maxSteps,this.maxStepBehavior=r.maxStepBehavior??2,this.reset()}_currentTimeout=null;_currentIntervalMS;_steps;_isFixed;_initialMS;_maxMS;_backoffMultiplier;_maxSteps;waitForCallback;autoBackoff;maxStepBehavior;start(){this.stop(),this.reset(),this._schedule()}continue(){this._currentTimeout===null&&this._schedule()}stop(){this._currentTimeout!==null&&(clearTimeout(this._currentTimeout),this._currentTimeout=null)}reset(){this._currentIntervalMS=this._initialMS,this._steps=0,this._isFixed=!1}backoff(e=!1){if(!this._isFixed){if(this._maxSteps!==void 0&&this._steps>=this._maxSteps){if(this.maxStepBehavior===0)return void this.stop();this.maxStepBehavior===1&&this.reset()}else this._currentIntervalMS=Math.min(this._currentIntervalMS*this._backoffMultiplier,this._maxMS??1/0),this._steps++;e&&(this.stop(),this.continue())}}startFixedPolling(e){e<=0?console.warn("PollingManager: fixedPollingMS must be positive, ignoring fixed polling request"):(this._currentIntervalMS=e,this._isFixed=!0,this._steps=0,this.continue())}get isPolling(){return this._currentTimeout!==null}get currentInterval(){return this._currentIntervalMS}get isFixed(){return this._isFixed}dispose(){this.stop()}get initialMS(){return this._initialMS}set initialMS(e){e<=0?this._initialMS===void 0?(console.warn("PollingManager: initialMS value must be positive, using default value of 60 seconds"),this._initialMS=6e4):console.warn("PollingManager: initialMS value must be positive, keeping original value"):this._initialMS=e}get maxMS(){return this._maxMS}set maxMS(e){e!==void 0&&e<=0?console.warn("PollingManager: maxMS value must be positive, keeping original value"):this._maxMS=e}get backoffMultiplier(){return this._backoffMultiplier}set backoffMultiplier(e){e<1?this._backoffMultiplier===void 0?(console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, using default value of 2"),this._backoffMultiplier=2):console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, keeping original value"):this._backoffMultiplier=e}get maxSteps(){return this._maxSteps}set maxSteps(e){e!==void 0&&e<1?console.warn("PollingManager: maxSteps must be greater than or equal to 1"):this._maxSteps=e}_schedule(){this._currentTimeout=setTimeout(async()=>{const e=this._currentTimeout,r=this._safeExecute();this.waitForCallback&&await r,this._currentTimeout===e&&(this.autoBackoff&&!this._isFixed&&this.backoff(),this._currentTimeout===e&&this._schedule())},this._currentIntervalMS)}async _safeExecute(){try{await this._callback()}catch(e){console.error("Error in polling callback:",e)}}}class Gr{static CTX_KEY=Symbol("credit-model");_usageUnitsRemaining;_usageUnitsTotal;_includedUsageUnitsPerBillingCycle;_isCreditBalanceLow;_usageUnitDisplayName;_planDisplayName;_alertBanner;_refreshedAt;_daysLeftInPlan;_creditDetails;usageUnitsRemaining;usageUnitsTotal;usageUnitsUsed;includedUsageUnitsPerBillingCycle;isCreditBalanceLow;usageUnitDisplayName;planDisplayName;alertBanner;refreshedAt;daysLeftInPlan;creditDetails;constructor(){this._usageUnitsRemaining=It(0),this._usageUnitsTotal=It(0),this._includedUsageUnitsPerBillingCycle=It(0),this._isCreditBalanceLow=It(!1),this._usageUnitDisplayName=It("Credits"),this._planDisplayName=It("Plan"),this._alertBanner=It(void 0),this._refreshedAt=It(void 0),this._daysLeftInPlan=It(0),this._creditDetails=It([]),this.usageUnitsRemaining=br(this._usageUnitsRemaining),this.usageUnitsTotal=br(this._usageUnitsTotal),this.usageUnitsUsed=Ia([this.usageUnitsTotal,this.usageUnitsRemaining],([e,r])=>e-r),this.includedUsageUnitsPerBillingCycle=br(this._includedUsageUnitsPerBillingCycle),this.isCreditBalanceLow=br(this._isCreditBalanceLow),this.usageUnitDisplayName=Ia(this._usageUnitDisplayName,e=>e.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")),this.planDisplayName=br(this._planDisplayName),this.alertBanner=br(this._alertBanner),this.refreshedAt=br(this._refreshedAt),this.daysLeftInPlan=br(this._daysLeftInPlan),this.creditDetails=br(this._creditDetails)}static setInContext(e,r){Yr(Gr.CTX_KEY,{model:e,controller:r})}static getContext(){return xr(Gr.CTX_KEY)}static requireContext(){const e=Gr.getContext();if(!e)throw new Error("CreditModel context missing");return e}_getWritableStores(){return{usageUnitsRemaining:this._usageUnitsRemaining,usageUnitsTotal:this._usageUnitsTotal,includedUsageUnitsPerBillingCycle:this._includedUsageUnitsPerBillingCycle,isCreditBalanceLow:this._isCreditBalanceLow,usageUnitDisplayName:this._usageUnitDisplayName,planDisplayName:this._planDisplayName,alertBanner:this._alertBanner,refreshedAt:this._refreshedAt,daysLeftInPlan:this._daysLeftInPlan,creditDetails:this._creditDetails}}}class yd{constructor(e,r){this._model=e,this._extensionClient=r,this._stores=this._model._getWritableStores(),this._pollingManager=new fd(this.requestCreditInfo.bind(this),{initialMS:5e3,maxMS:6e4,backoffMultiplier:2})}_pollingManager;_stores;async startPolling(){await this.requestCreditInfo(),this._pollingManager.start()}async requestCreditInfo(){const e=await this._extensionClient.getCreditInfo();if(this._pollingManager.isPolling){if(e?.error)return void(e?.error.continuePolling?e?.error.backoff&&this._pollingManager.backoff():(this._reset(),this._pollingManager.startFixedPolling(6e4)));this._pollingManager.isFixed||this._pollingManager.reset()}if(e){const r=(s,i)=>{i!==void 0&&s.set(i)};if(r(this._stores.usageUnitsRemaining,e.usageUnitsRemaining),r(this._stores.usageUnitsTotal,e.usageUnitsTotal),r(this._stores.includedUsageUnitsPerBillingCycle,e.includedUsageUnitsPerBillingCycle),r(this._stores.isCreditBalanceLow,e.isCreditBalanceLow),r(this._stores.planDisplayName,e.displayInfo?.planDisplayName),r(this._stores.refreshedAt,e.refreshedAt),r(this._stores.creditDetails,e.creditDetails),this._stores.alertBanner.set(e.displayInfo?.banner),e.currentBillingCycleEndDateIso!==void 0){const s=new Date(e.currentBillingCycleEndDateIso).getTime()-Date.now();s<0?this._stores.daysLeftInPlan.set(-1):this._stores.daysLeftInPlan.set(Math.ceil(s/864e5))}}}async backgroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.startFixedPolling(6e4)}async foregroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.start()}async stop(){this._pollingManager.stop()}_reset(){this._stores.usageUnitsRemaining.set(0),this._stores.usageUnitsTotal.set(0),this._stores.includedUsageUnitsPerBillingCycle.set(0),this._stores.isCreditBalanceLow.set(!1),this._stores.usageUnitDisplayName.set("Credits"),this._stores.planDisplayName.set("Plan"),this._stores.alertBanner.set(void 0),this._stores.refreshedAt.set(void 0),this._stores.daysLeftInPlan.set(0),this._stores.creditDetails.set([])}dispose=()=>{this._pollingManager.dispose()}}var _d=f('<div class="c-account-category__plan-wrapper svelte-1ptxg1z"><div class="c-account-category__split c-account-category__plan-section c-account-category__sub-box svelte-1ptxg1z"><div class="c-account-category__split-left c-account-category__plan-details svelte-1ptxg1z"><!> <!></div> <div class="c-account-category__split-right c-account-category__plan-buttons svelte-1ptxg1z"><!></div></div></div>'),bd=f('<div class="ds-meter__indicator svelte-1wh49el"></div>'),Sd=f("<div><!></div>"),wd=f('<div class="c-account-category__banner-icon svelte-18qxvpu"><!></div>'),$d=f('<div class="c-account-category__split-right c-account-category__banner-buttons svelte-18qxvpu"><!></div>'),Ed=f('<div class="c-account-category__banner-wrapper svelte-18qxvpu"><div class="c-account-category__split c-account-category__banner-section svelte-18qxvpu"><div class="c-account-category__split-left c-account-category__banner-details svelte-18qxvpu"><!> <div class="c-account-category__banner-text svelte-18qxvpu"><!></div></div> <!></div></div>');function Ad(n,e){ze(e,!0);const r=lr(),s=()=>{r.track(St.WEBVIEW.CREDIT_BANNER_CLICKED,{message:e.message,button:e.button})},i=K(()=>(N=>{switch(N){case aa.PROMOTION:case aa.WARNING:case aa.ALERT:return"info";case aa.INFO:case aa.BANNER_DISPLAY_STYLE_UNKNOWN:default:return"check"}})(e.displayStyle));var o=Ed(),c=l(o),v=l(c),h=l(v),g=N=>{var T=wd(),u=l(T);pe(u,{get name(){return t(i)}}),a(N,T)};O(h,N=>{t(i)!==void 0&&N(g)});var y=d(h,2),w=l(y);W(w,{size:1,weight:"light",children:(N,T)=>{var u=S();X(()=>le(u,e.message)),a(N,u)},$$slots:{default:!0}});var k=d(v,2),I=N=>{var T=$d(),u=l(T);{let E=K(()=>e.button?.url);Ge(u,{variant:"soft",color:"neutral",size:2,get href(){return t(E)},onclick:s,asAnchor:!0,children:(R,b)=>{W(R,{size:1,weight:"medium",children:(_,A)=>{var C=S();X(()=>le(C,e.button?.title)),a(_,C)},$$slots:{default:!0}})},$$slots:{default:!0}})}a(N,T)};O(k,N=>{e.button?.title&&N(I)}),a(n,o),Fe()}var Cd=f('<div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left svelte-cothnq"><!></div> <div class="c-account-category__split-right svelte-cothnq"><!></div></div>'),Td=f('<div class="c-account-category__credits-box svelte-cothnq"><div class="c-account-category__credits-upper svelte-cothnq"><div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left c-account-category__credits-title svelte-cothnq"><!> <!> <!></div> <div class="c-account-category__split-right c-account-category__credits-count svelte-cothnq"><!></div></div> <!></div> <div class="c-account-category__credits-lower svelte-cothnq"><div class="c-account-category__credits-stats svelte-cothnq"></div> <!></div></div>');function Rd(n,e){ze(e,!0);const r=Y(e,"enableCreditBannerInSettings",3,!0);var s=Td(),i=l(s),o=l(i),c=l(o),v=l(c);pe(v,{name:"tokens",size:3});var h=d(v,2);W(h,{size:2,weight:"medium",children:(R,b)=>{var _=S();X(()=>le(_,e.usageUnitDisplayName)),a(R,_)},$$slots:{default:!0}});var g=d(h,2),y=R=>{var b=ge(),_=F(b);qe(_,()=>yr.Root,(A,C)=>{C(A,{color:"error",size:1,children:(M,p)=>{var $=S("Out of Credits");a(M,$)},$$slots:{default:!0}})}),a(R,b)};O(g,R=>{e.usageUnitsTotal<=e.usageUnitsUsed&&R(y)});var w=d(c,2),k=l(w);W(k,{size:2,weight:"medium",children:(R,b)=>{var _=S();X((A,C)=>le(_,`${A??""} / ${C??""}`),[()=>e.usageUnitsUsed.toLocaleString("en-US"),()=>e.usageUnitsTotal.toLocaleString("en-US")]),a(R,_)},$$slots:{default:!0}});var I=d(o,2);{let R=K(()=>e.isCreditBalanceLow?"error":"accent");(function(b,_){ze(_,!0),Y(_,"ref",11,null);let A=Y(_,"max",3,100),C=Y(_,"min",3,0),M=Y(_,"value",3,0),p=Y(_,"color",3,"accent"),$=Y(_,"size",3,2),L=Y(_,"labelledby",19,Yi),z=$r(_,["$$slots","$$events","$$legacy","ref","class","max","min","value","color","size","labelledby"]);const x=K(()=>Math.min(100,Math.max(0,(M()-C())/(A()-C())*100)));var U=Sd();wr(U,re=>({...re,class:["ds-meter",`ds-meter--size-${$()}`,_.class]}),[()=>un(p())],void 0,"svelte-1wh49el");var J=l(U);qe(J,()=>po,(re,G)=>{G(re,ns({get"aria-labelledby"(){return L()},get"aria-valuetext"(){return`${M()??""} out of ${A()??""}`},class:"ds-meter__root",get value(){return M()},get min(){return C()},get max(){return A()}},()=>z,{children:(ie,H)=>{var B=bd();let q;X(oe=>q=As(B,"",q,oe),[()=>({"--meter-percentage":`${t(x)??""}%`})]),a(ie,B)},$$slots:{default:!0}}))}),a(b,U),Fe()})(I,{get value(){return e.usageUnitsUsed},get max(){return e.usageUnitsTotal},get color(){return t(R)},size:1,get"aria-label"(){return e.usageUnitDisplayName}})}var N=d(i,2),T=l(N);gt(T,21,()=>e.creditDetails,pr,(R,b)=>{var _=Cd(),A=l(_),C=l(A);W(C,{size:2,weight:"regular",color:"secondary",children:($,L)=>{var z=S();X(()=>le(z,t(b).label)),a($,z)},$$slots:{default:!0}});var M=d(A,2),p=l(M);W(p,{size:2,weight:"regular",color:"secondary",children:($,L)=>{var z=S();X(x=>le(z,x),[()=>(t(b).amount??0).toLocaleString("en-US")]),a($,z)},$$slots:{default:!0}}),a(R,_)});var u=d(T,2),E=R=>{Ad(R,ns(()=>e.alertBanner))};O(u,R=>{(b=>{if(!e.alertBanner?.message||!r())return!1;switch(b){case Sa.REQUIRE_PAYMENT_FOR_TRIAL:case Sa.USAGE_BALANCE_DEPLETED:case Sa.USAGE_BALANCE_LOW:break;case Sa.BANNER_TYPE_UNKNOWN:default:return!1}return!0})(e.alertBanner?.bannerType)&&R(E)}),a(n,s),Fe()}var kd=f('<div class="c-account-category__plan-usage-body svelte-126fk15"><!> <!> <!></div>');function Id(n,e){const r=Y(e,"enableCreditBannerInSettings",3,!0);var s=kd(),i=l(s);(function(v,h){ze(h,!0);const g=lr(),y=K(()=>(b=>{switch(b){case"Enterprise Plan":case"Enterprise":return{backgroundColor:"var(--ds-color-success-3)",nameColor:"var(--ds-color-success-10)",badgeColor:"success",buttonColor:"success"};case"Max Plan":case"Max":return{backgroundColor:"var(--ds-color-premium-3)",nameColor:"var(--ds-color-premium-10)",badgeColor:"premium",buttonColor:"premium"};case"Indie Plan":case"Developer Plan":case"Standard Plan":case"Indie":case"Developer":case"Standard":return{backgroundColor:"var(--ds-color-gold-3)",nameColor:"var(--ds-color-gold-10)",badgeColor:"gold",buttonColor:"gold"};default:return{backgroundColor:"var(--ds-color-accent-a3)",nameColor:"var(--ds-color-accent-10)",badgeColor:"accent",buttonColor:"accent"}}})(h.planDisplayName));var w=_d(),k=l(w),I=l(k),N=l(I);W(N,{size:2,weight:"medium",color:"neutral",children:(b,_)=>{var A=S();X(()=>le(A,h.planDisplayName)),a(b,A)},$$slots:{default:!0}});var T=d(N,2),u=b=>{var _=ge(),A=F(_);qe(A,()=>yr.Root,(C,M)=>{M(C,{variant:"solid",get color(){return t(y).badgeColor},size:1,children:(p,$)=>{var L=S();X(z=>le(L,`${z??""}
          ${h.usageUnitDisplayName??""}/Cycle`),[()=>h.includedUsageUnitsPerBillingCycle.toLocaleString("en-US")]),a(p,L)},$$slots:{default:!0}})}),a(b,_)};O(T,b=>{h.includedUsageUnitsPerBillingCycle>0&&b(u)});var E=d(I,2),R=l(E);Ge(R,{variant:"soft",color:"neutral",href:"https://app.augmentcode.com/account",onclick:()=>{g.track(St.WEBVIEW.CREDIT_MANAGE_PLAN_CLICKED,{currentPlanName:h.planDisplayName})},asAnchor:!0,children:(b,_)=>{W(b,{size:1,weight:"medium",children:(A,C)=>{var M=S("Manage Plan");a(A,M)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(v,w),Fe()})(i,{get planDisplayName(){return e.planDisplayName},get includedUsageUnitsPerBillingCycle(){return e.includedUsageUnitsPerBillingCycle},get usageUnitDisplayName(){return e.usageUnitDisplayName}});var o=d(i,2);Rd(o,{get usageUnitsTotal(){return e.usageUnitsTotal},get usageUnitsUsed(){return e.usageUnitsUsed},get isCreditBalanceLow(){return e.isCreditBalanceLow},get usageUnitDisplayName(){return e.usageUnitDisplayName},get creditDetails(){return e.creditDetails},get alertBanner(){return e.alertBanner},get enableCreditBannerInSettings(){return r()}});var c=d(o,2);W(c,{size:2,color:"secondary",children:(v,h)=>{var g=S();X(()=>le(g,`Your cycle renews in: ${e.daysLeftInPlan??""}
    ${e.daysLeftInPlan===1?"day":"days"}`)),a(v,g)},$$slots:{default:!0}}),a(n,s)}var Nd=f('<div class="c-account-category__split-left c-account-category__account-info-details svelte-1mj35xg"><!></div>'),xd=f('<div class="c-account-category"><!> <div class="c-account-category__split c-account-category__account-info-section svelte-1mj35xg"><!> <div class="c-account-category__split-right c-account-category__account-info-buttons svelte-1mj35xg"><!> <!></div></div> <!></div>');function sn(n,e){ze(e,!0);const r=()=>Le(N,"$planDisplayName",i),s=()=>Le(h,"$userEmail",i),[i,o]=Vt(),c=ar("enableCreditsInSettings"),v=ar("enableCreditBannerInSettings"),h=xr(va.key).getUserEmail(),{model:g}=Gr.requireContext(),y=lr(),{usageUnitsTotal:w,usageUnitsUsed:k,includedUsageUnitsPerBillingCycle:I,planDisplayName:N,isCreditBalanceLow:T,usageUnitDisplayName:u,daysLeftInPlan:E,creditDetails:R,alertBanner:b,refreshedAt:_}=g,A=()=>{y.track(St.WEBVIEW.ACCOUNT_SIGN_OUT_CLICKED,{}),e.onSignOut()};var C=xd(),M=l(C);zt(M,{level:1,children:(G,ie)=>{var H=S("Account");a(G,H)},$$slots:{default:!0}});var p=d(M,2),$=l(p),L=G=>{var ie=Nd(),H=l(ie);W(H,{size:2,color:"secondary",children:(B,q)=>{var oe=S();X(()=>le(oe,`Signed in as ${s()??""}`)),a(B,oe)},$$slots:{default:!0}}),a(G,ie)};O($,G=>{s()&&G(L)});var z=d($,2),x=l(z);Ge(x,{size:1,variant:"soft",color:"neutral","data-testid":"manage-account-button",onclick:()=>{y.track(St.WEBVIEW.ACCOUNT_MANAGE_ACCOUNT_CLICKED,{currentPlanName:r()})},href:"https://app.augmentcode.com/account",asAnchor:!0,children:(G,ie)=>{var H=S("Manage account");a(G,H)},$$slots:{default:!0}});var U=d(x,2);Ge(U,{size:1,variant:"solid",onclick:A,"data-testid":"sign-out-button",iconLeft:ie=>{pe(ie,{name:"log-out"})},children:(ie,H)=>{var B=S("Sign out");a(ie,B)},$$slots:{iconLeft:!0,default:!0}});var J=d(p,2),re=G=>{Sn(G,{title:"Plan & usage",children:(ie,H)=>{Id(ie,{get usageUnitsTotal(){return Le(w,"$usageUnitsTotal",i)},get usageUnitsUsed(){return Le(k,"$usageUnitsUsed",i)},get includedUsageUnitsPerBillingCycle(){return Le(I,"$includedUsageUnitsPerBillingCycle",i)},get planDisplayName(){return r()},get isCreditBalanceLow(){return Le(T,"$isCreditBalanceLow",i)},get usageUnitDisplayName(){return Le(u,"$usageUnitDisplayName",i)},get daysLeftInPlan(){return Le(E,"$daysLeftInPlan",i)},get creditDetails(){return Le(R,"$creditDetails",i)},get alertBanner(){return Le(b,"$alertBanner",i)},get enableCreditBannerInSettings(){return Le(v,"$enableCreditBannerInSettings",i)}})},$$slots:{default:!0}})};O(J,G=>{Le(_,"$refreshedAt",i)&&Le(c,"$enableCreditsInSettings",i)&&G(re)}),a(n,C),Fe(),o()}var Md=f('<div class="c-memory-setting__info svelte-1qjbunu"><div><!></div> <div><!></div></div>'),Pd=f('<div class="c-memory-settings svelte-1qjbunu"><!> <!></div>');const Wr=Object.freeze(ft(hn,{}));var Od=f(`Memories are facts and preferences that Augment Agent learns and remembers across
      conversations. <a href="https://docs.augmentcode.com/using-augment/agent#agent-memories" target="_blank" rel="noopener noreferrer"><!></a>`,1),Ud=f('<div class="c-memories-loading svelte-16nyq1"><!> <!></div>'),Ld=f('<div class="c-memories-error svelte-16nyq1"><!></div>'),zd=f('<div class="l-memories-page svelte-16nyq1"><!> <div class="c-memories-settings-section svelte-16nyq1"><!></div> <div class="c-memories-editor-section svelte-16nyq1"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <div class="c-memories-editor-container svelte-16nyq1"><!></div></div></div>');function Fd(n,e){ze(e,!0);let r=ye(null),s=ye(null),i=ye(!0),o=ye(null);async function c(E){await(await Ut(Lt)).saveMemoriesFile({content:E})}tr(async()=>{await async function(){try{m(i,!0),m(o,null);const E=await Ut(Lt),R=await E.loadMemoriesFile(Wr);R.path?(m(s,R.path,!0),m(r,R.content??"",!0)):m(o,"Memories file path not available")}catch(E){console.error("Failed to load memories file:",E),m(o,"Failed to load memories file")}finally{m(i,!1)}}()});var v=zd(),h=l(v);zt(h,{level:1,children:(E,R)=>{var b=S("Memories");a(E,b)},$$slots:{default:!0}});var g=d(h,2);(function(E,R){ze(R,!0);let b=ye(!1);const _=new za(Pt.postMessage);async function A(){const p=!t(b);m(b,p);try{await _.sendToSidecar({type:Na.updateMemorySettings,data:{enabled:p}},5e3)}catch($){console.error("Failed to update memory settings:",$),m(b,!p)}}tr(async()=>{try{const p=await _.sendToSidecar({type:Na.getMemorySettings},5e3);m(b,p.data?.enabled??!1,!0)}catch(p){console.error("Failed to load memory settings:",p)}});var C=Pd(),M=l(C);zt(M,{level:2,marginBottom:0,children:(p,$)=>{var L=S("Memory Settings");a(p,L)},$$slots:{default:!0}});{const p=L=>{var z=Md(),x=l(z),U=l(x);W(U,{size:2,children:(G,ie)=>{var H=S("Enable Memory");a(G,H)},$$slots:{default:!0}});var J=d(x,2),re=l(J);W(re,{size:1,children:(G,ie)=>{var H=S("Allow Augment to remember information from your conversations");a(G,H)},$$slots:{default:!0}}),a(L,z)},$=L=>{Nr(L,{size:1,get checked(){return t(b)},ariaLabel:"Enable memory",onchange:A})};Kt(d(M,2),{headerLeft:p,headerRight:$,$$slots:{headerLeft:!0,headerRight:!0}})}a(E,C),Fe()})(l(g),{});var y=d(g,2),w=l(y);zt(w,{level:2,marginBottom:0,children:(E,R)=>{var b=S("Agent Memories");a(E,b)},$$slots:{default:!0}});var k=d(w,2);ua(k,()=>({"--text-color":"var(--ds-color-secondary-a11)"})),W(k.lastChild,{size:1,color:"neutral",block:!0,children:(E,R)=>{var b=Od(),_=d(F(b)),A=l(_);W(A,{size:1,weight:"regular",children:(C,M)=>{var p=S("Learn more");a(C,p)},$$slots:{default:!0}}),a(E,b)},$$slots:{default:!0}});var I=d(k,2),N=l(I),T=E=>{var R=Ud(),b=l(R);Hr(b,{size:1});var _=d(b,2);W(_,{size:1,color:"secondary",children:(A,C)=>{var M=S("Loading memories...");a(A,M)},$$slots:{default:!0}}),a(E,R)},u=E=>{var R=ge(),b=F(R),_=C=>{var M=Ld(),p=l(M);W(p,{size:1,color:"secondary",children:($,L)=>{var z=S();X(()=>le(z,t(o))),a($,z)},$$slots:{default:!0}}),a(C,M)},A=C=>{var M=ge(),p=F(M),$=L=>{uo(L,{get text(){return t(r)},get path(){return t(s)},onSaveFile:c})};O(p,L=>{t(r)!==null&&t(s)!==null&&L($)},!0),a(C,M)};O(b,C=>{t(o)?C(_):C(A,!1)},!0),a(E,R)};O(N,E=>{t(i)?E(T):E(u,!1)}),a(n,v),Fe()}var Dd=f('<div class="c-feature-flag-editor__count svelte-1ab37k5"><!></div>'),Bd=f('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!> <!> <!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div>'),Wd=f('<div class="c-feature-flag-editor__json-error svelte-1ab37k5"><!></div>'),Gd=f('<div class="c-feature-flag-editor__json-editor svelte-1ab37k5"><!> <!> <div class="c-feature-flag-editor__json-actions svelte-1ab37k5"><!> <!></div></div>'),Hd=f('<div class="c-feature-flag-editor__json-display svelte-1ab37k5"><div class="c-feature-flag-editor__json-preview svelte-1ab37k5"><pre class="c-feature-flag-editor__json-code svelte-1ab37k5"> </pre></div> <!></div>'),qd=f('<div class="c-feature-flag-editor__item-control svelte-1ab37k5"><!> <!> <!></div>'),Vd=f('<div class="c-feature-flag-editor__search svelte-1ab37k5"><!> <!></div> <!> <div class="c-feature-flag-editor__list svelte-1ab37k5"></div>',1),jd=f('<div class="c-feature-flag-editor svelte-1ab37k5"><!> <!></div>');function Jd(n,e){ze(e,!0);let r=Y(e,"onFlagToggle",19,()=>{});const s=new Set(["eloModelConfiguration","memoriesParams","modelRegistry","modelInfoRegistry","additionalChatModels","agentViewToolParams"]);let i=ye(null),o=ye(null),c=ye(ur({})),v=ye(ur(new Set)),h=ye(""),g=ye(ur(new Map)),y=ye(ur(new Map)),w=K(()=>{const p=wa.fields.findIndex($=>$.name==="enable_onboarding_v2");return new Map(wa.fields.map(($,L)=>[$.localName,L<=p]))});function k(p){return p.replace(/([A-Z])/g," $1").replace(/^./,$=>$.toUpperCase()).trim()}function I(p){if(p==null)return"";switch(typeof p){case"string":return p;case"bigint":case"number":case"boolean":return p.toString();default:return JSON.stringify(p)}}let N=K(()=>{return t(o)?(p=t(o),wa.fields.map($=>{const L=$.localName;return{name:L,value:I(p[L]),field:$}}).sort(($,L)=>$.name.localeCompare(L.name))):[];var p}),T=K(()=>{if(!t(h).trim())return t(N);const p=t(h).toLowerCase().trim();return t(N).filter($=>{const L=k($.name).toLowerCase(),z=$.name.toLowerCase();return L.includes(p)||z.includes(p)})});async function u(){try{m(i,null);const[p,$]=await Promise.all([Ut(fi),Ut(Lt)]),[L,z]=await Promise.all([p.featureFlags({},{timeoutMs:15e3}),$.getFeatureFlagOverrides({},{timeoutMs:15e3})]);if(!L.featureFlags)throw new Error("No feature flags returned from service");m(o,L.featureFlags,!0);try{m(c,JSON.parse(z.overridesJson||"{}"),!0)}catch{m(c,{},!0)}}catch(p){m(i,p instanceof Error?p.message:"Failed to load feature flags",!0),console.error("Error loading feature flags:",p)}}function E(p){try{const $=JSON.parse(p);return JSON.stringify($,null,2)}catch{return p}}async function R(p,$){m(v,new Set(t(v)).add(p),!0);const L=function(z,x){const U=wa.fields.find(J=>J.localName===x);if(!U)return z;switch(U.scalar){case bt.BOOL:return z==="true";case bt.BYTES:case bt.STRING:return z+"";case bt.FLOAT:case bt.SFIXED32:case bt.SFIXED64:case bt.INT32:case bt.UINT32:case bt.FIXED32:case bt.DOUBLE:case bt.INT64:return Number(z);default:try{return JSON.parse(z)}catch{return z}}}($,p);try{const z=await Ut(Lt),x=await z.updateFeatureFlagOverrides({flagName:p,valueJson:JSON.stringify(L)});if(!x.success)throw new Error(x.error||"Failed to update feature flag");t(o)&&m(o,{...t(o),[p]:L},!0),m(c,{...t(c),[p]:L},!0),r()?.(p,L)}catch(z){m(i,z instanceof Error?z.message:"Failed to update feature flag",!0),console.error("Error updating feature flag:",z)}finally{const z=new Set(t(v));z.delete(p),m(v,z,!0)}}tr(u);var b=jd(),_=l(b),A=p=>{vr(p,{color:"error",children:($,L)=>{W($,{size:1,children:(z,x)=>{var U=S();X(()=>le(U,t(i))),a(z,U)},$$slots:{default:!0}})},$$slots:{default:!0}})};O(_,p=>{t(i)&&p(A)});var C=d(_,2),M=p=>{var $=ge(),L=F($),z=U=>{vr(U,{color:"info",children:(J,re)=>{W(J,{size:1,children:(G,ie)=>{var H=S("No feature flags available.");a(G,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},x=U=>{var J=Vd(),re=F(J),G=l(re);er(G,{get value(){return t(h)},oninput:j=>m(h,j.target.value,!0),placeholder:"Search by name or field...",ariaLabel:"Search feature flags",size:1});var ie=d(G,2),H=j=>{Nt(j,{size:1,variant:"ghost",onclick:()=>m(h,""),"aria-label":"Clear search",children:(P,Z)=>{pe(P,{name:"x",size:2})},$$slots:{default:!0}})};O(ie,j=>{t(h)&&j(H)});var B=d(re,2),q=j=>{vr(j,{color:"info",children:(P,Z)=>{W(P,{size:1,children:(ue,ve)=>{var be=S();X(()=>le(be,`No feature flags match "${t(h)??""}"`)),a(ue,be)},$$slots:{default:!0}})},$$slots:{default:!0}})},oe=j=>{var P=Dd(),Z=l(P);W(Z,{size:0,color:"secondary",children:(ue,ve)=>{var be=S();X(()=>le(be,`Showing ${t(T).length??""} of ${t(N).length??""} flags`)),a(ue,be)},$$slots:{default:!0}}),a(j,P)};O(B,j=>{t(T).length===0?j(q):j(oe,!1)});var te=d(B,2);gt(te,21,()=>t(T),j=>j.name,(j,P)=>{Kt(j,{headerLeft:ve=>{var be=Bd(),we=l(be),Oe=l(we);W(Oe,{size:1,children:(fe,Me)=>{var ne=S();X(D=>le(ne,D),[()=>k(t(P).name)]),a(fe,ne)},$$slots:{default:!0}});var Pe=d(Oe,2);W(Pe,{size:0,color:"secondary",children:(fe,Me)=>{var ne=S();X(D=>le(ne,`v${D??""}`),[()=>t(w).get(t(P).name)?"1":"2"]),a(fe,ne)},$$slots:{default:!0}});var Be=d(Pe,2),Je=fe=>{var Me=ge(),ne=F(Me);qe(ne,()=>yr.Root,(D,V)=>{V(D,{color:"accent",variant:"soft",size:0,children:(Q,ee)=>{var me=S("Overridden");a(Q,me)},$$slots:{default:!0}})}),a(fe,Me)};O(Be,fe=>{t(P).name in t(c)&&fe(Je)});var Ze=d(we,2),Ae=l(Ze);W(Ae,{size:0,color:"secondary",children:(fe,Me)=>{var ne=S();X(()=>le(ne,t(P).name)),a(fe,ne)},$$slots:{default:!0}});var Se=d(Ae,2);W(Se,{size:0,color:"secondary",children:(fe,Me)=>{var ne=S();X(D=>le(ne,` Type: ${D??""}`),[()=>function(D){if(!D.scalar)return"unknown";switch(D.scalar){case bt.BOOL:return"boolean";case bt.STRING:return"string";case bt.INT32:case bt.UINT32:case bt.FIXED32:case bt.SFIXED32:return"number (32-bit)";case bt.INT64:case bt.UINT64:case bt.FIXED64:case bt.SFIXED64:return"number (64-bit)";case bt.FLOAT:return"float";case bt.DOUBLE:return"double";case bt.BYTES:return"bytes";default:return"unknown"}}(t(P).field)]),a(fe,ne)},$$slots:{default:!0}}),a(ve,be)},headerRight:ve=>{var be=qd(),we=l(be),Oe=Se=>{Hr(Se,{size:1})};O(we,Se=>{t(v).has(t(P).name)&&Se(Oe)});var Pe=d(we,2),Be=Se=>{{let fe=K(()=>[ya.Hover]);qt(Se,{content:"Reset to default",get triggerOn(){return t(fe)},children:(Me,ne)=>{{let D=K(()=>`Reset ${k(t(P).name)} to default`);Nt(Me,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>async function(V){m(v,new Set(t(v)).add(V),!0);try{const Q=await Ut(Lt),ee=await Q.resetFeatureFlagOverride({flagName:V});if(!ee.success)throw new Error(ee.error||"Failed to reset feature flag");const{[V]:me,...$e}=t(c);m(c,$e,!0),await u(),r()?.(V,t(o)?.[V])}catch(Q){m(i,Q instanceof Error?Q.message:"Failed to reset feature flag",!0),console.error("Error resetting feature flag:",Q)}finally{const Q=new Set(t(v));Q.delete(V),m(v,Q,!0)}}(t(P).name),get"aria-label"(){return t(D)},children:(V,Q)=>{pe(V,{name:"undo-2",size:1})},$$slots:{default:!0}})}},$$slots:{default:!0}})}};O(Pe,Se=>{t(P).name in t(c)&&Se(Be)});var Je=d(Pe,2),Ze=Se=>{{let fe=K(()=>t(P).value==="true"),Me=K(()=>`Toggle ${k(t(P).name)}`);Nr(Se,{get checked(){return t(fe)},onchange:()=>R(t(P).name,t(P).value==="true"?"false":"true"),get ariaLabel(){return t(Me)}})}},Ae=Se=>{var fe=ge(),Me=F(fe),ne=V=>{var Q=ge(),ee=F(Q),me=ce=>{var Ce=Gd(),_e=l(Ce);{let se=K(()=>t(g).get(t(P).name)??"");Wa(_e,{get value(){return t(se)},oninput:he=>{const Re=he.target.value;m(g,new Map(t(g)).set(t(P).name,Re),!0)},rows:10,resize:"vertical",placeholder:"Enter valid JSON...",class:"c-feature-flag-editor__json-textarea",autoresize:!1})}var Ne=d(_e,2),Te=se=>{var he=Wd(),Re=l(he);vr(Re,{color:"error",children:(Ee,ke)=>{W(Ee,{size:0,children:(it,tt)=>{var at=S();X(Xe=>le(at,Xe),[()=>t(y).get(t(P).name)]),a(it,at)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(se,he)};O(Ne,se=>{t(y).has(t(P).name)&&se(Te)});var xe=d(Ne,2),ae=l(xe);Ge(ae,{size:1,variant:"ghost",color:"neutral",onclick:()=>function(se){const he=new Map(t(g));he.delete(se),m(g,he,!0);const Re=new Map(t(y));Re.delete(se),m(y,Re,!0)}(t(P).name),children:(se,he)=>{var Re=S("Cancel");a(se,Re)},$$slots:{default:!0}});var Ie=d(ae,2);Ge(Ie,{size:1,variant:"solid",color:"accent",onclick:()=>async function(se){const he=t(g).get(se);if(!he)return;try{JSON.parse(he);const Ee=new Map(t(y));Ee.delete(se),m(y,Ee,!0)}catch(Ee){const ke=Ee instanceof Error?Ee.message:"Invalid JSON";return void m(y,new Map(t(y)).set(se,ke),!0)}await R(se,he);const Re=new Map(t(g));Re.delete(se),m(g,Re,!0)}(t(P).name),children:(se,he)=>{var Re=S("Save");a(se,Re)},$$slots:{default:!0}}),a(ce,Ce)},$e=ce=>{var Ce=Hd(),_e=l(Ce),Ne=l(_e),Te=l(Ne),xe=d(_e,2);Ge(xe,{size:1,variant:"soft",color:"neutral",onclick:()=>function(ae,Ie){const se=E(Ie);m(g,new Map(t(g)).set(ae,se),!0);const he=new Map(t(y));he.delete(ae),m(y,he,!0)}(t(P).name,t(P).value),children:(ae,Ie)=>{var se=S("Edit JSON");a(ae,se)},$$slots:{default:!0,iconLeft:(ae,Ie)=>{pe(ae,{slot:"iconLeft",name:"pencil",size:1})}}}),X(ae=>le(Te,ae),[()=>E(t(P).value)]),a(ce,Ce)};O(ee,ce=>{t(g).has(t(P).name)?ce(me):ce($e,!1)}),a(V,Q)},D=V=>{{let Q=K(()=>I(t(P).value));er(V,{get value(){return t(Q)},size:1,onchange:ee=>R(t(P).name,ee.target?.value??"")})}};O(Me,V=>{var Q;Q=t(P).name,s.has(Q)?V(ne):V(D,!1)},!0),a(Se,fe)};O(Je,Se=>{t(P).field.scalar===bt.BOOL?Se(Ze):Se(Ae,!1)}),a(ve,be)},$$slots:{headerLeft:!0,headerRight:!0}})}),a(U,J)};O(L,U=>{t(N).length===0?U(z):U(x,!1)}),a(p,$)};O(C,p=>{t(o)&&p(M)}),a(n,b),Fe()}var Kd=f("<!> <!>",1),Yd=f('<div class="c-beta-category__opt-in-info svelte-f1yfdj"><!> <!></div>'),Xd=f('<div class="c-beta-category__feature-info svelte-f1yfdj"><div class="c-beta-category__feature-title svelte-f1yfdj"><!> <!></div> <!></div>'),Zd=f('<div class="c-beta-category__features svelte-f1yfdj"><!> <div class="c-beta-category__features-list svelte-f1yfdj"></div></div>'),Qd=f('<div class="c-beta-category svelte-f1yfdj"><!> <div class="c-beta-category__opt-in-all svelte-f1yfdj"><!></div> <!></div>');function eu(n,e){ze(e,!0);const r=()=>Le(v,"$rolledOutFlags",i),s=()=>Le(g,"$publicBetaOptInAll",i),[i,o]=Vt(),c=lr(),v=yi(),h=_i(),g=ar(Ka),y=ar("enableDebugFeatures"),w=K(()=>bi.filter(b=>!r().has(b.originalFlag)||Le(y,"$enableDebugFeatures",i)).map(b=>({...b,betaFlagValue:Le(h,"$betaFlagValues",i)[b.betaFlag],isRolledOut:r().has(b.originalFlag)})));async function k(b,_){try{const A=await Ut(Lt),C=await A.updateFeatureFlagOverrides({flagName:b,valueJson:JSON.stringify(_)});if(!C.success)return void console.error(`Failed to update beta flag: ${C.error}`);e.onUpdateFlags({flagName:b,value:_})}catch(A){console.error("Error updating beta flag:",A)}}tr(()=>{c.track(St.WEBVIEW.BETA_PAGE_VIEWED,{})});const I=async b=>{const _=b.target;await k(Ka,_.checked),c.track(St.WEBVIEW.BETA_FLAG_CHANGED,{flagName:Ka,newValue:_.checked})};var N=Qd(),T=l(N);zt(T,{level:1,children:(b,_)=>{var A=S("Beta");a(b,A)},$$slots:{default:!0}});var u=d(T,2);{const b=A=>{var C=Yd(),M=l(C);W(M,{size:2,block:!0,children:($,L)=>{var z=S("Opt in to all beta features");a($,z)},$$slots:{default:!0}});var p=d(M,2);W(p,{size:1,color:"secondary",children:($,L)=>{var z=S();X(()=>le(z,s()?"You will receive all beta features automatically":"You can choose individual beta features below")),a($,z)},$$slots:{default:!0}}),a(A,C)},_=A=>{Nr(A,{get checked(){return s()},onchange:I,size:2,ariaLabel:"Opt in to all beta features"})};Kt(l(u),{class:"c-beta-category__card",headerLeft:b,headerRight:_,$$slots:{headerLeft:!0,headerRight:!0}})}var E=d(u,2),R=b=>{var _=Zd(),A=l(_);zt(A,{level:2,marginBottom:2,children:(M,p)=>{var $=S("Features");a(M,$)},$$slots:{default:!0}});var C=d(A,2);gt(C,21,()=>t(w),pr,(M,p)=>{Kt(M,{class:"c-beta-category__card",headerLeft:z=>{var x=Xd(),U=l(x),J=l(U);W(J,{size:2,children:(H,B)=>{var q=S();X(()=>le(q,t(p).name)),a(H,q)},$$slots:{default:!0}});var re=d(J,2),G=H=>{qt(H,{get content(){return`Original flag '${t(p).originalFlag??""}' is true, so beta flag '${t(p).betaFlag??""}' has no effect. This item is hidden for users without debug mode enabled.`},side:"top",children:(B,q)=>{var oe=ge(),te=F(oe);qe(te,()=>yr.Root,(j,P)=>{P(j,{color:"neutral",variant:"soft",size:0,children:(Z,ue)=>{var ve=S("rolled out");a(Z,ve)},$$slots:{default:!0}})}),a(B,oe)},$$slots:{default:!0}})};O(re,H=>{t(p).isRolledOut&&H(G)});var ie=d(U,2);W(ie,{size:1,color:"secondary",children:(H,B)=>{var q=S();X(()=>le(q,t(p).description)),a(H,q)},$$slots:{default:!0}}),a(z,x)},headerRight:z=>{{let x=K(()=>t(p).isRolledOut||s()||t(p).betaFlagValue),U=K(()=>(re=>async G=>{const ie=G.target;await k(re.betaFlag,ie.checked),c.track(St.WEBVIEW.BETA_FLAG_CHANGED,{flagName:re.betaFlag,newValue:ie.checked})})(t(p))),J=K(()=>t(p).isRolledOut?`${t(p).name} (rolled out)`:`Toggle ${t(p).name}`);Nr(z,{get checked(){return t(x)},get onchange(){return t(U)},get disabled(){return s()},size:2,get ariaLabel(){return t(J)}})}},$$slots:{headerLeft:!0,headerRight:!0}})}),a(b,_)};O(E,b=>{t(w).length>0&&b(R)}),a(n,N),Fe(),o()}var tu=f('<div class="c-table-augment svelte-1pcrcvp"><table><!></table></div>'),ru=f("<tbody><!></tbody>"),au=f("<td><!></td>"),su=f("<th><!></th>"),nu=f("<thead><!></thead>"),iu=f("<tr><!></tr>");const jt={Root:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=Y(e,"size",3,"2"),i=Y(e,"variant",3,"default"),o=Y(e,"overflow",3,"auto"),c=$r(e,["$$slots","$$events","$$legacy","ref","class","size","variant","overflow","children"]);var v=tu(),h=l(v);wr(h,()=>({class:["c-table-augment__table",e.class],"data-table-augment-size":s(),...c}),void 0,void 0,"svelte-1pcrcvp");var g=l(h);wt(g,()=>e.children??dr),Xt(h,y=>r(y),()=>r()),X(()=>{or(v,"data-table-augment-size",s()),or(v,"data-table-augment-variant",i()),or(v,"data-table-augment-overflow",o())}),a(n,v),Fe()},Body:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=$r(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=ru();wr(i,()=>({class:["c-table-augment__body",e.class],...s}),void 0,void 0,"svelte-1hsf04x");var o=l(i);wt(o,()=>e.children??dr),Xt(i,c=>r(c),()=>r()),a(n,i),Fe()},Cell:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=Y(e,"wrap",3,!1),i=$r(e,["$$slots","$$events","$$legacy","ref","class","wrap","children"]);var o=au();wr(o,()=>({class:["c-table-augment__cell",s()&&"c-table-augment__cell--wrap",e.class],...i}),void 0,void 0,"svelte-1d6wf9h");var c=l(o);wt(c,()=>e.children??dr),Xt(o,v=>r(v),()=>r()),a(n,o),Fe()},Head:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=$r(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=su();wr(i,()=>({class:["c-table-augment__head-cell",e.class],...s}),void 0,void 0,"svelte-652vqj");var o=l(i),c=v=>{var h=ge(),g=F(h);wt(g,()=>e.children),a(v,h)};O(o,v=>{e.children&&v(c)}),Xt(i,v=>r(v),()=>r()),a(n,i),Fe()},Header:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=$r(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=nu();wr(i,()=>({class:["c-table-augment__header",e.class],...s}),void 0,void 0,"svelte-1rpg4mu");var o=l(i);wt(o,()=>e.children??dr),Xt(i,c=>r(c),()=>r()),a(n,i),Fe()},Row:function(n,e){ze(e,!0);let r=Y(e,"ref",15,null),s=$r(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=iu();wr(i,()=>({class:["c-table-augment__row",e.class],...s}),void 0,void 0,"svelte-iivjbh");var o=l(i);wt(o,()=>e.children??dr),Xt(i,c=>r(c),()=>r()),a(n,i),Fe()}};var ou=["second","minute","hour","day","week","month","year"],lu=["","","","","","",""],$s={},nn=function(n,e){$s[n]=e},ts=[60,60,24,7,365/7/12,12];function cu(n,e){var r;return(+new Date-+((r=n)instanceof Date?r:!isNaN(r)||/^\d+$/.test(r)?new Date(parseInt(r)):(r=(r||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(r))))/1e3}var du=function(n,e,r){return function(s,i){for(var o=s<0?1:0,c=s=Math.abs(s),v=0;s>=ts[v]&&v<ts.length;v++)s/=ts[v];return(s=Math.floor(s))>((v*=2)==0?9:1)&&(v+=1),i(s,v,c)[o].replace("%s",s.toString())}(cu(n),function(s){return $s[s]||$s.en_US}(e))};nn("en_US",function(n,e){if(e===0)return["just now","right now"];var r=ou[Math.floor(e/2)];return n>1&&(r+="s"),[n+" "+r+" ago","in "+n+" "+r]}),nn("zh_CN",function(n,e){if(e===0)return["",""];var r=lu[~~(e/2)];return[n+" "+r+"",n+" "+r+""]});const uu="/run/augment_secrets/";function Jr(n){return n["augment:mount_point"]||null}var mr=(n=>(n.env="env",n.file="file",n))(mr||{});const Mn=Symbol("secrets-context");function ma(){const n=xr(Mn);if(!n)throw new Error("SecretsContext not found. Make sure to call createSecretsContext in a parent component.");return n}var vu=f("<!> <!>",1),hu=f("<!> <!>",1),gu=f('<div class="c-loading-state svelte-wym0by"><div>Loading secrets...</div></div>'),mu=f('<div class="c-error-state svelte-wym0by"><div class="c-error-state__title svelte-wym0by">Error Loading Secrets</div> <div class="c-error-state__description svelte-wym0by"> </div></div>'),pu=f(`<div class="c-empty-state svelte-wym0by"><div class="c-empty-state__title svelte-wym0by">No Secrets Found</div> <div class="c-empty-state__description svelte-wym0by">You haven't created any secrets yet. Secrets allow you to securely store sensitive
        information like API keys, passwords, and tokens that can be used by remote agents and other
        Augment features.</div></div>`),fu=f('<div class="c-empty-state svelte-wym0by"><div class="c-empty-state__title svelte-wym0by">No Results Found</div> <div class="c-empty-state__description svelte-wym0by">Try updating your search.</div></div>'),yu=f("<!> <!> <!> <!> <!>",1),_u=f('<div class="c-secret-details svelte-wym0by"><div><!></div> <div><!></div></div>'),bu=f("<!> <!> <!> <!> <!>",1),Su=f("<!> <!>",1),wu=f('<div class="c-secrets-table svelte-wym0by"><!></div>');function $u(n,e){ze(e,!0);const r=ma();tr(async()=>{try{r.setLoading(!0),r.setError(null);const g=await e.api.loadSecrets();r.setSecrets(g)}catch(g){const y=g instanceof Error?g.message:"Failed to load secrets";r.setError(y),console.error("Error loading secrets:",g)}finally{r.setLoading(!1)}});let s=K(()=>[...r.secrets].filter(g=>{if(!r.searchTerm)return!0;const y=r.searchTerm.toLowerCase();if(g.name.toLowerCase().includes(y))return!0;const w=Jr(g.tags);return!!(w&&w.toLowerCase().includes(y))}).sort((g,y)=>new Date(y.updated_at??y.created_at).getTime()-new Date(g.updated_at??g.created_at).getTime()));async function i(g){try{r.deleteSecretOptimistically(g),await e.api.deleteSecret(g)}catch(y){console.error("Failed to delete secret:",y);try{const w=await e.api.loadSecrets();r.setSecrets(w)}catch(w){console.error("Failed to reload secrets after delete error:",w)}}}var o=wu(),c=l(o),v=g=>{var y=gu();a(g,y)},h=g=>{var y=ge(),w=F(y),k=N=>{var T=mu(),u=d(l(T),2),E=l(u);X(()=>le(E,r.error)),a(N,T)},I=N=>{var T=ge(),u=F(T),E=b=>{var _=pu();a(b,_)},R=b=>{var _=ge(),A=F(_),C=p=>{var $=fu();a(p,$)},M=p=>{var $=ge(),L=F($);qe(L,()=>jt.Root,(z,x)=>{x(z,{size:"custom",children:(U,J)=>{var re=Su(),G=F(re);qe(G,()=>jt.Header,(H,B)=>{B(H,{children:(q,oe)=>{var te=ge(),j=F(te);qe(j,()=>jt.Row,(P,Z)=>{Z(P,{children:(ue,ve)=>{var be=yu(),we=F(be);qe(we,()=>jt.Head,(Ze,Ae)=>{Ae(Ze,{children:(Se,fe)=>{var Me=S("Details");a(Se,Me)},$$slots:{default:!0}})});var Oe=d(we,2);qe(Oe,()=>jt.Head,(Ze,Ae)=>{Ae(Ze,{class:"column-type",children:(Se,fe)=>{var Me=S("Type");a(Se,Me)},$$slots:{default:!0}})});var Pe=d(Oe,2);qe(Pe,()=>jt.Head,(Ze,Ae)=>{Ae(Ze,{class:"column-updated",children:(Se,fe)=>{var Me=S("Updated");a(Se,Me)},$$slots:{default:!0}})});var Be=d(Pe,2);qe(Be,()=>jt.Head,(Ze,Ae)=>{Ae(Ze,{class:"column-size",children:(Se,fe)=>{var Me=S("Size");a(Se,Me)},$$slots:{default:!0}})});var Je=d(Be,2);qe(Je,()=>jt.Head,(Ze,Ae)=>{Ae(Ze,{class:"column-actions"})}),a(ue,be)},$$slots:{default:!0}})}),a(q,te)},$$slots:{default:!0}})});var ie=d(G,2);qe(ie,()=>jt.Body,(H,B)=>{B(H,{children:(q,oe)=>{var te=ge(),j=F(te);gt(j,17,()=>t(s),P=>P.name,(P,Z)=>{var ue=ge(),ve=F(ue);qe(ve,()=>jt.Row,(be,we)=>{we(be,{children:(Oe,Pe)=>{var Be=bu(),Je=F(Be);qe(Je,()=>jt.Cell,(Me,ne)=>{ne(Me,{children:(D,V)=>{var Q=_u(),ee=l(Q),me=l(ee);W(me,{size:1,weight:"medium",children:(_e,Ne)=>{var Te=S();X(xe=>le(Te,xe),[()=>Jr(t(Z).tags)??t(Z).name]),a(_e,Te)},$$slots:{default:!0}});var $e=d(ee,2),ce=l($e),Ce=_e=>{vo(_e,{leftIcon:Te=>{pe(Te,{name:"folder"})},$$slots:{leftIcon:!0,text:(Te,xe)=>{W(Te,{size:1,weight:"light",slot:"text",color:"secondary",children:(ae,Ie)=>{var se=S();X(he=>le(se,`${uu}${he??""}`),[()=>Jr(t(Z).tags)]),a(ae,se)},$$slots:{default:!0}})}}})};O(ce,_e=>{Jr(t(Z).tags)&&_e(Ce)}),a(D,Q)},$$slots:{default:!0}})});var Ze=d(Je,2);qe(Ze,()=>jt.Cell,(Me,ne)=>{ne(Me,{class:"column-type  l__table-cell--no-min-width",children:(D,V)=>{W(D,{size:1,weight:"light",children:(Q,ee)=>{var me=ge(),$e=F(me);qe($e,()=>yr.Root,(ce,Ce)=>{Ce(ce,{variant:"soft",color:"neutral",size:1,children:(_e,Ne)=>{var Te=ge(),xe=F(Te),ae=se=>{var he=S("File");a(se,he)},Ie=se=>{var he=S("EnvVar");a(se,he)};O(xe,se=>{Jr(t(Z).tags)?se(ae):se(Ie,!1)}),a(_e,Te)},$$slots:{default:!0}})}),a(Q,me)},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ae=d(Ze,2);qe(Ae,()=>jt.Cell,(Me,ne)=>{ne(Me,{class:"column-updated l__table-cell--no-min-width",children:(D,V)=>{{let Q=K(()=>function(ee){try{return new Date(ee).toLocaleString()}catch{return ee}}(t(Z).updated_at));qt(D,{get content(){return t(Q)},children:(ee,me)=>{W(ee,{size:1,weight:"light",children:($e,ce)=>{var Ce=S();X(_e=>le(Ce,_e),[()=>function(_e){try{return du(_e)}catch{return _e}}(t(Z).updated_at)]),a($e,Ce)},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})});var Se=d(Ae,2);qe(Se,()=>jt.Cell,(Me,ne)=>{ne(Me,{class:"column-size  l__table-cell--no-min-width",children:(D,V)=>{W(D,{size:1,weight:"light",children:(Q,ee)=>{var me=S();X($e=>le(me,$e),[()=>{return($e=t(Z).value_size_bytes)<1024?`${$e} B`:$e<1048576?`${($e/1024).toFixed(1)} KB`:`${($e/1048576).toFixed(1)} MB`;var $e}]),a(Q,me)},$$slots:{default:!0}})},$$slots:{default:!0}})});var fe=d(Se,2);qe(fe,()=>jt.Cell,(Me,ne)=>{ne(Me,{class:"column-actions  l__table-cell--no-min-width",children:(D,V)=>{(function(Q,ee){ze(ee,!0);let me=Y(ee,"handleDeleteSecret",3,()=>Promise.resolve());const $e=ma();let ce=ye(void 0);var Ce=ge(),_e=F(Ce);qe(_e,()=>et.Root,(Ne,Te)=>{Xt(Te(Ne,{children:(xe,ae)=>{var Ie=hu(),se=F(Ie);qe(se,()=>et.Trigger,(Re,Ee)=>{Ee(Re,{children:(ke,it)=>{Nt(ke,{variant:"ghost-block",size:1,title:"More",children:(tt,at)=>{pe(tt,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})});var he=d(se,2);qe(he,()=>et.Content,(Re,Ee)=>{Ee(Re,{size:1,side:"bottom",align:"start",children:(ke,it)=>{var tt=vu(),at=F(tt);{const $t=je=>{pe(je,{name:"square-pen"})};qe(at,()=>et.Item,(je,Ve)=>{Ve(je,{onSelect:()=>{$e.editSecret(ee.secret.name,Jr(ee.secret.tags)?mr.file:mr.env),t(ce)?.requestClose()},iconLeft:$t,children:(Ke,He)=>{var Qe=S("Edit");a(Ke,Qe)},$$slots:{iconLeft:!0,default:!0}})})}var Xe=d(at,2);{const $t=je=>{pe(je,{name:"trash-2"})};qe(Xe,()=>et.Item,(je,Ve)=>{Ve(je,{onSelect:()=>{me()(ee.secret.name),t(ce)?.requestClose()},color:"error",iconLeft:$t,children:(Ke,He)=>{var Qe=S("Delete");a(Ke,Qe)},$$slots:{iconLeft:!0,default:!0}})})}a(ke,tt)},$$slots:{default:!0}})}),a(xe,Ie)},$$slots:{default:!0}}),xe=>m(ce,xe,!0),()=>t(ce))}),a(Q,Ce),Fe()})(D,{get secret(){return t(Z)},handleDeleteSecret:i})},$$slots:{default:!0}})}),a(Oe,Be)},$$slots:{default:!0}})}),a(P,ue)}),a(q,te)},$$slots:{default:!0}})}),a(U,re)},$$slots:{default:!0}})}),a(p,$)};O(A,p=>{r.searchTerm&&t(s).length===0?p(C):p(M,!1)},!0),a(b,_)};O(u,b=>{r.secrets.length===0?b(E):b(R,!1)},!0),a(N,T)};O(w,N=>{r.error?N(k):N(I,!1)},!0),a(g,y)};O(c,g=>{r.loading?g(v):g(h,!1)}),a(n,o),Fe()}var Eu=f('<div class="c-secret-manager-header__add-secret-buttons-container svelte-lhk1rg"><div class="c-secret-manger-header__add-secret-buttons svelte-lhk1rg"><!> <!></div> <!></div>'),Au=f('<div class="c-secret-manager-header__search svelte-lhk1rg"><div class="c-secret-manager-header__search-field-container svelte-lhk1rg"><!></div> <!></div>'),Cu=f('<div class="c-secret-manager-header svelte-lhk1rg"><!></div>'),Tu=f('<div class="c-modal-header-content svelte-1jlpdjp"><!> <!></div>'),Ru=f("<span></span>"),ku=f('<div class="c-info-icon svelte-1jlpdjp"><!></div>'),Iu=f('<div class="c-form-field svelte-1jlpdjp"><div class="c-field-label svelte-1jlpdjp"><!> <!></div> <!> <!></div>'),Nu=f('<!> <div class="c-form-field svelte-1jlpdjp"><!> <!> <!></div> <!>',1),xu=f('<div class="c-modal-footer-content svelte-1jlpdjp"><!> <!></div>');function Mu(n,e){ze(e,!0);const r=ma();let s=K(()=>r.editingEnv?.name??null),i=K(()=>t(s)?r.getSecretByName(t(s)):null),o=ye(""),c=ye(""),v=ye(null),h=ye(null),g=ye(!1),y=ye(null),w=K(()=>t(s)!==null),k=K(()=>t(w)?"Update Secret":"Create Secret");const I=/^[A-Z_][A-Z0-9_]*$/,N="Secret name must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.";function T(A){return A.trim()?I.test(A)?r.validateSecretName(A,t(s)??void 0)||null:N:"Required field."}function u(A){return A.length===0?"Required field.":null}Wt(()=>{m(o,t(s)??"",!0),m(c,""),m(v,null),m(h,null),m(g,!1),m(y,null)}),Wt(()=>{t(o)&&m(v,T(t(o)),!0)}),Wt(()=>{t(c)&&m(h,u(t(c)),!0)});let E=K(()=>t(o).trim()!==""&&t(c).length!==0&&!t(v)&&!t(h));function R(){r.closeModal()}async function b(){const A=T(t(o)),C=u(t(c));if(m(v,A,!0),m(h,C,!0),!A&&!C){m(g,!0),m(y,null);try{const p=(M=t(c),btoa(unescape(encodeURIComponent(M)))),$={"augment:encoding":"base64"};if(t(w)&&t(i)){const L=await e.api.updateSecret({name:t(i).name,value:p,tags:$,description:"",expectedVersion:t(i).version}),z={...t(i),tags:$,updated_at:L.updatedAt,version:L.version,value_size_bytes:L.valueSizeBytes||t(i).value_size_bytes};r.updateSecretOptimistically(z)}else{const L=await e.api.createSecret({name:t(o).trim(),value:p,tags:$,description:""});r.addSecretOptimistically(L)}r.closeModal()}catch(p){m(y,p instanceof Error?p.message:"Failed to submit secret",!0),console.error(`Failed to ${t(w)?"update":"create"} secret:`,p)}finally{m(g,!1)}}var M}function _(A){A.key==="Enter"&&t(E)&&!t(g)&&(A.preventDefault(),b())}Ga(n,{show:!0,cardSize:2,maxWidth:"450px",oncancel:R,get preventEscapeClose(){return t(g)},preventBackdropClose:!0,header:p=>{var $=Tu(),L=l($);W(L,{size:3,weight:"bold",color:"primary",children:(x,U)=>{var J=S();X(()=>le(J,t(s)?`Edit ${t(s)}`:"New Environment Variable")),a(x,J)},$$slots:{default:!0}});var z=d(L,2);Nt(z,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:R,get disabled(){return t(g)},children:(x,U)=>{pe(x,{name:"x",size:1})},$$slots:{default:!0}}),a(p,$)},body:p=>{var $=Nu(),L=F($),z=B=>{var q=Iu(),oe=l(q),te=l(oe);W(te,{size:2,weight:"medium",children:(ve,be)=>{var we=S("Secret Name");a(ve,we)},$$slots:{default:!0}});var j=d(te,2);{const ve=we=>{var Oe=Ru();Oe.textContent="Secret name must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.",a(we,Oe)};let be=K(()=>[ya.Hover]);qt(j,{get triggerOn(){return t(be)},delayDurationMs:300,side:"right",content:ve,children:(we,Oe)=>{var Pe=ku(),Be=l(Pe);pe(Be,{name:"info",size:1}),a(we,Pe)},$$slots:{content:!0,default:!0}})}var P=d(oe,2);{let ve=K(()=>t(v)?"error":void 0);er(P,{placeholder:"Enter name",get disabled(){return t(g)},get color(){return t(ve)},onkeydown:_,get value(){return t(o)},set value(be){m(o,be,!0)}})}var Z=d(P,2),ue=ve=>{W(ve,{size:1,color:"error",children:(be,we)=>{var Oe=S();X(()=>le(Oe,t(v))),a(be,Oe)},$$slots:{default:!0}})};O(Z,ve=>{t(v)&&ve(ue)}),a(B,q)};O(L,B=>{t(s)===null&&B(z)});var x=d(L,2),U=l(x);W(U,{size:2,weight:"medium",children:(B,q)=>{var oe=S("Secret Value");a(B,oe)},$$slots:{default:!0}});var J=d(U,2);{let B=K(()=>t(h)?"error":void 0);er(J,{placeholder:"Enter value",get disabled(){return t(g)},get color(){return t(B)},onkeydown:_,get value(){return t(c)},set value(q){m(c,q,!0)}})}var re=d(J,2),G=B=>{W(B,{size:1,color:"error",children:(q,oe)=>{var te=S();X(()=>le(te,t(h))),a(q,te)},$$slots:{default:!0}})};O(re,B=>{t(h)&&B(G)});var ie=d(x,2),H=B=>{vr(B,{color:"error",variant:"soft",size:2,icon:oe=>{pe(oe,{name:"circle-alert"})},children:(oe,te)=>{var j=S();X(()=>le(j,t(y))),a(oe,j)},$$slots:{icon:!0,default:!0}})};O(ie,B=>{t(y)&&B(H)}),a(p,$)},footer:p=>{var $=xu(),L=l($);Ge(L,{variant:"ghost",color:"neutral",get disabled(){return t(g)},onclick:R,children:(x,U)=>{var J=S("Cancel");a(x,J)},$$slots:{default:!0}});var z=d(L,2);{let x=K(()=>!t(E)||t(g));Ge(z,{variant:"solid",color:"accent",get disabled(){return t(x)},get loading(){return t(g)},onclick:b,children:(U,J)=>{var re=S();X(()=>le(re,t(k))),a(U,re)},$$slots:{default:!0}})}a(p,$)},$$slots:{header:!0,body:!0,footer:!0}}),Fe()}function Pu(n,e){const r=n.target.files;r?.[0]&&e(r[0])}var Ou=f('<div class="c-modal-header-content svelte-1q9v4po"><!> <!></div>'),Uu=f('<div class="c-drag-drop-container svelte-1q9v4po"><div role="button" tabindex="0"><!> <!> <!> <!> <input type="file" hidden=""/></div> <!></div>'),Lu=f("<!> <!>",1),zu=f('<div class="c-file-badge-wrapper svelte-1q9v4po"><!></div>'),Fu=f('<div class="c-form-fields svelte-1q9v4po"><div class="c-form-field svelte-1q9v4po"><!> <div class="c-mount-path-input svelte-1q9v4po"><!> <!></div> <!></div> <div class="c-form-field svelte-1q9v4po"><!> <!></div></div>'),Du=f("<!> <!>",1),Bu=f('<div class="c-modal-footer-content"><!> <!></div>');function Wu(n,e){ze(e,!0);const r=ma();let s=K(()=>r.editingFile?.name??null),i=K(()=>r.editingFile?.mountPath??null),o=K(()=>r.editingFile?.fileName??null),c=K(()=>t(s)?r.getSecretByName(t(s)):null),v=ye(""),h=ye(null),g=ye(null),y=ye(null),w=ye(null),k=ye(null),I=ye(!1),N=ye(null),T=ye(!1),u=ye(!1),E=K(()=>t(s)!==null),R=K(()=>{let B=t(v).trim().replace(/^\/+/,"");return B=B.replace(/\/+/g,"/"),B=B.replace(/\/+$/,""),B}),b=K(()=>t(R)||""),_=K(()=>{const B=t(E)?t(h)||t(y):t(h);return t(v).trim()!==""&&B&&!t(w)&&!t(k)}),A=K(()=>{const B=t(h)?.name??t(y);return B&&B.length>30?`${B.slice(0,27)}...`:B}),C=K(()=>t(E)?`Edit: ${t(s)}`:"New Mounted File"),M=K(()=>t(E)?"Update Secret":"Create Secret");const p=`file-input-${Date.now()}`;let $=ye(null);function L(B){return B.trim()?/^[a-zA-Z0-9._\-/]+$/.test(B)?null:"Mount path can only contain letters, numbers, dots, dashes, underscores, and slashes.":"Required field."}async function z(B){if(m(k,null),B.size>16384)m(k,"File size exceeds 16KB limit.");else try{const q=await function(oe){return new Promise((te,j)=>{const P=new FileReader;P.onload=Z=>{const ue=Z.target?.result;if(typeof ue=="string"){const ve=ue.indexOf(",");te(ve>=0?ue.slice(ve+1):ue)}else j(new Error("Failed to read file as base64"))},P.onerror=()=>{j(new Error("Failed to read file"))},P.readAsDataURL(oe)})}(B);m(h,B,!0),m(g,q,!0),t(E)||t(v).trim()||m(v,B.name,!0),t(E)&&t(u)&&(m(y,B.name,!0),m(u,!1))}catch{m(k,"Failed to read file. Please try again.")}}function x(B){B.preventDefault(),m(T,!0)}function U(B){B.preventDefault(),m(T,!1)}function J(B){B.preventDefault(),m(T,!1);const q=B.dataTransfer?.files;q?.[0]&&z(q[0])}function re(){t($)?.click()}function G(){t(E)?m(u,!0):(m(h,null),m(g,null),m(v,""))}async function ie(){if(m(w,L(t(v)),!0),!t(h)&&!t(y))return void m(k,"Please select a file.");const B=r.validateSecretName(t(b),t(s)??void 0);if(B)m(k,B,!0);else if(!t(w)&&(t(g)||t(y))){m(I,!0),m(N,null);try{const q={"augment:mount_point":t(v).trim()};if(t(g)&&(q["augment:encoding"]="base64"),t(E)&&t(c)){const oe=await e.api.updateSecret({name:t(c).name,...t(g)&&{value:t(g)},tags:q,description:"",expectedVersion:t(c).version}),te={...t(c),tags:q,updated_at:oe.updatedAt,version:oe.version,value_size_bytes:oe.valueSizeBytes||t(c).value_size_bytes};r.updateSecretOptimistically(te)}else{const oe=await e.api.createSecret({name:t(b),value:t(g)??"",tags:q,description:""});r.addSecretOptimistically(oe)}r.closeModal()}catch(q){m(N,q instanceof Error?q.message:"Failed to submit secret",!0),console.error(`Failed to ${t(E)?"update":"create"} file secret:`,q)}finally{m(I,!1)}}}function H(){r.closeModal()}Wt(()=>{t(v)&&m(w,L(t(v)),!0)}),Wt(()=>{t(E)?(m(v,t(i)??"",!0),m(y,t(o)??null,!0)):(m(v,""),m(y,null)),m(h,null),m(g,null),m(w,null),m(k,null),m(I,!1),m(N,null),m(T,!1),m(u,!1)}),Ga(n,{show:!0,cardSize:2,maxWidth:"450px",oncancel:H,get preventEscapeClose(){return t(I)},preventBackdropClose:!0,header:te=>{var j=Ou(),P=l(j);W(P,{size:3,weight:"bold",color:"primary",children:(ue,ve)=>{var be=S();X(()=>le(be,t(C))),a(ue,be)},$$slots:{default:!0}});var Z=d(P,2);Nt(Z,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:H,get disabled(){return t(I)},children:(ue,ve)=>{pe(ue,{name:"x",size:1})},$$slots:{default:!0}}),a(te,j)},body:te=>{var j=Du(),P=F(j),Z=we=>{var Oe=Uu(),Pe=l(Oe);let Be;var Je=l(Pe);pe(Je,{name:"upload",size:2});var Ze=d(Je,2);W(Ze,{size:2,weight:"medium",children:(D,V)=>{var Q=S("Drag & Drop");a(D,Q)},$$slots:{default:!0}});var Ae=d(Ze,2);W(Ae,{size:1,color:"neutral",children:(D,V)=>{var Q=S("or");a(D,Q)},$$slots:{default:!0}});var Se=d(Ae,2);Ge(Se,{variant:"solid",color:"neutral",onclick:re,children:(D,V)=>{var Q=S("Browse Files");a(D,Q)},$$slots:{default:!0}});var fe=d(Se,2);fe.__change=[Pu,z],Xt(fe,D=>m($,D),()=>t($));var Me=d(Pe,2),ne=D=>{W(D,{size:1,color:"error",children:(V,Q)=>{var ee=S();X(()=>le(ee,t(k))),a(V,ee)},$$slots:{default:!0}})};O(Me,D=>{t(k)&&D(ne)}),X(D=>{Be=Ot(Pe,1,"c-drag-drop-zone svelte-1q9v4po",null,Be,D),or(fe,"id",p),fe.disabled=t(I)},[()=>({"is-dragging":t(T)})]),Qt("dragover",Pe,x),Qt("dragleave",Pe,U),Qt("drop",Pe,J),a(we,Oe)},ue=we=>{var Oe=Fu(),Pe=l(Oe),Be=l(Pe);W(Be,{size:2,color:"neutral",children:(ee,me)=>{var $e=S("Mount Path");a(ee,$e)},$$slots:{default:!0}});var Je=d(Be,2),Ze=l(Je);W(Ze,{size:1,class:"c-mount-path-prefix",color:"secondary",children:(ee,me)=>{var $e=S("/run/augment_secrets/");a(ee,$e)},$$slots:{default:!0}});var Ae=d(Ze,2);{let ee=K(()=>t(w)?"error":void 0);er(Ae,{placeholder:"filename.txt",get disabled(){return t(I)},get color(){return t(ee)},get value(){return t(v)},set value(me){m(v,me,!0)}})}var Se=d(Je,2),fe=ee=>{W(ee,{size:1,color:"error",children:(me,$e)=>{var ce=S();X(()=>le(ce,t(w))),a(me,ce)},$$slots:{default:!0}})};O(Se,ee=>{t(w)&&ee(fe)});var Me=d(Pe,2),ne=l(Me),D=ee=>{var me=zu(),$e=l(me);Ge($e,{variant:"surface",color:"neutral",size:1,onclick:G,iconLeft:Ce=>{var _e=Lu(),Ne=F(_e);pe(Ne,{name:"file",class:"c-file-badge-icon-default"});var Te=d(Ne,2);pe(Te,{name:"refresh-ccw",class:"c-file-badge-icon-hover"}),a(Ce,_e)},children:(Ce,_e)=>{var Ne=S();X(()=>le(Ne,t(A))),a(Ce,Ne)},$$slots:{iconLeft:!0,default:!0}}),a(ee,me)};O(ne,ee=>{(t(h)||t(y))&&ee(D)});var V=d(ne,2),Q=ee=>{W(ee,{size:1,color:"error",children:(me,$e)=>{var ce=S();X(()=>le(ce,t(k))),a(me,ce)},$$slots:{default:!0}})};O(V,ee=>{t(k)&&ee(Q)}),a(we,Oe)};O(P,we=>{!t(E)&&!t(h)||t(E)&&t(u)?we(Z):we(ue,!1)});var ve=d(P,2),be=we=>{vr(we,{color:"error",variant:"soft",size:2,icon:Pe=>{pe(Pe,{name:"circle-alert"})},children:(Pe,Be)=>{var Je=S();X(()=>le(Je,t(N))),a(Pe,Je)},$$slots:{icon:!0,default:!0}})};O(ve,we=>{t(N)&&we(be)}),a(te,j)},footer:te=>{var j=ge(),P=F(j),Z=ue=>{var ve=Bu(),be=l(ve);Ge(be,{variant:"ghost",color:"neutral",get disabled(){return t(I)},onclick:H,children:(Oe,Pe)=>{var Be=S("Cancel");a(Oe,Be)},$$slots:{default:!0}});var we=d(be,2);{let Oe=K(()=>!t(_)||t(I));Ge(we,{variant:"solid",color:"accent",get disabled(){return t(Oe)},get loading(){return t(I)},onclick:ie,children:(Pe,Be)=>{var Je=S();X(()=>le(Je,t(M))),a(Pe,Je)},$$slots:{default:!0}})}a(ue,ve)};O(P,ue=>{(t(E)&&!t(u)||!t(E)&&t(h))&&ue(Z)}),a(te,j)},$$slots:{header:!0,body:!0,footer:!0}}),Fe()}ea(["change"]);const rs=new class{async loadSecrets(){return(await(await Ut(Lt)).listSecrets(ft(hn,{}))).secrets.map(e=>({name:e.name,tags:e.tags,created_at:e.createdAt,updated_at:e.updatedAt,description:e.description,version:e.version,value_size_bytes:e.valueSizeBytes}))}async createSecret(n){const e=await Ut(Lt),r=ft(Si,{name:n.name,value:n.value,tags:n.tags,description:n.description}),s=await e.createSecret(r);if(!s.secret)throw new Error("Failed to create secret: no secret returned");return{name:s.secret.name,tags:s.secret.tags,created_at:s.secret.createdAt,updated_at:s.secret.updatedAt,description:s.secret.description,version:s.secret.version,value_size_bytes:s.secret.valueSizeBytes}}async updateSecret(n){const e=await Ut(Lt),r=ft(wi,{name:n.name,value:n.value,tags:n.tags,description:n.description,expectedVersion:n.expectedVersion}),s=await e.updateSecret(r);return{updatedAt:s.updatedAt,version:s.version,valueSizeBytes:s.valueSizeBytes}}async deleteSecret(n){const e=await Ut(Lt),r=ft($i,{name:n});if(!(await e.deleteSecret(r)).deleted)throw new Error("Failed to delete secret")}};var Gu=f('<div class="c-secret-manager-container"><!> <div class="l-section svelte-jt0bx6"><!></div> <div class="l-section svelte-jt0bx6"><!></div> <!> <!></div>');const Hu=function(n,e){ze(e,!1);const r=function(){let w=ye(ur([])),k=ye(!0),I=ye(null),N=ye(null),T=ye(null),u=ye(null),E=ye("");const R={get secrets(){return t(w)},get loading(){return t(k)},get error(){return t(I)},get visibleModal(){return t(N)},get editingEnv(){return t(T)},get editingFile(){return t(u)},get searchTerm(){return t(E)},set searchTerm(b){m(E,b,!0)},addSecretOptimistically(b){m(w,[b,...t(w)],!0)},updateSecretOptimistically(b){const _=t(w).findIndex(A=>A.name===b.name);_!==-1&&(t(w)[_]=b,m(w,[...t(w)],!0))},deleteSecretOptimistically(b){m(w,t(w).filter(_=>_.name!==b),!0)},validateSecretName:(b,_)=>t(w).find(A=>A.name===b&&A.name!==_)?"A secret with this name already exists.":null,getSecretByName:b=>t(w).find(_=>_.name===b),setSecrets(b){m(w,b,!0)},setLoading(b){m(k,b,!0)},setError(b){m(I,b,!0)},launchAddSecretEnv(){m(N,mr.env,!0)},launchAddSecretFile(){m(N,mr.file,!0)},editSecret(b,_){const A=t(w).find(C=>C.name===b);if(_===mr.env)m(T,{name:b},!0),m(N,mr.env,!0);else{const C=A?.tags["augment:mount_point"]||"";m(u,{name:b,mountPath:C,fileName:b},!0),m(N,mr.file,!0)}},closeModal(){m(N,null),m(T,null),m(u,null)}};return Yr(Mn,R),R}();Ar();var s=Gu(),i=l(s);zt(i,{level:1,children:(w,k)=>{var I=S("Secrets Manager");a(w,I)},$$slots:{default:!0}});var o=d(i,2);(function(w,k){ze(k,!0);const I=ma();let N=ye(!1),T=ye(void 0);Wt(()=>{t(N)&&t(T)&&t(T).focus()});var u=Cu(),E=l(u),R=_=>{var A=Eu(),C=l(A),M=l(C);Ge(M,{size:1,get onclick(){return I.launchAddSecretEnv},iconLeft:z=>{pe(z,{name:"plus"})},children:(z,x)=>{var U=S("Environment Variable");a(z,U)},$$slots:{iconLeft:!0,default:!0}});var p=d(M,2);Ge(p,{size:1,get onclick(){return I.launchAddSecretFile},iconLeft:z=>{pe(z,{name:"plus"})},children:(z,x)=>{var U=S("Mounted File");a(z,U)},$$slots:{iconLeft:!0,default:!0}});var $=d(C,2);Ge($,{variant:"ghost",$$events:{click:()=>m(N,!0)},iconLeft:z=>{pe(z,{name:"search"})},$$slots:{iconLeft:!0}}),a(_,A)},b=_=>{var A=Au(),C=l(A),M=l(C);er(M,{class:"c-secret-manager-header__search-field",placeholder:"Search secrets...",size:1,variant:"surface",get value(){return I.searchTerm},set value($){I.searchTerm=$},get textInput(){return t(T)},set textInput($){m(T,$,!0)}});var p=d(C,2);Ge(p,{variant:"ghost",$$events:{click:()=>{m(N,!1),I.searchTerm=""}},iconLeft:L=>{pe(L,{name:"x"})},$$slots:{iconLeft:!0}}),a(_,A)};O(E,_=>{t(N)?_(b,!1):_(R)}),a(w,u),Fe()})(l(o),{});var c=d(o,2);$u(l(c),{get api(){return rs}});var v=d(c,2),h=w=>{Mu(w,{get api(){return rs}})};O(v,w=>{r.visibleModal===mr.env&&w(h)});var g=d(v,2),y=w=>{Wu(w,{get api(){return rs}})};O(g,w=>{r.visibleModal===mr.file&&w(y)}),a(n,s),Fe()};var qu=f("<div><!></div>");function Qr(n,e){var r=qu();let s;var i=l(r);wt(i,()=>e.children??dr),X(o=>s=Ot(r,1,Cs(["c-card",e.class]),"svelte-1166lei",s,o),[()=>({"c-card--interactive":e.interactive})]),a(n,r)}var Vu=f('<div class="l-onboarding-banner-layout__content l-onboarding-banner-layout__content--left svelte-fiwp9y"><!></div>'),ju=f('<div class="l-onboarding-banner-layout__content-divider svelte-fiwp9y"></div>'),Ju=f('<div class="l-onboarding-banner-layout__content l-onboarding-banner-layout__content--right svelte-fiwp9y"><!></div>'),Ku=f('<div><div class="l-onboarding-banner-layout__header hidden-when-empty svelte-fiwp9y"><!> <!></div> <div class="l-onboarding-banner-layout__content-container svelte-fiwp9y"><!> <!> <!></div></div>');class Yu{constructor(e=!1,r=3e3){this.autoRotate=e,this.autoRotateInterval=r}#e=ye(0);get _currentIndex(){return t(this.#e)}set _currentIndex(e){m(this.#e,e,!0)}#t=ye(0);get _previousIndex(){return t(this.#t)}set _previousIndex(e){m(this.#t,e,!0)}#r=ye(0);get _totalSlides(){return t(this.#r)}set _totalSlides(e){m(this.#r,e,!0)}_itemCount=0;_autoRotateTimer=null;_isPaused=!1;_isLocked=!1;get currentIndex(){return this._currentIndex}get previousIndex(){return this._previousIndex}get direction(){return this._previousIndex===this._totalSlides-1&&this._currentIndex===0?1:this._previousIndex===0&&this._currentIndex===this._totalSlides-1?-1:this._currentIndex>this._previousIndex?1:-1}get totalSlides(){return this._totalSlides}get isPaused(){return this._isPaused}get isLocked(){return this._isLocked}goToSlide(e){e>=0&&e<this._totalSlides&&(this._previousIndex=this._currentIndex,this._currentIndex=e)}goToPrevious(){this._previousIndex=this._currentIndex,this._currentIndex=this._currentIndex>0?this._currentIndex-1:this._totalSlides-1}goToNext(){this._previousIndex=this._currentIndex,this._currentIndex=(this._currentIndex+1)%this._totalSlides}registerItem(){const e=this._itemCount;return this._itemCount++,this._totalSlides=this._itemCount,e}unregisterItem(e){this._itemCount=Math.max(0,this._itemCount-1),this._totalSlides=this._itemCount,this._currentIndex>=this._totalSlides&&this._totalSlides>0&&(this._currentIndex=this._totalSlides-1)}startAutoRotate(){!this.autoRotate||this._isPaused||this._isLocked||(this.stopAutoRotate(),this._autoRotateTimer=window.setInterval(()=>{this._totalSlides>1&&this.goToNext()},this.autoRotateInterval))}stopAutoRotate(){this._autoRotateTimer!==null&&(clearInterval(this._autoRotateTimer),this._autoRotateTimer=null)}pauseAutoRotate(){this._isPaused=!0,this.stopAutoRotate()}resumeAutoRotate(){this._isPaused=!1,this.startAutoRotate()}lockAutoRotate(){this._isLocked=!0,this.stopAutoRotate()}unlockAutoRotate(){this._isLocked=!1,this.startAutoRotate()}destroy(){this.stopAutoRotate()}}const Pn="slider";function Es(){const n=xr(Pn);if(!n)throw new Error("Slider components must be used within a Slider.Root component");return n}var Xu=f('<div role="region" aria-label="Content slider" aria-live="polite"><!></div>'),Zu=f('<div role="tabpanel"><!></div>'),Qu=f("<button></button>"),ev=f("<div></div>");ea(["click"]);var tv=f("<div><!></div>");const Ca={Root:function(n,e){ze(e,!0);let r=Y(e,"autoRotate",3,!0),s=Y(e,"autoRotateInterval",3,5e3),i=Y(e,"class",3,""),o=Y(e,"state",15);const c=(v=new Yu(r(),s()),Yr(Pn,v));var v;Wt(()=>{o(c)}),tr(()=>(r()&&c.totalSlides>1&&c.startAutoRotate(),()=>{c.destroy()})),Wt(()=>{r()&&c.totalSlides>1?c.startAutoRotate():c.stopAutoRotate()});var h=Xu(),g=l(h),y=w=>{var k=ge(),I=F(k);wt(I,()=>e.children),a(w,k)};O(g,w=>{e.children&&w(y)}),X(()=>Ot(h,1,`c-slider ${i()??""}`,"svelte-1qw0t4l")),Qt("mouseenter",h,()=>c.pauseAutoRotate()),Qt("mouseleave",h,()=>c.resumeAutoRotate()),a(n,h),Fe()},Content:function(n,e){let r=Y(e,"class",3,"");var s=tv(),i=l(s),o=c=>{var v=ge(),h=F(v);wt(h,()=>e.children),a(c,v)};O(i,c=>{e.children&&c(o)}),X(()=>Ot(s,1,Cs(["c-onboarding-banner__slider-content",r()]),"svelte-gnngto")),a(n,s)},Item:function(n,e){ze(e,!0);let r=Y(e,"class",3,"");const s=Es();let i=ye(-1);tr(()=>(m(i,s.registerItem(),!0),()=>{t(i)!==-1&&s.unregisterItem(t(i))}));const o=K(()=>t(i)===s.currentIndex),c=K(()=>({duration:400,x:20*s.direction,opacity:0,delay:100})),v=K(()=>({duration:200,opacity:0,x:-t(c).x}));var h=ge(),g=F(h),y=w=>{var k=Zu(),I=l(k),N=T=>{var u=ge(),E=F(u);wt(E,()=>e.children),a(T,u)};O(I,T=>{e.children&&T(N)}),X(()=>Ot(k,1,`c-slider-item ${r()??""}`,"svelte-jcoy6s")),Rr(1,k,()=>Kr,()=>t(c)),Rr(2,k,()=>Kr,()=>t(v)),a(w,k)};O(g,w=>{t(o)&&w(y)}),a(n,h),Fe()},Pagination:function(n,e){ze(e,!0);let r=Y(e,"class",3,"");const s=Es();var i=ge(),o=F(i),c=v=>{var h=ev();gt(h,21,()=>Array(s.totalSlides),pr,(g,y,w)=>{var k=Qu();let I;k.__click=()=>s.goToSlide(w),or(k,"aria-label",`Go to slide ${w+1}`),X(N=>{I=Ot(k,1,"c-slider-pagination__indicator svelte-1x17dqd",null,I,N),or(k,"aria-current",w===s.currentIndex?"true":"false")},[()=>({"c-slider-pagination__indicator--active":w===s.currentIndex})]),a(g,k)}),X(()=>Ot(h,1,`c-slider-pagination ${r()??""}`,"svelte-1x17dqd")),a(v,h)};O(o,v=>{s.totalSlides>1&&v(c)}),a(n,i),Fe()}},rv={slow:20,normal:40,fast:60};var av=()=>{},sv=f('<div class="c-onboarding-banner__mcp-item svelte-yqy5n1"><!> <!> <!></div>'),nv=f('<button class="headless svelte-yqy5n1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),iv=f('<div class="c-onboarding-banner__mcp-list-items svelte-yqy5n1"></div>'),ov=f('<div class="c-onboarding-banner__slide svelte-yqy5n1"><!> <!> <!></div>');function lv(n,e){ze(e,!0);const[r,s]=Vt(),i=ta(),o=lr(),c=Rs().getServers(),v=K(()=>new Map(Le(c,"$allServers",r).map(u=>[u.name,u])));let h=ye(void 0),g=null;function y(){g?.pause()}function w(){g?.resume()}tr(()=>(g=function(u){let E=null,R=1;const b=rv[u.speed??"normal"],_=ro(0);let A=null;function C(){u.container&&(p(),_.set(u.container.scrollLeft),A=_.on("change",$=>{u.container&&(u.container.scrollLeft=$)}),M())}function M(){if(!u.container)return;const{scrollWidth:$,clientWidth:L,scrollLeft:z}=u.container,x=$-L;if(x<=0)return;const U=z;_.set(U),U>=x-1?R=-1:U<=1&&(R=1);const J=R===1?x:0,re=Math.abs(J-U);E=ao(_,J,{duration:re/b,ease:"linear",onComplete:()=>{R*=-1,M()}})}function p(){E?.stop(),A?.()}return{start:C,stop:p,pause:function(){E&&E.pause()},resume:function(){E?u.container&&(_.set(u.container.scrollLeft),E.stop(),M()):C()},destroy:function(){p()}}}({container:t(h)}),g.start(),()=>{g?.destroy()}));var k=ov(),I=l(k);W(I,{size:3,weight:"medium",color:"primary",block:!0,children:(u,E)=>{var R=S("Integrate quick with Easy MCPs");a(u,R)},$$slots:{default:!0}});var N=d(I,2);so(N,{get containerElement(){return t(h)},set containerElement(u){m(h,u,!0)},children:(u,E)=>{var R=iv();gt(R,21,()=>Nn,b=>b.label,(b,_)=>{var A=nv();A.__click=[av];var C=l(A);ua(C,()=>({"--card-vertical-padding":"var(--ds-spacing-2)"})),Qr(C.lastChild,{interactive:!0,children:(M,p)=>{var $=sv(),L=l($),z=J=>{gn(J,{status:"success",content:"Connected"})};O(L,J=>{t(v).has(t(_).label)&&J(z)});var x=d(L,2);pe(x,{get name(){return t(_).iconName},size:4});var U=d(x,2);W(U,{size:2,weight:"medium",children:(J,re)=>{var G=S();X(()=>le(G,t(_).label)),a(J,G)},$$slots:{default:!0}}),a(M,$)}}),a(b,A)}),Qt("mouseenter",R,y),Qt("mouseleave",R,w),a(u,R)},$$slots:{default:!0}});var T=d(N,2);Ge(T,{size:2,variant:"ghost-block",onclick:function(){o.track(St.WEBVIEW.HOME_ONBOARDING_MCP_SETUP_CLICKED,{}),i(Er("tools"))},children:(u,E)=>{var R=S("Set up MCP Servers");a(u,R)},$$slots:{default:!0,iconRight:(u,E)=>{pe(u,{name:"arrow-right",slot:"iconRight"})}}}),a(n,k),Fe(),s()}ea(["click"]);var cv=f('<div class="c-onboarding-banner__slide svelte-l4999b"><div class="c-onboarding-banner__slide-title svelte-l4999b"><!> <!></div> <!> <div class="c-onboarding-banner__slide-actions svelte-l4999b"><!> <!></div></div>');function dv(n,e){ze(e,!0);const[r,s]=Vt(),i=ta(),o=xr(va.key),c=lr(),v=o.getDisplayableTools(),h=K(()=>Le(v,"$displayableTools",r).find(M=>M.displayName==="GitHub"));let g=ye(!1),y=ye(null);const w=Es();function k(){if(c.track(St.WEBVIEW.HOME_ONBOARDING_GITHUB_CONNECT_CLICKED,{isAlreadyConnected:t(h)?.isConfigured??!1}),t(h)&&!t(h).isConfigured)if(t(g))m(g,!1),t(y)&&(clearTimeout(t(y)),m(y,null));else{m(g,!0);const M=t(h).authUrl||"";Pt.postMessage({type:We.toolConfigStartOAuth,data:{authUrl:M,toolName:"github"}}),o.startPolling(),m(y,setTimeout(()=>{m(g,!1),m(y,null)},6e4),!0)}else i(Er("tools"))}Wt(()=>{t(h)?.isConfigured&&t(g)&&(m(g,!1),t(y)&&(clearTimeout(t(y)),m(y,null)))}),Wt(()=>{t(g)?w.lockAutoRotate():w.autoRotate&&w.isLocked&&w.unlockAutoRotate()});var I=cv(),N=l(I),T=l(N);pe(T,{name:"github",size:3});var u=d(T,2);W(u,{size:3,weight:"medium",color:"primary",children:(M,p)=>{var $=S();X(()=>le($,t(h)?.isConfigured?"GitHub Connected":"Connect to GitHub")),a(M,$)},$$slots:{default:!0}});var E=d(N,2);W(E,{size:2,block:!0,children:(M,p)=>{var $=ge(),L=F($),z=U=>{var J=S(`Your GitHub account is connected. You can now commit code faster and use GitHub features
      seamlessly.`);a(U,J)},x=U=>{var J=S(`Configure your account to commit code faster. Augment also offers more out of the box
      services.`);a(U,J)};O(L,U=>{t(h)?.isConfigured?U(z):U(x,!1)}),a(M,$)},$$slots:{default:!0}});var R=d(E,2),b=l(R),_=M=>{Ge(M,{size:2,variant:"soft",color:"success",onclick:()=>i(Er("tools")),children:(p,$)=>{var L=S("Connected");a(p,L)},$$slots:{default:!0,iconLeft:(p,$)=>{pe(p,{name:"check",slot:"iconLeft"})}}})},A=M=>{var p=ge(),$=F(p),L=x=>{Ge(x,{size:2,variant:"soft",onclick:k,children:(U,J)=>{var re=S("Connecting");a(U,re)},$$slots:{default:!0,iconLeft:(U,J)=>{Hr(U,{size:1,useCurrentColor:!0,slot:"iconLeft"})}}})},z=x=>{Ge(x,{size:2,variant:"soft",onclick:k,children:(U,J)=>{var re=S("Connect Now");a(U,re)},$$slots:{default:!0}})};O($,x=>{t(g)?x(L):x(z,!1)},!0),a(M,p)};O(b,M=>{t(h)?.isConfigured?M(_):M(A,!1)});var C=d(b,2);Ge(C,{size:2,variant:"ghost",onclick:function(){c.track(St.WEBVIEW.HOME_ONBOARDING_MORE_SERVICES_CLICKED,{}),i(Er("tools"))},children:(M,p)=>{var $=S("More Services");a(M,$)},$$slots:{default:!0,iconRight:(M,p)=>{pe(M,{name:"arrow-right",slot:"iconRight"})}}}),a(n,I),Fe(),s()}var uv=f('<div class="c-onboarding-banner__slide svelte-qdtf6g"><div class="c-onboarding-banner__slide-title svelte-qdtf6g"><!> <!></div> <!> <!></div>');function vv(n,e){ze(e,!1);const r=lr();Ar();var s=uv(),i=l(s),o=l(i);pe(o,{name:"square-terminal",size:3});var c=d(o,2);W(c,{size:3,weight:"medium",color:"primary",children:(g,y)=>{var w=S("Have you tried Augment CLI?");a(g,w)},$$slots:{default:!0}});var v=d(i,2);W(v,{size:2,block:!0,children:(g,y)=>{var w=S("Use Augments context engine anywhere you like to code, including your workflow in the terminal.");a(g,w)},$$slots:{default:!0}});var h=d(v,2);Ge(h,{size:2,variant:"soft",onclick:function(){r.track(St.WEBVIEW.HOME_ONBOARDING_CLI_CLICKED,{}),Pt.postMessage({type:We.runCommandInTerminal,data:{command:"npm install -g @augmentcode/auggie"}})},children:(g,y)=>{var w=S("Try CLI");a(g,w)},$$slots:{default:!0}}),a(n,s),Fe()}var hv=f('<div class="c-onboarding-banner__left-content"><!></div>'),gv=f('<div class="c-onboarding-banner__slide svelte-1nrdfis"><!></div>'),mv=f('<!> <div class="c-onboarding-banner__slider-pagination svelte-1nrdfis"><!></div>',1),pv=f('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function fv(n,e){ze(e,!0);const r=lr();let s=ye(void 0),i=ye(void 0);const o=[{id:"github",component:dv},{id:"mcps",component:lv},{id:"cli",component:vv}],c=new Set;Wt(()=>{if(t(s)&&t(s).currentIndex!==t(i)){const g=t(s).currentIndex,y=o[g].id;y&&!c.has(y)&&(c.add(y),r.track(St.WEBVIEW.HOME_ONBOARDING_SLIDE_VIEWED,{slideId:y})),m(i,g,!0)}});var v=pv(),h=F(v);{const g=k=>{W(k,{size:2,color:"secondary",children:(I,N)=>{var T=S("Setup");a(I,T)},$$slots:{default:!0}})},y=k=>{var I=hv(),N=l(I);W(N,{size:8,color:"primary",children:(T,u)=>{var E=S("Get the most out of Augment!");a(T,E)},$$slots:{default:!0}}),a(k,I)},w=k=>{var I=ge(),N=F(I);qe(N,()=>Ca.Root,(T,u)=>{u(T,{autoRotate:!0,autoRotateInterval:5e3,get state(){return t(s)},set state(E){m(s,E,!0)},children:(E,R)=>{var b=mv(),_=F(b);qe(_,()=>Ca.Content,(M,p)=>{p(M,{children:($,L)=>{var z=ge(),x=F(z);gt(x,17,()=>o,U=>U.id,(U,J)=>{var re=ge(),G=F(re);qe(G,()=>Ca.Item,(ie,H)=>{H(ie,{children:(B,q)=>{var oe=gv(),te=l(oe);qe(te,()=>t(J).component,(j,P)=>{P(j,{})}),X(()=>or(oe,"data-slide-id",t(J).id)),a(B,oe)},$$slots:{default:!0}})}),a(U,re)}),a($,z)},$$slots:{default:!0}})});var A=d(_,2),C=l(A);qe(C,()=>Ca.Pagination,(M,p)=>{p(M,{})}),a(E,b)},$$slots:{default:!0}})}),a(k,I)};ua(h,()=>({"--left-content-flex":1,"--right-content-flex":1.5})),function(k,I){let N=Y(I,"class",3,"");var T=Ku(),u=l(T),E=l(u),R=x=>{var U=ge(),J=F(U);wt(J,()=>I.header),a(x,U)};O(E,x=>{I.header&&x(R)});var b=d(E,2),_=x=>{Nt(x,{size:1,variant:"ghost",color:"neutral",get onclick(){return I.onClose},"aria-label":"Close onboarding banner",children:(U,J)=>{pe(U,{name:"x",size:2})},$$slots:{default:!0}})};O(b,x=>{I.onClose&&x(_)});var A=d(u,2),C=l(A),M=x=>{var U=Vu(),J=l(U);wt(J,()=>I.leftContent),a(x,U)};O(C,x=>{I.leftContent&&x(M)});var p=d(C,2),$=x=>{var U=ju();a(x,U)};O(p,x=>{I.leftContent&&I.rightContent&&x($)});var L=d(p,2),z=x=>{var U=Ju(),J=l(U);wt(J,()=>I.rightContent),a(x,U)};O(L,x=>{I.rightContent&&x(z)}),X(()=>Ot(T,1,`l-onboarding-banner-layout ${N()??""}`,"svelte-fiwp9y")),a(k,T)}(h.lastChild,{get onClose(){return e.onClose},header:g,leftContent:y,rightContent:w,$$slots:{header:!0,leftContent:!0,rightContent:!0}})}a(n,v),Fe()}var yv=f("<div><!></div>"),_v=f('<div aria-label="Proportional bar chart"></div>'),bv=f('<button class="c-home-page__languages-list-item svelte-c48uya"><!></button>'),Sv=f('<div class="c-home-page__languages svelte-c48uya"><!> <!> <div class="c-home-page__languages-list svelte-c48uya"></div></div>');function wv(n,e){ze(e,!0);const r=Y(e,"languages",19,()=>[]),s=["iris","blue","teal","plum","orange","bronze"];function i(v,h){return v==="Other"?"neutral":s[h%s.length]}let o=K(()=>r().map((v,h)=>({label:v.name,percentage:v.percentage,color:i(v.name,h),tooltipText:Ei(v.fileCount,"File")}))),c=ye(void 0);Qr(n,{children:(v,h)=>{var g=Sv(),y=l(g);W(y,{size:1,children:(I,N)=>{var T=S("Languages");a(I,T)},$$slots:{default:!0}});var w=d(y,2);(function(I,N){ze(N,!0);let T=Y(N,"highlightSegmentIndex",7),u=Y(N,"class",3,"");var E=_v();gt(E,23,()=>N.segments,R=>R.label,(R,b,_)=>{const A=K(()=>T()===t(_));var C=yv(),M=()=>T(t(_)),p=()=>T(void 0);wr(C,(L,z,x)=>({class:"proportional-bar-chart__segment",onmouseenter:M,onmouseleave:p,...L,[Fn]:z,[zn]:x}),[()=>un(t(b).color),()=>({"proportional-bar-chart__segment--highlighted":t(A)}),()=>({width:`${t(b).percentage??""}%`})],void 0,"svelte-1dfcr2k");var $=l(C);qt($,{get content(){return t(b).tooltipText},get open(){return t(A)},class:"proportional-bar-chart__segment-tooltip"}),a(R,C)}),X(()=>Ot(E,1,`proportional-bar-chart ${u()}`,"svelte-1dfcr2k")),a(I,E),Fe()})(w,{get segments(){return t(o)},get highlightSegmentIndex(){return t(c)}});var k=d(w,2);gt(k,23,()=>t(o),I=>I.label,(I,N,T)=>{var u=bv(),E=l(u);qe(E,()=>yr.Root,(R,b)=>{b(R,{get color(){return t(N).color},size:1,variant:"soft",children:(_,A)=>{var C=S();X(M=>le(C,`${t(N).label??""}
            ${M??""}%`),[()=>t(N).percentage.toFixed(1)]),a(_,C)},$$slots:{default:!0}})}),Qt("mouseenter",u,()=>m(c,t(T),!0)),Qt("mouseleave",u,()=>m(c,void 0)),a(I,u)}),a(v,g)}}),Fe()}class $v{_asyncMsgSender;constructor(e){this._asyncMsgSender=e??new za(Pt.postMessage)}async getHomeState(e){try{return(await this._asyncMsgSender.sendToSidecar({type:$a.getHomeStateRequest,data:{workspaceId:e}},5e3)).data||{}}catch(r){return console.error("Failed to load home state",r),{}}}async saveHomeState(e,r){try{await this._asyncMsgSender.sendToSidecar({type:$a.saveHomeStateRequest,data:{workspaceId:e,state:r}},5e3)}catch(s){console.error("Failed to save home state",s)}}async saveCodebaseSummary(e,r){await this.saveHomeState(e,{codebaseSummary:{summary:r,generatedAt:Date.now()}})}async dismissOnboardingBanner(e){await this.saveHomeState(e,{onboardingBannerDismissed:!0})}async dismissFeatureBanner(e){await this.saveHomeState(e,{featureBannersDismissed:!0})}async getWorkspaceInfo(){try{return(await this._asyncMsgSender.sendToSidecar({type:$a.getWorkspaceInfoRequest},3e4)).data}catch(e){return console.error("Failed to get workspace info",e),{workspaces:[]}}}async getWorkspaceLanguages(e){try{return(await this._asyncMsgSender.sendToSidecar({type:$a.getWorkspaceLanguagesRequest,data:{workspaceId:e}},3e4)).data}catch(r){return console.error("Failed to get workspace languages",r),{languages:[]}}}}let as;var Ev=f("<!> <!>",1),Av=f('<div class="c-workspace-switcher svelte-1ua62ky"><!></div>');function Cv(n,e){ze(e,!0);let r,s=Y(e,"formatName",3,c=>c??"");var i=Av(),o=l(i);qe(o,()=>et.Root,(c,v)=>{Xt(v(c,{children:(h,g)=>{var y=Ev(),w=F(y);qe(w,()=>et.Trigger,(I,N)=>{N(I,{children:(T,u)=>{Nt(T,{variant:"ghost-block",color:"neutral",size:2,children:(E,R)=>{var b=ge(),_=F(b);qe(_,()=>et.Chevron,(A,C)=>{C(A,{size:3})}),a(E,b)},$$slots:{default:!0}})},$$slots:{default:!0}})});var k=d(w,2);qe(k,()=>et.Content,(I,N)=>{N(I,{align:"start",children:(T,u)=>{var E=ge(),R=F(E);gt(R,17,()=>e.workspaces,pr,(b,_)=>{var A=ge(),C=F(A);{const M=$=>{var L=ge(),z=F(L),x=U=>{pe(U,{slot:"iconRight",name:"check",size:1})};O(z,U=>{t(_).id===e.currentWorkspace?.id&&U(x)}),a($,L)};let p=K(()=>t(_).id===e.currentWorkspace?.id);qe(C,()=>et.Item,($,L)=>{L($,{get highlight(){return t(p)},onSelect:()=>function(z){r?.requestClose(),e.onSwitch(z)}(t(_)),iconRight:M,children:(z,x)=>{var U=S();X(J=>le(U,J),[()=>s()(t(_).name)]),a(z,U)},$$slots:{iconRight:!0,default:!0}})})}a(b,A)}),a(T,E)},$$slots:{default:!0}})}),a(h,y)},$$slots:{default:!0}}),h=>r=h,()=>r)}),a(n,i),Fe()}var Tv=f('<div class="c-user-dropdown__content svelte-9gooby"><div class="c-user-dropdown__account svelte-9gooby"><!> <!></div> <div class="c-user-dropdown__actions svelte-9gooby"><!> <!></div></div>'),Rv=f("<!> <!>",1),kv=f('<div class="c-user-dropdown svelte-9gooby"><!></div>'),Iv=f('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Rules</div>'),Nv=f('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><!></div>',1),xv=f('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Guidelines</div>'),Mv=f('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><!></div>',1),Pv=f('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Memories</div>'),Ov=f('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><label class="c-features-banner__card-footer-toggle svelte-dbbwnh"><!> <!></label></div>',1),Uv=f('<div class="c-features-banner svelte-dbbwnh"><div class="c-features-banner__header svelte-dbbwnh"><!> <!></div> <div class="c-features-banner__content svelte-dbbwnh"><!> <!> <!></div></div>');function Lv(n,e){ze(e,!0);let r=ye(!1);const s=new za(Pt.postMessage),i=lr();tr(async()=>{try{const T=await s.sendToSidecar({type:Na.getMemorySettings},5e3);m(r,T.data?.enabled??!1,!0)}catch(T){console.error("Failed to load memory settings:",T)}});const o=ta();async function c(){const T=!t(r);m(r,T),i.track(St.WEBVIEW.HOME_FEATURE_BANNER_MEMORIES_TOGGLED,{enabled:T});try{await s.sendToSidecar({type:Na.updateMemorySettings,data:{enabled:T}},5e3)}catch(u){console.error("Failed to update memory settings:",u),m(r,!T)}}function v(){i.track(St.WEBVIEW.HOME_FEATURE_BANNER_RULES_DOCS_CLICKED,{}),Pt.postMessage({type:We.augmentLink,data:"https://docs.augmentcode.com/setup-augment/guidelines#importing-rules"})}var h=Uv(),g=l(h),y=l(g);W(y,{size:2,block:!0,nowrap:!0,children:(T,u)=>{var E=S("Agent Customization");a(T,E)},$$slots:{default:!0}});var w=d(y,2);Nt(w,{variant:"ghost-block",color:"neutral",size:1,onclick:function(){i.track(St.WEBVIEW.HOME_FEATURE_BANNER_DISMISSED,{}),e.onClose?.()},children:(T,u)=>{pe(T,{name:"x",size:2})},$$slots:{default:!0}});var k=d(g,2),I=l(k);Qr(I,{class:"c-features-banner__card",children:(T,u)=>{var E=Nv(),R=F(E);W(R,{size:3,color:"primary",children:(M,p)=>{var $=Iv(),L=l($);pe(L,{name:"download",size:3}),a(M,$)},$$slots:{default:!0}});var b=d(R,2),_=l(b);W(_,{size:2,children:(M,p)=>{var $=S("Import existing rules from alternate AI coding agents.");a(M,$)},$$slots:{default:!0}});var A=d(b,2),C=l(A);Ge(C,{variant:"ghost-block",color:"neutral",size:1,onclick:v,iconRight:p=>{pe(p,{name:"arrow-up-right"})},children:(p,$)=>{var L=S("Learn How");a(p,L)},$$slots:{iconRight:!0,default:!0}}),a(T,E)}});var N=d(I,2);Qr(N,{class:"c-features-banner__card",children:(T,u)=>{var E=Mv(),R=F(E);W(R,{size:3,color:"primary",children:(M,p)=>{var $=xv(),L=l($);pe(L,{name:"album",size:3}),a(M,$)},$$slots:{default:!0}});var b=d(R,2),_=l(b);W(_,{size:2,children:(M,p)=>{var $=S("Provide custom rules in your natural language.");a(M,$)},$$slots:{default:!0}});var A=d(b,2),C=l(A);Ge(C,{variant:"soft",color:"neutral",size:1,onclick:()=>(i.track(St.WEBVIEW.HOME_FEATURE_BANNER_GUIDELINES_CLICKED,{}),void o(Er("rules"))),children:(M,p)=>{var $=S("Add Rules & Guidelines");a(M,$)},$$slots:{default:!0}}),a(T,E)}}),Qr(d(N,2),{class:"c-features-banner__card",children:(T,u)=>{var E=Ov(),R=F(E);W(R,{size:3,color:"primary",children:($,L)=>{var z=Pv(),x=l(z);pe(x,{name:"archive",size:3}),a($,z)},$$slots:{default:!0}});var b=d(R,2),_=l(b);W(_,{size:2,children:($,L)=>{var z=S("Automatically add, remove and refine agent memories.");a($,z)},$$slots:{default:!0}});var A=d(b,2),C=l(A),M=l(C);Nr(M,{size:1,get checked(){return t(r)},onchange:c,ariaLabel:"Toggle memories"});var p=d(M,2);W(p,{size:1,color:"primary",children:($,L)=>{var z=S("Collect memories");a($,z)},$$slots:{default:!0}}),a(T,E)}}),a(n,h),Fe()}var zv=f('<div class="c-home-page__workspace-header-dropdown svelte-1hp5ry3"><!></div>'),Fv=f('<div class="c-home-page__stats-card-header svelte-1hp5ry3"><!> <!></div> <div class="c-home-page__stats-card-body svelte-1hp5ry3"><!></div>',1),Dv=f('<div class="c-home-page__onboarding-banner svelte-1hp5ry3"><!></div>'),Bv=f('<div class="c-home-page__feature-tabs svelte-1hp5ry3"><!></div>'),Wv=f('<div class="c-home-page__languages svelte-1hp5ry3"><!></div>'),Gv=f('<div><div class="c-home-page__section-content-title svelte-1hp5ry3"><!></div> <div><!></div></div>'),Hv=f('<div class="c-home-page"><div class="c-home-page__breadcrumbs svelte-1hp5ry3"><!> <div class="c-home-page__top-right-actions svelte-1hp5ry3"><!> <!></div></div> <div class="c-home-page__header svelte-1hp5ry3"><div class="c-home-page__header-left svelte-1hp5ry3"><div class="c-home-page__workspace-header svelte-1hp5ry3"><!> <!></div></div> <div class="c-home-page__header-right"><div class="c-home-page__stats svelte-1hp5ry3"></div></div></div> <!> <!> <div class="c-home-page__content svelte-1hp5ry3"><div class="c-home-page__section-header svelte-1hp5ry3"><!></div> <!> <div class="c-home-page__section-content svelte-1hp5ry3"><!></div></div></div>');function on(n,e){ze(e,!0);const[r,s]=Vt(),i=xr(ls),o=K(()=>Le(i,"$sharedAppStore",r)?.state?.threadCount);let c=ye(ur([])),v=ye(void 0),h=ye(ur([])),g=K(()=>({trackedFiles:t(v)?.stats?.trackedFiles??0,totalThreads:t(o)??t(v)?.stats?.totalThreads??0})),y=K(()=>L(t(v)?.name)||""),w=K(()=>t(v)?.id??"default"),k=ye(""),I=ye(!0),N=ye(!1),T=ye(!1),u=K(()=>t(c).length>1);const E=[{icon:"folders",value:0,label:"Files",key:"trackedFiles"},{icon:"wand-sparkles",value:0,label:"Threads",key:"totalThreads"}],R=(as||(as=new $v),as),b=ar("enableDebugFeatures");function _(D){D.id!==t(v)?.id&&(C.track(St.WEBVIEW.HOME_WORKSPACE_SWITCHED,{workspaceCount:t(c).length}),m(k,""),m(h,[],!0),m(I,!0),m(v,D,!0),A(D))}async function A(D){(async function(Q){try{const ee=await Ut(Lt),me=ft(Ai,{workspaceId:Q}),$e=await ee.getWorkspaceLanguages(me);m(h,$e.languages,!0)}catch(ee){console.error("Failed to load workspace languages",ee)}})(D.id);const V=await R.getHomeState(D.id);m(I,!1),m(N,V.onboardingBannerDismissed??!1,!0),m(T,V.featureBannersDismissed??!1,!0),V.codebaseSummary?.summary?m(k,V.codebaseSummary.summary,!0):async function(Q){try{const ee=C.generateProjectOverview();for await(const me of ee)me.response_text&&m(k,t(k)+me.response_text);t(k)&&(R.saveCodebaseSummary(Q,t(k)),C.track(St.WEBVIEW.HOME_CODEBASE_SUMMARY_GENERATED,{summaryLength:t(k).length}))}catch(ee){console.error("Failed to generate codebase summary:",ee),m(k,"Error generating summary. Please try again later.")}}(D.id)}const C=lr();async function M(){const D=await async function(){try{const V=await Ut(Lt),Q=await V.getWorkspaceInfo(Wr);return m(c,Q.workspaces,!0),Q.workspaces[0]}catch(V){console.error("Failed to load workspace info",V)}}();m(v,D,!0),D?A(D):m(I,!1)}function p(){C.track(St.WEBVIEW.HOME_ONBOARDING_BANNER_DISMISSED,{}),m(N,!0),R.dismissOnboardingBanner(t(w))}function $(){C.track(St.WEBVIEW.HOME_FEATURE_BANNER_DISMISSED,{}),m(T,!0),R.dismissFeatureBanner(t(w))}function L(D){return D?.split(/[_-]/).join(" ")??""}async function z(){t(c).length!==0&&(await Promise.all(t(c).map(D=>R.saveHomeState(D.id,{codebaseSummary:{summary:"",generatedAt:0},onboardingBannerDismissed:!1,featureBannersDismissed:!1}))),m(k,""),M())}tr(()=>{C.track(St.WEBVIEW.HOME_VIEW_DISPLAYED,{}),M()});const x={duration:350,y:-3,opacity:0},U={duration:250,axis:"y",scale:.8};var J=Hv();Qt("message",Fa,function(D){D.data?.type!==We.wsContextSourceFoldersChanged&&D.data?.type!==We.wsContextFolderContentsChanged||M()});var re=l(J),G=l(re);W(G,{size:2,color:"secondary",block:!0,children:(D,V)=>{var Q=S("Project Home");a(D,Q)},$$slots:{default:!0}});var ie=d(G,2),H=l(ie),B=D=>{qt(D,{content:"Reset home page state",children:(V,Q)=>{Nt(V,{variant:"ghost-block",color:"neutral",size:2,onclick:z,children:(ee,me)=>{pe(ee,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}})};O(H,D=>{Le(b,"$enableDebugFeatures",r)&&D(B)}),function(D,V){let Q;function ee(){Q?.requestClose(),V.onLogout()}function me(){Q?.requestClose(),V.onManageSubscription?.()}ze(V,!0);var $e=kv(),ce=l($e);qe(ce,()=>et.Root,(Ce,_e)=>{Xt(_e(Ce,{children:(Ne,Te)=>{var xe=Rv(),ae=F(xe);qe(ae,()=>et.Trigger,(se,he)=>{he(se,{children:(Re,Ee)=>{Nt(Re,{variant:"ghost-block",color:"neutral",size:2,children:(ke,it)=>{pe(ke,{name:"user-round",size:3})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ie=d(ae,2);qe(Ie,()=>et.Content,(se,he)=>{he(se,{align:"end",children:(Re,Ee)=>{var ke=Tv(),it=l(ke),tt=l(it);W(tt,{size:2,weight:"medium",color:"primary",block:!0,children:(He,Qe)=>{var mt=S("Current Account");a(He,mt)},$$slots:{default:!0}});var at=d(tt,2),Xe=He=>{W(He,{size:2,color:"secondary",children:(Qe,mt)=>{var nt=S();X(()=>le(nt,V.userEmail)),a(Qe,nt)},$$slots:{default:!0}})};O(at,He=>{V.userEmail&&He(Xe)});var $t=d(it,2),je=l($t);Ge(je,{size:2,variant:"soft",color:"neutral",onclick:ee,children:(He,Qe)=>{var mt=S("Logout");a(He,mt)},$$slots:{default:!0}});var Ve=d(je,2),Ke=He=>{Ge(He,{size:2,variant:"ghost-block",color:"neutral",onclick:me,children:(Qe,mt)=>{var nt=S("Manage Subscription");a(Qe,nt)},$$slots:{default:!0}})};O(Ve,He=>{V.onManageSubscription&&He(Ke)}),a(Re,ke)},$$slots:{default:!0}})}),a(Ne,xe)},$$slots:{default:!0}}),Ne=>Q=Ne,()=>Q)}),a(D,$e),Fe()}(d(H,2),{get userEmail(){return e.userEmail},onLogout:function(){C.track(St.WEBVIEW.HOME_USER_LOGOUT_CLICKED,{}),e.onSignOut()},onManageSubscription:function(){C.track(St.WEBVIEW.HOME_MANAGE_SUBSCRIPTION_CLICKED,{}),Pt.postMessage({type:We.augmentLink,data:"https://app.augmentcode.com/account"})}});var q=d(re,2),oe=l(q),te=l(oe),j=l(te);zt(j,{level:1,capitalize:!0,marginBottom:0,children:(D,V)=>{var Q=S();X(()=>le(Q,t(y))),a(D,Q)},$$slots:{default:!0}});var P=d(j,2),Z=D=>{var V=zv();Cv(l(V),{get workspaces(){return t(c)},get currentWorkspace(){return t(v)},onSwitch:_,formatName:L}),a(D,V)};O(P,D=>{t(u)&&D(Z)});var ue=d(oe,2),ve=l(ue);gt(ve,21,()=>E,pr,(D,V)=>{Qr(D,{children:(Q,ee)=>{var me=Fv(),$e=F(me),ce=l($e);pe(ce,{get name(){return t(V).icon},size:1});var Ce=d(ce,2);W(Ce,{size:1,children:(Te,xe)=>{var ae=S();X(()=>le(ae,t(V).label)),a(Te,ae)},$$slots:{default:!0}});var _e=d($e,2),Ne=l(_e);W(Ne,{size:8,children:(Te,xe)=>{Xi(Te,{get value(){return t(g)[t(V).key]},willChange:!0})},$$slots:{default:!0}}),a(Q,me)}})});var be=d(q,2),we=D=>{var V=Dv();fv(l(V),{onClose:p}),Rr(5,V,()=>Kr,()=>x),Rr(2,V,()=>Xs,()=>U),a(D,V)};O(be,D=>{t(N)||D(we)});var Oe=d(be,2),Pe=D=>{var V=Bv();Lv(l(V),{onClose:$}),Rr(5,V,()=>Kr,()=>x),Rr(2,V,()=>Xs,()=>U),a(D,V)};O(Oe,D=>{t(T)||D(Pe)});var Be=d(Oe,2),Je=l(Be);zt(l(Je),{level:2,children:(D,V)=>{var Q=S("Codebase");a(D,Q)},$$slots:{default:!0}});var Ze=d(Je,2),Ae=D=>{var V=Wv();wv(l(V),{get languages(){return t(h)}}),Rr(1,V,()=>Kr,()=>({duration:350,y:-3,opacity:0})),a(D,V)};O(Ze,D=>{t(h).length&&D(Ae)});var Se=d(Ze,2),fe=l(Se),Me=D=>{var V=Gv(),Q=l(V),ee=l(Q);W(ee,{size:2,block:!0,weight:"medium",children:(ce,Ce)=>{var _e=S("Here is a summary of what we see:");a(ce,_e)},$$slots:{default:!0}});var me=d(Q,2),$e=l(me);qe($e,()=>ho.Root,(ce,Ce)=>{Ce(ce,{children:(_e,Ne)=>{io(_e,{get markdown(){return t(k)}})},$$slots:{default:!0}})}),Rr(1,V,()=>Kr,()=>({duration:250,y:-3,opacity:0})),a(D,V)},ne=D=>{W(D,{size:2,weight:"medium",block:!0,children:(V,Q)=>{var ee=S("Generating summary...");a(V,ee)},$$slots:{default:!0}})};O(fe,D=>{t(k).length?D(Me):D(ne,!1)}),a(n,J),Fe(),s()}var qv=f("<!> ",1),Vv=f('<div class="c-sidebar-menu__item-unselectable svelte-1wb34mv"><!></div>'),jv=f("<div><!></div>"),Jv=f('<ul class="c-sidebar-menu__section-items svelte-1wb34mv"></ul>'),Kv=f("<li><!> <!></li>"),Yv=f('<div class="c-sidebar-menu__section-icon-placeholder svelte-1wb34mv"></div>'),Xv=f('<div class="c-sidebar-menu__section-label svelte-1wb34mv"><!> <span> </span> <!></div>'),Zv=f('<div class="c-sidebar-menu__section svelte-1wb34mv"><!> <ul class="c-sidebar-menu__section-items svelte-1wb34mv"></ul></div>'),Qv=f('<nav class="c-sidebar-menu svelte-1wb34mv"></nav>'),eh=f('<button class="c-breadcrumbs__item-button svelte-77ccva"> </button>'),th=f('<a class="c-breadcrumbs__item-button svelte-77ccva"> </a>'),rh=f('<div class="c-breadcrumbs__item-text svelte-77ccva"> </div>'),ah=f('<div class="c-breadcrumbs__separator svelte-77ccva"><!></div>'),sh=f('<li class="c-breadcrumbs__item svelte-77ccva"><!> <!></li>'),nh=f('<ol class="c-breadcrumbs svelte-77ccva"></ol>');ea(["click"]);var ih=f('<div class="l-settings-layout__sidebar svelte-17gwyr9"><!></div>'),oh=f('<div class="l-settings-layout__main-header svelte-17gwyr9"><!></div>'),lh=f('<div class="l-settings-layout svelte-17gwyr9"><!> <div class="l-settings-layout__main svelte-17gwyr9"><div class="l-settings-layout_content svelte-17gwyr9"><!> <!></div></div></div>');const ch=os(n=>n.settings.currentSection);os(n=>n.settings.previousSection),os(n=>n.settings.previousSection!==void 0);var dh=f("<!> <!>",1),uh=f('<!> <div class="c-settings__footer svelte-tkaslv"><!></div>',1);function vh(n,e){ze(e,!0);const r=()=>Le(L,"$currentSection",g),s=()=>Le(q,"$guidelines",g),i=()=>Le(x,"$settingsComponentSupported",g),o=()=>Le(E,"$enableSettingsHomePage",g),c=()=>Le(oe,"$userEmail",g),v=()=>Le(U,"$enableAgentMode",g),h=()=>Le(re,"$terminalSettingsStore",g),[g,y]=Vt(),w=ne=>{(function(D,V){ze(V,!0);let Q=Y(V,"size",3,2);var ee=nh();gt(ee,23,()=>V.items,me=>me.label,(me,$e,ce)=>{var Ce=sh(),_e=l(Ce),Ne=Ie=>{W(Ie,{get size(){return Q()},color:"secondary",truncate:!0,children:(se,he)=>{var Re=eh();Re.__click=function(...ke){t($e).onClick?.apply(this,ke)};var Ee=l(Re);X(()=>le(Ee,t($e).label)),a(se,Re)},$$slots:{default:!0}})},Te=Ie=>{var se=ge(),he=F(se),Re=ke=>{W(ke,{get size(){return Q()},color:"secondary",truncate:!0,children:(it,tt)=>{var at=th(),Xe=l(at);X(()=>{or(at,"href",t($e).href),le(Xe,t($e).label)}),a(it,at)},$$slots:{default:!0}})},Ee=ke=>{W(ke,{get size(){return Q()},color:"secondary",truncate:!0,children:(it,tt)=>{var at=rh(),Xe=l(at);X(()=>le(Xe,t($e).label)),a(it,at)},$$slots:{default:!0}})};O(he,ke=>{t($e).href?ke(Re):ke(Ee,!1)},!0),a(Ie,se)};O(_e,Ie=>{t($e).onClick?Ie(Ne):Ie(Te,!1)});var xe=d(_e,2),ae=Ie=>{var se=ah(),he=l(se);W(he,{color:"secondary",children:(Re,Ee)=>{{let ke=K(()=>Math.min(Q()+1,3));pe(Re,{name:"chevron-right",get size(){return t(ke)}})}},$$slots:{default:!0}}),a(Ie,se)};O(xe,Ie=>{(t(ce)<V.items.length-1||V.showTrailingChevron)&&Ie(ae)}),a(me,Ce)}),a(D,ee),Fe()})(ne,{get items(){return t(Se)},showTrailingChevron:!0})},k=ar("enableRules"),I=ar("enablePersonalities"),N=ar("enableExternalSourcesInChat"),T=ar("retryChatStreamTimeouts"),u=ar("enableCreditsInSettings"),E=ar("enableSettingsHomePage"),R=ar("enablePublicBetaPage"),b=ar("areFlagsReady"),_=new Gi(Pt),A=new Ci(Pt,_,{enableRules:Le(k,"$enableRules",g),enablePersonalities:Le(I,"$enablePersonalities",g),enableExternalSourcesInChat:Le(N,"$enableExternalSourcesInChat",g),retryChatStreamTimeouts:Le(T,"$retryChatStreamTimeouts",g)}),C=new va(Pt),M=new Io,p=new ha(A);Yr(va.key,C),Ti(A),function(ne){Yr(wn,ne)}(p);const $=ta(),L=ch(),{controller:z}=function(ne){const D=new Gr,V=new yd(D,ne);return Gr.setInContext(D,V),{model:D,controller:V}}(A),x=C.getSettingsComponentSupported(),U=C.getEnableAgentMode();_.registerConsumer(C);const J=new Hi(_,void 0,Zi,ls);_.registerConsumer(J),Yr(ls,J),J.fetchStateFromExtension();const re=M.getTerminalSettings(),G=K(r),ie=window.augmentFlags?.navigateToSettingsSection,H={handleMessageFromExtension(ne){if(!ne.data)return!1;if(ne.data.type===We.navigateToSettingsSection){if(ne.data.data&&typeof ne.data.data=="string"){const D=ne.data.data;$(Er(D))}return!0}return!!Object.values(Yt).includes(ne.data.type)&&p.handleMcpMessage(ne)}};_.registerConsumer(H);const B=C.getDisplayableTools(),q=C.getGuidelines(),oe=C.getUserEmail(),te=K(()=>s().userGuidelines?.contents),j=K(()=>s().userGuidelines?.lengthLimit),P=K(()=>s().workspaceGuidelines?.[0]?.lengthLimit),Z=K(()=>s().workspaceGuidelines?.[0]?.contents||"");async function ue(ne){const D=ne.trim();if(t(j)&&D.length>t(j))return!1;C.updateLocalUserGuidelines(D);try{await(await Ut(Lt)).updateUserGuidelines({content:ne})}catch(V){console.error("Failed to update user guidelines:",V)}return!0}function ve(ne){Pt.postMessage({type:We.toolConfigStartOAuth,data:ne}),C.startPolling()}async function be(ne){await A.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${ne.displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&Pt.postMessage({type:We.toolConfigRevokeAccess,data:{toolId:ne.identifier}})}function we(ne){M.updateSelectedShell(ne)}function Oe(ne){M.updateStartupScript(ne)}async function Pe(){await(await Ut(Lt)).signOut(Wr)}ss(()=>{C.dispose(),p.dispose()}),C.notifyLoaded(),Pt.postMessage({type:We.getOrientationStatus});const Be=ne=>{Pt.postMessage({type:We.updateFeatureFlagOverrides,data:ne})},Je=K(i),Ze=K(()=>[{label:"Tools",id:"tools"},...t(Je).rules?[{label:"Rules & Guidelines",id:"guidelines"}]:[],{label:"Memories",id:"memories"},...t(Je).workspaceContext?[{label:"Context",id:"context"}]:[],...t(Je).secretsManagerEnabled?[{label:"Secret Manager",id:"secret-manager"}]:[],...t(Je).allowFeatureFlagOverrides?[{label:"Feature Flags",id:"feature-flags"}]:[],...Le(R,"$enablePublicBetaPage",g)?[{label:"Beta",id:"beta"}]:[],{label:"Account",id:"account"}]),Ae=K(()=>[...o()?[{label:"Home",id:"home",icon:"house"}]:[],{label:"Settings",icon:"globe",items:t(Ze)}]),Se=K(()=>{const ne=t(Ae).find(D=>D.items?.find(V=>V.id===t(G)));return ne?.label?[{label:ne.label}]:[]});Wt(()=>{ie?$(Er(ie)):r()||Le(b,"$areFlagsReady",g)&&$(Er(o()?"home":"tools"))}),Wt(()=>{Le(u,"$enableCreditsInSettings",g)?t(G)==="account"?z.foregroundPoll():z.backgroundPoll():z.stop()});let fe=ur(new Set);Wt(()=>{t(G)===void 0||fe.has(t(G))||(A.track(St.WEBVIEW.SETTINGS_TAB_VIEWED,{tab:t(G)}),fe.add(t(G)))}),tr(()=>{A.track(St.WEBVIEW.SETTINGS_PAGE_OPENED,{})}),Pt.postMessage({type:We.settingsPanelLoaded});const Me=ne=>{$(Er(ne.id))};Qt("message",Fa,function(...ne){_.onMessageFromExtension?.apply(this,ne)});{const ne=V=>{var Q=uh(),ee=F(Q);(function($e,ce){ze(ce,!0);const Ce=(xe,ae=dr,Ie)=>{let se=kt(()=>Dn(Ie?.(),0));const he=K(()=>ae().selected||ce.selected===ae()[_e()??"label"]),Re=K(()=>()=>{ae().onClick&&ae().onClick()}),Ee=K(()=>ae().canSelect??!0);var ke=Kv();let it;var tt=l(ke),at=Ve=>{var Ke=Vv(),He=l(Ke);W(He,{size:2,weight:"medium",children:(Qe,mt)=>{var nt=qv(),yt=F(nt),pt=Ft=>{pe(Ft,{get name(){return ae().icon}})};O(yt,Ft=>{ae().icon&&Ft(pt)});var Tt=d(yt);X(()=>le(Tt,` ${ae().label??""}`)),a(Qe,nt)},$$slots:{default:!0}}),a(Ve,Ke)},Xe=Ve=>{var Ke=jv();let He;var Qe=l(Ke);{let mt=K(()=>ae().onClick?void 0:ae().href),nt=K(()=>!ae().onClick&&!!ae().href),yt=K(()=>ae().onClick?void 0:ae().hrefOptions?.target),pt=K(()=>ae().onClick?void 0:ae().hrefOptions?.rel);Ge(Qe,{variant:"ghost-block",color:"neutral",size:2,alignment:"left",get href(){return t(mt)},get asAnchor(){return t(nt)},get target(){return t(yt)},get rel(){return t(pt)},$$events:{click:()=>{t(Re)?.(),ce.onMenuItemClick?.(ae())}},children:(Tt,Ft)=>{W(Tt,{size:2,weight:"medium",children:(Ct,rr)=>{var _t=S();X(()=>le(_t,ae().label)),a(Ct,_t)},$$slots:{default:!0}})},$$slots:{default:!0,iconLeft:(Tt,Ft)=>{var Ct=ge(),rr=F(Ct),_t=dt=>{pe(dt,{get name(){return ae().icon}})};O(rr,dt=>{ae().icon&&dt(_t)}),a(Tt,Ct)}}})}X(mt=>He=Ot(Ke,1,"svelte-1wb34mv",null,He,mt),[()=>({"c-sidebar-menu__item--selected":t(he)})]),a(Ve,Ke)};O(tt,Ve=>{t(Ee)?Ve(Xe,!1):Ve(at)});var $t=d(tt,2),je=Ve=>{var Ke=Jv();gt(Ke,21,()=>ae().items,He=>He.label,(He,Qe)=>{Ce(He,()=>t(Qe),()=>t(se)+1)}),a(Ve,Ke)};O($t,Ve=>{ae().items&&ae().items.length>0&&Ve(je)}),X(Ve=>it=Ot(ke,1,"c-sidebar-menu__item svelte-1wb34mv",null,it,Ve),[()=>({"c-sidebar-menu__item--top-level":t(se)===0})]),a(xe,ke)};let _e=Y(ce,"trackBy",3,"label");const Ne=K(()=>ce.items.some(xe=>xe.icon));var Te=Qv();gt(Te,21,()=>ce.items,pr,(xe,ae)=>{var Ie=ge(),se=F(Ie),he=Ee=>{Ce(Ee,()=>t(ae))},Re=Ee=>{var ke=ge(),it=F(ke),tt=at=>{var Xe=Zv(),$t=l(Xe),je=Ke=>{W(Ke,{size:2,color:"secondary",weight:"medium",children:(He,Qe)=>{var mt=Xv(),nt=l(mt),yt=_t=>{pe(_t,{get name(){return t(ae).icon},size:3})},pt=_t=>{var dt=ge(),Mt=F(dt),Et=Rt=>{var ht=Yv();a(Rt,ht)};O(Mt,Rt=>{t(Ne)&&Rt(Et)},!0),a(_t,dt)};O(nt,_t=>{t(ae).icon?_t(yt):_t(pt,!1)});var Tt=d(nt,2),Ft=l(Tt),Ct=d(Tt,2),rr=_t=>{var dt=ge(),Mt=F(dt);qe(Mt,()=>yr.Root,(Et,Rt)=>{Rt(Et,{get color(){return t(ae).badge.color},get variant(){return t(ae).badge.variant},children:(ht,sr)=>{var Gt=S();X(()=>le(Gt,t(ae).badge.text)),a(ht,Gt)},$$slots:{default:!0}})}),a(_t,dt)};O(Ct,_t=>{t(ae).badge&&_t(rr)}),X(()=>le(Ft,t(ae).label)),a(He,mt)},$$slots:{default:!0}})};O($t,Ke=>{t(ae).label&&Ke(je)});var Ve=d($t,2);gt(Ve,21,()=>t(ae).items,Ke=>Ke.label,(Ke,He)=>{Ce(Ke,()=>t(He),()=>1)}),a(at,Xe)};O(it,at=>{t(ae).items.length>0&&at(tt)},!0),a(Ee,ke)};O(se,Ee=>{var ke;"href"in(ke=t(ae))||"id"in ke||"onClick"in ke||ke.canSelect===!0?Ee(he):Ee(Re,!1)}),a(xe,Ie)}),a($e,Te),Fe()})(ee,{get items(){return t(Ae)},get selected(){return t(G)},trackBy:"id",onMenuItemClick:Me});var me=d(ee,2);(function($e,ce){function Ce(){Pt.postMessage({type:We.augmentLink,data:"https://www.augmentcode.com/changelog"})}ze(ce,!1),Ar(),et.Root($e,{children:(_e,Ne)=>{var Te=dh(),xe=F(Te);et.Trigger(xe,{children:(Ie,se)=>{Nt(Ie,{variant:"soft",size:2,children:(he,Re)=>{pe(he,{name:"message-circle-question-mark",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}});var ae=d(xe,2);et.Content(ae,{side:"bottom",align:"start",children:(Ie,se)=>{et.Item(Ie,{onSelect:Ce,children:(he,Re)=>{var Ee=S("Augment Updates");a(he,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(_e,Te)},$$slots:{default:!0}}),Fe()})(l(me),{}),a(V,Q)};let D=K(()=>t(Se).length>0?w:void 0);(function(V,Q){var ee=lh(),me=l(ee),$e=xe=>{var ae=ih(),Ie=l(ae);wt(Ie,()=>Q.sidebar),a(xe,ae)};O(me,xe=>{Q.sidebar&&xe($e)});var ce=d(me,2),Ce=l(ce),_e=l(Ce),Ne=xe=>{var ae=oh(),Ie=l(ae);wt(Ie,()=>Q.header),a(xe,ae)};O(_e,xe=>{Q.header&&xe(Ne)});var Te=d(_e,2);wt(Te,()=>Q.children),a(V,ee)})(n,{get header(){return t(D)},sidebar:ne,children:(V,Q)=>{var ee=ge(),me=F(ee),$e=Ce=>{on(Ce,{get userEmail(){return c()},onSignOut:Pe})},ce=Ce=>{var _e=ge(),Ne=F(_e),Te=ae=>{{let Ie=K(()=>v()&&i().mcpServerList),se=K(()=>v()&&i().mcpServerImport);Hc(ae,{get tools(){return Le(B,"$displayableTools",g)},onAuthenticate:ve,onRevokeAccess:be,onMCPServerAdd:(he,Re)=>p.addServer(he,Re),onMCPServerSave:(he,Re)=>p.updateServer(he,Re),onMCPServerDelete:he=>p.deleteServer(he),onMCPServerToggleDisable:he=>p.toggleDisabledServer(he),onMCPServerJSONImport:he=>p.importServersFromJSON(he),get isMCPEnabled(){return t(Ie)},get isMCPImportEnabled(){return t(se)},get supportedShells(){return h().supportedShells},get selectedShell(){return h().selectedShell},get startupScript(){return h().startupScript},onShellSelect:we,onStartupScriptChange:Oe,get isTerminalEnabled(){return i().terminal}})}},xe=ae=>{var Ie=ge(),se=F(Ie),he=Ee=>{var ke=ge(),it=F(ke),tt=Xe=>{pd(Xe,{get userGuidelines(){return t(te)},get userGuidelinesLengthLimit(){return t(j)},get workspaceGuidelinesLengthLimit(){return t(P)},get workspaceGuidelinesContent(){return t(Z)},updateUserGuideline:ue})},at=Xe=>{xn(Xe,{get userGuidelines(){return t(te)},get userGuidelinesLengthLimit(){return t(j)},updateUserGuideline:ue})};O(it,Xe=>{i().rules?Xe(tt):Xe(at,!1)}),a(Ee,ke)},Re=Ee=>{var ke=ge(),it=F(ke),tt=Xe=>{Fd(Xe,{})},at=Xe=>{var $t=ge(),je=F($t),Ve=He=>{qo(He,{})},Ke=He=>{var Qe=ge(),mt=F(Qe),nt=pt=>{Hu(pt,{})},yt=pt=>{var Tt=ge(),Ft=F(Tt),Ct=_t=>{(function(dt,Mt){ze(Mt,!0);var Et=Kd(),Rt=F(Et);zt(Rt,{level:1,children:(ht,sr)=>{var Gt=S("Feature Flags");a(ht,Gt)},$$slots:{default:!0}}),Jd(d(Rt,2),{onFlagToggle:(ht,sr)=>{Mt.onUpdateFlags({flagName:ht,value:sr})}}),a(dt,Et),Fe()})(_t,{onUpdateFlags:Be})},rr=_t=>{var dt=ge(),Mt=F(dt),Et=ht=>{eu(ht,{onUpdateFlags:Be})},Rt=ht=>{var sr=ge(),Gt=F(sr),Mr=Cr=>{sn(Cr,{onSignOut:Pe})},Pr=Cr=>{var ra=ge(),qa=F(ra),_a=Dt=>{on(Dt,{get userEmail(){return c()},onSignOut:Pe})},Va=Dt=>{sn(Dt,{onSignOut:Pe})};O(qa,Dt=>{o()?Dt(_a):Dt(Va,!1)},!0),a(Cr,ra)};O(Gt,Cr=>{t(G)==="account"?Cr(Mr):Cr(Pr,!1)},!0),a(ht,sr)};O(Mt,ht=>{t(G)==="beta"?ht(Et):ht(Rt,!1)},!0),a(_t,dt)};O(Ft,_t=>{t(G)==="feature-flags"?_t(Ct):_t(rr,!1)},!0),a(pt,Tt)};O(mt,pt=>{t(G)==="secret-manager"?pt(nt):pt(yt,!1)},!0),a(He,Qe)};O(je,He=>{t(G)==="context"?He(Ve):He(Ke,!1)},!0),a(Xe,$t)};O(it,Xe=>{t(G)==="memories"?Xe(tt):Xe(at,!1)},!0),a(Ee,ke)};O(se,Ee=>{t(G)==="guidelines"?Ee(he):Ee(Re,!1)},!0),a(ae,Ie)};O(Ne,ae=>{t(G)==="tools"?ae(Te):ae(xe,!1)},!0),a(Ce,_e)};O(me,Ce=>{t(G)==="home"?Ce($e):Ce(ce,!1)}),a(V,ee)}})}Fe(),y()}function hh(n){Ri(n,{children:(e,r)=>{ki(e,{fetch:!0,children:(s,i)=>{vh(s,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}class gh{constructor(e){this._host=e}_listeners=new Set;addListener(e,r){this._listeners.size===0&&window?.addEventListener("message",this.onMessage);const s=i=>{i.data?.type===e&&r(i.data?.data)};return this._listeners.add(s),()=>{this._listeners.delete(s),this._listeners.size===0&&window?.removeEventListener("message",this.onMessage)}}onMessage=e=>{for(const r of this._listeners)r(e)};async send(e,r,s=3e3){const i=this.listenOnceFor(r,s);return this._host.postMessage(e),i}notify(e){this._host.postMessage(e)}listenOnceFor(e,r=3e4){return new Promise((s,i)=>{let o;const c=this.addListener(e,v=>(clearTimeout(o),s(v),!0));o=setTimeout(()=>{c(),i(new Error(`Timeout waiting for message type ${e} ${r}ms}`))},r)})}destroy(){this._listeners.clear(),window?.removeEventListener("message",this.onMessage)}}Bi(Lt,new class{inOutBroker;constructor(n=ln()){this.inOutBroker=new gh(n)}async getTerminalSettings(n){const e=await this.inOutBroker.send({type:We.getTerminalSettings},We.terminalSettingsResponse);return ft(Vs,{terminalSettings:e})}async updateTerminalSettings(n){const e=await this.inOutBroker.send({type:We.updateTerminalSettings,data:n},We.terminalSettingsResponse);return ft(Vs,{terminalSettings:e})}async updateUserGuidelines(n){return this.inOutBroker.notify({type:We.updateUserGuidelines,data:n.content}),Wr}async toolConfigLoaded(n){try{return await this.inOutBroker.send({type:We.toolConfigLoaded},We.toolConfigInitialize)}catch(e){throw console.error("Error in toolConfigLoaded:",e),e}}async updateFeatureFlagOverrides(n){try{const e=await this.inOutBroker.send({type:We.updateFeatureFlagOverrides,data:{flagName:n.flagName,value:JSON.parse(n.valueJson)}},We.updateFeatureFlagOverridesResponse);return ft(js,{success:e.success,error:e.error})}catch(e){return console.error("Error in updateFeatureFlagOverrides:",e),ft(js,{success:!1,error:e instanceof Error?e.message:String(e)})}}async getFeatureFlagOverrides(n){return ft(Ii,{overridesJson:"{}"})}async resetFeatureFlagOverride(n){try{const e=await this.inOutBroker.send({type:We.resetFeatureFlagOverride,data:{flagName:n.flagName}},We.resetFeatureFlagOverrideResponse);return ft(Js,{success:e.success,error:e.error})}catch(e){return console.error("Error in resetFeatureFlagOverride:",e),ft(Js,{success:!1,error:e instanceof Error?e.message:String(e)})}}async getOrientationStatus(n){try{const e=await this.inOutBroker.send({type:We.getOrientationStatus},We.orientationStatusUpdate),r=this._convertOrientationStateToProto(e.state);return ft(Ni,{state:r,progress:e.progress,lastRunTimestamp:e.lastRunTimestamp?BigInt(e.lastRunTimestamp):void 0,errorMessage:e.errorMessage})}catch(e){throw console.error("Error in getOrientationStatus:",e),e}}async getWorkspaceInfo(n){return ft(xi,{workspaces:[]})}async getWorkspaceLanguages(n){return ft(Mi,{languages:[]})}async getCodebaseSummary(n){return ft(Pi,{})}async saveCodebaseSummary(n){return Wr}async loadMemoriesFile(n){return ft(Oi,{})}async saveMemoriesFile(n){return Wr}_convertOrientationStateToProto(n){switch(n){case"idle":default:return sa.IDLE;case"inProgress":return sa.IN_PROGRESS;case"succeeded":return sa.SUCCESS;case"failed":return sa.FAILED;case"aborted":return sa.ABORTED}}async toolConfigGetDefinitions(n){try{return await this.inOutBroker.send({type:We.toolConfigGetDefinitions,data:{useCache:n.useCache}},We.toolConfigDefinitionsResponse)}catch(e){throw console.error("Error in toolConfigGetDefinitions:",e),e}}async signOut(n){try{return this.inOutBroker.notify({type:We.signOut}),Wr}catch(e){throw console.error("Failed to signOut:",e),e}}async listSecrets(n){try{const e=await this.inOutBroker.send({type:We.listSecretsRequest},We.listSecretsResponse),r=e.secrets.map(s=>ft(Ks,{name:s.name,tags:s.tags,createdAt:s.created_at,updatedAt:s.updated_at,description:s.description,version:s.version,valueSizeBytes:s.value_size_bytes}));return ft(Ui,{secrets:r,nextPageToken:e.next_page_token,totalCount:e.total_count})}catch(e){throw console.error("Error in listSecrets:",e),e}}async createSecret(n){try{const e=await this.inOutBroker.send({type:We.createSecretRequest,data:{name:n.name,value:n.value,tags:n.tags??{},description:n.description??""}},We.createSecretResponse);if(!e.success)throw new Error(e.error||"Failed to create secret");const r=ft(Ks,{name:n.name,tags:n.tags??{},createdAt:e.updatedAt??new Date().toISOString(),updatedAt:e.updatedAt??new Date().toISOString(),description:n.description??"",version:e.version??"1",valueSizeBytes:new TextEncoder().encode(n.value).length});return ft(Li,{secret:r})}catch(e){throw console.error("Error in createSecret:",e),e}}async updateSecret(n){try{const e=await this.inOutBroker.send({type:We.updateSecretRequest,data:{name:n.name,value:n.value,tags:n.tags??{},description:n.description,expectedVersion:n.expectedVersion}},We.updateSecretResponse);if(!e.success)throw new Error(e.error||"Failed to update secret");return ft(zi,{updatedAt:e.updatedAt??new Date().toISOString(),version:e.version??"1",valueSizeBytes:n.value?new TextEncoder().encode(n.value).length:void 0})}catch(e){throw console.error("Error in updateSecret:",e),e}}async deleteSecret(n){try{const e=await this.inOutBroker.send({type:We.deleteSecretRequest,data:{name:n.name}},We.deleteSecretResponse);if(!e.success)throw new Error(e.error||"Failed to delete secret");return ft(Fi,{deleted:!0})}catch(e){throw console.error("Error in deleteSecret:",e),e}}async toolConfigStartOAuth(n){try{const e=await this.inOutBroker.send({type:We.toolConfigStartOAuth,data:{authUrl:n.authUrl,toolName:n.toolName}},We.toolConfigStartOAuthResponse);return ft(Ys,{ok:e.ok})}catch(e){return console.error("Failed to start OAuth:",e),ft(Ys,{ok:!1})}}async toolConfigRevokeAccess(n){try{if(!n.toolId)throw new Error("toolId is required");const e=this._convertProtoToolIdentifierToInternal(n.toolId);return this.inOutBroker.notify({type:We.toolConfigRevokeAccess,data:{toolId:e}}),ft(Di,{hostTools:[]})}catch(e){throw console.error("Failed to revoke access:",e),e}}_convertProtoToolIdentifierToInternal(n){if(!_o(n.hostName))throw new Error(`Unknown host name: ${n.hostName}`);const e=n.toolId;if(e==null)throw new Error("toolId oneof is required");switch(e.case){case"remoteToolId":{const r=fn(e.value);if(r===void 0)throw new Error(`Unknown remote tool ID: ${e.value}`);return{hostName:ir.remoteToolHost,toolId:r}}case"localToolId":{const r=yn(e.value);if(r===void 0)throw new Error(`Unknown local tool type: ${e.value}`);return{hostName:ir.localToolHost,toolId:r}}case"sidecarToolId":{const r=_n(e.value);if(r===void 0)throw new Error(`Unknown sidecar tool type: ${e.value}`);return{hostName:ir.sidecarToolHost,toolId:r}}case"mcpToolId":return{hostName:ir.mcpHost,toolId:e.value};default:throw new Error(`Unknown toolId case: ${e.case}`)}}destroy(){this.inOutBroker.destroy()}}),async function(){Pt?.initialize&&await Pt.initialize(),Bn(hh,{target:document.getElementById("app")})}();
//# sourceMappingURL=settings-BMYDLTMD.js.map
